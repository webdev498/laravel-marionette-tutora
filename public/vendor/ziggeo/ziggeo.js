/*!
ziggeo-js-sdk - v0.0.16 - 2016-07-22
Copyright (c) Ziggeo
Closed Source Software License.
*/
"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(a){return 10>a?"0"+a:a}function this_value(){return this.valueOf()}function quote(a){return rx_escapable.lastIndex=0,rx_escapable.test(a)?'"'+a.replace(rx_escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(a,b){"use strict";"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.returnExports=b()}(this,function(){var a,b,c=Array,d=c.prototype,e=Object,f=e.prototype,g=Function,h=g.prototype,i=String,j=i.prototype,k=Number,l=k.prototype,m=d.slice,n=d.splice,o=d.push,p=d.unshift,q=d.concat,r=d.join,s=h.call,t=h.apply,u=Math.max,v=Math.min,w=f.toString,x="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,y=Function.prototype.toString,z=/^\s*class /,A=function(a){try{var b=y.call(a),c=b.replace(/\/\/.*\n/g,""),d=c.replace(/\/\*[.\s\S]*\*\//g,""),e=d.replace(/\n/gm," ").replace(/ {2}/g," ");return z.test(e)}catch(f){return!1}},B=function(a){try{return A(a)?!1:(y.call(a),!0)}catch(b){return!1}},C="[object Function]",D="[object GeneratorFunction]",a=function(a){if(!a)return!1;if("function"!=typeof a&&"object"!=typeof a)return!1;if(x)return B(a);if(A(a))return!1;var b=w.call(a);return b===C||b===D},E=RegExp.prototype.exec,F=function(a){try{return E.call(a),!0}catch(b){return!1}},G="[object RegExp]";b=function(a){return"object"!=typeof a?!1:x?F(a):w.call(a)===G};var H,I=String.prototype.valueOf,J=function(a){try{return I.call(a),!0}catch(b){return!1}},K="[object String]";H=function(a){return"string"==typeof a?!0:"object"!=typeof a?!1:x?J(a):w.call(a)===K};var L=e.defineProperty&&function(){try{var a={};e.defineProperty(a,"x",{enumerable:!1,value:a});for(var b in a)return!1;return a.x===a}catch(c){return!1}}(),M=function(a){var b;return b=L?function(a,b,c,d){!d&&b in a||e.defineProperty(a,b,{configurable:!0,enumerable:!1,writable:!0,value:c})}:function(a,b,c,d){!d&&b in a||(a[b]=c)},function(c,d,e){for(var f in d)a.call(d,f)&&b(c,f,d[f],e)}}(f.hasOwnProperty),N=function(a){var b=typeof a;return null===a||"object"!==b&&"function"!==b},O=k.isNaN||function(a){return a!==a},P={ToInteger:function(a){var b=+a;return O(b)?b=0:0!==b&&b!==1/0&&b!==-(1/0)&&(b=(b>0||-1)*Math.floor(Math.abs(b))),b},ToPrimitive:function(b){var c,d,e;if(N(b))return b;if(d=b.valueOf,a(d)&&(c=d.call(b),N(c)))return c;if(e=b.toString,a(e)&&(c=e.call(b),N(c)))return c;throw new TypeError},ToObject:function(a){if(null==a)throw new TypeError("can't convert "+a+" to object");return e(a)},ToUint32:function(a){return a>>>0}},Q=function(){};M(h,{bind:function(b){var c=this;if(!a(c))throw new TypeError("Function.prototype.bind called on incompatible "+c);for(var d,f=m.call(arguments,1),h=function(){if(this instanceof d){var a=t.call(c,this,q.call(f,m.call(arguments)));return e(a)===a?a:this}return t.call(c,b,q.call(f,m.call(arguments)))},i=u(0,c.length-f.length),j=[],k=0;i>k;k++)o.call(j,"$"+k);return d=g("binder","return function ("+r.call(j,",")+"){ return binder.apply(this, arguments); }")(h),c.prototype&&(Q.prototype=c.prototype,d.prototype=new Q,Q.prototype=null),d}});var R=s.bind(f.hasOwnProperty),S=s.bind(f.toString),T=s.bind(m),U=t.bind(m),V=s.bind(j.slice),W=s.bind(j.split),X=s.bind(j.indexOf),Y=s.bind(o),Z=s.bind(f.propertyIsEnumerable),$=s.bind(d.sort),_=c.isArray||function(a){return"[object Array]"===S(a)},aa=1!==[].unshift(0);M(d,{unshift:function(){return p.apply(this,arguments),this.length}},aa),M(c,{isArray:_});var ba=e("a"),ca="a"!==ba[0]||!(0 in ba),da=function(a){var b=!0,c=!0,d=!1;if(a)try{a.call("foo",function(a,c,d){"object"!=typeof d&&(b=!1)}),a.call([1],function(){"use strict";c="string"==typeof this},"x")}catch(e){d=!0}return!!a&&!d&&b&&c};M(d,{forEach:function(b){var c,d=P.ToObject(this),e=ca&&H(this)?W(this,""):d,f=-1,g=P.ToUint32(e.length);if(arguments.length>1&&(c=arguments[1]),!a(b))throw new TypeError("Array.prototype.forEach callback must be a function");for(;++f<g;)f in e&&("undefined"==typeof c?b(e[f],f,d):b.call(c,e[f],f,d))}},!da(d.forEach)),M(d,{map:function(b){var d,e=P.ToObject(this),f=ca&&H(this)?W(this,""):e,g=P.ToUint32(f.length),h=c(g);if(arguments.length>1&&(d=arguments[1]),!a(b))throw new TypeError("Array.prototype.map callback must be a function");for(var i=0;g>i;i++)i in f&&("undefined"==typeof d?h[i]=b(f[i],i,e):h[i]=b.call(d,f[i],i,e));return h}},!da(d.map)),M(d,{filter:function(b){var c,d,e=P.ToObject(this),f=ca&&H(this)?W(this,""):e,g=P.ToUint32(f.length),h=[];if(arguments.length>1&&(d=arguments[1]),!a(b))throw new TypeError("Array.prototype.filter callback must be a function");for(var i=0;g>i;i++)i in f&&(c=f[i],("undefined"==typeof d?b(c,i,e):b.call(d,c,i,e))&&Y(h,c));return h}},!da(d.filter)),M(d,{every:function(b){var c,d=P.ToObject(this),e=ca&&H(this)?W(this,""):d,f=P.ToUint32(e.length);if(arguments.length>1&&(c=arguments[1]),!a(b))throw new TypeError("Array.prototype.every callback must be a function");for(var g=0;f>g;g++)if(g in e&&!("undefined"==typeof c?b(e[g],g,d):b.call(c,e[g],g,d)))return!1;return!0}},!da(d.every)),M(d,{some:function(b){var c,d=P.ToObject(this),e=ca&&H(this)?W(this,""):d,f=P.ToUint32(e.length);if(arguments.length>1&&(c=arguments[1]),!a(b))throw new TypeError("Array.prototype.some callback must be a function");for(var g=0;f>g;g++)if(g in e&&("undefined"==typeof c?b(e[g],g,d):b.call(c,e[g],g,d)))return!0;return!1}},!da(d.some));var ea=!1;d.reduce&&(ea="object"==typeof d.reduce.call("es5",function(a,b,c,d){return d})),M(d,{reduce:function(b){var c=P.ToObject(this),d=ca&&H(this)?W(this,""):c,e=P.ToUint32(d.length);if(!a(b))throw new TypeError("Array.prototype.reduce callback must be a function");if(0===e&&1===arguments.length)throw new TypeError("reduce of empty array with no initial value");var f,g=0;if(arguments.length>=2)f=arguments[1];else for(;;){if(g in d){f=d[g++];break}if(++g>=e)throw new TypeError("reduce of empty array with no initial value")}for(;e>g;g++)g in d&&(f=b(f,d[g],g,c));return f}},!ea);var fa=!1;d.reduceRight&&(fa="object"==typeof d.reduceRight.call("es5",function(a,b,c,d){return d})),M(d,{reduceRight:function(b){var c=P.ToObject(this),d=ca&&H(this)?W(this,""):c,e=P.ToUint32(d.length);if(!a(b))throw new TypeError("Array.prototype.reduceRight callback must be a function");if(0===e&&1===arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var f,g=e-1;if(arguments.length>=2)f=arguments[1];else for(;;){if(g in d){f=d[g--];break}if(--g<0)throw new TypeError("reduceRight of empty array with no initial value")}if(0>g)return f;do g in d&&(f=b(f,d[g],g,c));while(g--);return f}},!fa);var ga=d.indexOf&&-1!==[0,1].indexOf(1,2);M(d,{indexOf:function(a){var b=ca&&H(this)?W(this,""):P.ToObject(this),c=P.ToUint32(b.length);if(0===c)return-1;var d=0;for(arguments.length>1&&(d=P.ToInteger(arguments[1])),d=d>=0?d:u(0,c+d);c>d;d++)if(d in b&&b[d]===a)return d;return-1}},ga);var ha=d.lastIndexOf&&-1!==[0,1].lastIndexOf(0,-3);M(d,{lastIndexOf:function(a){var b=ca&&H(this)?W(this,""):P.ToObject(this),c=P.ToUint32(b.length);if(0===c)return-1;var d=c-1;for(arguments.length>1&&(d=v(d,P.ToInteger(arguments[1]))),d=d>=0?d:c-Math.abs(d);d>=0;d--)if(d in b&&a===b[d])return d;return-1}},ha);var ia=function(){var a=[1,2],b=a.splice();return 2===a.length&&_(b)&&0===b.length}();M(d,{splice:function(a,b){return 0===arguments.length?[]:n.apply(this,arguments)}},!ia);var ja=function(){var a={};return d.splice.call(a,0,0,1),1===a.length}();M(d,{splice:function(a,b){if(0===arguments.length)return[];var c=arguments;return this.length=u(P.ToInteger(this.length),0),arguments.length>0&&"number"!=typeof b&&(c=T(arguments),c.length<2?Y(c,this.length-a):c[1]=P.ToInteger(b)),n.apply(this,c)}},!ja);var ka=function(){var a=new c(1e5);return a[8]="x",a.splice(1,1),7===a.indexOf("x")}(),la=function(){var a=256,b=[];return b[a]="a",b.splice(a+1,0,"b"),"a"===b[a]}();M(d,{splice:function(a,b){for(var c,d=P.ToObject(this),e=[],f=P.ToUint32(d.length),g=P.ToInteger(a),h=0>g?u(f+g,0):v(g,f),j=v(u(P.ToInteger(b),0),f-h),k=0;j>k;)c=i(h+k),R(d,c)&&(e[k]=d[c]),k+=1;var l,m=T(arguments,2),n=m.length;if(j>n){k=h;for(var o=f-j;o>k;)c=i(k+j),l=i(k+n),R(d,c)?d[l]=d[c]:delete d[l],k+=1;k=f;for(var p=f-j+n;k>p;)delete d[k-1],k-=1}else if(n>j)for(k=f-j;k>h;)c=i(k+j-1),l=i(k+n-1),R(d,c)?d[l]=d[c]:delete d[l],k-=1;k=h;for(var q=0;q<m.length;++q)d[k]=m[q],k+=1;return d.length=f-j+n,e}},!ka||!la);var ma,na=d.join;try{ma="1,2,3"!==Array.prototype.join.call("123",",")}catch(oa){ma=!0}ma&&M(d,{join:function(a){var b="undefined"==typeof a?",":a;return na.call(H(this)?W(this,""):this,b)}},ma);var pa="1,2"!==[1,2].join(void 0);pa&&M(d,{join:function(a){var b="undefined"==typeof a?",":a;return na.call(this,b)}},pa);var qa=function(a){for(var b=P.ToObject(this),c=P.ToUint32(b.length),d=0;d<arguments.length;)b[c+d]=arguments[d],d+=1;return b.length=c+d,c+d},ra=function(){var a={},b=Array.prototype.push.call(a,void 0);return 1!==b||1!==a.length||"undefined"!=typeof a[0]||!R(a,0)}();M(d,{push:function(a){return _(this)?o.apply(this,arguments):qa.apply(this,arguments)}},ra);var sa=function(){var a=[],b=a.push(void 0);return 1!==b||1!==a.length||"undefined"!=typeof a[0]||!R(a,0)}();M(d,{push:qa},sa),M(d,{slice:function(a,b){var c=H(this)?W(this,""):this;return U(c,arguments)}},ca);var ta=function(){try{return[1,2].sort(null),[1,2].sort({}),!0}catch(a){}return!1}(),ua=function(){try{return[1,2].sort(/a/),!1}catch(a){}return!0}(),va=function(){try{return[1,2].sort(void 0),!0}catch(a){}return!1}();M(d,{sort:function(b){if("undefined"==typeof b)return $(this);if(!a(b))throw new TypeError("Array.prototype.sort callback must be a function");return $(this,b)}},ta||!va||!ua);var wa=!Z({toString:null},"toString"),xa=Z(function(){},"prototype"),ya=!R("x","0"),za=function(a){var b=a.constructor;return b&&b.prototype===a},Aa={$window:!0,$console:!0,$parent:!0,$self:!0,$frame:!0,$frames:!0,$frameElement:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$external:!0},Ba=function(){if("undefined"==typeof window)return!1;for(var a in window)try{!Aa["$"+a]&&R(window,a)&&null!==window[a]&&"object"==typeof window[a]&&za(window[a])}catch(b){return!0}return!1}(),Ca=function(a){if("undefined"==typeof window||!Ba)return za(a);try{return za(a)}catch(b){return!1}},Da=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Ea=Da.length,Fa=function(a){return"[object Arguments]"===S(a)},Ga=function(b){return null!==b&&"object"==typeof b&&"number"==typeof b.length&&b.length>=0&&!_(b)&&a(b.callee)},Ha=Fa(arguments)?Fa:Ga;M(e,{keys:function(b){var c=a(b),d=Ha(b),e=null!==b&&"object"==typeof b,f=e&&H(b);if(!e&&!c&&!d)throw new TypeError("Object.keys called on a non-object");var g=[],h=xa&&c;if(f&&ya||d)for(var j=0;j<b.length;++j)Y(g,i(j));if(!d)for(var k in b)h&&"prototype"===k||!R(b,k)||Y(g,i(k));if(wa)for(var l=Ca(b),m=0;Ea>m;m++){var n=Da[m];l&&"constructor"===n||!R(b,n)||Y(g,n)}return g}});var Ia=e.keys&&function(){return 2===e.keys(arguments).length}(1,2),Ja=e.keys&&function(){var a=e.keys(arguments);return 1!==arguments.length||1!==a.length||1!==a[0]}(1),Ka=e.keys;M(e,{keys:function(a){return Ka(Ha(a)?T(a):a)}},!Ia||Ja);var La,Ma,Na=0!==new Date(-0xc782b5b342b24).getUTCMonth(),Oa=new Date(-0x55d318d56a724),Pa=new Date(14496624e5),Qa="Mon, 01 Jan -45875 11:59:59 GMT"!==Oa.toUTCString(),Ra=Oa.getTimezoneOffset();-720>Ra?(La="Tue Jan 02 -45875"!==Oa.toDateString(),Ma=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-\+]\d\d\d\d(?: |$)/.test(Pa.toString())):(La="Mon Jan 01 -45875"!==Oa.toDateString(),Ma=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-\+]\d\d\d\d(?: |$)/.test(Pa.toString()));var Sa=s.bind(Date.prototype.getFullYear),Ta=s.bind(Date.prototype.getMonth),Ua=s.bind(Date.prototype.getDate),Va=s.bind(Date.prototype.getUTCFullYear),Wa=s.bind(Date.prototype.getUTCMonth),Xa=s.bind(Date.prototype.getUTCDate),Ya=s.bind(Date.prototype.getUTCDay),Za=s.bind(Date.prototype.getUTCHours),$a=s.bind(Date.prototype.getUTCMinutes),_a=s.bind(Date.prototype.getUTCSeconds),ab=s.bind(Date.prototype.getUTCMilliseconds),bb=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],cb=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],db=function(a,b){return Ua(new Date(b,a,0))};M(Date.prototype,{getFullYear:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var a=Sa(this);return 0>a&&Ta(this)>11?a+1:a},getMonth:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var a=Sa(this),b=Ta(this);return 0>a&&b>11?0:b},getDate:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var a=Sa(this),b=Ta(this),c=Ua(this);if(0>a&&b>11){if(12===b)return c;var d=db(0,a+1);return d-c+1}return c},getUTCFullYear:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var a=Va(this);return 0>a&&Wa(this)>11?a+1:a},getUTCMonth:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var a=Va(this),b=Wa(this);return 0>a&&b>11?0:b},getUTCDate:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var a=Va(this),b=Wa(this),c=Xa(this);if(0>a&&b>11){if(12===b)return c;var d=db(0,a+1);return d-c+1}return c}},Na),M(Date.prototype,{toUTCString:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var a=Ya(this),b=Xa(this),c=Wa(this),d=Va(this),e=Za(this),f=$a(this),g=_a(this);return bb[a]+", "+(10>b?"0"+b:b)+" "+cb[c]+" "+d+" "+(10>e?"0"+e:e)+":"+(10>f?"0"+f:f)+":"+(10>g?"0"+g:g)+" GMT"}},Na||Qa),M(Date.prototype,{toDateString:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var a=this.getDay(),b=this.getDate(),c=this.getMonth(),d=this.getFullYear();return bb[a]+" "+cb[c]+" "+(10>b?"0"+b:b)+" "+d}},Na||La),(Na||Ma)&&(Date.prototype.toString=function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var a=this.getDay(),b=this.getDate(),c=this.getMonth(),d=this.getFullYear(),e=this.getHours(),f=this.getMinutes(),g=this.getSeconds(),h=this.getTimezoneOffset(),i=Math.floor(Math.abs(h)/60),j=Math.floor(Math.abs(h)%60);return bb[a]+" "+cb[c]+" "+(10>b?"0"+b:b)+" "+d+" "+(10>e?"0"+e:e)+":"+(10>f?"0"+f:f)+":"+(10>g?"0"+g:g)+" GMT"+(h>0?"-":"+")+(10>i?"0"+i:i)+(10>j?"0"+j:j)},L&&e.defineProperty(Date.prototype,"toString",{configurable:!0,enumerable:!1,writable:!0}));var eb=-621987552e5,fb="-000001",gb=Date.prototype.toISOString&&-1===new Date(eb).toISOString().indexOf(fb),hb=Date.prototype.toISOString&&"1969-12-31T23:59:59.999Z"!==new Date(-1).toISOString(),ib=s.bind(Date.prototype.getTime);M(Date.prototype,{toISOString:function(){if(!isFinite(this)||!isFinite(ib(this)))throw new RangeError("Date.prototype.toISOString called on non-finite value.");var a=Va(this),b=Wa(this);a+=Math.floor(b/12),b=(b%12+12)%12;var c=[b+1,Xa(this),Za(this),$a(this),_a(this)];a=(0>a?"-":a>9999?"+":"")+V("00000"+Math.abs(a),a>=0&&9999>=a?-4:-6);for(var d=0;d<c.length;++d)c[d]=V("00"+c[d],-2);return a+"-"+T(c,0,2).join("-")+"T"+T(c,2).join(":")+"."+V("000"+ab(this),-3)+"Z"}},gb||hb);var jb=function(){try{return Date.prototype.toJSON&&null===new Date(NaN).toJSON()&&-1!==new Date(eb).toJSON().indexOf(fb)&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(a){return!1}}();jb||(Date.prototype.toJSON=function(b){var c=e(this),d=P.ToPrimitive(c);if("number"==typeof d&&!isFinite(d))return null;var f=c.toISOString;if(!a(f))throw new TypeError("toISOString property is not callable");return f.call(c)});var kb=1e15===Date.parse("+033658-09-27T01:46:40.000Z"),lb=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z")),mb=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));if(mb||lb||!kb){var nb=Math.pow(2,31)-1,ob=O(new Date(1970,0,1,0,0,0,nb+1).getTime());Date=function(a){var b=function(c,d,e,f,g,h,j){var k,l=arguments.length;if(this instanceof a){var m=h,n=j;if(ob&&l>=7&&j>nb){var o=Math.floor(j/nb)*nb,p=Math.floor(o/1e3);m+=p,n-=1e3*p}k=1===l&&i(c)===c?new a(b.parse(c)):l>=7?new a(c,d,e,f,g,m,n):l>=6?new a(c,d,e,f,g,m):l>=5?new a(c,d,e,f,g):l>=4?new a(c,d,e,f):l>=3?new a(c,d,e):l>=2?new a(c,d):l>=1?new a(c instanceof a?+c:c):new a}else k=a.apply(this,arguments);return N(k)||M(k,{constructor:b},!0),k},c=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),d=[0,31,59,90,120,151,181,212,243,273,304,334,365],e=function(a,b){var c=b>1?1:0;return d[b]+Math.floor((a-1969+c)/4)-Math.floor((a-1901+c)/100)+Math.floor((a-1601+c)/400)+365*(a-1970)},f=function(b){var c=0,d=b;if(ob&&d>nb){var e=Math.floor(d/nb)*nb,f=Math.floor(e/1e3);c+=f,d-=1e3*f}return k(new a(1970,0,1,0,0,c,d))};for(var g in a)R(a,g)&&(b[g]=a[g]);M(b,{now:a.now,UTC:a.UTC},!0),b.prototype=a.prototype,M(b.prototype,{constructor:b},!0);var h=function(b){var d=c.exec(b);if(d){var g,h=k(d[1]),i=k(d[2]||1)-1,j=k(d[3]||1)-1,l=k(d[4]||0),m=k(d[5]||0),n=k(d[6]||0),o=Math.floor(1e3*k(d[7]||0)),p=Boolean(d[4]&&!d[8]),q="-"===d[9]?1:-1,r=k(d[10]||0),s=k(d[11]||0),t=m>0||n>0||o>0;return(t?24:25)>l&&60>m&&60>n&&1e3>o&&i>-1&&12>i&&24>r&&60>s&&j>-1&&j<e(h,i+1)-e(h,i)&&(g=60*(24*(e(h,i)+j)+l+r*q),g=1e3*(60*(g+m+s*q)+n)+o,p&&(g=f(g)),g>=-864e13&&864e13>=g)?g:NaN}return a.parse.apply(this,arguments)};return M(b,{parse:h}),b}(Date)}Date.now||(Date.now=function(){return(new Date).getTime()});var pb=l.toFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==0xde0b6b3a7640080.toFixed(0)),qb={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function(a,b){for(var c=-1,d=b;++c<qb.size;)d+=a*qb.data[c],qb.data[c]=d%qb.base,d=Math.floor(d/qb.base)},divide:function(a){for(var b=qb.size,c=0;--b>=0;)c+=qb.data[b],qb.data[b]=Math.floor(c/a),c=c%a*qb.base},numToString:function(){for(var a=qb.size,b="";--a>=0;)if(""!==b||0===a||0!==qb.data[a]){var c=i(qb.data[a]);""===b?b=c:b+=V("0000000",0,7-c.length)+c}return b},pow:function Kb(a,b,c){return 0===b?c:b%2===1?Kb(a,b-1,c*a):Kb(a*a,b/2,c)},log:function(a){for(var b=0,c=a;c>=4096;)b+=12,c/=4096;for(;c>=2;)b+=1,c/=2;return b}},rb=function(a){var b,c,d,e,f,g,h,j;if(b=k(a),b=O(b)?0:Math.floor(b),0>b||b>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(c=k(this),O(c))return"NaN";if(-1e21>=c||c>=1e21)return i(c);if(d="",0>c&&(d="-",c=-c),e="0",c>1e-21)if(f=qb.log(c*qb.pow(2,69,1))-69,g=0>f?c*qb.pow(2,-f,1):c/qb.pow(2,f,1),g*=4503599627370496,f=52-f,f>0){for(qb.multiply(0,g),h=b;h>=7;)qb.multiply(1e7,0),h-=7;for(qb.multiply(qb.pow(10,h,1),0),h=f-1;h>=23;)qb.divide(1<<23),h-=23;qb.divide(1<<h),qb.multiply(1,1),qb.divide(2),e=qb.numToString()}else qb.multiply(0,g),qb.multiply(1<<-f,0),e=qb.numToString()+V("0.00000000000000000000",2,2+b);return b>0?(j=e.length,e=b>=j?d+V("0.0000000000000000000",0,b-j+2)+e:d+V(e,0,j-b)+"."+V(e,j-b)):e=d+e,e};M(l,{toFixed:rb},pb);var sb=function(){try{return"1"===1..toPrecision(void 0)}catch(a){return!0}}(),tb=l.toPrecision;M(l,{toPrecision:function(a){return"undefined"==typeof a?tb.call(this):tb.call(this,a)}},sb),2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?!function(){var a="undefined"==typeof/()??/.exec("")[1],c=Math.pow(2,32)-1;j.split=function(d,e){var f=String(this);if("undefined"==typeof d&&0===e)return[];if(!b(d))return W(this,d,e);var g,h,i,j,k=[],l=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(d.sticky?"y":""),m=0,n=new RegExp(d.source,l+"g");a||(g=new RegExp("^"+n.source+"$(?!\\s)",l));var p="undefined"==typeof e?c:P.ToUint32(e);for(h=n.exec(f);h&&(i=h.index+h[0].length,!(i>m&&(Y(k,V(f,m,h.index)),!a&&h.length>1&&h[0].replace(g,function(){for(var a=1;a<arguments.length-2;a++)"undefined"==typeof arguments[a]&&(h[a]=void 0)}),h.length>1&&h.index<f.length&&o.apply(k,T(h,1)),j=h[0].length,m=i,k.length>=p)));)n.lastIndex===h.index&&n.lastIndex++,h=n.exec(f);return m===f.length?!j&&n.test("")||Y(k,""):Y(k,V(f,m)),k.length>p?T(k,0,p):k}}():"0".split(void 0,0).length&&(j.split=function(a,b){return"undefined"==typeof a&&0===b?[]:W(this,a,b)});var ub=j.replace,vb=function(){var a=[];return"x".replace(/x(.)?/g,function(b,c){Y(a,c)}),1===a.length&&"undefined"==typeof a[0]}();vb||(j.replace=function(c,d){var e=a(d),f=b(c)&&/\)[*?]/.test(c.source);if(e&&f){var g=function(a){var b=arguments.length,e=c.lastIndex;c.lastIndex=0;var f=c.exec(a)||[];return c.lastIndex=e,Y(f,arguments[b-2],arguments[b-1]),d.apply(this,f)};return ub.call(this,c,g)}return ub.call(this,c,d)});var wb=j.substr,xb="".substr&&"b"!=="0b".substr(-1);M(j,{substr:function(a,b){var c=a;return 0>a&&(c=u(this.length+a,0)),wb.call(this,c,b)}},xb);var yb="	\n\x0B\f\r   ᠎             　\u2028\u2029\ufeff",zb="​",Ab="["+yb+"]",Bb=new RegExp("^"+Ab+Ab+"*"),Cb=new RegExp(Ab+Ab+"*$"),Db=j.trim&&(yb.trim()||!zb.trim());M(j,{trim:function(){if("undefined"==typeof this||null===this)throw new TypeError("can't convert "+this+" to object");return i(this).replace(Bb,"").replace(Cb,"")}},Db);var Eb=s.bind(String.prototype.trim),Fb=j.lastIndexOf&&-1!=="abcあい".lastIndexOf("あい",2);M(j,{lastIndexOf:function(a){if("undefined"==typeof this||null===this)throw new TypeError("can't convert "+this+" to object");for(var b=i(this),c=i(a),d=arguments.length>1?k(arguments[1]):NaN,e=O(d)?1/0:P.ToInteger(d),f=v(u(e,0),b.length),g=c.length,h=f+g;h>0;){h=u(0,h-g);var j=X(V(b,h,f+g),c);if(-1!==j)return h+j}return-1}},Fb);var Gb=j.lastIndexOf;if(M(j,{lastIndexOf:function(a){return Gb.apply(this,arguments)}},1!==j.lastIndexOf.length),8===parseInt(yb+"08")&&22===parseInt(yb+"0x16")||(parseInt=function(a){var b=/^[\-+]?0[xX]/;return function(c,d){var e=Eb(c),f=k(d)||(b.test(e)?16:10);return a(e,f)}}(parseInt)),1/parseFloat("-0")!==-(1/0)&&(parseFloat=function(a){return function(b){var c=Eb(b),d=a(c);return 0===d&&"-"===V(c,0,1)?-0:d}}(parseFloat)),"RangeError: test"!==String(new RangeError("test"))){var Hb=function(){if("undefined"==typeof this||null===this)throw new TypeError("can't convert "+this+" to object");var a=this.name;"undefined"==typeof a?a="Error":"string"!=typeof a&&(a=i(a));var b=this.message;return"undefined"==typeof b?b="":"string"!=typeof b&&(b=i(b)),a?b?a+": "+b:a:b};Error.prototype.toString=Hb}if(L){var Ib=function(a,b){if(Z(a,b)){var c=Object.getOwnPropertyDescriptor(a,b);c.configurable&&(c.enumerable=!1,Object.defineProperty(a,b,c))}};Ib(Error.prototype,"message"),""!==Error.prototype.message&&(Error.prototype.message=""),Ib(Error.prototype,"name")}if("/a/gim"!==String(/a/gim)){var Jb=function(){var a="/"+this.source+"/";return this.global&&(a+="g"),this.ignoreCase&&(a+="i"),this.multiline&&(a+="m"),a};RegExp.prototype.toString=Jb}}),function(){var a=null;try{"Scoped"in window&&(a=window.Scoped.detach(!0))}catch(b){}var c=function(){function a(a){function b(a){return{route:"string"==typeof a.route?a.route:null,parent:"object"==typeof a.parent?a.parent:null,ready:"boolean"==typeof a.ready?a.ready:!1,children:{},watchers:[],data:{},lazy:[]}}function c(a){if(!a.ready){if(a.parent&&!a.parent.ready)return void c(a.parent);if(a.route&&a.parent&&a.route in a.parent.data){a.data=a.parent.data[a.route],a.ready=!0;for(var b=0;b<a.watchers.length;++b)a.watchers[b].callback.call(a.watchers[b].context||this,a.data);a.watchers=[];for(var d in a.children)c(a.children[d])}}}function d(a){if(!a.ready){a.parent&&!a.parent.ready&&d(a.parent),a.ready=!0,a.parent&&j.tree&&"object"==typeof a.parent.data&&(a.parent.data[a.route]=a.data);for(var b=0;b<a.watchers.length;++b)a.watchers[b].callback.call(a.watchers[b].context||this,a.data);a.watchers=[]}}function e(a,b){if("object"==typeof b&&a.ready)for(var e in b)a.data[e]=b[e];else a.data=b;if("object"==typeof b)for(var f in b)a.children[f]&&(a.children[f].data=b[f]);d(a);for(var g in a.children)c(a.children[g])}function f(a){if(a.ready&&a.data)for(var b in a.data)delete a.data[b]}function g(a){if(!a)return k;for(var d=a.split("."),e=k,f=0;f<d.length;++f)d[f]in e.children?e=e.children[d[f]]:(e.children[d[f]]=b({parent:e,route:d[f]}),e=e.children[d[f]],c(e));return e}function h(a,b,c){if(a.ready)b.call(c||this,a.data);else if(a.watchers.push({callback:b,context:c}),a.lazy.length>0){var d=function(a){if(a.lazy.length>0){var b=a.lazy.shift();b.callback.call(b.context||this,a.data),d(a)}};d(a)}}function i(a,b,c){a=a||k,c=c||[],a.ready||c.push(b);for(var d in a.children){var e=a.children[d],f=(b?b+".":"")+e.route;c=i(e,f,c)}return c}var j={tree:"boolean"==typeof a.tree?a.tree:!1,global:"boolean"==typeof a.global?a.global:!1,root:"object"==typeof a.root?a.root:{}},k=b({ready:!0});if(j.tree)if(j.global){try{window&&(k.data=window)}catch(l){}try{global&&(k.data=global)}catch(l){}}else k.data=j.root;return{extend:function(a,b){e(g(a),b)},set:function(a,b){var c=g(a);c.data&&f(c),e(c,b)},get:function(a){var b=g(a);return b.ready?b.data:null},lazy:function(a,b,c){var d=g(a);d.ready?b(c||this,d.data):d.lazy.push({callback:b,context:c})},digest:function(a){c(g(a))},obtain:function(a,b,c){h(g(a),b,c)},unresolvedWatchers:function(a){return i(g(a),a)},__export:function(){return{options:j,nsRoot:k}},__import:function(a){j=a.options,k=a.nsRoot}}}function b(e,f,g,h){var i=null,j=[],k=f,l=g,m=h,n=a({tree:!0}),o=a({tree:!1}),p={global:{namespace:m},root:{namespace:l},local:{namespace:n},"default":{namespace:o},parent:{namespace:k},scope:{namespace:n,readonly:!1}},q=function(a,b,c){var e=d.matchArgs(a,{options:"object",namespaceLocator:!0,dependencies:"array",hiddenDependencies:"array",callback:!0,context:"object"}),f=d.extend({lazy:this.options.lazy},e.options||{}),g=this.resolve(e.namespaceLocator),h=function(){this.require(e.dependencies,e.hiddenDependencies,function(){if(arguments[arguments.length-1].ns=g,this.options.compile){for(var f=[],h=0;h<a.length;++h)f.push(d.stringify(a[h]));this.compiled+=this.options.ident+"."+b+"("+f.join(", ")+");\n\n"}this.options.dependencies&&(this.dependencies[g.path]=this.dependencies[g.path]||{},e.dependencies&&e.dependencies.forEach(function(a){this.dependencies[g.path][this.resolve(a).path]=!0},this),e.hiddenDependencies&&e.hiddenDependencies.forEach(function(a){this.dependencies[g.path][this.resolve(a).path]=!0},this));var i=this.options.compile?{}:e.callback.apply(e.context||this,arguments);c.call(this,g,i)},this)};return f.lazy?g.namespace.lazy(g.path,h,this):h.apply(this),this};return{getGlobal:d.method(c,c.getPath),setGlobal:d.method(c,c.setPath),options:{lazy:!1,ident:"Scoped",compile:!1,dependencies:!1},compiled:"",dependencies:{},nextScope:function(){return i||(i=b(this,n,l,m)),i},subScope:function(){var a=this.nextScope();return j.push(a),i=null,a},binding:function(b,c,e){if(!p[b]||!p[b].readonly){var f;f="string"!=d.typeOf(c)?{namespace:a({tree:!0,root:c}),path:null}:this.resolve(c),p[b]=d.extend(e,f)}return this},resolve:function(a){var b=a.split(":");if(1==b.length)return{namespace:o,path:b[0]};var c=p[b[0]];if(!c)throw"The namespace '"+b[0]+"' has not been defined (yet).";return{namespace:c.namespace,path:c.path&&b[1]?c.path+"."+b[1]:c.path||b[1]}},define:function(){return q.call(this,arguments,"define",function(a,b){if(a.namespace.get(a.path))throw"Scoped namespace "+a.path+" has already been defined. Use extend to extend an existing namespace instead";a.namespace.set(a.path,b)})},assumeVersion:function(){var a=d.matchArgs(arguments,{assumption:!0,dependencies:"array",callback:!0,context:"object",error:"string"}),b=a.dependencies||[];b.unshift(a.assumption),this.require(b,function(){var b=arguments,c=b[0];b[0]=c.split(".");for(var e=0;e<b[0].length;++e)b[0][e]=parseInt(b[0][e],10);if("function"===d.typeOf(a.callback)){if(!a.callback.apply(a.context||this,a))throw"Scoped Assumption '"+a.assumption+"' failed, value is "+c+(a.error?", but assuming "+a.error:"")}else for(var f=(a.callback+"").split("."),g=0;g<Math.min(b[0].length,f.length);++g)if(parseInt(f[g],10)>b[0][g])throw"Scoped Version Assumption '"+a.assumption+"' failed, value is "+c+", but assuming at least "+a.callback})},extend:function(){return q.call(this,arguments,"extend",function(a,b){a.namespace.extend(a.path,b)})},require:function(){var a=d.matchArgs(arguments,{dependencies:"array",hiddenDependencies:"array",callback:"function",context:"object"});a.callback=a.callback||function(){};var b=a.dependencies||[],c=b.concat(a.hiddenDependencies||[]),e=c.length,f=[],g={};if(e)for(var h=function(b){this.i<f.length&&(f[this.i]=b),e--,0===e&&(f.push(g),a.callback.apply(a.context||this.ctx,f))},i=0;i<c.length;++i){var j=this.resolve(c[i]);i<b.length&&f.push(null),j.namespace.obtain(j.path,h,{ctx:this,i:i})}else f.push(g),a.callback.apply(a.context||this,f);return this},digest:function(a){var b=this.resolve(a);return b.namespace.digest(b.path),this},unresolved:function(a){var b=this.resolve(a);return b.namespace.unresolvedWatchers(b.path)},__export:function(){return{parentNamespace:k.__export(),rootNamespace:l.__export(),
globalNamespace:m.__export(),localNamespace:n.__export(),privateNamespace:o.__export()}},__import:function(a){k.__import(a.parentNamespace),l.__import(a.rootNamespace),m.__import(a.globalNamespace),n.__import(a.localNamespace),o.__import(a.privateNamespace)}}}var c=function(){return{get:function(a){return"undefined"!=typeof window?window[a]:"undefined"!=typeof global?global[a]:void 0},set:function(a,b){return"undefined"!=typeof window&&(window[a]=b),"undefined"!=typeof global&&(global[a]=b),b},getPath:function(a){var b=a.split(".");if(1==b.length)return this.get(a);for(var c=this.get(b[0]),d=1;d<b.length;++d){if(!c)return c;c=c[b[d]]}return c},setPath:function(a,b){var c=a.split(".");if(1==c.length)return this.set(a,b);for(var d=this.get(c[0])||this.set(c[0],{}),e=1;e<c.length-1;++e)c[e]in d||(d[c[e]]={}),d=d[c[e]];return d[c[c.length-1]]=b,b}}}.call(this),d=function(){return{method:function(a,b){return function(){return b.apply(a,arguments)}},extend:function(a,b){a=a||{},b=b||{};for(var c in b)a[c]=b[c];return a},typeOf:function(a){return"[object Array]"===Object.prototype.toString.call(a)?"array":typeof a},isEmpty:function(a){if(null===a||"undefined"==typeof a)return!0;if("array"==this.typeOf(a))return 0===a.length;if("object"!=typeof a)return!1;for(var b in a)return!1;return!0},matchArgs:function(a,b){var c=0,d={};for(var e in b)b[e]===!0||this.typeOf(a[c])==b[e]?(d[e]=a[c],c++):"undefined"==this.typeOf(a[c])&&c++;return d},stringify:function(a){return"function"==this.typeOf(a)?""+a:JSON.stringify(a)}}}.call(this),e=function(){return{__namespace:"Scoped",__revert:null,upgrade:function(a){var b=c.get(a||e.__namespace);if(b&&"object"==d.typeOf(b)&&b.guid==this.guid&&"string"==d.typeOf(b.version)){for(var f=this.version.split("."),g=b.version.split("."),h=!1,i=0;i<Math.min(f.length,g.length)&&(h=parseInt(f[i],10)>parseInt(g[i],10),f[i]==g[i]);++i);return h?this.attach(a):b}return this.attach(a)},attach:function(a){a&&(e.__namespace=a);var b=c.get(e.__namespace);if(b==this)return this;if(e.__revert=b,b)try{var d=b.__exportScoped();this.__exportBackup=this.__exportScoped(),this.__importScoped(d)}catch(f){}return c.set(e.__namespace,this),this},detach:function(a){return a&&c.set(e.__namespace,null),"undefined"!=typeof e.__revert&&c.set(e.__namespace,e.__revert),delete e.__revert,e.__exportBackup&&this.__importScoped(e.__exportBackup),this},exports:function(a,b,c){return a=a||("undefined"!=typeof module?module:null),"object"==typeof a&&a&&"exports"in a&&(c||a.exports==this||!a.exports||d.isEmpty(a.exports))&&(a.exports=b||this),this}}}.call(this),f=a({tree:!0,global:!0}),g=a({tree:!0}),h=b(null,g,g,f),i=d.extend(h,function(){return{guid:"4b6878ee-cb6a-46b3-94ac-27d91f58d666",version:"48.1467144390733",upgrade:e.upgrade,attach:e.attach,detach:e.detach,exports:e.exports,__exportScoped:function(){return{globalNamespace:f.__export(),rootNamespace:g.__export(),rootScope:h.__export()}},__importScoped:function(a){f.__import(a.globalNamespace),g.__import(a.rootNamespace),h.__import(a.rootScope)}}}.call(this));return i=i.upgrade(),i.exports(),i}.call(this);!function(a,b){function c(a){var b=a.length,c=ia.type(a);return ia.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||"function"!==c&&(0===b||"number"==typeof b&&b>0&&b-1 in a)}function d(a){var b=xa[a]={};return ia.each(a.match(ka)||[],function(a,c){b[c]=!0}),b}function e(a,c,d,e){if(ia.acceptData(a)){var f,g,h=ia.expando,i="string"==typeof c,j=a.nodeType,k=j?ia.cache:a,l=j?a[h]:a[h]&&h;if(l&&k[l]&&(e||k[l].data)||!i||d!==b)return l||(j?a[h]=l=_.pop()||ia.guid++:l=h),k[l]||(k[l]={},j||(k[l].toJSON=ia.noop)),"object"!=typeof c&&"function"!=typeof c||(e?k[l]=ia.extend(k[l],c):k[l].data=ia.extend(k[l].data,c)),f=k[l],e||(f.data||(f.data={}),f=f.data),d!==b&&(f[ia.camelCase(c)]=d),i?(g=f[c],null==g&&(g=f[ia.camelCase(c)])):g=f,g}}function f(a,b,c){if(ia.acceptData(a)){var d,e,f,g=a.nodeType,i=g?ia.cache:a,j=g?a[ia.expando]:ia.expando;if(i[j]){if(b&&(f=c?i[j]:i[j].data)){ia.isArray(b)?b=b.concat(ia.map(b,ia.camelCase)):b in f?b=[b]:(b=ia.camelCase(b),b=b in f?[b]:b.split(" "));for(d=0,e=b.length;e>d;d++)delete f[b[d]];if(!(c?h:ia.isEmptyObject)(f))return}(c||(delete i[j].data,h(i[j])))&&(g?ia.cleanData([a],!0):ia.support.deleteExpando||i!=i.window?delete i[j]:i[j]=null)}}}function g(a,c,d){if(d===b&&1===a.nodeType){var e="data-"+c.replace(za,"-$1").toLowerCase();if(d=a.getAttribute(e),"string"==typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:ya.test(d)?ia.parseJSON(d):d}catch(f){}ia.data(a,c,d)}else d=b}return d}function h(a){var b;for(b in a)if(("data"!==b||!ia.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function i(){return!0}function j(){return!1}function k(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function l(a,b,c){if(b=b||0,ia.isFunction(b))return ia.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return ia.grep(a,function(a){return a===b===c});if("string"==typeof b){var d=ia.grep(a,function(a){return 1===a.nodeType});if(Ra.test(b))return ia.filter(b,d,!c);b=ia.filter(b,d)}return ia.grep(a,function(a){return ia.inArray(a,b)>=0===c})}function m(a){var b=Ua.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function n(a,b){return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b))}function o(a){var b=a.getAttributeNode("type");return a.type=(b&&b.specified)+"/"+a.type,a}function p(a){var b=eb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function q(a,b){for(var c,d=0;null!=(c=a[d]);d++)ia._data(c,"globalEval",!b||ia._data(b[d],"globalEval"))}function r(a,b){if(1===b.nodeType&&ia.hasData(a)){var c,d,e,f=ia._data(a),g=ia._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)ia.event.add(b,c,h[c][d])}g.data&&(g.data=ia.extend({},g.data))}}function s(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!ia.support.noCloneEvent&&b[ia.expando]){e=ia._data(b);for(d in e.events)ia.removeEvent(b,d,e.handle);b.removeAttribute(ia.expando)}"script"===c&&b.text!==a.text?(o(b).text=a.text,p(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),ia.support.html5Clone&&a.innerHTML&&!ia.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&bb.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:"input"!==c&&"textarea"!==c||(b.defaultValue=a.defaultValue)}}function t(a,c){var d,e,f=0,g=typeof a.getElementsByTagName!==V?a.getElementsByTagName(c||"*"):typeof a.querySelectorAll!==V?a.querySelectorAll(c||"*"):b;if(!g)for(g=[],d=a.childNodes||a;null!=(e=d[f]);f++)!c||ia.nodeName(e,c)?g.push(e):ia.merge(g,t(e,c));return c===b||c&&ia.nodeName(a,c)?ia.merge([a],g):g}function u(a){bb.test(a.type)&&(a.defaultChecked=a.checked)}function v(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=yb.length;e--;)if(b=yb[e]+c,b in a)return b;return d}function w(a,b){return a=b||a,"none"===ia.css(a,"display")||!ia.contains(a.ownerDocument,a)}function x(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=ia._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&w(d)&&(f[g]=ia._data(d,"olddisplay",B(d.nodeName)))):f[g]||(e=w(d),(c&&"none"!==c||!e)&&ia._data(d,"olddisplay",e?c:ia.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function y(a,b,c){var d=rb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function z(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=ia.css(a,c+xb[f],!0,e)),d?("content"===c&&(g-=ia.css(a,"padding"+xb[f],!0,e)),"margin"!==c&&(g-=ia.css(a,"border"+xb[f]+"Width",!0,e))):(g+=ia.css(a,"padding"+xb[f],!0,e),"padding"!==c&&(g+=ia.css(a,"border"+xb[f]+"Width",!0,e)));return g}function A(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=kb(a),g=ia.support.boxSizing&&"border-box"===ia.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=lb(a,b,f),(0>e||null==e)&&(e=a.style[b]),sb.test(e))return e;d=g&&(ia.support.boxSizingReliable||e===a.style[b]),e=parseFloat(e)||0}return e+z(a,b,c||(g?"border":"content"),d,f)+"px"}function B(a){var b=W,c=ub[a];return c||(c=C(a,b),"none"!==c&&c||(jb=(jb||ia("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(b.documentElement),b=(jb[0].contentWindow||jb[0].contentDocument).document,b.write("<!doctype html><html><body>"),b.close(),c=C(a,b),jb.detach()),ub[a]=c),c}function C(a,b){var c=ia(b.createElement(a)).appendTo(b.body),d=ia.css(c[0],"display");return c.remove(),d}function D(a,b,c,d){var e;if(ia.isArray(b))ia.each(b,function(b,e){c||Ab.test(a)?d(a,e):D(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==ia.type(b))d(a,b);else for(e in b)D(a+"["+e+"]",b[e],c,d)}function E(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(ka)||[];if(ia.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function F(a,b,c,d){function e(h){var i;return f[h]=!0,ia.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===Rb;return e(b.dataTypes[0])||!f["*"]&&e("*")}function G(a,c){var d,e,f=ia.ajaxSettings.flatOptions||{};for(e in c)c[e]!==b&&((f[e]?a:d||(d={}))[e]=c[e]);return d&&ia.extend(!0,a,d),a}function H(a,c,d){var e,f,g,h,i=a.contents,j=a.dataTypes,k=a.responseFields;for(h in k)h in d&&(c[k[h]]=d[h]);for(;"*"===j[0];)j.shift(),f===b&&(f=a.mimeType||c.getResponseHeader("Content-Type"));if(f)for(h in i)if(i[h]&&i[h].test(f)){j.unshift(h);break}if(j[0]in d)g=j[0];else{for(h in d){if(!j[0]||a.converters[h+" "+j[0]]){g=h;break}e||(e=h)}g=g||e}return g?(g!==j[0]&&j.unshift(g),d[g]):void 0}function I(a,b){var c,d,e,f,g={},h=0,i=a.dataTypes.slice(),j=i[0];if(a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i[1])for(e in a.converters)g[e.toLowerCase()]=a.converters[e];for(;d=i[++h];)if("*"!==d){if("*"!==j&&j!==d){if(e=g[j+" "+d]||g["* "+d],!e)for(c in g)if(f=c.split(" "),f[1]===d&&(e=g[j+" "+f[0]]||g["* "+f[0]])){e===!0?e=g[c]:g[c]!==!0&&(d=f[0],i.splice(h--,0,d));break}if(e!==!0)if(e&&a["throws"])b=e(b);else try{b=e(b)}catch(k){return{state:"parsererror",error:e?k:"No conversion from "+j+" to "+d}}}j=d}return{state:"success",data:b}}function J(){try{return new a.XMLHttpRequest}catch(b){}}function K(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function L(){return setTimeout(function(){$b=b}),$b=ia.now()}function M(a,b){ia.each(b,function(b,c){for(var d=(ec[b]||[]).concat(ec["*"]),e=0,f=d.length;f>e;e++)if(d[e].call(a,b,c))return})}function N(a,b,c){var d,e,f=0,g=dc.length,h=ia.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=$b||L(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:ia.extend({},b),opts:ia.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:$b||L(),duration:c.duration,tweens:[],createTween:function(b,c){var d=ia.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(O(k,j.opts.specialEasing);g>f;f++)if(d=dc[f].call(j,a,k,j.opts))return d;return M(j,k),ia.isFunction(j.opts.start)&&j.opts.start.call(a,j),ia.fx.timer(ia.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function O(a,b){var c,d,e,f,g;for(e in a)if(d=ia.camelCase(e),f=b[d],c=a[e],ia.isArray(c)&&(f=c[1],c=a[e]=c[0]),e!==d&&(a[d]=c,delete a[e]),g=ia.cssHooks[d],g&&"expand"in g){c=g.expand(c),delete a[d];for(e in c)e in a||(a[e]=c[e],b[e]=f)}else b[d]=f}function P(a,b,c){var d,e,f,g,h,i,j,k,l,m=this,n=a.style,o={},p=[],q=a.nodeType&&w(a);c.queue||(k=ia._queueHooks(a,"fx"),null==k.unqueued&&(k.unqueued=0,l=k.empty.fire,k.empty.fire=function(){k.unqueued||l()}),k.unqueued++,m.always(function(){m.always(function(){k.unqueued--,ia.queue(a,"fx").length||k.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],"inline"===ia.css(a,"display")&&"none"===ia.css(a,"float")&&(ia.support.inlineBlockNeedsLayout&&"inline"!==B(a.nodeName)?n.zoom=1:n.display="inline-block")),c.overflow&&(n.overflow="hidden",ia.support.shrinkWrapBlocks||m.always(function(){n.overflow=c.overflow[0],n.overflowX=c.overflow[1],n.overflowY=c.overflow[2]}));for(e in b)if(g=b[e],ac.exec(g)){if(delete b[e],i=i||"toggle"===g,g===(q?"hide":"show"))continue;p.push(e)}if(f=p.length){h=ia._data(a,"fxshow")||ia._data(a,"fxshow",{}),"hidden"in h&&(q=h.hidden),i&&(h.hidden=!q),q?ia(a).show():m.done(function(){ia(a).hide()}),m.done(function(){var b;ia._removeData(a,"fxshow");for(b in o)ia.style(a,b,o[b])});for(e=0;f>e;e++)d=p[e],j=m.createTween(d,q?h[d]:0),o[d]=h[d]||ia.style(a,d),d in h||(h[d]=j.start,q&&(j.end=j.start,j.start="width"===d||"height"===d?1:0))}}function Q(a,b,c,d,e){return new Q.prototype.init(a,b,c,d,e)}function R(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=xb[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function S(a){return ia.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var T,U,V=typeof b,W=a.document,X=a.location,Y=a.jQuery,Z=a.$,$={},_=[],aa="1.9.1",ba=_.concat,ca=_.push,da=_.slice,ea=_.indexOf,fa=$.toString,ga=$.hasOwnProperty,ha=aa.trim,ia=function(a,b){return new ia.fn.init(a,b,U)},ja=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ka=/\S+/g,la=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ma=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,na=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,oa=/^[\],:{}\s]*$/,pa=/(?:^|:|,)(?:\s*\[)+/g,qa=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ra=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,sa=/^-ms-/,ta=/-([\da-z])/gi,ua=function(a,b){return b.toUpperCase()},va=function(a){(W.addEventListener||"load"===a.type||"complete"===W.readyState)&&(wa(),ia.ready())},wa=function(){W.addEventListener?(W.removeEventListener("DOMContentLoaded",va,!1),a.removeEventListener("load",va,!1)):(W.detachEvent("onreadystatechange",va),a.detachEvent("onload",va))};ia.fn=ia.prototype={jquery:aa,constructor:ia,init:function(a,c,d){var e,f;if(!a)return this;if("string"==typeof a){if(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:ma.exec(a),!e||!e[1]&&c)return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a);if(e[1]){if(c=c instanceof ia?c[0]:c,ia.merge(this,ia.parseHTML(e[1],c&&c.nodeType?c.ownerDocument||c:W,!0)),na.test(e[1])&&ia.isPlainObject(c))for(e in c)ia.isFunction(this[e])?this[e](c[e]):this.attr(e,c[e]);return this}if(f=W.getElementById(e[2]),f&&f.parentNode){if(f.id!==e[2])return d.find(a);this.length=1,this[0]=f}return this.context=W,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):ia.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),ia.makeArray(a,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return da.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a){var b=ia.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return ia.each(this,a,b)},ready:function(a){return ia.ready.promise().done(a),this},slice:function(){return this.pushStack(da.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},map:function(a){return this.pushStack(ia.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:ca,sort:[].sort,splice:[].splice},ia.fn.init.prototype=ia.fn,ia.extend=ia.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[1]||{},i=2),"object"==typeof h||ia.isFunction(h)||(h={}),j===i&&(h=this,--i);j>i;i++)if(null!=(f=arguments[i]))for(e in f)a=h[e],d=f[e],h!==d&&(k&&d&&(ia.isPlainObject(d)||(c=ia.isArray(d)))?(c?(c=!1,g=a&&ia.isArray(a)?a:[]):g=a&&ia.isPlainObject(a)?a:{},h[e]=ia.extend(k,g,d)):d!==b&&(h[e]=d));return h},ia.extend({noConflict:function(b){return a.$===ia&&(a.$=Z),b&&a.jQuery===ia&&(a.jQuery=Y),ia},isReady:!1,readyWait:1,holdReady:function(a){a?ia.readyWait++:ia.ready(!0)},ready:function(a){if(a===!0?!--ia.readyWait:!ia.isReady){if(!W.body)return setTimeout(ia.ready);ia.isReady=!0,a!==!0&&--ia.readyWait>0||(T.resolveWith(W,[ia]),ia.fn.trigger&&ia(W).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===ia.type(a)},isArray:Array.isArray||function(a){return"array"===ia.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):"object"==typeof a||"function"==typeof a?$[fa.call(a)]||"object":typeof a},isPlainObject:function(a){if(!a||"object"!==ia.type(a)||a.nodeType||ia.isWindow(a))return!1;try{if(a.constructor&&!ga.call(a,"constructor")&&!ga.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||ga.call(a,d)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw new Error(a)},parseHTML:function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||W;var d=na.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=ia.buildFragment([a],b,e),e&&ia(e).remove(),ia.merge([],d.childNodes))},parseJSON:function(b){return a.JSON&&a.JSON.parse?a.JSON.parse(b):null===b?b:"string"==typeof b&&(b=ia.trim(b),b&&oa.test(b.replace(qa,"@").replace(ra,"]").replace(pa,"")))?new Function("return "+b)():void ia.error("Invalid JSON: "+b)},parseXML:function(c){var d,e;if(!c||"string"!=typeof c)return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(f){d=b}return d&&d.documentElement&&!d.getElementsByTagName("parsererror").length||ia.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&ia.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(sa,"ms-").replace(ta,ua)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d){if(h)for(;g>f&&(e=b.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:ha&&!ha.call("\ufeff ")?function(a){return null==a?"":ha.call(a)}:function(a){return null==a?"":(a+"").replace(la,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?ia.merge(d,"string"==typeof a?[a]:a):ca.call(d,a)),d},inArray:function(a,b,c){var d;if(b){if(ea)return ea.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=c.length,e=a.length,f=0;if("number"==typeof d)for(;d>f;f++)a[e++]=c[f];else for(;c[f]!==b;)a[e++]=c[f++];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;for(c=!!c;g>f;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;g>f;f++)e=b(a[f],f,d),null!=e&&(i[i.length]=e);else for(f in a)e=b(a[f],f,d),null!=e&&(i[i.length]=e);return ba.apply([],i)},guid:1,proxy:function(a,c){var d,e,f;return"string"==typeof c&&(f=a[c],c=a,a=f),ia.isFunction(a)?(d=da.call(arguments,2),e=function(){return a.apply(c||this,d.concat(da.call(arguments)))},e.guid=a.guid=a.guid||ia.guid++,e):b},access:function(a,c,d,e,f,g,h){var i=0,j=a.length,k=null==d;if("object"===ia.type(d)){f=!0;for(i in d)ia.access(a,c,i,d[i],!0,g,h)}else if(e!==b&&(f=!0,ia.isFunction(e)||(h=!0),k&&(h?(c.call(a,e),c=null):(k=c,c=function(a,b,c){return k.call(ia(a),c)})),c))for(;j>i;i++)c(a[i],d,h?e:e.call(a[i],i,c(a[i],d)));return f?a:k?c.call(a):j?c(a[0],d):g},now:function(){return(new Date).getTime()}}),ia.ready.promise=function(b){if(!T)if(T=ia.Deferred(),"complete"===W.readyState)setTimeout(ia.ready);else if(W.addEventListener)W.addEventListener("DOMContentLoaded",va,!1),a.addEventListener("load",va,!1);else{W.attachEvent("onreadystatechange",va),a.attachEvent("onload",va);var c=!1;try{c=null==a.frameElement&&W.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!ia.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}wa(),ia.ready()}}()}return T.promise(b)},ia.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){$["[object "+b+"]"]=b.toLowerCase()}),U=ia(W);var xa={};ia.Callbacks=function(a){a="string"==typeof a?xa[a]||d(a):ia.extend({},a);var c,e,f,g,h,i,j=[],k=!a.once&&[],l=function(b){for(e=a.memory&&b,f=!0,h=i||0,i=0,g=j.length,c=!0;j&&g>h;h++)if(j[h].apply(b[0],b[1])===!1&&a.stopOnFalse){e=!1;break}c=!1,j&&(k?k.length&&l(k.shift()):e?j=[]:m.disable())},m={add:function(){if(j){var b=j.length;!function d(b){ia.each(b,function(b,c){var e=ia.type(c);"function"===e?a.unique&&m.has(c)||j.push(c):c&&c.length&&"string"!==e&&d(c)})}(arguments),c?g=j.length:e&&(i=b,l(e))}return this},remove:function(){return j&&ia.each(arguments,function(a,b){for(var d;(d=ia.inArray(b,j,d))>-1;)j.splice(d,1),c&&(g>=d&&g--,h>=d&&h--)}),this},has:function(a){return a?ia.inArray(a,j)>-1:!(!j||!j.length)},empty:function(){return j=[],this},disable:function(){return j=k=e=b,this},disabled:function(){return!j},lock:function(){return k=b,e||m.disable(),this},locked:function(){return!k},fireWith:function(a,b){return b=b||[],b=[a,b.slice?b.slice():b],!j||f&&!k||(c?k.push(b):l(b)),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return!!f}};return m},ia.extend({Deferred:function(a){var b=[["resolve","done",ia.Callbacks("once memory"),"resolved"],["reject","fail",ia.Callbacks("once memory"),"rejected"],["notify","progress",ia.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return ia.Deferred(function(c){ia.each(b,function(b,f){var g=f[0],h=ia.isFunction(a[b])&&a[b];e[f[1]](function(){var a=h&&h.apply(this,arguments);a&&ia.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[g+"With"](this===d?c.promise():this,h?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?ia.extend(a,d):d}},e={};return d.pipe=d.then,ia.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=da.call(arguments),g=f.length,h=1!==g||a&&ia.isFunction(a.promise)?g:0,i=1===h?a:ia.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?da.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);g>e;e++)f[e]&&ia.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}}),ia.support=function(){var b,c,d,e,f,g,h,i,j,k,l=W.createElement("div");if(l.setAttribute("className","t"),l.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c=l.getElementsByTagName("*"),d=l.getElementsByTagName("a")[0],!c||!d||!c.length)return{};f=W.createElement("select"),h=f.appendChild(W.createElement("option")),e=l.getElementsByTagName("input")[0],d.style.cssText="top:1px;float:left;opacity:.5",b={getSetAttribute:"t"!==l.className,leadingWhitespace:3===l.firstChild.nodeType,tbody:!l.getElementsByTagName("tbody").length,htmlSerialize:!!l.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:"/a"===d.getAttribute("href"),opacity:/^0.5/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:!!e.value,optSelected:h.selected,enctype:!!W.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==W.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===W.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},e.checked=!0,b.noCloneChecked=e.cloneNode(!0).checked,f.disabled=!0,b.optDisabled=!h.disabled;try{delete l.test}catch(m){b.deleteExpando=!1}e=W.createElement("input"),e.setAttribute("value",""),b.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),b.radioValue="t"===e.value,e.setAttribute("checked","t"),e.setAttribute("name","t"),g=W.createDocumentFragment(),g.appendChild(e),b.appendChecked=e.checked,b.checkClone=g.cloneNode(!0).cloneNode(!0).lastChild.checked,l.attachEvent&&(l.attachEvent("onclick",function(){b.noCloneEvent=!1}),l.cloneNode(!0).click());for(k in{submit:!0,change:!0,focusin:!0})l.setAttribute(i="on"+k,"t"),b[k+"Bubbles"]=i in a||l.attributes[i].expando===!1;return l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",b.clearCloneStyle="content-box"===l.style.backgroundClip,ia(function(){var c,d,e,f="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",g=W.getElementsByTagName("body")[0];g&&(c=W.createElement("div"),c.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",g.appendChild(c).appendChild(l),l.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=l.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",j=0===e[0].offsetHeight,e[0].style.display="",e[1].style.display="none",b.reliableHiddenOffsets=j&&0===e[0].offsetHeight,l.innerHTML="",l.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",b.boxSizing=4===l.offsetWidth,b.doesNotIncludeMarginInBodyOffset=1!==g.offsetTop,a.getComputedStyle&&(b.pixelPosition="1%"!==(a.getComputedStyle(l,null)||{}).top,b.boxSizingReliable="4px"===(a.getComputedStyle(l,null)||{width:"4px"}).width,d=l.appendChild(W.createElement("div")),d.style.cssText=l.style.cssText=f,d.style.marginRight=d.style.width="0",l.style.width="1px",b.reliableMarginRight=!parseFloat((a.getComputedStyle(d,null)||{}).marginRight)),typeof l.style.zoom!==V&&(l.innerHTML="",l.style.cssText=f+"width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=3===l.offsetWidth,l.style.display="block",l.innerHTML="<div></div>",l.firstChild.style.width="5px",b.shrinkWrapBlocks=3!==l.offsetWidth,b.inlineBlockNeedsLayout&&(g.style.zoom=1)),g.removeChild(c),c=l=e=d=null)}),c=f=g=h=d=e=null,b}();var ya=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,za=/([A-Z])/g;ia.extend({cache:{},expando:"jQuery"+(aa+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?ia.cache[a[ia.expando]]:a[ia.expando],!!a&&!h(a)},data:function(a,b,c){return e(a,b,c)},removeData:function(a,b){return f(a,b)},_data:function(a,b,c){return e(a,b,c,!0)},_removeData:function(a,b){return f(a,b,!0)},acceptData:function(a){if(a.nodeType&&1!==a.nodeType&&9!==a.nodeType)return!1;var b=a.nodeName&&ia.noData[a.nodeName.toLowerCase()];return!b||b!==!0&&a.getAttribute("classid")===b}}),ia.fn.extend({data:function(a,c){var d,e,f=this[0],h=0,i=null;if(a===b){if(this.length&&(i=ia.data(f),1===f.nodeType&&!ia._data(f,"parsedAttrs"))){for(d=f.attributes;h<d.length;h++)e=d[h].name,e.indexOf("data-")||(e=ia.camelCase(e.slice(5)),g(f,e,i[e]));ia._data(f,"parsedAttrs",!0)}return i}return"object"==typeof a?this.each(function(){ia.data(this,a)}):ia.access(this,function(c){return c===b?f?g(f,a,ia.data(f,a)):null:void this.each(function(){ia.data(this,a,c)})},null,c,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){ia.removeData(this,a)})}}),ia.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=ia._data(a,b),c&&(!d||ia.isArray(c)?d=ia._data(a,b,ia.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=ia.queue(a,b),d=c.length,e=c.shift(),f=ia._queueHooks(a,b),g=function(){ia.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),f.cur=e,e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return ia._data(a,c)||ia._data(a,c,{empty:ia.Callbacks("once memory").add(function(){ia._removeData(a,b+"queue"),ia._removeData(a,c)})})}}),ia.fn.extend({queue:function(a,c){var d=2;return"string"!=typeof a&&(c=a,a="fx",d--),arguments.length<d?ia.queue(this[0],a):c===b?this:this.each(function(){var b=ia.queue(this,a,c);ia._queueHooks(this,a),"fx"===a&&"inprogress"!==b[0]&&ia.dequeue(this,a)})},dequeue:function(a){return this.each(function(){ia.dequeue(this,a)})},delay:function(a,b){return a=ia.fx?ia.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=ia.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};for("string"!=typeof a&&(c=a,a=b),a=a||"fx";h--;)d=ia._data(g[h],a+"queueHooks"),d&&d.empty&&(e++,d.empty.add(i));return i(),f.promise(c)}});var Aa,Ba,Ca=/[\t\r\n]/g,Da=/\r/g,Ea=/^(?:input|select|textarea|button|object)$/i,Fa=/^(?:a|area)$/i,Ga=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,Ha=/^(?:checked|selected)$/i,Ia=ia.support.getSetAttribute,Ja=ia.support.input;ia.fn.extend({attr:function(a,b){return ia.access(this,ia.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){ia.removeAttr(this,a)})},prop:function(a,b){return ia.access(this,ia.prop,a,b,arguments.length>1)},removeProp:function(a){return a=ia.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g=0,h=this.length,i="string"==typeof a&&a;if(ia.isFunction(a))return this.each(function(b){ia(this).addClass(a.call(this,b,this.className))});if(i)for(b=(a||"").match(ka)||[];h>g;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Ca," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");c.className=ia.trim(d)}return this},removeClass:function(a){var b,c,d,e,f,g=0,h=this.length,i=0===arguments.length||"string"==typeof a&&a;if(ia.isFunction(a))return this.each(function(b){ia(this).removeClass(a.call(this,b,this.className))});if(i)for(b=(a||"").match(ka)||[];h>g;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Ca," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");c.className=a?ia.trim(d):""}return this},toggleClass:function(a,b){var c=typeof a,d="boolean"==typeof b;return ia.isFunction(a)?this.each(function(c){ia(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var e,f=0,g=ia(this),h=b,i=a.match(ka)||[];e=i[f++];)h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e);else c!==V&&"boolean"!==c||(this.className&&ia._data(this,"__className__",this.className),this.className=this.className||a===!1?"":ia._data(this,"__className__")||"");
})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(Ca," ").indexOf(b)>=0)return!0;return!1},val:function(a){var c,d,e,f=this[0];{if(arguments.length)return e=ia.isFunction(a),this.each(function(c){var f,g=ia(this);1===this.nodeType&&(f=e?a.call(this,c,g.val()):a,null==f?f="":"number"==typeof f?f+="":ia.isArray(f)&&(f=ia.map(f,function(a){return null==a?"":a+""})),d=ia.valHooks[this.type]||ia.valHooks[this.nodeName.toLowerCase()],d&&"set"in d&&d.set(this,f,"value")!==b||(this.value=f))});if(f)return d=ia.valHooks[f.type]||ia.valHooks[f.nodeName.toLowerCase()],d&&"get"in d&&(c=d.get(f,"value"))!==b?c:(c=f.value,"string"==typeof c?c.replace(Da,""):null==c?"":c)}}}),ia.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],(c.selected||i===e)&&(ia.support.optDisabled?!c.disabled:null===c.getAttribute("disabled"))&&(!c.parentNode.disabled||!ia.nodeName(c.parentNode,"optgroup"))){if(b=ia(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c=ia.makeArray(b);return ia(a).find("option").each(function(){this.selected=ia.inArray(ia(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attr:function(a,c,d){var e,f,g,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h)return typeof a.getAttribute===V?ia.prop(a,c,d):(f=1!==h||!ia.isXMLDoc(a),f&&(c=c.toLowerCase(),e=ia.attrHooks[c]||(Ga.test(c)?Ba:Aa)),d===b?e&&f&&"get"in e&&null!==(g=e.get(a,c))?g:(typeof a.getAttribute!==V&&(g=a.getAttribute(c)),null==g?b:g):null!==d?e&&f&&"set"in e&&(g=e.set(a,d,c))!==b?g:(a.setAttribute(c,d+""),d):void ia.removeAttr(a,c))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(ka);if(f&&1===a.nodeType)for(;c=f[e++];)d=ia.propFix[c]||c,Ga.test(c)?!Ia&&Ha.test(c)?a[ia.camelCase("default-"+c)]=a[d]=!1:a[d]=!1:ia.attr(a,c,""),a.removeAttribute(Ia?c:d)},attrHooks:{type:{set:function(a,b){if(!ia.support.radioValue&&"radio"===b&&ia.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h)return g=1!==h||!ia.isXMLDoc(a),g&&(c=ia.propFix[c]||c,f=ia.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):Ea.test(a.nodeName)||Fa.test(a.nodeName)&&a.href?0:b}}}}),Ba={get:function(a,c){var d=ia.prop(a,c),e="boolean"==typeof d&&a.getAttribute(c),f="boolean"==typeof d?Ja&&Ia?null!=e:Ha.test(c)?a[ia.camelCase("default-"+c)]:!!e:a.getAttributeNode(c);return f&&f.value!==!1?c.toLowerCase():b},set:function(a,b,c){return b===!1?ia.removeAttr(a,c):Ja&&Ia||!Ha.test(c)?a.setAttribute(!Ia&&ia.propFix[c]||c,c):a[ia.camelCase("default-"+c)]=a[c]=!0,c}},Ja&&Ia||(ia.attrHooks.value={get:function(a,c){var d=a.getAttributeNode(c);return ia.nodeName(a,"input")?a.defaultValue:d&&d.specified?d.value:b},set:function(a,b,c){return ia.nodeName(a,"input")?void(a.defaultValue=b):Aa&&Aa.set(a,b,c)}}),Ia||(Aa=ia.valHooks.button={get:function(a,c){var d=a.getAttributeNode(c);return d&&("id"===c||"name"===c||"coords"===c?""!==d.value:d.specified)?d.value:b},set:function(a,c,d){var e=a.getAttributeNode(d);return e||a.setAttributeNode(e=a.ownerDocument.createAttribute(d)),e.value=c+="","value"===d||c===a.getAttribute(d)?c:b}},ia.attrHooks.contenteditable={get:Aa.get,set:function(a,b,c){Aa.set(a,""===b?!1:b,c)}},ia.each(["width","height"],function(a,b){ia.attrHooks[b]=ia.extend(ia.attrHooks[b],{set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}})})),ia.support.hrefNormalized||(ia.each(["href","src","width","height"],function(a,c){ia.attrHooks[c]=ia.extend(ia.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return null==d?b:d}})}),ia.each(["href","src"],function(a,b){ia.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}})),ia.support.style||(ia.attrHooks.style={get:function(a){return a.style.cssText||b},set:function(a,b){return a.style.cssText=b+""}}),ia.support.optSelected||(ia.propHooks.selected=ia.extend(ia.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),ia.support.enctype||(ia.propFix.enctype="encoding"),ia.support.checkOn||ia.each(["radio","checkbox"],function(){ia.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}}),ia.each(["radio","checkbox"],function(){ia.valHooks[this]=ia.extend(ia.valHooks[this],{set:function(a,b){return ia.isArray(b)?a.checked=ia.inArray(ia(a).val(),b)>=0:void 0}})});var Ka=/^(?:input|select|textarea)$/i,La=/^key/,Ma=/^(?:mouse|contextmenu)|click/,Na=/^(?:focusinfocus|focusoutblur)$/,Oa=/^([^.]*)(?:\.(.+)|)$/;ia.event={global:{},add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r=ia._data(a);if(r){for(d.handler&&(j=d,d=j.handler,f=j.selector),d.guid||(d.guid=ia.guid++),(h=r.events)||(h=r.events={}),(l=r.handle)||(l=r.handle=function(a){return typeof ia===V||a&&ia.event.triggered===a.type?b:ia.event.dispatch.apply(l.elem,arguments)},l.elem=a),c=(c||"").match(ka)||[""],i=c.length;i--;)g=Oa.exec(c[i])||[],o=q=g[1],p=(g[2]||"").split(".").sort(),k=ia.event.special[o]||{},o=(f?k.delegateType:k.bindType)||o,k=ia.event.special[o]||{},m=ia.extend({type:o,origType:q,data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&ia.expr.match.needsContext.test(f),namespace:p.join(".")},j),(n=h[o])||(n=h[o]=[],n.delegateCount=0,k.setup&&k.setup.call(a,e,p,l)!==!1||(a.addEventListener?a.addEventListener(o,l,!1):a.attachEvent&&a.attachEvent("on"+o,l))),k.add&&(k.add.call(a,m),m.handler.guid||(m.handler.guid=d.guid)),f?n.splice(n.delegateCount++,0,m):n.push(m),ia.event.global[o]=!0;a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=ia.hasData(a)&&ia._data(a);if(q&&(k=q.events)){for(b=(b||"").match(ka)||[""],j=b.length;j--;)if(h=Oa.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=ia.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=k[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;f--;)g=m[f],!e&&p!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||ia.removeEvent(a,n,q.handle),delete k[n])}else for(n in k)ia.event.remove(a,n+b[j],c,d,!0);ia.isEmptyObject(k)&&(delete q.handle,ia._removeData(a,"events"))}},trigger:function(c,d,e,f){var g,h,i,j,k,l,m,n=[e||W],o=ga.call(c,"type")?c.type:c,p=ga.call(c,"namespace")?c.namespace.split("."):[];if(i=l=e=e||W,3!==e.nodeType&&8!==e.nodeType&&!Na.test(o+ia.event.triggered)&&(o.indexOf(".")>=0&&(p=o.split("."),o=p.shift(),p.sort()),h=o.indexOf(":")<0&&"on"+o,c=c[ia.expando]?c:new ia.Event(o,"object"==typeof c&&c),c.isTrigger=!0,c.namespace=p.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c.result=b,c.target||(c.target=e),d=null==d?[c]:ia.makeArray(d,[c]),k=ia.event.special[o]||{},f||!k.trigger||k.trigger.apply(e,d)!==!1)){if(!f&&!k.noBubble&&!ia.isWindow(e)){for(j=k.delegateType||o,Na.test(j+o)||(i=i.parentNode);i;i=i.parentNode)n.push(i),l=i;l===(e.ownerDocument||W)&&n.push(l.defaultView||l.parentWindow||a)}for(m=0;(i=n[m++])&&!c.isPropagationStopped();)c.type=m>1?j:k.bindType||o,g=(ia._data(i,"events")||{})[c.type]&&ia._data(i,"handle"),g&&g.apply(i,d),g=h&&i[h],g&&ia.acceptData(i)&&g.apply&&g.apply(i,d)===!1&&c.preventDefault();if(c.type=o,!f&&!c.isDefaultPrevented()&&(!k._default||k._default.apply(e.ownerDocument,d)===!1)&&("click"!==o||!ia.nodeName(e,"a"))&&ia.acceptData(e)&&h&&e[o]&&!ia.isWindow(e)){l=e[h],l&&(e[h]=null),ia.event.triggered=o;try{e[o]()}catch(q){}ia.event.triggered=b,l&&(e[h]=l)}return c.result}},dispatch:function(a){a=ia.event.fix(a);var c,d,e,f,g,h=[],i=da.call(arguments),j=(ia._data(this,"events")||{})[a.type]||[],k=ia.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){for(h=ia.event.handlers.call(this,a,j),c=0;(f=h[c++])&&!a.isPropagationStopped();)for(a.currentTarget=f.elem,g=0;(e=f.handlers[g++])&&!a.isImmediatePropagationStopped();)a.namespace_re&&!a.namespace_re.test(e.namespace)||(a.handleObj=e,a.data=e.data,d=((ia.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),d!==b&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()));return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,c){var d,e,f,g,h=[],i=c.delegateCount,j=a.target;if(i&&j.nodeType&&(!a.button||"click"!==a.type))for(;j!=this;j=j.parentNode||this)if(1===j.nodeType&&(j.disabled!==!0||"click"!==a.type)){for(f=[],g=0;i>g;g++)e=c[g],d=e.selector+" ",f[d]===b&&(f[d]=e.needsContext?ia(d,this).index(j)>=0:ia.find(d,this,null,[j]).length),f[d]&&f.push(e);f.length&&h.push({elem:j,handlers:f})}return i<c.length&&h.push({elem:this,handlers:c.slice(i)}),h},fix:function(a){if(a[ia.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Ma.test(e)?this.mouseHooks:La.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new ia.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||W),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f,g=c.button,h=c.fromElement;return null==a.pageX&&null!=c.clientX&&(e=a.target.ownerDocument||W,f=e.documentElement,d=e.body,a.pageX=c.clientX+(f&&f.scrollLeft||d&&d.scrollLeft||0)-(f&&f.clientLeft||d&&d.clientLeft||0),a.pageY=c.clientY+(f&&f.scrollTop||d&&d.scrollTop||0)-(f&&f.clientTop||d&&d.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?c.toElement:h),a.which||g===b||(a.which=1&g?1:2&g?3:4&g?2:0),a}},special:{load:{noBubble:!0},click:{trigger:function(){return ia.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0}},focus:{trigger:function(){if(this!==W.activeElement&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===W.activeElement&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},beforeunload:{postDispatch:function(a){a.result!==b&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=ia.extend(new ia.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?ia.event.trigger(e,null,b):ia.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},ia.removeEvent=W.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===V&&(a[d]=null),a.detachEvent(d,c))},ia.Event=function(a,b){return this instanceof ia.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?i:j):this.type=a,b&&ia.extend(this,b),this.timeStamp=a&&a.timeStamp||ia.now(),void(this[ia.expando]=!0)):new ia.Event(a,b)},ia.Event.prototype={isDefaultPrevented:j,isPropagationStopped:j,isImmediatePropagationStopped:j,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=i,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=i,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=i,this.stopPropagation()}},ia.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){ia.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return e&&(e===d||ia.contains(d,e))||(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),ia.support.submitBubbles||(ia.event.special.submit={setup:function(){return ia.nodeName(this,"form")?!1:void ia.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=ia.nodeName(c,"input")||ia.nodeName(c,"button")?c.form:b;d&&!ia._data(d,"submitBubbles")&&(ia.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),ia._data(d,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&ia.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return ia.nodeName(this,"form")?!1:void ia.event.remove(this,"._submit")}}),ia.support.changeBubbles||(ia.event.special.change={setup:function(){return Ka.test(this.nodeName)?("checkbox"!==this.type&&"radio"!==this.type||(ia.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),ia.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),ia.event.simulate("change",this,a,!0)})),!1):void ia.event.add(this,"beforeactivate._change",function(a){var b=a.target;Ka.test(b.nodeName)&&!ia._data(b,"changeBubbles")&&(ia.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||ia.event.simulate("change",this.parentNode,a,!0)}),ia._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return ia.event.remove(this,"._change"),!Ka.test(this.nodeName)}}),ia.support.focusinBubbles||ia.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){ia.event.simulate(b,a.target,ia.event.fix(a),!0)};ia.event.special[b]={setup:function(){0===c++&&W.addEventListener(a,d,!0)},teardown:function(){0===--c&&W.removeEventListener(a,d,!0)}}}),ia.fn.extend({on:function(a,c,d,e,f){var g,h;if("object"==typeof a){"string"!=typeof c&&(d=d||c,c=b);for(g in a)this.on(g,c,d,a[g],f);return this}if(null==d&&null==e?(e=c,d=c=b):null==e&&("string"==typeof c?(e=d,d=b):(e=d,d=c,c=b)),e===!1)e=j;else if(!e)return this;return 1===f&&(h=e,e=function(a){return ia().off(a),h.apply(this,arguments)},e.guid=h.guid||(h.guid=ia.guid++)),this.each(function(){ia.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,f;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,ia(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof a){for(f in a)this.off(f,c,a[f]);return this}return c!==!1&&"function"!=typeof c||(d=c,c=b),d===!1&&(d=j),this.each(function(){ia.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},trigger:function(a,b){return this.each(function(){ia.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?ia.event.trigger(a,b,c,!0):void 0}}),function(a,b){function c(a){return oa.test(a+"")}function d(){var a,b=[];return a=function(c,d){return b.push(c+=" ")>y.cacheLength&&delete a[b.shift()],a[c]=d}}function e(a){return a[N]=!0,a}function f(a){var b=F.createElement("div");try{return a(b)}catch(c){return!1}finally{b=null}}function g(a,b,c,d){var e,f,g,h,i,j,k,n,o,p;if((b?b.ownerDocument||b:O)!==F&&E(b),b=b||F,c=c||[],!a||"string"!=typeof a)return c;if(1!==(h=b.nodeType)&&9!==h)return[];if(!H&&!d){if(e=pa.exec(a))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&L(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return Z.apply(c,$.call(b.getElementsByTagName(a),0)),c;if((g=e[3])&&P.getByClassName&&b.getElementsByClassName)return Z.apply(c,$.call(b.getElementsByClassName(g),0)),c}if(P.qsa&&!I.test(a)){if(k=!0,n=N,o=b,p=9===h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=l(a),(k=b.getAttribute("id"))?n=k.replace(sa,"\\$&"):b.setAttribute("id",n),n="[id='"+n+"'] ",i=j.length;i--;)j[i]=n+m(j[i]);o=na.test(a)&&b.parentNode||b,p=j.join(",")}if(p)try{return Z.apply(c,$.call(o.querySelectorAll(p),0)),c}catch(q){}finally{k||b.removeAttribute("id")}}}return u(a.replace(ga,"$1"),b,c,d)}function h(a,b){var c=b&&a,d=c&&(~b.sourceIndex||W)-(~a.sourceIndex||W);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function i(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function j(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function k(a){return e(function(b){return b=+b,e(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function l(a,b){var c,d,e,f,h,i,j,k=T[a+" "];if(k)return b?0:k.slice(0);for(h=a,i=[],j=y.preFilter;h;){c&&!(d=ha.exec(h))||(d&&(h=h.slice(d[0].length)||h),i.push(e=[])),c=!1,(d=ja.exec(h))&&(c=d.shift(),e.push({value:c,type:d[0].replace(ga," ")}),h=h.slice(c.length));for(f in y.filter)!(d=ma[f].exec(h))||j[f]&&!(d=j[f](d))||(c=d.shift(),e.push({value:c,type:f,matches:d}),h=h.slice(c.length));if(!c)break}return b?h.length:h?g.error(a):T(a,i).slice(0)}function m(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function n(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=R++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=Q+" "+f;if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e)if(j=b[N]||(b[N]={}),(i=j[d])&&i[0]===k){if((h=i[1])===!0||h===x)return h===!0}else if(i=j[d]=[k],i[1]=a(b,c,g)||x,i[1]===!0)return!0}}function o(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function p(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g}function q(a,b,c,d,f,g){return d&&!d[N]&&(d=q(d)),f&&!f[N]&&(f=q(f,g)),e(function(e,g,h,i){var j,k,l,m=[],n=[],o=g.length,q=e||t(b||"*",h.nodeType?[h]:h,[]),r=!a||!e&&b?q:p(q,m,a,h,i),s=c?f||(e?a:o||d)?[]:g:r;if(c&&c(r,s,h,i),d)for(j=p(s,n),d(j,[],h,i),k=j.length;k--;)(l=j[k])&&(s[n[k]]=!(r[n[k]]=l));if(e){if(f||a){if(f){for(j=[],k=s.length;k--;)(l=s[k])&&j.push(r[k]=l);f(null,s=[],j,i)}for(k=s.length;k--;)(l=s[k])&&(j=f?_.call(e,l):m[k])>-1&&(e[j]=!(g[j]=l))}}else s=p(s===g?s.splice(o,s.length):s),f?f(null,g,s,i):Z.apply(g,s)})}function r(a){for(var b,c,d,e=a.length,f=y.relative[a[0].type],g=f||y.relative[" "],h=f?1:0,i=n(function(a){return a===b},g,!0),j=n(function(a){return _.call(b,a)>-1},g,!0),k=[function(a,c,d){return!f&&(d||c!==D)||((b=c).nodeType?i(a,c,d):j(a,c,d))}];e>h;h++)if(c=y.relative[a[h].type])k=[n(o(k),c)];else{if(c=y.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;e>d&&!y.relative[a[d].type];d++);return q(h>1&&o(k),h>1&&m(a.slice(0,h-1)).replace(ga,"$1"),c,d>h&&r(a.slice(h,d)),e>d&&r(a=a.slice(d)),e>d&&m(a))}k.push(c)}return o(k)}function s(a,b){var c=0,d=b.length>0,f=a.length>0,h=function(e,h,i,j,k){var l,m,n,o=[],q=0,r="0",s=e&&[],t=null!=k,u=D,v=e||f&&y.find.TAG("*",k&&h.parentNode||h),w=Q+=null==u?1:Math.random()||.1;for(t&&(D=h!==F&&h,x=c);null!=(l=v[r]);r++){if(f&&l){for(m=0;n=a[m++];)if(n(l,h,i)){j.push(l);break}t&&(Q=w,x=++c)}d&&((l=!n&&l)&&q--,e&&s.push(l))}if(q+=r,d&&r!==q){for(m=0;n=b[m++];)n(s,o,h,i);if(e){if(q>0)for(;r--;)s[r]||o[r]||(o[r]=Y.call(j));o=p(o)}Z.apply(j,o),t&&!e&&o.length>0&&q+b.length>1&&g.uniqueSort(j)}return t&&(Q=w,D=u),s};return d?e(h):h}function t(a,b,c){for(var d=0,e=b.length;e>d;d++)g(a,b[d],c);return c}function u(a,b,c,d){var e,f,g,h,i,j=l(a);if(!d&&1===j.length){if(f=j[0]=j[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&9===b.nodeType&&!H&&y.relative[f[1].type]){if(b=y.find.ID(g.matches[0].replace(ua,va),b)[0],!b)return c;a=a.slice(f.shift().value.length)}for(e=ma.needsContext.test(a)?0:f.length;e--&&(g=f[e],!y.relative[h=g.type]);)if((i=y.find[h])&&(d=i(g.matches[0].replace(ua,va),na.test(f[0].type)&&b.parentNode||b))){if(f.splice(e,1),a=d.length&&m(f),!a)return Z.apply(c,$.call(d,0)),c;break}}return B(a,j)(d,b,H,c,na.test(a)),c}function v(){}var w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+-new Date,O=a.document,P={},Q=0,R=0,S=d(),T=d(),U=d(),V=typeof b,W=1<<31,X=[],Y=X.pop,Z=X.push,$=X.slice,_=X.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},aa="[\\x20\\t\\r\\n\\f]",ba="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ca=ba.replace("w","w#"),da="([*^$|!~]?=)",ea="\\["+aa+"*("+ba+")"+aa+"*(?:"+da+aa+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ca+")|)|)"+aa+"*\\]",fa=":("+ba+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ea.replace(3,8)+")*)|.*)\\)|)",ga=new RegExp("^"+aa+"+|((?:^|[^\\\\])(?:\\\\.)*)"+aa+"+$","g"),ha=new RegExp("^"+aa+"*,"+aa+"*"),ja=new RegExp("^"+aa+"*([\\x20\\t\\r\\n\\f>+~])"+aa+"*"),ka=new RegExp(fa),la=new RegExp("^"+ca+"$"),ma={ID:new RegExp("^#("+ba+")"),CLASS:new RegExp("^\\.("+ba+")"),NAME:new RegExp("^\\[name=['\"]?("+ba+")['\"]?\\]"),TAG:new RegExp("^("+ba.replace("w","w*")+")"),ATTR:new RegExp("^"+ea),PSEUDO:new RegExp("^"+fa),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+aa+"*(even|odd|(([+-]|)(\\d*)n|)"+aa+"*(?:([+-]|)"+aa+"*(\\d+)|))"+aa+"*\\)|)","i"),needsContext:new RegExp("^"+aa+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+aa+"*((?:-\\d)?\\d*)"+aa+"*\\)|)(?=[^-]|$)","i")},na=/[\x20\t\r\n\f]*[+~]/,oa=/^[^{]+\{\s*\[native code/,pa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,qa=/^(?:input|select|textarea|button)$/i,ra=/^h\d$/i,sa=/'|\\/g,ta=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,ua=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,va=function(a,b){var c="0x"+b-65536;return c!==c?b:0>c?String.fromCharCode(c+65536):String.fromCharCode(c>>10|55296,1023&c|56320)};try{$.call(O.documentElement.childNodes,0)[0].nodeType}catch(wa){$=function(a){for(var b,c=[];b=this[a++];)c.push(b);return c}}A=g.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},E=g.setDocument=function(a){var d=a?a.ownerDocument||a:O;return d!==F&&9===d.nodeType&&d.documentElement?(F=d,G=d.documentElement,H=A(d),P.tagNameNoComments=f(function(a){return a.appendChild(d.createComment("")),!a.getElementsByTagName("*").length}),P.attributes=f(function(a){a.innerHTML="<select></select>";var b=typeof a.lastChild.getAttribute("multiple");return"boolean"!==b&&"string"!==b}),P.getByClassName=f(function(a){return a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",a.getElementsByClassName&&a.getElementsByClassName("e").length?(a.lastChild.className="e",2===a.getElementsByClassName("e").length):!1}),P.getByName=f(function(a){a.id=N+0,a.innerHTML="<a name='"+N+"'></a><div name='"+N+"'></div>",G.insertBefore(a,G.firstChild);var b=d.getElementsByName&&d.getElementsByName(N).length===2+d.getElementsByName(N+0).length;return P.getIdNotName=!d.getElementById(N),G.removeChild(a),b}),y.attrHandle=f(function(a){return a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!==V&&"#"===a.firstChild.getAttribute("href")})?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}},P.getIdNotName?(y.find.ID=function(a,b){if(typeof b.getElementById!==V&&!H){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},y.filter.ID=function(a){var b=a.replace(ua,va);return function(a){return a.getAttribute("id")===b}}):(y.find.ID=function(a,c){if(typeof c.getElementById!==V&&!H){var d=c.getElementById(a);return d?d.id===a||typeof d.getAttributeNode!==V&&d.getAttributeNode("id").value===a?[d]:b:[]}},y.filter.ID=function(a){var b=a.replace(ua,va);return function(a){var c=typeof a.getAttributeNode!==V&&a.getAttributeNode("id");return c&&c.value===b}}),y.find.TAG=P.tagNameNoComments?function(a,b){return typeof b.getElementsByTagName!==V?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},y.find.NAME=P.getByName&&function(a,b){return typeof b.getElementsByName!==V?b.getElementsByName(name):void 0},y.find.CLASS=P.getByClassName&&function(a,b){return typeof b.getElementsByClassName===V||H?void 0:b.getElementsByClassName(a)},J=[],I=[":focus"],(P.qsa=c(d.querySelectorAll))&&(f(function(a){a.innerHTML="<select><option selected=''></option></select>",a.querySelectorAll("[selected]").length||I.push("\\["+aa+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),a.querySelectorAll(":checked").length||I.push(":checked")}),f(function(a){a.innerHTML="<input type='hidden' i=''/>",a.querySelectorAll("[i^='']").length&&I.push("[*^$]="+aa+"*(?:\"\"|'')"),a.querySelectorAll(":enabled").length||I.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),I.push(",.*:")})),(P.matchesSelector=c(K=G.matchesSelector||G.mozMatchesSelector||G.webkitMatchesSelector||G.oMatchesSelector||G.msMatchesSelector))&&f(function(a){P.disconnectedMatch=K.call(a,"div"),K.call(a,"[s!='']:x"),J.push("!=",fa)}),I=new RegExp(I.join("|")),J=new RegExp(J.join("|")),L=c(G.contains)||G.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},M=G.compareDocumentPosition?function(a,b){var c;return a===b?(C=!0,0):(c=b.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(b))?1&c||a.parentNode&&11===a.parentNode.nodeType?a===d||L(O,a)?-1:b===d||L(O,b)?1:0:4&c?-1:1:a.compareDocumentPosition?-1:1}:function(a,b){var c,e=0,f=a.parentNode,g=b.parentNode,i=[a],j=[b];if(a===b)return C=!0,0;if(!f||!g)return a===d?-1:b===d?1:f?-1:g?1:0;if(f===g)return h(a,b);for(c=a;c=c.parentNode;)i.unshift(c);for(c=b;c=c.parentNode;)j.unshift(c);for(;i[e]===j[e];)e++;return e?h(i[e],j[e]):i[e]===O?-1:j[e]===O?1:0},C=!1,[0,0].sort(M),P.detectDuplicates=C,F):F},g.matches=function(a,b){return g(a,null,null,b)},g.matchesSelector=function(a,b){if((a.ownerDocument||a)!==F&&E(a),b=b.replace(ta,"='$1']"),P.matchesSelector&&!H&&(!J||!J.test(b))&&!I.test(b))try{var c=K.call(a,b);if(c||P.disconnectedMatch||a.document&&11!==a.document.nodeType)return c}catch(d){}return g(b,F,null,[a]).length>0},g.contains=function(a,b){return(a.ownerDocument||a)!==F&&E(a),L(a,b)},g.attr=function(a,b){var c;return(a.ownerDocument||a)!==F&&E(a),H||(b=b.toLowerCase()),(c=y.attrHandle[b])?c(a):H||P.attributes?a.getAttribute(b):((c=a.getAttributeNode(b))||a.getAttribute(b))&&a[b]===!0?b:c&&c.specified?c.value:null},g.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},g.uniqueSort=function(a){var b,c=[],d=1,e=0;if(C=!P.detectDuplicates,a.sort(M),C){for(;b=a[d];d++)b===a[d-1]&&(e=c.push(d));for(;e--;)a.splice(c[e],1)}return a},z=g.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=z(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d];d++)c+=z(b);return c},y=g.selectors={cacheLength:50,createPseudo:e,match:ma,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ua,va),a[3]=(a[4]||a[5]||"").replace(ua,va),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||g.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&g.error(a[0]),a},PSEUDO:function(a){var b,c=!a[5]&&a[2];return ma.CHILD.test(a[0])?null:(a[4]?a[2]=a[4]:c&&ka.test(c)&&(b=l(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){return"*"===a?function(){return!0}:(a=a.replace(ua,va).toLowerCase(),function(b){return b.nodeName&&b.nodeName.toLowerCase()===a})},CLASS:function(a){var b=S[a+" "];return b||(b=new RegExp("(^|"+aa+")"+a+"("+aa+"|$)"))&&S(a,function(a){return b.test(a.className||typeof a.getAttribute!==V&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=g.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[N]||(q[N]={}),j=k[a]||[],n=j[0]===Q&&j[1],m=j[0]===Q&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[Q,n,m];break}}else if(s&&(j=(b[N]||(b[N]={}))[a])&&j[0]===Q)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[N]||(l[N]={}))[a]=[Q,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,d=y.pseudos[a]||y.setFilters[a.toLowerCase()]||g.error("unsupported pseudo: "+a);return d[N]?d(b):d.length>1?(c=[a,a,"",b],y.setFilters.hasOwnProperty(a.toLowerCase())?e(function(a,c){for(var e,f=d(a,b),g=f.length;g--;)e=_.call(a,f[g]),a[e]=!(c[e]=f[g])}):function(a){return d(a,0,c)}):d}},pseudos:{not:e(function(a){var b=[],c=[],d=B(a.replace(ga,"$1"));return d[N]?e(function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:e(function(a){return function(b){return g(a,b).length>0}}),contains:e(function(a){return function(b){return(b.textContent||b.innerText||z(b)).indexOf(a)>-1}}),lang:e(function(a){return la.test(a||"")||g.error("unsupported lang: "+a),a=a.replace(ua,va).toLowerCase(),function(b){var c;do if(c=H?b.getAttribute("xml:lang")||b.getAttribute("lang"):b.lang)return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===G},focus:function(a){return a===F.activeElement&&(!F.hasFocus||F.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeName>"@"||3===a.nodeType||4===a.nodeType)return!1;return!0},parent:function(a){
return!y.pseudos.empty(a)},header:function(a){return ra.test(a.nodeName)},input:function(a){return qa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||b.toLowerCase()===a.type)},first:k(function(){return[0]}),last:k(function(a,b){return[b-1]}),eq:k(function(a,b,c){return[0>c?c+b:c]}),even:k(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:k(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:k(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:k(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}};for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})y.pseudos[w]=i(w);for(w in{submit:!0,reset:!0})y.pseudos[w]=j(w);B=g.compile=function(a,b){var c,d=[],e=[],f=U[a+" "];if(!f){for(b||(b=l(a)),c=b.length;c--;)f=r(b[c]),f[N]?d.push(f):e.push(f);f=U(a,s(e,d))}return f},y.pseudos.nth=y.pseudos.eq,y.filters=v.prototype=y.pseudos,y.setFilters=new v,E(),g.attr=ia.attr,ia.find=g,ia.expr=g.selectors,ia.expr[":"]=ia.expr.pseudos,ia.unique=g.uniqueSort,ia.text=g.getText,ia.isXMLDoc=g.isXML,ia.contains=g.contains}(a);var Pa=/Until$/,Qa=/^(?:parents|prev(?:Until|All))/,Ra=/^.[^:#\[\.,]*$/,Sa=ia.expr.match.needsContext,Ta={children:!0,contents:!0,next:!0,prev:!0};ia.fn.extend({find:function(a){var b,c,d,e=this.length;if("string"!=typeof a)return d=this,this.pushStack(ia(a).filter(function(){for(b=0;e>b;b++)if(ia.contains(d[b],this))return!0}));for(c=[],b=0;e>b;b++)ia.find(a,this[b],c);return c=this.pushStack(e>1?ia.unique(c):c),c.selector=(this.selector?this.selector+" ":"")+a,c},has:function(a){var b,c=ia(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(ia.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(l(this,a,!1))},filter:function(a){return this.pushStack(l(this,a,!0))},is:function(a){return!!a&&("string"==typeof a?Sa.test(a)?ia(a,this.context).index(this[0])>=0:ia.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=Sa.test(a)||"string"!=typeof a?ia(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c.ownerDocument&&c!==b&&11!==c.nodeType;){if(g?g.index(c)>-1:ia.find.matchesSelector(c,a)){f.push(c);break}c=c.parentNode}return this.pushStack(f.length>1?ia.unique(f):f)},index:function(a){return a?"string"==typeof a?ia.inArray(this[0],ia(a)):ia.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){var c="string"==typeof a?ia(a,b):ia.makeArray(a&&a.nodeType?[a]:a),d=ia.merge(this.get(),c);return this.pushStack(ia.unique(d))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),ia.fn.andSelf=ia.fn.addBack,ia.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return ia.dir(a,"parentNode")},parentsUntil:function(a,b,c){return ia.dir(a,"parentNode",c)},next:function(a){return k(a,"nextSibling")},prev:function(a){return k(a,"previousSibling")},nextAll:function(a){return ia.dir(a,"nextSibling")},prevAll:function(a){return ia.dir(a,"previousSibling")},nextUntil:function(a,b,c){return ia.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return ia.dir(a,"previousSibling",c)},siblings:function(a){return ia.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return ia.sibling(a.firstChild)},contents:function(a){return ia.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:ia.merge([],a.childNodes)}},function(a,b){ia.fn[a]=function(c,d){var e=ia.map(this,b,c);return Pa.test(a)||(d=c),d&&"string"==typeof d&&(e=ia.filter(d,e)),e=this.length>1&&!Ta[a]?ia.unique(e):e,this.length>1&&Qa.test(a)&&(e=e.reverse()),this.pushStack(e)}}),ia.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),1===b.length?ia.find.matchesSelector(b[0],a)?[b[0]]:[]:ia.find.matches(a,b)},dir:function(a,c,d){for(var e=[],f=a[c];f&&9!==f.nodeType&&(d===b||1!==f.nodeType||!ia(f).is(d));)1===f.nodeType&&e.push(f),f=f[c];return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var Ua="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Va=/ jQuery\d+="(?:null|\d+)"/g,Wa=new RegExp("<(?:"+Ua+")[\\s/>]","i"),Xa=/^\s+/,Ya=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Za=/<([\w:]+)/,$a=/<tbody/i,_a=/<|&#?\w+;/,ab=/<(?:script|style|link)/i,bb=/^(?:checkbox|radio)$/i,cb=/checked\s*(?:[^=]|=\s*.checked.)/i,db=/^$|\/(?:java|ecma)script/i,eb=/^true\/(.*)/,fb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,gb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ia.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},hb=m(W),ib=hb.appendChild(W.createElement("div"));gb.optgroup=gb.option,gb.tbody=gb.tfoot=gb.colgroup=gb.caption=gb.thead,gb.th=gb.td,ia.fn.extend({text:function(a){return ia.access(this,function(a){return a===b?ia.text(this):this.empty().append((this[0]&&this[0].ownerDocument||W).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(ia.isFunction(a))return this.each(function(b){ia(this).wrapAll(a.call(this,b))});if(this[0]){var b=ia(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return ia.isFunction(a)?this.each(function(b){ia(this).wrapInner(a.call(this,b))}):this.each(function(){var b=ia(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=ia.isFunction(a);return this.each(function(c){ia(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){ia.nodeName(this,"body")||ia(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||this.insertBefore(a,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,!1,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=0;null!=(c=this[d]);d++)(!a||ia.filter(a,[c]).length>0)&&(b||1!==c.nodeType||ia.cleanData(t(c)),c.parentNode&&(b&&ia.contains(c.ownerDocument,c)&&q(t(c,"script")),c.parentNode.removeChild(c)));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&ia.cleanData(t(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&ia.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return ia.clone(this,a,b)})},html:function(a){return ia.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return 1===c.nodeType?c.innerHTML.replace(Va,""):b;if("string"==typeof a&&!ab.test(a)&&(ia.support.htmlSerialize||!Wa.test(a))&&(ia.support.leadingWhitespace||!Xa.test(a))&&!gb[(Za.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Ya,"<$1></$2>");try{for(;e>d;d++)c=this[d]||{},1===c.nodeType&&(ia.cleanData(t(c,!1)),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){var b=ia.isFunction(a);return b||"string"==typeof a||(a=ia(a).not(this).detach()),this.domManip([a],!0,function(a){var b=this.nextSibling,c=this.parentNode;c&&(ia(this).remove(),c.insertBefore(a,b))})},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){a=ba.apply([],a);var e,f,g,h,i,j,k=0,l=this.length,m=this,q=l-1,r=a[0],s=ia.isFunction(r);if(s||!(1>=l||"string"!=typeof r||ia.support.checkClone)&&cb.test(r))return this.each(function(e){var f=m.eq(e);s&&(a[0]=r.call(this,e,c?f.html():b)),f.domManip(a,c,d)});if(l&&(j=ia.buildFragment(a,this[0].ownerDocument,!1,this),e=j.firstChild,1===j.childNodes.length&&(j=e),e)){for(c=c&&ia.nodeName(e,"tr"),h=ia.map(t(j,"script"),o),g=h.length;l>k;k++)f=j,k!==q&&(f=ia.clone(f,!0,!0),g&&ia.merge(h,t(f,"script"))),d.call(c&&ia.nodeName(this[k],"table")?n(this[k],"tbody"):this[k],f,k);if(g)for(i=h[h.length-1].ownerDocument,ia.map(h,p),k=0;g>k;k++)f=h[k],db.test(f.type||"")&&!ia._data(f,"globalEval")&&ia.contains(i,f)&&(f.src?ia.ajax({url:f.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):ia.globalEval((f.text||f.textContent||f.innerHTML||"").replace(fb,"")));j=e=null}return this}}),ia.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){ia.fn[a]=function(a){for(var c,d=0,e=[],f=ia(a),g=f.length-1;g>=d;d++)c=d===g?this:this.clone(!0),ia(f[d])[b](c),ca.apply(e,c.get());return this.pushStack(e)}}),ia.extend({clone:function(a,b,c){var d,e,f,g,h,i=ia.contains(a.ownerDocument,a);if(ia.support.html5Clone||ia.isXMLDoc(a)||!Wa.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(ib.innerHTML=a.outerHTML,ib.removeChild(f=ib.firstChild)),!(ia.support.noCloneEvent&&ia.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||ia.isXMLDoc(a)))for(d=t(f),h=t(a),g=0;null!=(e=h[g]);++g)d[g]&&s(e,d[g]);if(b)if(c)for(h=h||t(a),d=d||t(f),g=0;null!=(e=h[g]);g++)r(e,d[g]);else r(a,f);return d=t(f,"script"),d.length>0&&q(d,!i&&t(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k,l=a.length,n=m(b),o=[],p=0;l>p;p++)if(f=a[p],f||0===f)if("object"===ia.type(f))ia.merge(o,f.nodeType?[f]:f);else if(_a.test(f)){for(h=h||n.appendChild(b.createElement("div")),i=(Za.exec(f)||["",""])[1].toLowerCase(),k=gb[i]||gb._default,h.innerHTML=k[1]+f.replace(Ya,"<$1></$2>")+k[2],e=k[0];e--;)h=h.lastChild;if(!ia.support.leadingWhitespace&&Xa.test(f)&&o.push(b.createTextNode(Xa.exec(f)[0])),!ia.support.tbody)for(f="table"!==i||$a.test(f)?"<table>"!==k[1]||$a.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;e--;)ia.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j);for(ia.merge(o,h.childNodes),h.textContent="";h.firstChild;)h.removeChild(h.firstChild);h=n.lastChild}else o.push(b.createTextNode(f));for(h&&n.removeChild(h),ia.support.appendChecked||ia.grep(t(o,"input"),u),p=0;f=o[p++];)if((!d||-1===ia.inArray(f,d))&&(g=ia.contains(f.ownerDocument,f),h=t(n.appendChild(f),"script"),g&&q(h),c))for(e=0;f=h[e++];)db.test(f.type||"")&&c.push(f);return h=null,n},cleanData:function(a,b){for(var c,d,e,f,g=0,h=ia.expando,i=ia.cache,j=ia.support.deleteExpando,k=ia.event.special;null!=(c=a[g]);g++)if((b||ia.acceptData(c))&&(e=c[h],f=e&&i[e])){if(f.events)for(d in f.events)k[d]?ia.event.remove(c,d):ia.removeEvent(c,d,f.handle);i[e]&&(delete i[e],j?delete c[h]:typeof c.removeAttribute!==V?c.removeAttribute(h):c[h]=null,_.push(e))}}});var jb,kb,lb,mb=/alpha\([^)]*\)/i,nb=/opacity\s*=\s*([^)]*)/,ob=/^(top|right|bottom|left)$/,pb=/^(none|table(?!-c[ea]).+)/,qb=/^margin/,rb=new RegExp("^("+ja+")(.*)$","i"),sb=new RegExp("^("+ja+")(?!px)[a-z%]+$","i"),tb=new RegExp("^([+-])=("+ja+")","i"),ub={BODY:"block"},vb={position:"absolute",visibility:"hidden",display:"block"},wb={letterSpacing:0,fontWeight:400},xb=["Top","Right","Bottom","Left"],yb=["Webkit","O","Moz","ms"];ia.fn.extend({css:function(a,c){return ia.access(this,function(a,c,d){var e,f,g={},h=0;if(ia.isArray(c)){for(f=kb(a),e=c.length;e>h;h++)g[c[h]]=ia.css(a,c[h],!1,f);return g}return d!==b?ia.style(a,c,d):ia.css(a,c)},a,c,arguments.length>1)},show:function(){return x(this,!0)},hide:function(){return x(this)},toggle:function(a){var b="boolean"==typeof a;return this.each(function(){(b?a:w(this))?ia(this).show():ia(this).hide()})}}),ia.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=lb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ia.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h,i=ia.camelCase(c),j=a.style;if(c=ia.cssProps[i]||(ia.cssProps[i]=v(j,i)),h=ia.cssHooks[c]||ia.cssHooks[i],d===b)return h&&"get"in h&&(f=h.get(a,!1,e))!==b?f:j[c];if(g=typeof d,"string"===g&&(f=tb.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(ia.css(a,c)),g="number"),!(null==d||"number"===g&&isNaN(d)||("number"!==g||ia.cssNumber[i]||(d+="px"),ia.support.clearCloneStyle||""!==d||0!==c.indexOf("background")||(j[c]="inherit"),h&&"set"in h&&(d=h.set(a,d,e))===b)))try{j[c]=d}catch(k){}}},css:function(a,c,d,e){var f,g,h,i=ia.camelCase(c);return c=ia.cssProps[i]||(ia.cssProps[i]=v(a.style,i)),h=ia.cssHooks[c]||ia.cssHooks[i],h&&"get"in h&&(g=h.get(a,!0,d)),g===b&&(g=lb(a,c,e)),"normal"===g&&c in wb&&(g=wb[c]),""===d||d?(f=parseFloat(g),d===!0||ia.isNumeric(f)?f||0:g):g},swap:function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e}}),a.getComputedStyle?(kb=function(b){return a.getComputedStyle(b,null)},lb=function(a,c,d){var e,f,g,h=d||kb(a),i=h?h.getPropertyValue(c)||h[c]:b,j=a.style;return h&&(""!==i||ia.contains(a.ownerDocument,a)||(i=ia.style(a,c)),sb.test(i)&&qb.test(c)&&(e=j.width,f=j.minWidth,g=j.maxWidth,j.minWidth=j.maxWidth=j.width=i,i=h.width,j.width=e,j.minWidth=f,j.maxWidth=g)),i}):W.documentElement.currentStyle&&(kb=function(a){return a.currentStyle},lb=function(a,c,d){var e,f,g,h=d||kb(a),i=h?h[c]:b,j=a.style;return null==i&&j&&j[c]&&(i=j[c]),sb.test(i)&&!ob.test(c)&&(e=j.left,f=a.runtimeStyle,g=f&&f.left,g&&(f.left=a.currentStyle.left),j.left="fontSize"===c?"1em":i,i=j.pixelLeft+"px",j.left=e,g&&(f.left=g)),""===i?"auto":i}),ia.each(["height","width"],function(a,b){ia.cssHooks[b]={get:function(a,c,d){return c?0===a.offsetWidth&&pb.test(ia.css(a,"display"))?ia.swap(a,vb,function(){return A(a,b,d)}):A(a,b,d):void 0},set:function(a,c,d){var e=d&&kb(a);return y(a,c,d?z(a,b,d,ia.support.boxSizing&&"border-box"===ia.css(a,"boxSizing",!1,e),e):0)}}}),ia.support.opacity||(ia.cssHooks.opacity={get:function(a,b){return nb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=ia.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===ia.trim(f.replace(mb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=mb.test(f)?f.replace(mb,e):f+" "+e)}}),ia(function(){ia.support.reliableMarginRight||(ia.cssHooks.marginRight={get:function(a,b){return b?ia.swap(a,{display:"inline-block"},lb,[a,"marginRight"]):void 0}}),!ia.support.pixelPosition&&ia.fn.position&&ia.each(["top","left"],function(a,b){ia.cssHooks[b]={get:function(a,c){return c?(c=lb(a,b),sb.test(c)?ia(a).position()[b]+"px":c):void 0}}})}),ia.expr&&ia.expr.filters&&(ia.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!ia.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||ia.css(a,"display"))},ia.expr.filters.visible=function(a){return!ia.expr.filters.hidden(a)}),ia.each({margin:"",padding:"",border:"Width"},function(a,b){ia.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+xb[d]+b]=f[d]||f[d-2]||f[0];return e}},qb.test(a)||(ia.cssHooks[a+b].set=y)});var zb=/%20/g,Ab=/\[\]$/,Bb=/\r?\n/g,Cb=/^(?:submit|button|image|reset|file)$/i,Db=/^(?:input|select|textarea|keygen)/i;ia.fn.extend({serialize:function(){return ia.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=ia.prop(this,"elements");return a?ia.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!ia(this).is(":disabled")&&Db.test(this.nodeName)&&!Cb.test(a)&&(this.checked||!bb.test(a))}).map(function(a,b){var c=ia(this).val();return null==c?null:ia.isArray(c)?ia.map(c,function(a){return{name:b.name,value:a.replace(Bb,"\r\n")}}):{name:b.name,value:c.replace(Bb,"\r\n")}}).get()}}),ia.param=function(a,c){var d,e=[],f=function(a,b){b=ia.isFunction(b)?b():null==b?"":b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(c===b&&(c=ia.ajaxSettings&&ia.ajaxSettings.traditional),ia.isArray(a)||a.jquery&&!ia.isPlainObject(a))ia.each(a,function(){f(this.name,this.value)});else for(d in a)D(d,a[d],c,f);return e.join("&").replace(zb,"+")},ia.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){ia.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),ia.fn.hover=function(a,b){return this.mouseenter(a).mouseleave(b||a)};var Eb,Fb,Gb=ia.now(),Hb=/\?/,Ib=/#.*$/,Jb=/([?&])_=[^&]*/,Kb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Lb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Mb=/^(?:GET|HEAD)$/,Nb=/^\/\//,Ob=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Pb=ia.fn.load,Qb={},Rb={},Sb="*/".concat("*");try{Fb=X.href}catch(Tb){Fb=W.createElement("a"),Fb.href="",Fb=Fb.href}Eb=Ob.exec(Fb.toLowerCase())||[],ia.fn.load=function(a,c,d){if("string"!=typeof a&&Pb)return Pb.apply(this,arguments);var e,f,g,h=this,i=a.indexOf(" ");return i>=0&&(e=a.slice(i,a.length),a=a.slice(0,i)),ia.isFunction(c)?(d=c,c=b):c&&"object"==typeof c&&(g="POST"),h.length>0&&ia.ajax({url:a,type:g,dataType:"html",data:c}).done(function(a){f=arguments,h.html(e?ia("<div>").append(ia.parseHTML(a)).find(e):a)}).complete(d&&function(a,b){h.each(d,f||[a.responseText,b,a])}),this},ia.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){ia.fn[b]=function(a){return this.on(b,a)}}),ia.each(["get","post"],function(a,c){ia[c]=function(a,d,e,f){return ia.isFunction(d)&&(f=f||e,e=d,d=b),ia.ajax({url:a,type:c,dataType:f,data:d,success:e})}}),ia.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Fb,type:"GET",isLocal:Lb.test(Eb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Sb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":ia.parseJSON,"text xml":ia.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?G(G(a,ia.ajaxSettings),b):G(ia.ajaxSettings,a)},ajaxPrefilter:E(Qb),ajaxTransport:E(Rb),ajax:function(a,c){function d(a,c,d,e){var f,l,s,t,v,x=c;2!==u&&(u=2,i&&clearTimeout(i),k=b,h=e||"",w.readyState=a>0?4:0,d&&(t=H(m,w,d)),a>=200&&300>a||304===a?(m.ifModified&&(v=w.getResponseHeader("Last-Modified"),v&&(ia.lastModified[g]=v),v=w.getResponseHeader("etag"),v&&(ia.etag[g]=v)),204===a?(f=!0,x="nocontent"):304===a?(f=!0,x="notmodified"):(f=I(m,t),x=f.state,l=f.data,s=f.error,f=!s)):(s=x,!a&&x||(x="error",0>a&&(a=0))),w.status=a,w.statusText=(c||x)+"",f?p.resolveWith(n,[l,x,w]):p.rejectWith(n,[w,x,s]),w.statusCode(r),r=b,j&&o.trigger(f?"ajaxSuccess":"ajaxError",[w,m,f?l:s]),q.fireWith(n,[w,x]),j&&(o.trigger("ajaxComplete",[w,m]),--ia.active||ia.event.trigger("ajaxStop")))}"object"==typeof a&&(c=a,a=b),c=c||{};var e,f,g,h,i,j,k,l,m=ia.ajaxSetup({},c),n=m.context||m,o=m.context&&(n.nodeType||n.jquery)?ia(n):ia.event,p=ia.Deferred(),q=ia.Callbacks("once memory"),r=m.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,getResponseHeader:function(a){var b;if(2===u){if(!l)for(l={};b=Kb.exec(h);)l[b[1].toLowerCase()]=b[2];b=l[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===u?h:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return u||(a=t[c]=t[c]||a,s[a]=b),this},overrideMimeType:function(a){return u||(m.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>u)for(b in a)r[b]=[r[b],a[b]];else w.always(a[w.status]);return this},abort:function(a){var b=a||v;return k&&k.abort(b),d(0,b),this}};if(p.promise(w).complete=q.add,w.success=w.done,w.error=w.fail,m.url=((a||m.url||Fb)+"").replace(Ib,"").replace(Nb,Eb[1]+"//"),m.type=c.method||c.type||m.method||m.type,m.dataTypes=ia.trim(m.dataType||"*").toLowerCase().match(ka)||[""],null==m.crossDomain&&(e=Ob.exec(m.url.toLowerCase()),m.crossDomain=!(!e||e[1]===Eb[1]&&e[2]===Eb[2]&&(e[3]||("http:"===e[1]?80:443))==(Eb[3]||("http:"===Eb[1]?80:443)))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=ia.param(m.data,m.traditional)),F(Qb,m,c,w),2===u)return w;j=m.global,j&&0===ia.active++&&ia.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!Mb.test(m.type),g=m.url,m.hasContent||(m.data&&(g=m.url+=(Hb.test(g)?"&":"?")+m.data,delete m.data),m.cache===!1&&(m.url=Jb.test(g)?g.replace(Jb,"$1_="+Gb++):g+(Hb.test(g)?"&":"?")+"_="+Gb++)),m.ifModified&&(ia.lastModified[g]&&w.setRequestHeader("If-Modified-Since",ia.lastModified[g]),ia.etag[g]&&w.setRequestHeader("If-None-Match",ia.etag[g])),(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&w.setRequestHeader("Content-Type",m.contentType),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Sb+"; q=0.01":""):m.accepts["*"]);for(f in m.headers)w.setRequestHeader(f,m.headers[f]);if(m.beforeSend&&(m.beforeSend.call(n,w,m)===!1||2===u))return w.abort();v="abort";for(f in{success:1,error:1,complete:1})w[f](m[f]);if(k=F(Rb,m,c,w)){w.readyState=1,j&&o.trigger("ajaxSend",[w,m]),m.async&&m.timeout>0&&(i=setTimeout(function(){w.abort("timeout")},m.timeout));try{u=1,k.send(s,d)}catch(x){if(!(2>u))throw x;d(-1,x)}}else d(-1,"No Transport");return w},getScript:function(a,c){return ia.get(a,b,c,"script")},getJSON:function(a,b,c){return ia.get(a,b,c,"json")}}),ia.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return ia.globalEval(a),a}}}),ia.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),ia.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=W.head||ia("head")[0]||W.documentElement;return{send:function(b,e){c=W.createElement("script"),c.async=!0,a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,b){(b||!c.readyState||/loaded|complete/.test(c.readyState))&&(c.onload=c.onreadystatechange=null,c.parentNode&&c.parentNode.removeChild(c),c=null,b||e(200,"success"))},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(b,!0)}}}});var Ub=[],Vb=/(=)\?(?=&|$)|\?\?/;ia.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Ub.pop()||ia.expando+"_"+Gb++;return this[a]=!0,a}}),ia.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.jsonp!==!1&&(Vb.test(c.url)?"url":"string"==typeof c.data&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&Vb.test(c.data)&&"data");return i||"jsonp"===c.dataTypes[0]?(f=c.jsonpCallback=ia.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,i?c[i]=c[i].replace(Vb,"$1"+f):c.jsonp!==!1&&(c.url+=(Hb.test(c.url)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){return h||ia.error(f+" was not called"),h[0]},c.dataTypes[0]="json",g=a[f],a[f]=function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,Ub.push(f)),h&&ia.isFunction(g)&&g(h[0]),h=g=b}),"script"):void 0});var Wb,Xb,Yb=0,Zb=a.ActiveXObject&&function(){var a;for(a in Wb)Wb[a](b,!0)};ia.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&J()||K()}:J,Xb=ia.ajaxSettings.xhr(),ia.support.cors=!!Xb&&"withCredentials"in Xb,Xb=ia.support.ajax=!!Xb,Xb&&ia.ajaxTransport(function(c){if(!c.crossDomain||ia.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();if(c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async),c.xhrFields)for(h in c.xhrFields)i[h]=c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),c.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)i.setRequestHeader(h,e[h])}catch(j){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l;try{if(d&&(e||4===i.readyState))if(d=b,g&&(i.onreadystatechange=ia.noop,Zb&&delete Wb[g]),e)4!==i.readyState&&i.abort();else{l={},h=i.status,j=i.getAllResponseHeaders(),"string"==typeof i.responseText&&(l.text=i.responseText);try{k=i.statusText}catch(m){k=""}h||!c.isLocal||c.crossDomain?1223===h&&(h=204):h=l.text?200:404}}catch(n){e||f(-1,n)}l&&f(h,k,l,j)},c.async?4===i.readyState?setTimeout(d):(g=++Yb,Zb&&(Wb||(Wb={},ia(a).unload(Zb)),Wb[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(b,!0)}}}});var $b,_b,ac=/^(?:toggle|show|hide)$/,bc=new RegExp("^(?:([+-])=|)("+ja+")([a-z%]*)$","i"),cc=/queueHooks$/,dc=[P],ec={"*":[function(a,b){var c,d,e=this.createTween(a,b),f=bc.exec(b),g=e.cur(),h=+g||0,i=1,j=20;if(f){if(c=+f[2],d=f[3]||(ia.cssNumber[a]?"":"px"),"px"!==d&&h){h=ia.css(e.elem,a,!0)||c||1;do i=i||".5",h/=i,ia.style(e.elem,a,h+d);while(i!==(i=e.cur()/g)&&1!==i&&--j)}e.unit=d,e.start=h,e.end=f[1]?h+(f[1]+1)*c:c}return e}]};ia.Animation=ia.extend(N,{tweener:function(a,b){ia.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],ec[c]=ec[c]||[],ec[c].unshift(b)},prefilter:function(a,b){b?dc.unshift(a):dc.push(a)}}),ia.Tween=Q,Q.prototype={constructor:Q,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(ia.cssNumber[c]?"":"px")},cur:function(){var a=Q.propHooks[this.prop];return a&&a.get?a.get(this):Q.propHooks._default.get(this)},run:function(a){var b,c=Q.propHooks[this.prop];return this.options.duration?this.pos=b=ia.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Q.propHooks._default.set(this),this}},Q.prototype.init.prototype=Q.prototype,Q.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=ia.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){ia.fx.step[a.prop]?ia.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[ia.cssProps[a.prop]]||ia.cssHooks[a.prop])?ia.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Q.propHooks.scrollTop=Q.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},ia.each(["toggle","show","hide"],function(a,b){var c=ia.fn[b];ia.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(R(b,!0),a,d,e)}}),ia.fn.extend({fadeTo:function(a,b,c,d){return this.filter(w).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=ia.isEmptyObject(a),f=ia.speed(b,c,d),g=function(){var b=N(this,ia.extend({},a),f);g.finish=function(){b.stop(!0)},(e||ia._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return"string"!=typeof a&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=ia.timers,g=ia._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&cc.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem!==this||null!=a&&f[c].queue!==a||(f[c].anim.stop(d),b=!1,f.splice(c,1));!b&&d||ia.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=ia._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=ia.timers,g=d?d.length:0;for(c.finish=!0,ia.queue(this,a,[]),e&&e.cur&&e.cur.finish&&e.cur.finish.call(this),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),ia.each({slideDown:R("show"),slideUp:R("hide"),slideToggle:R("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){ia.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),ia.speed=function(a,b,c){var d=a&&"object"==typeof a?ia.extend({},a):{complete:c||!c&&b||ia.isFunction(a)&&a,duration:a,easing:c&&b||b&&!ia.isFunction(b)&&b};return d.duration=ia.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in ia.fx.speeds?ia.fx.speeds[d.duration]:ia.fx.speeds._default,null!=d.queue&&d.queue!==!0||(d.queue="fx"),d.old=d.complete,d.complete=function(){ia.isFunction(d.old)&&d.old.call(this),d.queue&&ia.dequeue(this,d.queue)},d},ia.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},ia.timers=[],ia.fx=Q.prototype.init,ia.fx.tick=function(){var a,c=ia.timers,d=0;for($b=ia.now();d<c.length;d++)a=c[d],a()||c[d]!==a||c.splice(d--,1);c.length||ia.fx.stop(),$b=b},ia.fx.timer=function(a){a()&&ia.timers.push(a)&&ia.fx.start()},ia.fx.interval=13,ia.fx.start=function(){_b||(_b=setInterval(ia.fx.tick,ia.fx.interval))},ia.fx.stop=function(){clearInterval(_b),_b=null},ia.fx.speeds={slow:600,fast:200,_default:400},ia.fx.step={},ia.expr&&ia.expr.filters&&(ia.expr.filters.animated=function(a){return ia.grep(ia.timers,function(b){return a===b.elem}).length}),ia.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){ia.offset.setOffset(this,a,b)});var c,d,e={top:0,left:0},f=this[0],g=f&&f.ownerDocument;if(g)return c=g.documentElement,ia.contains(c,f)?(typeof f.getBoundingClientRect!==V&&(e=f.getBoundingClientRect()),d=S(g),{top:e.top+(d.pageYOffset||c.scrollTop)-(c.clientTop||0),left:e.left+(d.pageXOffset||c.scrollLeft)-(c.clientLeft||0)}):e},ia.offset={setOffset:function(a,b,c){var d=ia.css(a,"position");"static"===d&&(a.style.position="relative");var e,f,g=ia(a),h=g.offset(),i=ia.css(a,"top"),j=ia.css(a,"left"),k=("absolute"===d||"fixed"===d)&&ia.inArray("auto",[i,j])>-1,l={},m={};k?(m=g.position(),e=m.top,f=m.left):(e=parseFloat(i)||0,f=parseFloat(j)||0),ia.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(l.top=b.top-h.top+e),null!=b.left&&(l.left=b.left-h.left+f),"using"in b?b.using.call(a,l):g.css(l)}},ia.fn.extend({position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===ia.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),ia.nodeName(a[0],"html")||(c=a.offset()),c.top+=ia.css(a[0],"borderTopWidth",!0),c.left+=ia.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-ia.css(d,"marginTop",!0),left:b.left-c.left-ia.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||W.documentElement;a&&!ia.nodeName(a,"html")&&"static"===ia.css(a,"position");)a=a.offsetParent;return a||W.documentElement})}}),ia.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);ia.fn[a]=function(e){return ia.access(this,function(a,e,f){var g=S(a);return f===b?g?c in g?g[c]:g.document.documentElement[e]:a[e]:void(g?g.scrollTo(d?ia(g).scrollLeft():f,d?f:ia(g).scrollTop()):a[e]=f)},a,e,arguments.length,null)}}),ia.each({Height:"height",Width:"width"},function(a,c){ia.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){ia.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!=typeof e),h=d||(e===!0||f===!0?"margin":"border");return ia.access(this,function(c,d,e){var f;return ia.isWindow(c)?c.document.documentElement["client"+a]:9===c.nodeType?(f=c.documentElement,
Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])):e===b?ia.css(c,d,h):ia.style(c,d,e,h)},c,g?e:b,g,null)}})}),a.jQuery=a.$=ia,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return ia})}(window),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){if(a.support.cors||!a.ajaxTransport||!window.XDomainRequest)return a;var b=/^(https?:)?\/\//i,c=/^get|post$/i,d=new RegExp("^(//|"+location.protocol+")","i");return a.ajaxTransport("* text html xml json",function(e,f,g){if(e.crossDomain&&e.async&&c.test(e.type)&&b.test(e.url)&&d.test(e.url)){var h=null;return{send:function(b,c){var d="",g=(f.dataType||"").toLowerCase();h=new XDomainRequest,/^\d+$/.test(f.timeout)&&(h.timeout=f.timeout),h.ontimeout=function(){c(500,"timeout")},h.onload=function(){var b="Content-Length: "+h.responseText.length+"\r\nContent-Type: "+h.contentType,d={code:200,message:"success"},e={text:h.responseText};try{if("html"===g||/text\/html/i.test(h.contentType))e.html=h.responseText;else if("json"===g||"text"!==g&&/\/json/i.test(h.contentType))try{e.json=a.parseJSON(h.responseText)}catch(f){d.code=500,d.message="parseerror"}else if("xml"===g||"text"!==g&&/\/xml/i.test(h.contentType)){var i=new ActiveXObject("Microsoft.XMLDOM");i.async=!1;try{i.loadXML(h.responseText)}catch(f){i=void 0}if(!i||!i.documentElement||i.getElementsByTagName("parsererror").length)throw d.code=500,d.message="parseerror","Invalid XML: "+h.responseText;e.xml=i}}catch(j){throw j}finally{c(d.code,d.message,e,b)}},h.onprogress=function(){},h.onerror=function(){c(500,"error",{text:h.responseText})},f.data&&(d="string"===a.type(f.data)?f.data:a.param(f.data)),h.open(e.type,e.url),h.send(d)},abort:function(){h&&h.abort()}}}}),a}),function(){this.define("root:jQuery",function(){return jQuery.noConflict(!0)})}.call(c),function(){"use strict";var a=function(b){function c(a,b,c){var e=this;e.opts={},e.getOpt=a.getOpt,e._prevProgress=0,e.resumableObj=a,e.file=b,e.fileName=b.fileName||b.name,e.size=b.size,e.relativePath=b.relativePath||b.webkitRelativePath||e.fileName,e.uniqueIdentifier=c,e._pause=!1,e.container="";var g=void 0!==c,h=function(a,b){switch(a){case"progress":e.resumableObj.fire("fileProgress",e);break;case"error":e.abort(),g=!0,e.chunks=[],e.resumableObj.fire("fileError",e,b);break;case"success":if(g)return;e.resumableObj.fire("fileProgress",e),e.isComplete()&&e.resumableObj.fire("fileSuccess",e,b);break;case"retry":e.resumableObj.fire("fileRetry",e)}};return e.chunks=[],e.abort=function(){var a=0;f.each(e.chunks,function(b){"uploading"==b.status()&&(b.abort(),a++)}),a>0&&e.resumableObj.fire("fileProgress",e)},e.cancel=function(){var a=e.chunks;e.chunks=[],f.each(a,function(a){"uploading"==a.status()&&(a.abort(),e.resumableObj.uploadNextChunk())}),e.resumableObj.removeFile(e),e.resumableObj.fire("fileProgress",e)},e.retry=function(){e.bootstrap();var a=!1;e.resumableObj.on("chunkingComplete",function(){a||e.resumableObj.upload(),a=!0})},e.bootstrap=function(){e.abort(),g=!1,e.chunks=[],e._prevProgress=0;for(var a=e.getOpt("forceChunkSize")?Math.ceil:Math.floor,b=Math.max(a(e.file.size/e.getOpt("chunkSize")),1),c=0;b>c;c++)!function(a){window.setTimeout(function(){e.chunks.push(new d(e.resumableObj,e,a,h)),e.resumableObj.fire("chunkingProgress",e,a/b)},0)}(c);window.setTimeout(function(){e.resumableObj.fire("chunkingComplete",e)},0)},e.progress=function(){if(g)return 1;var a=0,b=!1;return f.each(e.chunks,function(c){"error"==c.status()&&(b=!0),a+=c.progress(!0)}),a=b?1:a>.99999?1:a,a=Math.max(e._prevProgress,a),e._prevProgress=a,a},e.isUploading=function(){var a=!1;return f.each(e.chunks,function(b){return"uploading"==b.status()?(a=!0,!1):void 0}),a},e.isComplete=function(){var a=!1;return f.each(e.chunks,function(b){var c=b.status();return"pending"==c||"uploading"==c||1===b.preprocessState?(a=!0,!1):void 0}),!a},e.pause=function(a){"undefined"==typeof a?e._pause=!e._pause:e._pause=a},e.isPaused=function(){return e._pause},e.resumableObj.fire("chunkingStart",e),e.bootstrap(),this}function d(a,b,c,d){var e=this;e.opts={},e.getOpt=a.getOpt,e.resumableObj=a,e.fileObj=b,e.fileObjSize=b.size,e.fileObjType=b.file.type,e.offset=c,e.callback=d,e.lastProgressCallback=new Date,e.tested=!1,e.retries=0,e.pendingRetry=!1,e.preprocessState=0;var g=e.getOpt("chunkSize");return e.loaded=0,e.startByte=e.offset*g,e.endByte=Math.min(e.fileObjSize,(e.offset+1)*g),e.fileObjSize-e.endByte<g&&!e.getOpt("forceChunkSize")&&(e.endByte=e.fileObjSize),e.xhr=null,e.test=function(){e.xhr=new XMLHttpRequest;var a=function(a){e.tested=!0;var b=e.status();"success"==b?(e.callback(b,e.message()),e.resumableObj.uploadNextChunk()):e.send()};e.xhr.addEventListener("load",a,!1),e.xhr.addEventListener("error",a,!1),e.xhr.addEventListener("timeout",a,!1);var b=[],c=e.getOpt("parameterNamespace"),d=e.getOpt("query");"function"==typeof d&&(d=d(e.fileObj,e)),f.each(d,function(a,d){b.push([encodeURIComponent(c+a),encodeURIComponent(d)].join("="))}),b.push([c+e.getOpt("chunkNumberParameterName"),encodeURIComponent(e.offset+1)].join("=")),b.push([c+e.getOpt("chunkSizeParameterName"),encodeURIComponent(e.getOpt("chunkSize"))].join("=")),b.push([c+e.getOpt("currentChunkSizeParameterName"),encodeURIComponent(e.endByte-e.startByte)].join("=")),b.push([c+e.getOpt("totalSizeParameterName"),encodeURIComponent(e.fileObjSize)].join("=")),b.push([c+e.getOpt("typeParameterName"),encodeURIComponent(e.fileObjType)].join("=")),b.push([c+e.getOpt("identifierParameterName"),encodeURIComponent(e.fileObj.uniqueIdentifier)].join("=")),b.push([c+e.getOpt("fileNameParameterName"),encodeURIComponent(e.fileObj.fileName)].join("=")),b.push([c+e.getOpt("relativePathParameterName"),encodeURIComponent(e.fileObj.relativePath)].join("=")),b.push([c+e.getOpt("totalChunksParameterName"),encodeURIComponent(e.fileObj.chunks.length)].join("=")),e.xhr.open(e.getOpt("testMethod"),f.getTarget(b)),e.xhr.timeout=e.getOpt("xhrTimeout"),e.xhr.withCredentials=e.getOpt("withCredentials");var g=e.getOpt("headers");"function"==typeof g&&(g=g(e.fileObj,e)),f.each(g,function(a,b){e.xhr.setRequestHeader(a,b)}),e.xhr.send(null)},e.preprocessFinished=function(){e.preprocessState=2,e.send()},e.send=function(){var a=e.getOpt("preprocess");if("function"==typeof a)switch(e.preprocessState){case 0:return e.preprocessState=1,void a(e);case 1:return;case 2:}if(e.getOpt("testChunks")&&!e.tested)return void e.test();e.xhr=new XMLHttpRequest,e.xhr.upload.addEventListener("progress",function(a){new Date-e.lastProgressCallback>1e3*e.getOpt("throttleProgressCallbacks")&&(e.callback("progress"),e.lastProgressCallback=new Date),e.loaded=a.loaded||0},!1),e.loaded=0,e.pendingRetry=!1,e.callback("progress");var b=function(a){var b=e.status();if("success"==b||"error"==b)e.callback(b,e.message()),e.resumableObj.uploadNextChunk();else{e.callback("retry",e.message()),e.abort(),e.retries++;var c=e.getOpt("chunkRetryInterval");void 0!==c?(e.pendingRetry=!0,setTimeout(e.send,c)):e.send()}};e.xhr.addEventListener("load",b,!1),e.xhr.addEventListener("error",b,!1),e.xhr.addEventListener("timeout",b,!1);var c={};c[e.getOpt("chunkNumberParameterName")]=e.offset+1,c[e.getOpt("chunkSizeParameterName")]=e.getOpt("chunkSize"),c[e.getOpt("currentChunkSizeParameterName")]=e.endByte-e.startByte,c[e.getOpt("totalSizeParameterName")]=e.fileObjSize,c[e.getOpt("typeParameterName")]=e.fileObjType,c[e.getOpt("identifierParameterName")]=e.fileObj.uniqueIdentifier,c[e.getOpt("fileNameParameterName")]=e.fileObj.fileName,c[e.getOpt("relativePathParameterName")]=e.fileObj.relativePath,c[e.getOpt("totalChunksParameterName")]=e.fileObj.chunks.length;var d=e.getOpt("query");"function"==typeof d&&(d=d(e.fileObj,e)),f.each(d,function(a,b){c[a]=b});var g=e.fileObj.file.slice?"slice":e.fileObj.file.mozSlice?"mozSlice":e.fileObj.file.webkitSlice?"webkitSlice":"slice",h=e.fileObj.file[g](e.startByte,e.endByte),i=null,j=e.getOpt("target"),k=e.getOpt("parameterNamespace");if("octet"===e.getOpt("method")){i=h;var l=[];f.each(c,function(a,b){l.push([encodeURIComponent(k+a),encodeURIComponent(b)].join("="))}),j=f.getTarget(l)}else i=new FormData,f.each(c,function(a,b){i.append(k+a,b)}),i.append(k+e.getOpt("fileParameterName"),h);var m=e.getOpt("uploadMethod");e.xhr.open(m,j),"octet"===e.getOpt("method")&&e.xhr.setRequestHeader("Content-Type","binary/octet-stream"),e.xhr.timeout=e.getOpt("xhrTimeout"),e.xhr.withCredentials=e.getOpt("withCredentials");var n=e.getOpt("headers");"function"==typeof n&&(n=n(e.fileObj,e)),f.each(n,function(a,b){e.xhr.setRequestHeader(a,b)}),e.xhr.send(i)},e.abort=function(){e.xhr&&e.xhr.abort(),e.xhr=null},e.status=function(){return e.pendingRetry?"uploading":e.xhr?e.xhr.readyState<4?"uploading":200==e.xhr.status||201==e.xhr.status?"success":f.contains(e.getOpt("permanentErrors"),e.xhr.status)||e.retries>=e.getOpt("maxChunkRetries")?"error":(e.abort(),"pending"):"pending"},e.message=function(){return e.xhr?e.xhr.responseText:""},e.progress=function(a){"undefined"==typeof a&&(a=!1);var b=a?(e.endByte-e.startByte)/e.fileObjSize:1;if(e.pendingRetry)return 0;e.xhr&&e.xhr.status||(b*=.95);var c=e.status();switch(c){case"success":case"error":return 1*b;case"pending":return 0*b;default:return e.loaded/(e.endByte-e.startByte)*b}},this}if(!(this instanceof a))return new a(b);if(this.version=1,this.support=!("undefined"==typeof File||"undefined"==typeof Blob||"undefined"==typeof FileList||!Blob.prototype.webkitSlice&&!Blob.prototype.mozSlice&&!Blob.prototype.slice),!this.support)return!1;var e=this;e.files=[],e.defaults={chunkSize:1048576,forceChunkSize:!1,simultaneousUploads:3,fileParameterName:"file",chunkNumberParameterName:"resumableChunkNumber",chunkSizeParameterName:"resumableChunkSize",currentChunkSizeParameterName:"resumableCurrentChunkSize",totalSizeParameterName:"resumableTotalSize",typeParameterName:"resumableType",identifierParameterName:"resumableIdentifier",fileNameParameterName:"resumableFilename",relativePathParameterName:"resumableRelativePath",totalChunksParameterName:"resumableTotalChunks",throttleProgressCallbacks:.5,query:{},headers:{},preprocess:null,method:"multipart",uploadMethod:"POST",testMethod:"GET",prioritizeFirstAndLastChunk:!1,target:"/",parameterNamespace:"",testChunks:!0,generateUniqueIdentifier:null,getTarget:null,maxChunkRetries:void 0,chunkRetryInterval:void 0,permanentErrors:[400,404,415,500,501],maxFiles:void 0,withCredentials:!1,xhrTimeout:0,clearInput:!0,maxFilesErrorCallback:function(a,b){var c=e.getOpt("maxFiles");alert("Please upload no more than "+c+" file"+(1===c?"":"s")+" at a time.")},minFileSize:1,minFileSizeErrorCallback:function(a,b){alert(a.fileName||a.name+" is too small, please upload files larger than "+f.formatSize(e.getOpt("minFileSize"))+".")},maxFileSize:void 0,maxFileSizeErrorCallback:function(a,b){alert(a.fileName||a.name+" is too large, please upload files less than "+f.formatSize(e.getOpt("maxFileSize"))+".")},fileType:[],fileTypeErrorCallback:function(a,b){alert(a.fileName||a.name+" has type not allowed, please upload files of type "+e.getOpt("fileType")+".")}},e.opts=b||{},e.getOpt=function(b){var e=this;if(b instanceof Array){var g={};return f.each(b,function(a){g[a]=e.getOpt(a)}),g}if(e instanceof d){if("undefined"!=typeof e.opts[b])return e.opts[b];e=e.fileObj}if(e instanceof c){if("undefined"!=typeof e.opts[b])return e.opts[b];e=e.resumableObj}return e instanceof a?"undefined"!=typeof e.opts[b]?e.opts[b]:e.defaults[b]:void 0},e.events=[],e.on=function(a,b){e.events.push(a.toLowerCase(),b)},e.fire=function(){for(var a=[],b=0;b<arguments.length;b++)a.push(arguments[b]);for(var c=a[0].toLowerCase(),b=0;b<=e.events.length;b+=2)e.events[b]==c&&e.events[b+1].apply(e,a.slice(1)),"catchall"==e.events[b]&&e.events[b+1].apply(null,a);"fileerror"==c&&e.fire("error",a[2],a[1]),"fileprogress"==c&&e.fire("progress")};var f={stopEvent:function(a){a.stopPropagation(),a.preventDefault()},each:function(a,b){if("undefined"!=typeof a.length){for(var c=0;c<a.length;c++)if(b(a[c])===!1)return}else for(c in a)if(b(c,a[c])===!1)return},generateUniqueIdentifier:function(a){var b=e.getOpt("generateUniqueIdentifier");if("function"==typeof b)return b(a);var c=a.webkitRelativePath||a.fileName||a.name,d=a.size;return d+"-"+c.replace(/[^0-9a-zA-Z_-]/gim,"")},contains:function(a,b){var c=!1;return f.each(a,function(a){return a==b?(c=!0,!1):!0}),c},formatSize:function(a){return 1024>a?a+" bytes":1048576>a?(a/1024).toFixed(0)+" KB":1073741824>a?(a/1024/1024).toFixed(1)+" MB":(a/1024/1024/1024).toFixed(1)+" GB"},getTarget:function(a){var b=e.getOpt("target");return"function"==typeof b?b(a):(b+=b.indexOf("?")<0?"?":"&",b+a.join("&"))}},g=function(a){f.stopEvent(a),a.dataTransfer&&a.dataTransfer.items?j(a.dataTransfer.items,a):a.dataTransfer&&a.dataTransfer.files&&j(a.dataTransfer.files,a)},h=function(a){a.preventDefault()},i=0,j=function(a,b){e.fire("beforeAdd");var c,d,f,g;for(f=0,g=a.length;g>f;f++)d=a[f],null!=d.webkitGetAsEntry&&(c=d.webkitGetAsEntry())?c.isFile?(i++,m(d.getAsFile(),b)):c.isDirectory&&k(c,c.name,b):null!=d.getAsFile&&(null!=d.kind&&"file"!==d.kind||(i++,m(d.getAsFile(),b)))},k=function(a,b,c){var d,e;return d=a.createReader(),(e=function(){return function(){return d.readEntries(function(a){var d,f;if(a.length>0){for(f=0;f<a.length;f++)d=a[f],d.isFile?(i++,d.file(function(a){return a.relativePath="/"+b+"/"+a.name,m(a,c)},function(){i--})):d.isDirectory&&k(d,b+"/"+d.name,c);e()}return null})}}(this))()},l=[],m=function(a,b){a.relativePath||a.fullPath,l.push(a),l.length==i&&n(l,b)},n=function(a,b){var d=0,g=e.getOpt(["maxFiles","minFileSize","maxFileSize","maxFilesErrorCallback","minFileSizeErrorCallback","maxFileSizeErrorCallback","fileType","fileTypeErrorCallback"]);if("undefined"!=typeof g.maxFiles&&g.maxFiles<a.length+e.files.length){if(1!==g.maxFiles||1!==e.files.length||1!==a.length)return g.maxFilesErrorCallback(a,d++),!1;e.removeFile(e.files[0])}var h=[];f.each(a,function(a){function i(d){e.files.length?e.files.length:0;e.getFromUniqueIdentifier(d)||!function(){a.uniqueIdentifier=d;var f=new c(e,a,d);e.files.push(f),h.push(f),f.container="undefined"!=typeof b?b.srcElement:null,window.setTimeout(function(){e.fire("fileAdded",f,b)},0)}()}var j=a.name;if(g.fileType.length>0){var k=!1;for(var l in g.fileType){var m="."+g.fileType[l];if(-1!==j.indexOf(m,j.length-m.length)){k=!0;break}}if(!k)return g.fileTypeErrorCallback(a,d++),!1}if("undefined"!=typeof g.minFileSize&&a.size<g.minFileSize)return g.minFileSizeErrorCallback(a,d++),!1;if("undefined"!=typeof g.maxFileSize&&a.size>g.maxFileSize)return g.maxFileSizeErrorCallback(a,d++),!1;var n=f.generateUniqueIdentifier(a);n&&"function"==typeof n.done&&"function"==typeof n.fail?n.done(function(a){i(a)}).fail(function(){i()}):i(n)}),window.setTimeout(function(){e.fire("filesAdded",h)},0)};return e.uploadNextChunk=function(){var a=!1;if(e.getOpt("prioritizeFirstAndLastChunk")&&(f.each(e.files,function(b){return b.chunks.length&&"pending"==b.chunks[0].status()&&0===b.chunks[0].preprocessState?(b.chunks[0].send(),a=!0,!1):b.chunks.length>1&&"pending"==b.chunks[b.chunks.length-1].status()&&0===b.chunks[b.chunks.length-1].preprocessState?(b.chunks[b.chunks.length-1].send(),a=!0,!1):void 0}),a))return!0;if(f.each(e.files,function(b){return b.isPaused()===!1&&f.each(b.chunks,function(b){return"pending"==b.status()&&0===b.preprocessState?(b.send(),a=!0,!1):void 0}),a?!1:void 0}),a)return!0;var b=!1;return f.each(e.files,function(a){return a.isComplete()?void 0:(b=!0,!1)}),b||e.fire("complete"),!1},e.assignBrowse=function(a,b){"undefined"==typeof a.length&&(a=[a]),f.each(a,function(a){var c;"INPUT"===a.tagName&&"file"===a.type?c=a:(c=document.createElement("input"),c.setAttribute("type","file"),c.style.display="none",a.addEventListener("click",function(){c.style.opacity=0,c.style.display="block",c.focus(),c.click(),c.style.display="none"},!1),a.appendChild(c));var d=e.getOpt("maxFiles");"undefined"==typeof d||1!=d?c.setAttribute("multiple","multiple"):c.removeAttribute("multiple"),b?c.setAttribute("webkitdirectory","webkitdirectory"):c.removeAttribute("webkitdirectory"),c.addEventListener("change",function(a){n(a.target.files,a);var b=e.getOpt("clearInput");b&&(a.target.value="")},!1)})},e.assignDrop=function(a){"undefined"==typeof a.length&&(a=[a]),f.each(a,function(a){a.addEventListener("dragover",h,!1),a.addEventListener("dragenter",h,!1),a.addEventListener("drop",g,!1)})},e.unAssignDrop=function(a){"undefined"==typeof a.length&&(a=[a]),f.each(a,function(a){a.removeEventListener("dragover",h),a.removeEventListener("dragenter",h),a.removeEventListener("drop",g)})},e.isUploading=function(){var a=!1;return f.each(e.files,function(b){return b.isUploading()?(a=!0,!1):void 0}),a},e.upload=function(){if(!e.isUploading()){e.fire("uploadStart");for(var a=1;a<=e.getOpt("simultaneousUploads");a++)e.uploadNextChunk()}},e.pause=function(){f.each(e.files,function(a){a.abort()}),e.fire("pause")},e.cancel=function(){e.fire("beforeCancel");for(var a=e.files.length-1;a>=0;a--)e.files[a].cancel();e.fire("cancel")},e.progress=function(){var a=0,b=0;return f.each(e.files,function(c){a+=c.progress()*c.size,b+=c.size}),b>0?a/b:0},e.addFile=function(a,b){n([a],b)},e.removeFile=function(a){for(var b=e.files.length-1;b>=0;b--)e.files[b]===a&&e.files.splice(b,1)},e.getFromUniqueIdentifier=function(a){var b=!1;return f.each(e.files,function(c){c.uniqueIdentifier==a&&(b=c)}),b},e.getSize=function(){var a=0;return f.each(e.files,function(b){a+=b.size}),a},e.handleDropEvent=function(a){g(a)},e.handleChangeEvent=function(a){n(a.target.files,a),a.target.value=""},this};"undefined"!=typeof module?module.exports=a:"function"==typeof define&&define.amd?define(function(){return a}):window.Resumable=a}(),function(){this.define("root:Resumable",function(){var a=window.Resumable;try{window.Resumable=void 0,delete window.Resumable}catch(b){}return a})}.call(c),function(){var a=this.subScope();a.binding("module","root:BetaJS"),a.define("module:",function(){return{guid:"71366f7a-7da3-4e55-9a0b-ea0e4e2a9e79",version:"522.1469105192226"}}),a.define("module:Types",function(){return{is_object:function(a){return"object"==typeof a},is_array:function(a){return Array.isArray(a)},is_undefined:function(a){return"undefined"==typeof a},is_null:function(a){return null===a},is_none:function(a){return this.is_undefined(a)||this.is_null(a)},is_defined:function(a){return"undefined"!=typeof a},is_empty:function(a){return this.is_none(a)||this.is_array(a)&&0===a.length||this.is_object(a)&&this.is_empty_object(a)},is_empty_object:function(a){for(var b in a)return!1;return!0},is_string:function(a){return"string"==typeof a},is_function:function(a){return"function"==typeof a},is_boolean:function(a){return"boolean"==typeof a},compare:function(a,b){if(this.is_boolean(a)&&this.is_boolean(b))return a==b?0:a?1:-1;if(this.is_array(a)&&this.is_array(b)){for(var c=a.length,d=b.length,e=Math.min(c,d),f=0;e>f;++f){var g=this.compare(a[f],b[f]);if(0!==g)return g}return c==d?0:c>d?1:-1}return a.localeCompare(b)},parseBool:function(a){return this.is_boolean(a)?a:"true"===a||""===a?!0:"false"===a?!1:null},parseArray:function(a){return a.split(",")},type_of:function(a){return this.is_array(a)?"array":typeof a},parseType:function(a,b){return this.is_string(a)?(b=b.toLowerCase(),"bool"==b||"boolean"==b?this.parseBool(a):"int"==b||"integer"==b?parseInt(a,10):"date"==b||"time"==b||"datetime"==b?parseInt(a,10):"float"==b||"double"==b?parseFloat(a):"array"==b?this.parseArray(a):"object"==b?JSON.parse(a):a):a},objectType:function(a){if(!this.is_object(a))return null;var b=a.toString().match(/\[object (.*)\]/);return b?b[1]:null},is_pure_object:function(a){return this.is_object(a)&&("[object]"===a.toString().toLowerCase()||"[object object]"===a.toString().toLowerCase())}}}),a.define("module:Objs",["module:Types"],function(a){return{ithKey:function(a,b){b=b||0;for(var c in a){if(0>=b)return c;--b}return null},count:function(b){if(a.is_array(b))return b.length;var c=0;for(var d in b)c++;return c},clone:function(b,c){return c&&0!==c?a.is_array(b)?b.slice(0):a.is_object(b)?this.extend({},b,c-1):b:b},acyclic_clone:function(b){if(null===b||!a.is_object(b))return b;var c="__acyclic_cloned";if(b[c])return b[c];var d={};b[c]=d;for(var e in b)e!==c&&(d[e]=this.acyclic_clone(b[e]));return delete b[c],d},extend:function(a,b,c){if(a=a||{},b)for(var d in b)a[d]=this.clone(b[d],c);return a},weak_extend:function(a,b,c){if(a=a||{},b)for(var d in b)d in a||(a[d]=this.clone(b[d],c));return a},tree_extend:function(b,c,d){if(b=b||{},c)for(var e in c)e in b&&a.is_object(b[e])&&a.is_object(c[e])&&!a.is_array(b[e])&&!a.is_array(c[e])?b[e]=this.tree_extend(b[e],c[e],d):b[e]=this.clone(c[e],d);return b},keys:function(b,c){var d=null,e=null;if(a.is_undefined(c)){d=[];for(e in b)d.push(e);return d}d={};for(e in b)d[e]=c;return d},merge:function(b,c,d){b=b||{},c=c||{};var e={},f=this.extend(this.keys(b,!0),this.keys(c,!0));for(var g in f){var h=g in d?d[g]:"primary";"primary"==h||"secondary"==h?(g in c||g in b)&&("primary"==h?e[g]=g in c?c[g]:b[g]:e[g]=g in b?b[g]:c[g]):a.is_function(h)?e[g]=h(b[g],c[g]):a.is_object(h)&&(e[g]=this.merge(b[g],c[g],h))}return e},tree_merge:function(b,c){b=b||{},c=c||{};var d={},e=this.extend(this.keys(b,!0),this.keys(c,!0));for(var f in e)a.is_object(c[f])&&b[f]?d[f]=this.tree_merge(b[f],c[f]):d[f]=f in c?c[f]:b[f];return d},map:function(b,c,d){var e=null;if(a.is_array(b)){e=[];for(var f=0;f<b.length;++f)e.push(d?c.apply(d,[b[f],f]):c(b[f],f));return e}e={};for(var g in b)e[g]=d?c.apply(d,[b[g],g]):c(b[g],g);return e},keyMap:function(a,b,c){result={};for(var d in a)result[b.call(c||this,a[d],d)]=a[d];return result},values:function(a){var b=[];for(var c in a)b.push(a[c]);return b},filter:function(b,c,d){if(c=c||function(a){return!!a},a.is_array(b))return b.filter(c,d);var e={};for(var f in b)(d?c.apply(d,[b[f],f]):c(b[f],f))&&(e[f]=b[f]);return e},equals:function(a,b,c){var d=null;if(c&&c>0){for(d in a)if(!(d in b&&this.equals(a[d],b[d],c-1)))return!1;for(d in b)if(!(d in a))return!1;return!0}return a==b},iter:function(b,c,d){var e=null;if(a.is_array(b)){for(var f=0;f<b.length;++f)if(e=d?c.apply(d,[b[f],f]):c(b[f],f),a.is_defined(e)&&!e)return!1}else for(var g in b)if(e=d?c.apply(d,[b[g],g]):c(b[g],g),a.is_defined(e)&&!e)return!1;return!0},intersect:function(a,b){var c={};for(var d in a)d in b&&(c[d]=a[d]);return c},subset_of:function(b,c){b=a.is_array(b)?this.objectify(b):b,c=a.is_array(c)?this.objectify(c):c;for(var d in b)if(b[d]!=c[d])return!1;return!0},superset_of:function(a,b){return this.subset_of(b,a)},contains_key:function(b,c){return a.is_array(b)?a.is_defined(b[c]):c in b},contains_value:function(b,c){if(a.is_array(b)){for(var d=0;d<b.length;++d)if(b[d]===c)return!0}else for(var e in b)if(b[e]===c)return!0;return!1},exists:function(a,b,c){var d=!1;return this.iter(a,function(){return d=d||b.apply(this,arguments),!d},c),d},all:function(a,b,c){var d=!0;return this.iter(a,function(){return d=d&&b.apply(this,arguments)},c),d},objectify:function(b,c,d){var e={},f=a.is_function(c);a.is_undefined(c)&&(c=!0);for(var g=0;g<b.length;++g)e[b[g]]=f?c.apply(d||this,[b[g],g]):c;return e},peek:function(b){if(a.is_array(b))return b.length>0?b[0]:null;for(var c in b)return b[c];return null},poll:function(b){if(a.is_array(b))return b.shift();for(var c in b){var d=b[c];return delete b[c],d}return null},objectBy:function(){for(var a={},b=arguments.length/2,c=0;b>c;++c)a[arguments[2*c]]=arguments[2*c+1];return a},valueByIndex:function(b,c){if(c=c||0,a.is_array(b))return b[c];for(var d in b){if(0===c)return b[d];c--}return null},keyByIndex:function(b,c){if(c=c||0,a.is_array(b))return c;for(var d in b){if(0===c)return d;c--}return null},pairArrayToObject:function(a){for(var b={},c=0;c<a.length/2;c+=2)b[a[c]]=a[c+1];return b},pairsToObject:function(){for(var a={},b=0;b<arguments.length;++b)a[arguments[b][0]]=arguments[b][1];return a},specialize:function(a,b,c){var d={},e=c?a:b;for(var f in e)f in a&&a[f]==b[f]||(d[f]=b[f]);return d}}}),a.define("module:Functions",["module:Types"],function(a){return{as_method:function(a,b){return function(){return a.apply(b,arguments)}},once:function(a){var b=!1,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},getArguments:function(a,b){return Array.prototype.slice.call(a,b||0)},matchArgs:function(b,c,d){arguments.length<3&&(d=c,c=0);var e=c,f={};for(var g in d){var h=d[g];h===!0?h={required:!0}:"string"==typeof h&&(h={type:h}),h.required||h.type&&a.type_of(b[e])==h.type?(f[g]=b[e],e++):h.def&&(f[g]=a.is_function(h.def)?h.def(f):h.def)}return f},newClassFunc:function(a){return function(){function b(){return a.apply(this,c)}var c=arguments;return b.prototype=a.prototype,new b}},newClass:function(a){return this.newClassFunc(a).apply(this,this.getArguments(arguments,1))},callWithin:function(b,c){return a.is_string(c)&&(c=b[c]),c.apply(b,this.getArguments(arguments,2))}}}),a.define("module:Ids",["module:Types","module:Objs"],function(a,b){return{__uniqueId:0,uniqueId:function(a){return(a||"")+this.__uniqueId++},objectId:function(a,b){return a?(void 0!==b?a.__cid=b:a.__cid||(a.__cid=this.uniqueId("cid_")),a.__cid):void 0},uniqueKey:function(c,d){return d&&d>0&&(a.is_object(c)||a.is_array(c))?JSON.stringify(b.map(c,function(a){return this.uniqueKey(a,d-1)},this)):null!==c&&a.is_object(c)||a.is_array(c)||a.is_function(c)?this.objectId(c):c}}}),a.define("module:Class",["module:Types","module:Objs","module:Functions","module:Ids"],function(b,c,d,e){var f=function(){};return f.extend=function(d,e,f,g){e=e||[],b.is_array(e)||(e=[e]),f=f||[],b.is_array(f)||(f=[f]),g=g||[],b.is_array(g)||(g=[g]);var h=this;e=c.map(e,function(a){return b.is_function(a)&&(a=a(h.prototype)),a});var i;c.iter(e,function(a){a.hasOwnProperty("constructor")&&(i=a.constructor)});var j=b.is_defined(i);j||(i=function(){h.prototype.constructor.apply(this,arguments)}),c.extend(i,h),c.iter(f,function(a){a=b.is_function(a)?a(h):a;var d=i._extender;c.extend(i,a),a._extender&&(i._extender=c.extend(c.clone(d,1),a._extender))});var k={};if(h.__class_statics_keys)for(var l in h.__class_statics_keys)i[l]=c.clone(h[l],1);c.iter(g,function(a){c.extend(i,a),c.extend(k,c.keys(a,!0))}),h.__class_statics_keys&&c.extend(k,h.__class_statics_keys),i.__class_statics_keys=k,i.parent=h,i.children=[],i.extend=this.extend,h.children||(h.children=[]),h.children.push(i);var m=function(){};m.prototype=h.prototype,i.prototype=new m,i.prototype.cls=i,d=c.extend({},b.is_string(d)?{classname:d,register:!0}:d);var n=d.classname;return d.scoped&&(n=d.scoped.ns.path),i.classname=n,n&&d.register&&a.setGlobal(n,i),i.__notifications={},i.__implements={},h.__notifications&&c.extend(i.__notifications,h.__notifications,1),h.__implements&&c.extend(i.__implements,h.__implements,1),c.iter(e,function(a){for(var d in a)i.prototype[d]=i._extender&&d in i._extender?i._extender[d](i.prototype[d],a[d]):a[d];if("constructor"in a&&(i.prototype.constructor=a.constructor),a._notifications)for(var e in a._notifications)i.__notifications[e]||(i.__notifications[e]=[]),i.__notifications[e].push(a._notifications[e]);a._implements&&c.iter(b.is_string(a._implements)?[a._implements]:a._implements,function(a){i.__implements[a]=!0})}),delete i.prototype._notifications,delete i.prototype._implements,j||(i.prototype.constructor=h.prototype.constructor),i},c.extend(f,{classname:"Class",__class_guid:"0f5499f9-f0d1-4c6c-a561-ef026a1eee05",__notifications:{},ancestor_of:function(a){return this==a||this!=f&&this.parent.ancestor_of(a)},is_class:function(a){return a&&b.is_object(a)&&"__class_guid"in a&&a.__class_guid==this.__class_guid},is_class_instance:function(a){return a&&b.is_object(a)&&"__class_instance_guid"in a&&a.__class_instance_guid==this.prototype.__class_instance_guid},is_pure_json:function(a){return a&&b.is_object(a)&&!this.is_class_instance(a)&&b.is_pure_object(a)},is_instance_of:function(a){return a&&this.is_class_instance(a)&&a.instance_of(this)},define:function(c,e){var f=d.getArguments(arguments,2);return b.is_object(c)?a.define(e,[],function(a){return f.unshift({scoped:a}),c.extend.apply(c,f)}):a.define(e,[c],function(a,b){return f.unshift({scoped:b}),a.extend.apply(a,f)})},_inherited:function(a,b){return a.parent[b].apply(this,Array.prototype.slice.apply(arguments,[2]))}}),f.prototype.__class_instance_guid="e6b0ed30-80ee-4b28-af02-7d52430ba45f",f.prototype.constructor=function(){this._notify("construct")},f.prototype.destroy=function(){if(this._notify("destroy"),this.__auto_destroy_list)for(var a=0;a<this.__auto_destroy_list.length;++a)"destroy"in this.__auto_destroy_list[a]&&this.__auto_destroy_list[a].weakDestroy();var b=this.cid();for(var c in this)delete this[c];e.objectId(this,b),this.destroy=this.__destroyedDestroy},f.prototype.destroyed=function(){return this.destroy===this.__destroyedDestroy},f.prototype.weakDestroy=function(){if(!this.destroyed()){if(this.__gc)return void this.__gc.queue(this);this.destroy()}},f.prototype.__destroyedDestroy=function(){throw"Trying to destroy destroyed object "+this.cid()+": "+this.cls.classname+"."},f.prototype.enableGc=function(a){this.supportsGc&&(this.__gc=a)},f.prototype.dependDestroy=function(a){a.destroyed||(this.__gc&&a.enableGc(),a.weakDestroy())},f.prototype.cid=function(){return e.objectId(this)},f.prototype.cls=f,f.prototype.as_method=function(a){return d.as_method(this[a],this)},f.prototype.auto_destroy=function(a){if(a){this.__auto_destroy_list||(this.__auto_destroy_list=[]);var c=a;b.is_array(c)||(c=[c]);for(var d=0;d<c.length;++d)this.__auto_destroy_list.push(c[d])}return a},f.prototype._notify=function(a){if(this.cls.__notifications){var d=Array.prototype.slice.call(arguments,1);c.iter(this.cls.__notifications[a],function(c){var e=b.is_function(c)?c:this[c];if(!e)throw this.cls.classname+": Could not find "+a+" notification handler "+c;e.apply(this,d)},this)}},f.prototype.impl=function(a){return!(!this.cls.__implements||!this.cls.__implements[b.is_string(a)?a:a._implements])},f.prototype.instance_of=function(a){return this.cls.ancestor_of(a)},f.prototype.increaseRef=function(){this.__referenceCount=this.__referenceCount||0,this.__referenceCount++},f.prototype.decreaseRef=function(){this.__referenceCount=this.__referenceCount||0,this.__referenceCount--,this.__referenceCount<=0&&this.weakDestroy()},f.prototype.inspect=function(){return{header:{cid:this.cid(),classname:this.cls.classname,destroyed:this.destroyed()},attributes:{attributes_public:c.filter(this,function(a,c){return!b.is_function(a)&&0!==c.indexOf("_")},this),attributes_protected:c.filter(this,function(a,c){return!b.is_function(a)&&0===c.indexOf("_")&&0!==c.indexOf("__")},this),attributes_private:c.filter(this,function(a,c){return!b.is_function(a)&&0===c.indexOf("__")},this)},methods:{methods_public:c.filter(this,function(a,c){return b.is_function(a)&&0!==c.indexOf("_")},this),methods_protected:c.filter(this,function(a,c){return b.is_function(a)&&0===c.indexOf("_")&&0!==c.indexOf("__")},this),method_private:c.filter(this,function(a,c){return b.is_function(a)&&0===c.indexOf("__")},this)}}},f.prototype._auto_destroy=function(a){return this.auto_destroy(a)},f.prototype._inherited=function(a,b){return a.parent.prototype[b].apply(this,Array.prototype.slice.apply(arguments,[2]))},f}),a.define("module:Strings",["module:Objs"],function(a){return{padLeft:function(a,b,c){for(;a.length<c;)a=b+a;return a},padZeros:function(a,b){return this.padLeft(a+"","0",b)},nl2br:function(a){return(a+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />$2")},htmlentities:function(a){return(a+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},JS_ESCAPES:{"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},JS_ESCAPER_REGEX:function(){
return this.JS_ESCAPER_REGEX_CACHED||(this.JS_ESCAPER_REGEX_CACHED=new RegExp(a.keys(this.JS_ESCAPES).join("|"),"g")),this.JS_ESCAPER_REGEX_CACHED},js_escape:function(a){var b=this;return a.replace(this.JS_ESCAPER_REGEX(),function(a){return"\\"+b.JS_ESCAPES[a]})},starts_with:function(a,b){return a.substring(0,b.length)==b},ends_with:function(a,b){return-1!==a.indexOf(b,a.length-b.length)},strip_start:function(a,b){return this.starts_with(a,b)?a.substring(b.length):a},last_after:function(a,b){return this.splitLast(a,b).tail},first_after:function(a,b){return a.substring(a.indexOf(b)+1,a.length)},EMAIL_ADDRESS_REGEX:/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,is_email_address:function(a){return this.EMAIL_ADDRESS_REGEX.test(a)},STRIP_HTML_TAGS:["script","style","head"],STRIP_HTML_REGEX:/<\/?([a-z][a-z0-9]*)\b[^>]*>?/gi,STRIP_HTML_COMMENT_REGEX:/<![^>]*>/gi,strip_html:function(a){for(var b=a,c=0;c<this.STRIP_HTML_TAGS.length;++c)b=b.replace(new RegExp("<"+this.STRIP_HTML_TAGS[c]+".*</"+this.STRIP_HTML_TAGS[c]+">","i"),"");return b=b.replace(this.STRIP_HTML_REGEX,"").replace(this.STRIP_HTML_COMMENT_REGEX,"")},nltrim:function(a){var b=a.replace(/\t/g,"  ").split("\n"),c=null,d=0;for(d=0;d<b.length;++d){for(var e=0;e<b[d].length&&" "==b[d].charAt(e);)++e;e<b[d].length&&(c=null===c?e:Math.min(e,c))}for(d=0;d<b.length;++d)b[d]=b[d].substring(c);return b.join("\n").trim()},replaceAll:function(a,b,c){for(;a.indexOf(b)>=0;)a=a.replace(b,c);return a},capitalize:function(a){return a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})},email_get_name:function(a){a=a||"";var b=a.split("<");return a=b[0].trim(),!a&&b.length>1&&(b=b[1].split(">"),a=b[0].trim()),a=a.replace(/['"]/g,"").replace(/[\\._@]/g," "),this.capitalize(a)},email_get_email:function(a){a=a||"";var b=a.split("<");return a=b[0].trim(),b.length>1&&(b=b[1].split(">"),a=b[0].trim()),a=a.replace(/'/g,"").replace(/"/g,"").trim()},email_get_salutatory_name:function(a){return this.email_get_name(a||"").split(" ")[0]},splitFirst:function(a,b){var c=a.indexOf(b);return{head:c>=0?a.substring(0,c):a,tail:c>=0?a.substring(c+b.length):""}},splitLast:function(a,b){var c=a.lastIndexOf(b);return{head:c>=0?a.substring(0,c):"",tail:c>=0?a.substring(c+b.length):a}},regexReplaceGroups:function(a,b){for(var c=/\(.*?\)/,d=function(a){return e?e:a.substring(1,a.length-1)};b.length>0;){var e=b.shift();a=a.replace(c,d)}return a},namedCaptureRegex:function(b){var c={},d=0,e=new RegExp(b.replace(/\([^)]+\)/gi,function(a){if("?"!=a.charAt(1)&&a.indexOf(":")>0){var b=a.indexOf(":");c[a.substring(1,b)]=d,a="("+a.substring(b+1,a.length-1)+")"}return d++,a})),f=function(b){return a.map(c,function(a){return b[a+1]})},g=function(a){var b=e.exec(a);return b?f(b):null},h=function(a){for(var b=[],e=0;d>e;++e)b.push(null);for(var f in a)f in c&&(b[c[f]]=a[f]);return b};return{regex:e,map:f,exec:g,mapBack:h}}}}),a.define("module:Templates",["module:Types","module:Strings"],function(a,b){return{tokenize:function(c){if(a.is_array(c))return c;var d=[],e=0,f=this;return c.replace(f.SYNTAX_REGEX(),function(a,g,h,i,j){return j>e&&d.push({type:f.TOKEN_STRING,data:b.js_escape(c.slice(e,j))}),i&&d.push({type:f.TOKEN_CODE,data:i}),g&&d.push({type:f.TOKEN_EXPR,data:g}),h&&d.push({type:f.TOKEN_ESC,data:h}),e=j+a.length,a}),d},compile:function(c,d){a.is_string(c)&&(c=this.tokenize(c)),d=d||{};for(var e=d.start_index||0,f=d.end_index||c.length,g="__p+='",h=e;f>h;++h)switch(c[h].type){case this.TOKEN_STRING:g+=c[h].data;break;case this.TOKEN_CODE:g+="';\n"+c[h].data+"\n__p+='";break;case this.TOKEN_EXPR:g+="'+\n((__t=("+c[h].data+"))==null?'':__t)+\n'";break;case this.TOKEN_ESC:g+="'+\n((__t=("+c[h].data+"))==null?'':Helpers.Strings.htmlentities(__t))+\n'"}g+="';\n",g="with(obj||{}){\n"+g+"}\n",g="var __t,__p='',__j=Array.prototype.join,echo=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";var i=new Function("obj","Helpers",g),j=function(a){return i.call(this,a,{Strings:b})};return j.source="function(obj, Helpers){\n"+g+"}",j},SYNTAX:{OPEN:"{%",CLOSE:"%}",MODIFIER_CODE:"",MODIFIER_EXPR:"=",MODIFIER_ESC:"-"},SYNTAX_REGEX:function(){var a=this.SYNTAX;return this.SYNTAX_REGEX_CACHED||(this.SYNTAX_REGEX_CACHED=new RegExp(a.OPEN+a.MODIFIER_EXPR+"([\\s\\S]+?)"+a.CLOSE+"|"+a.OPEN+a.MODIFIER_ESC+"([\\s\\S]+?)"+a.CLOSE+"|"+a.OPEN+a.MODIFIER_CODE+"([\\s\\S]+?)"+a.CLOSE+"|$","g")),this.SYNTAX_REGEX_CACHED},TOKEN_STRING:1,TOKEN_CODE:2,TOKEN_EXPR:3,TOKEN_ESC:4}}),a.define("module:Templates.Template",["module:Class","module:Templates"],function(a,b,c){return a.extend({scoped:c},function(a){return{constructor:function(c){a.constructor.call(this),this.__tokens=b.tokenize(c),this.__compiled=b.compile(this.__tokens)},evaluate:function(a){return this.__compiled.apply(this,[a])}}})}),a.define("module:Time",[],function(){return{__components:{year:{set:function(a,b){a.setUTCFullYear(b)},get:function(a){return a.getUTCFullYear()}},month:{set:function(a,b){a.setUTCMonth(b)},get:function(a){return a.getUTCMonth()}},day:{dependencies:{weekday:!0},set:function(a,b){a.setUTCDate(b+1)},get:function(a){return a.getUTCDate()-1},milliseconds:864e5},weekday:{dependencies:{day:!0,month:!0,year:!0},set:function(a,b){a.setUTCDate(a.getUTCDate()+b-a.getUTCDay())},get:function(a){return a.getUTCDay()}},hour:{set:function(a,b){a.setUTCHours(b)},get:function(a){return a.getUTCHours()},max:23,milliseconds:36e5},minute:{set:function(a,b){a.setUTCMinutes(b)},get:function(a){return a.getUTCMinutes()},max:59,milliseconds:6e4},second:{set:function(a,b){a.setUTCSeconds(b)},get:function(a){return a.getUTCSeconds()},max:59,milliseconds:1e3},millisecond:{set:function(a,b){a.setUTCMilliseconds(b)},get:function(a){return a.getUTCMilliseconds()},max:999,milliseconds:1}},timezoneBias:function(a){return a===!0&&(a=(new Date).getTimezoneOffset()),"undefined"!=typeof a&&null!==a&&a!==!1||(a=0),60*a*1e3},timeToDate:function(a,b){return new Date(a+this.timezoneBias(b))},dateToTime:function(a,b){return a.getTime()-this.timezoneBias(b)},timeToTimezoneBasedDate:function(a,b){return new Date(a-this.timezoneBias(b))},timezoneBasedDateToTime:function(a,b){return a.getTime()+this.timezoneBias(b)},decodeTime:function(a,b){var c=this.timeToTimezoneBasedDate(a||this.now(),b),d={};for(var e in this.__components)d[e]=this.__components[e].get(c);return d},encodeTime:function(a,b){return this.updateTime(this.now(),a,b)},encodePeriod:function(a){return this.incrementTime(0,a)},updateTime:function(a,b,c){var d=this.timeToTimezoneBasedDate(a,c);for(var e in b)this.__components[e].set(d,b[e]);return this.timezoneBasedDateToTime(d,c)},now:function(a){return this.dateToTime(new Date,a)},incrementTime:function(a,b){var c=this.timeToDate(a);for(var d in b)this.__components[d].set(c,this.__components[d].get(c)+b[d]);return this.dateToTime(c)},floorTime:function(a,b,c){var d=this.timeToTimezoneBasedDate(a,c),e=!1;for(var f in this.__components){var g=this.__components[f];e=e||f==b,!e||g.dependencies&&g.dependencies[b]||g.set(d,0)}return this.timezoneBasedDateToTime(d,c)},ago:function(a,b){return this.now(b)-a},timeComponent:function(a,b,c){return Math[c||"floor"](a/this.__components[b].milliseconds)},timeComponentGet:function(a,b,c){return this.__components[b].get(this.timeToTimezoneBasedDate(a,c))},timeModulo:function(a,b,c){return this.timeComponent(a,b,c)%(this.__components[b].max+1)}}}),a.define("module:Timers.Timer",["module:Class","module:Objs","module:Time"],function(a,b,c,d){return a.extend({scoped:d},function(a){return{constructor:function(d){a.constructor.call(this),d=b.extend({once:!1,start:!0,fire:null,context:this,destroy_on_fire:!1,destroy_on_stop:!1,real_time:!1,duration:null,fire_max:null,immediate:!1},d),this.__immediate=d.immediate,this.__delay=d.delay,this.__destroy_on_fire=d.destroy_on_fire,this.__destroy_on_stop=d.destroy_on_stop,this.__once=d.once,this.__fire=d.fire,this.__context=d.context,this.__started=!1,this.__real_time=d.real_time,this.__end_time=null!==d.duration?c.now()+d.duration:null,this.__fire_max=d.fire_max,d.start&&this.start()},destroy:function(){this.stop(),a.destroy.call(this)},fire_count:function(){return this.__fire_count},duration:function(){return c.now()-this.__start_time},fire:function(){if(this.__once&&(this.__started=!1),this.__fire&&(this.__fire.call(this.__context,this),this.__fire_count++,this.__real_time&&!this.__destroy_on_fire&&!this.__once))for(;(this.__fire_count+1)*this.__delay<=c.now()-this.__start_time;)this.__fire.call(this.__context,this),this.__fire_count++;(null!==this.__end_time&&c.now()+this.__delay>this.__end_time||null!==this.__fire_max&&this.__fire_max<=this.__fire_count)&&this.stop(),this.__destroy_on_fire&&this.weakDestroy()},stop:function(){return this.__started?(this.__once?clearTimeout(this.__timer):clearInterval(this.__timer),this.__started=!1,this.__destroy_on_stop&&this.weakDestroy(),this):this},start:function(){if(this.__started)return this;var a=this;return this.__start_time=c.now(),this.__fire_count=0,this.__once?this.__timer=setTimeout(function(){a.fire()},this.__delay):this.__timer=setInterval(function(){a.fire()},this.__delay),this.__started=!0,this.__immediate&&this.fire(),this},restart:function(){return this.stop(),this.start(),this}}})}),a.define("module:Async",["module:Types","module:Functions"],function(a,b){var c={},d=1;return{waitFor:function(){var a=b.matchArgs(arguments,{condition:!0,conditionCtx:"object",callback:!0,callbackCtx:"object",interval:"int"}),c=function(){try{return!!a.condition.apply(a.conditionCtx||a.callbackCtx||this)}catch(b){return!1}};if(c())a.callback.apply(a.callbackCtx||this);else var d=setInterval(function(){c()&&(clearInterval(d),a.callback.apply(a.callbackCtx||this))},a.interval||1)},eventually:function(){var a=b.matchArgs(arguments,{func:!0,params:"array",context:"object",time:"number"}),c=setTimeout(function(){clearTimeout(c),a.func.apply(a.context||this,a.params||[])},a.time||0);return c},clearEventually:function(a){clearTimeout(a)},eventuallyOnce:function(a,b,e){var f={func:a,params:b,context:e};for(var g in c){var h=c[g];if(h.func==a&&h.params==b&&h.context==e)return}d++;var i=d;return c[i]=f,this.eventually(function(){delete c[i],a.apply(e||this,b||[])},this)}}}),a.define("module:Promise",["module:Types","module:Functions","module:Async","module:Objs"],function(a,b,c,d){var e={Promise:function(a,b,c){this.__value=b?null:a||null,this.__error=b?b:null,this.__isFinished=c,this.__hasError=!!b,this.__resultPromise=null,this.__callbacks=[]},create:function(a,b){return new this.Promise(a,b,arguments.length>0)},value:function(a){return this.is(a)?a:new this.Promise(a,null,!0)},eventualValue:function(a){var b=new this.Promise;return c.eventually(function(){b.asyncSuccess(a)}),b},error:function(a){return this.is(a)?a:new this.Promise(null,a,!0)},box:function(a,b,c){try{var d=a.apply(b||this,c||[]);return this.is(d)?d:this.value(d)}catch(e){return this.error(e)}},tryCatch:function(a,b){try{return this.value(a.apply(b||this))}catch(c){return this.error(c)}},funcCallback:function(c,d){var e=b.getArguments(arguments,1);a.is_function(c)?(e=b.getArguments(arguments,1),d=c,c=this):e=b.getArguments(arguments,2);var f=this.create();return e.push(f.asyncCallbackFunc()),d.apply(c,e),f},and:function(b){var c=this.create();return c.__promises=[],c.__successCount=0,c.__values=[],c.__errorPromise=null,c.and=function(b){if(b=b||[],this.__ended)return this;a.is_array(b)||(b=[b]);for(var c=function(a,c){a?this.__errorPromise=b[this.idx]:(this.promise.__successCount++,this.promise.__values[this.idx]=c),this.promise.results()},d=0;d<b.length;++d){var e=this.__promises.length;this.__promises.push(b[d]),this.__values.push(null),b[d].isFinished()?b[d].hasValue()?(this.__successCount++,this.__values[e]=b[d].value()):this.__errorPromise=b[d]:b[d].callback(c,{promise:this,idx:e})}return this},c.end=function(){return this.__ended?this:(this.__ended=!0,this.results(),this)},c.results=function(){return this.__ended&&this.__errorPromise?this.asyncError(this.__errorPromise.err(),this.__errorPromise):this.__ended&&this.__successCount==this.__promises.length&&this.asyncSuccess(this.__values),this},c.successUnfold=function(a,b,c){return this.success(function(){return a.apply(b,arguments)},b,c)},c.and(b),c},func:function(a){for(var c=b.getArguments(arguments,1),d=[],e=0;e<c.length;++e)this.is(c[e])&&d.push(c[e]);var f=this.create();return this.and(d).end().success(function(b){for(var d=[],e=0;e<c.length;++e)d[e]=this.is(c[e])?c[e].value():c[e];var g=a.apply(this,d);this.is(g)?g.forwardCallback(f):f.asyncSuccess(g)},this).forwardError(f),f},methodArgs:function(a,b,c){return c.unshift(function(){return b.apply(a,arguments)}),this.func.apply(this,c)},method:function(a,c){return this.methodArgs(a,c,b.getArguments(arguments,2))},newClass:function(a){var c=b.getArguments(arguments,1);return c.unshift(b.newClassFunc(a)),this.func.apply(this,c)},is:function(b){return b&&a.is_object(b)&&b.classGuid==this.Promise.prototype.classGuid},resilience:function(a,b,c,d){return a.apply(b,d).mapError(function(e){return 0===c?e:this.resilience(a,b,c-1,d)},this)}};return d.extend(e.Promise.prototype,{classGuid:"7e3ed52f-22da-4e9c-95a4-e9bb877a3935",success:function(a,b,c){return this.callback(a,b,c,"success")},error:function(a,b,c){return this.callback(a,b,c,"error")},callback:function(a,b,c,d){"end"in this&&this.end();var e={type:d||"callback",func:a,options:c||{},context:b};return this.__isFinished?this.triggerResult(e):this.__callbacks.push(e),this},triggerResult:function(a){if(!this.__isFinished)return this;if(a)"success"!=a.type||this.__hasError?"error"==a.type&&this.__hasError?a.func.call(a.context||this,this.__error,this.__resultPromise||this):"callback"==a.type&&a.func.call(a.context||this,this.__error,this.__value,this.__resultPromise||this):a.func.call(a.context||this,this.__value,this.__resultPromise||this);else{var b=this.__callbacks;this.__callbacks=[];for(var c=0;c<b.length;++c)this.triggerResult(b[c])}return this},value:function(){return this.__value},err:function(){return this.__error},isFinished:function(){return this.__isFinished},hasValue:function(){return this.__isFinished&&!this.__hasError},hasError:function(){return this.__isFinished&&this.__hasError},asyncSuccess:function(a,b){return this.__isFinished?this:(this.__resultPromise=b,this.__error=null,this.__isFinished=!0,this.__hasError=!1,this.__value=a,this.triggerResult())},forwardSuccess:function(a){return this.success(a.asyncSuccess,a),this},asyncError:function(a,b){return this.__isFinished?this:(this.__resultPromise=b,this.__isFinished=!0,this.__hasError=!0,this.__error=a,this.__value=null,this.triggerResult())},forwardError:function(a){return this.error(a.asyncError,a),this},asyncCallback:function(a,b,c){return a?this.asyncError(a,c):this.asyncSuccess(b,c)},asyncCallbackFunc:function(){return b.as_method(this.asyncCallback,this)},forwardCallback:function(a){return this.callback(a.asyncCallback,a),this},mapSuccess:function(a,b){var c=e.create();return this.forwardError(c).success(function(d,f){var g=a.call(b||c,d,f);e.is(g)?g.forwardCallback(c):c.asyncSuccess(g)}),c},mapError:function(a,b){var c=e.create();return this.forwardSuccess(c).error(function(d,f){var g=a.call(b||c,d,f);e.is(g)?g.forwardCallback(c):c.asyncError(g)}),c},mapCallback:function(a,b){var c=e.create();return this.callback(function(d,f,g){var h=a.call(b||c,d,f,g);e.is(h)?h.forwardCallback(c):c.asyncCallback(d?h:d,d?f:h,g)}),c},and:function(a){var b=e.and(this);return b.and(a)}}),e}),a.define("module:Iterators.Iterator",["module:Class","module:Functions","module:Async","module:Promise"],function(a,b,c,d,e){return a.extend({scoped:e},{hasNext:function(){return!1},next:function(){return null},nextOrNull:function(){return this.hasNext()?this.next():null},asArray:function(){for(var a=[];this.hasNext();)a.push(this.next());return a},asArrayDelegate:function(a){for(var c=[];this.hasNext();){var d=this.next();c.push(d[a].apply(d,b.getArguments(arguments,1)))}return c},iterate:function(a,b){for(;this.hasNext();){var c=a.call(b||this,this.next());if(c===!1)return}},asyncIterate:function(a,b,e){if(!this.hasNext())return d.value(!0);var f=a.call(b||this,this.next());if(f===!1)return d.value(!0);var g=d.create();return c.eventually(function(){this.asyncIterate(a,b,e).forwardCallback(g)},this,e),g}})}),a.define("module:Iterators.ArrayIterator",["module:Iterators.Iterator"],function(a,b){return a.extend({scoped:b},function(a){return{constructor:function(b){a.constructor.call(this),this.__array=b,this.__i=0},hasNext:function(){return this.__i<this.__array.length},next:function(){var a=this.__array[this.__i];return this.__i++,a}}},{byIterate:function(a,b){var c=[];return a.call(b||this,function(a){c.push(a)},this),new this(c)}})}),a.define("module:Lists.AbstractList",["module:Class","module:Objs","module:Types","module:Iterators.ArrayIterator"],function(a,b,c,d,e){return a.extend({scoped:e},function(a){return{_add:function(a){},_remove:function(a){},_get:function(a){},_iterate:function(a,b){},get_ident:function(a){var b=null;return this._iterate(function(c,d){return c==a?(b=d,!1):!0}),b},exists:function(a){return a&&null!==this.get_ident(a)},_ident_changed:function(a,b){},constructor:function(c){a.constructor.call(this),this.__count=0,c&&b.iter(c,function(a){this.add(a)},this)},add:function(a){var b=this._add(a);return c.is_defined(b)&&this.__count++,b},count:function(){return this.__count},clear:function(){this._iterate(function(a,b){return this.remove_by_ident(b),!0},this)},remove_by_ident:function(a){var b=this._remove(a);return c.is_defined(b)&&this.__count--,b},remove:function(a){return this.remove_by_ident(this.get_ident(a))},remove_by_filter:function(a){this._iterate(function(b,c){return a(b)&&this.remove_by_ident(c),!0},this)},get:function(a){return this._get(a)},iterate:function(a,b){this._iterate(function(b,d){var e=a.apply(this,[b,d]);return c.is_defined(e)?e:!0},b)},iterator:function(){return d.byIterate(this.iterate,this)}}})}),a.define("module:Lists.LinkedList",["module:Lists.AbstractList"],function(a,b){return a.extend({scoped:b},{__first:null,__last:null,_add:function(a){return this.__last={obj:a,prev:this.__last,next:null},this.__first?this.__last.prev.next=this.__last:this.__first=this.__last,this.__last},_remove:function(a){return a.next?a.next.prev=a.prev:this.__last=a.prev,a.prev?a.prev.next=a.next:this.__first=a.next,a.obj},_get:function(a){return a.obj},_iterate:function(a,b){for(var c=this.__first;c;){var d=c;if(c=c.next,!a.apply(b||this,[d.obj,d]))return}}})}),a.define("module:Events.EventsMixin",["module:Timers.Timer","module:Async","module:Lists.LinkedList","module:Functions","module:Types","module:Objs"],function(a,b,c,d,e,f){return{_implements:"3d63b44f-c9f0-4aa7-b39e-7cbf195122b4",_notifications:{construct:function(){this.__suspendedEvents=0,this.__suspendedEventsQueue=[]},destroy:function(){this.off(null,null,null)}},EVENT_SPLITTER:/\s+/,__create_event_object:function(b,c,d){d=d||{};var e={callback:b,context:c};return d.eventually&&(e.eventually=d.eventually),d.min_delay&&(e.min_delay=new a({delay:d.min_delay,once:!0,start:!1,context:this,fire:function(){e.max_delay&&e.max_delay.stop(),e.callback.apply(e.context||this,e.params)}})),d.max_delay&&(e.max_delay=new a({delay:d.max_delay,once:!0,start:!1,context:this,fire:function(){e.min_delay&&e.min_delay.stop(),e.callback.apply(e.context||this,e.params)}})),e},__destroy_event_object:function(a){a.min_delay&&a.min_delay.destroy(),a.max_delay&&a.max_delay.destroy()},__call_event_object:function(a,c){a.min_delay&&a.min_delay.restart(),a.max_delay&&a.max_delay.start(),a.min_delay||a.max_delay?a.params=c:a.eventually?b.eventually(a.callback,c,a.context||this):a.callback.apply(a.context||this,c)},on:function(a,b,d,e){this.__events_mixin_events=this.__events_mixin_events||{},a=a.split(this.EVENT_SPLITTER);for(var f;;){if(f=a.shift(),!f)break;this.__events_mixin_events[f]||this._notify("register_event",f),this.__events_mixin_events[f]=this.__events_mixin_events[f]||new c;var g=this.__create_event_object(b,d,e);if(this.__events_mixin_events[f].add(g),this.__events_mixin_persistent_events&&this.__events_mixin_persistent_events[f])for(var h=this.__events_mixin_persistent_events[f],i=0;i<h.length;++i)this.__call_event_object(g,h[i])}return this},off:function(a,b,c){return this.__events_mixin_events=this.__events_mixin_events||{},a?(a=a.split(this.EVENT_SPLITTER),f.iter(a,function(a){this.__events_mixin_events[a]&&(this.__events_mixin_events[a].remove_by_filter(function(a){var d=!(b&&a.callback!=b||c&&a.context!=c);return d&&this.__destroy_event_object&&this.__destroy_event_object(a),d}),0===this.__events_mixin_events[a].count()&&(this.__events_mixin_events[a].destroy(),delete this.__events_mixin_events[a],this._notify("unregister_event",a)))},this)):f.iter(this.__events_mixin_events,function(a,d){a.remove_by_filter(function(a){var d=!(b&&a.callback!=b||c&&a.context!=c);return d&&this.__destroy_event_object&&this.__destroy_event_object(a),d}),0===a.count()&&(a.destroy(),delete this.__events_mixin_events[d],this._notify("unregister_event",d))},this),this},triggerAsync:function(){var a=this,b=d.getArguments(arguments),c=setTimeout(function(){clearTimeout(c),a.trigger.apply(a,b)},0)},trigger:function(a){if(this.__suspendedEvents>0)return this.__suspendedEventsQueue.push(arguments),this;var b=this;a=a.split(this.EVENT_SPLITTER);var c=d.getArguments(arguments,1);return this.__events_mixin_events?(f.iter(a,function(a){this.__events_mixin_events[a]&&this.__events_mixin_events[a].iterate(function(a){b.__call_event_object(a,c)}),this.__events_mixin_events&&"all"in this.__events_mixin_events&&this.__events_mixin_events.all.iterate(function(d){b.__call_event_object(d,[a].concat(c))})},this),this):this},persistentTrigger:function(a){this.trigger.apply(this,arguments),a=a.split(this.EVENT_SPLITTER);var b=d.getArguments(arguments,1);this.__events_mixin_persistent_events=this.__events_mixin_persistent_events||[],f.iter(a,function(a){this.__events_mixin_persistent_events[a]=this.__events_mixin_persistent_events[a]||[],this.__events_mixin_persistent_events[a].push(b)},this)},once:function(a,b,c,e){var f=this,g=d.once(function(){f.off(a,g),b.apply(this,arguments)});return g._callback=b,this.on(a,g,c,e)},delegateEvents:function(a,b,c,g){g=g||[],c=c?c+":":"",null===a?b.on("all",function(a){var b=d.getArguments(arguments,1);this.trigger.apply(this,[c+a].concat(g).concat(b))},this):(e.is_array(a)||(a=[a]),f.iter(a,function(a){b.on(a,function(){var b=d.getArguments(arguments);this.trigger.apply(this,[c+a].concat(g).concat(b))},this)},this))},_eventChain:function(){},chainedTrigger:function(a,b){if(b=f.extend({source:this,bubbles:!0},b),this.trigger(a,b),b.bubbles){var c=this._eventChain();c&&c.chainedTrigger&&c.chainedTrigger(a,b)}},suspendEvents:function(){this.__suspendedEvents++},resumeEvents:function(){this.__suspendedEvents--,0===this.__suspendedEvents&&(f.iter(this.__suspendedEventsQueue,function(a){this.trigger.apply(this,a)},this),this.__suspendedEventsQueue=[])}}}),a.define("module:Tokens",function(){return{generate_token:function(a){a=a||16;for(var b="";b.length<a;)b+=Math.random().toString(36).substr(2);return b.substr(0,a)},simple_hash:function(a){var b=0;if(!a.length)return b;for(var c,d=0,e=a.length;e>d;++d)c=a.charCodeAt(d),b=(b<<5)-b+c,b&=b;return Math.abs(b)}}}),a.define("module:Net.Uri",["module:Objs","module:Types","module:Strings"],function(a,b,c){var d=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,f=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],g=/(?:^|&)([^&=]*)=?([^&]*)/g;return{build:function(a){var b="";return a.protocol&&(b+=a.protocol+"://"),a.username&&(b+=a.username+":"),a.password&&(b+=a.password+"@"),b+=a.server,a.port&&(b+=":"+a.port),a.path&&(b+="/"+a.path),b},encodeUriParams:function(c,d){d=d||"";var e=[];return a.iter(c,function(a,c){b.is_object(a)?e=e.concat(this.encodeUriParams(a,d+c+"_")):e.push(d+c+"="+encodeURIComponent(a))},this),e.join("&")},decodeUriParams:function(a){var b={};return a.split("&").forEach(function(a){var d=c.splitFirst(a,"=");b[d.head]=decodeURIComponent(d.tail)}),b},appendUriParams:function(a,c,d){return b.is_empty(c)?a:a+(-1!=a.indexOf("?")?"&":"?")+this.encodeUriParams(c,d)},parse:function(a,b){for(var c=b?d:e,h=c.exec(a),i={},j=0;j<f.length;++j)i[f[j]]=h[j]||"";return i.queryKey={},i[f[12]].replace(g,function(a,b,c){b&&(i.queryKey[b]=c)}),i}}}),a.define("module:Classes.ConditionalInstance",["module:Class","module:Objs"],function(a,b,c){return a.extend({scoped:c},function(a){return{constructor:function(b){a.constructor.call(this),this._options=this.cls._initializeOptions(b)}}},{_initializeOptions:function(a){return a},supported:function(a){return!1}},{__registry:[],register:function(a,b){this.__registry.push({cls:a,priority:b})},match:function(a){a=this._initializeOptions(a);var c=null;return b.iter(this.__registry,function(b){(!c||c.priority<b.priority)&&b.cls.supported(a)&&(c=b)},this),c},create:function(a){var b=this.match(a);return b?new b.cls(a):null},anySupport:function(a){return null!==this.match(a)}})}),a.define("module:Classes.OptimisticConditionalInstance",["module:Class","module:Objs","module:Promise"],function(a,b,c,d){return a.extend({scoped:d},function(a){return{constructor:function(b,c){a.constructor.call(this),this._transitionals={}},_initializer:function(){},_initialize:function(){return this._initializer().success(function(){this._afterInitialize()},this)},transitionals:function(){return this._transitionals},_afterInitialize:function(){}}},{},{__registry:[],register:function(a,b){this.__registry.push({cls:a,priority:b})},create:function(a){var d=c.create(),e=b.clone(this.__registry,1),f={},g=function(){if(!e.length)return void d.asyncError(!0);for(var b=-1,c=-1,h=0;h<e.length;++h)e[h].priority>b&&(b=e[h].priority,c=h);var i=e[c].cls;e.splice(c,1);var j=new i(a,f);j._initialize().error(function(){f=j.transitionals(),j.destroy(),g.call(this)},this).success(function(){d.asyncSuccess(j)})};return g.call(this),d}})}),a.define("module:JavaScript",["module:Objs"],function(a){return{STRING_SINGLE_QUOTATION_REGEX:/'[^']*'/g,STRING_DOUBLE_QUOTATION_REGEX:/"[^"]*"/g,IDENTIFIER_REGEX:/[a-zA-Z_][a-zA-Z_0-9]*/g,IDENTIFIER_SCOPE_REGEX:/[a-zA-Z_][a-zA-Z_0-9\.]*/g,RESERVED:a.objectify(["if","then","else","return","var"],!0),isReserved:function(a){return a in this.RESERVED},isIdentifier:function(a){return!this.isReserved(a)},removeStrings:function(a){return a.replace(this.STRING_SINGLE_QUOTATION_REGEX,"").replace(this.STRING_DOUBLE_QUOTATION_REGEX,"")},extractIdentifiers:function(b,c){var d=c?this.IDENTIFIER_SCOPE_REGEX:this.IDENTIFIER_REGEX;return b=this.removeStrings(b),a.filter(b.match(d),this.isIdentifier,this)}}}),a.define("module:Classes.ClassRegistry",["module:Class","module:Types","module:Functions","module:Objs"],function(a,b,c,d,e){return a.extend({scoped:e},function(a){return{constructor:function(c,d){a.constructor.call(this),this._classes=b.is_array(c)?c:[c||{}],this._lowercase=d},_sanitize:function(a){return this._lowercase?a.toLowerCase():a},register:function(a,b){this._classes[this._classes.length-1][this._sanitize(a)]=b},get:function(a){if(!b.is_string(a))return a;a=this._sanitize(a);for(var c=this._classes.length-1;c>=0;--c)if(a in this._classes[c])return this._classes[c][a];return null},create:function(a){var b=c.newClassFunc(this.get(a));return b.apply(this,c.getArguments(arguments,1))},classes:function(){var a={};return d.iter(this._classes,function(b){a=d.extend(a,b)}),a}}})}),a.define("module:Objs.Scopes",["module:Types"],function(a){return{has:function(b,c){for(var d=b?b.split("."):[],e=0;e<d.length;++e){if(!c||!a.is_object(c))return!1;c=c[d[e]]}return a.is_defined(c)},get:function(b,c){for(var d=b?b.split("."):[],e=0;e<d.length;++e){if(!c||!a.is_object(c))return null;c=c[d[e]]}return c},set:function(b,c,d){if(b){for(var e=b.split("."),f=0;f<e.length-1;++f)e[f]in d&&a.is_object(d[e[f]])||(d[e[f]]={}),d=d[e[f]];d[e[e.length-1]]=c}},unset:function(b,c){if(b){for(var d=b.split("."),e=0;e<d.length-1;++e){if(!c||!a.is_object(c))return;c=c[d[e]]}delete c[d[d.length-1]]}},touch:function(b,c){if(!b)return c;for(var d=b.split("."),e=0;e<d.length;++e)d[e]in c&&a.is_object(c)||(c[d[e]]={}),c=c[d[e]];return c[d[d.length-1]]}}}),a.define("module:Properties.PropertiesMixin",["module:Objs.Scopes","module:Objs","module:Strings","module:Types","module:Functions"],function(a,b,c,d,e){return{_notifications:{construct:function(){this.__properties={data:{},watchers:{children:{},eventCount:0,parent:null,key:null},computed:{},bindings:{}},b.iter(this.materializes,function(a){this.materializeAttr(a)},this)},destroy:function(){b.iter(this.__properties.bindings,function(a,b){this.unbind(b)},this),this.trigger("destroy")},register_event:function(a){b.iter(["change","unset","deepchange","deepunset","strongdeepchange","strongchange"],function(b){c.starts_with(a,b+":")&&this.__registerWatcher(c.strip_start(a,b+":"),b)},this)},unregister_event:function(a){b.iter(["change","unset","deepchange","deepunset","strongdeepchange","strongchange"],function(b){c.starts_with(a,b+":")&&this.__unregisterWatcher(c.strip_start(a,b+":"),b)},this)}},materializes:[],_resolveProps:function(a){for(var b={props:this,key:a},e=this.data();a;){if(!e||!d.is_object(e))return b;if(e.__properties_guid===this.__properties_guid)return e._resolveProps(a);var f=c.splitFirst(a,".");if(!(f.head in e))return b;a=f.tail,e=e[f.head]}return b},getProp:function(a){var b=this._resolveProps(a);return b.props.get(b.key)},setProp:function(a,b){var c=this._resolveProps(a);c.props.set(c.key,b)},uncomputeProp:function(a){var b=this._resolveProps(a);return b.props.uncompute(b.key)},computeProp:function(a,b){var c=this._resolveProps(a);return c.props.compute(c.key,b)},get:function(b){return a.get(b,this.__properties.data)},_canSet:function(a,b){return!0},_beforeSet:function(a,b){return b},_afterSet:function(a,b){},has:function(b){return a.has(b,this.__properties.data)},setAll:function(a){for(var b in a)this.set(b,a[b]);return this},keys:function(a){return b.keys(this.__properties.data,a)},data:function(){return this.__properties.data},getAll:function(){return b.clone(this.__properties.data,1)},materializeAttr:function(a){this[a]=function(b){return 0===arguments.length?this.get(a):void this.set(a,b)}},__registerWatcher:function(a,b){for(var c=a?a.split("."):[],d=this.__properties.watchers,e=0;e<c.length;++e)c[e]in d.children||(d.children[c[e]]={parent:d,eventCount:0,children:{},key:c[e]}),d=d.children[c[e]];d.eventCount++},__unregisterWatcher:function(a,b){for(var c=a?a.split("."):[],e=this.__properties.watchers,f=0;f<c.length;++f)e&&(e=e.children[c[f]]);if(e)for(e.eventCount--;e.eventCount<=0&&d.is_empty(e.children)&&e.parent;){var g=e.parent;delete g.children[e.key],e=g}},uncompute:function(a){return a in this.__properties.computed&&(b.iter(this.__properties.computed[a].dependencies,function(a){a.properties.off("change:"+a.key,null,a)},this),delete this.__properties.computed[a]),this},compute:function(a,c){function f(){if(!(i.ignore>0)){var d=b.map(h,function(a){return a.properties.get(a.key)});j.set(a,c.apply(g.context,d))}}var g=e.matchArgs(arguments,2,{setter:"function",context:{type:"object",def:this},dependencies:!0});this.uncompute(a);var h=[];b.iter(g.dependencies,function(a){d.is_string(a)?h.push({properties:this,key:a}):h.push({properties:a[0],key:a[1]})},this);var i={ignore:0,func:c,context:g.context,
setter:g.setter,dependencies:h};this.__properties.computed[a]=i;var j=this;return b.iter(h,function(a){var b=a.properties.get(a.key);b&&"object"==typeof b&&"on"in b&&"off"in b&&"trigger"in b&&b.on("change update",function(){f()},a),a.properties.on("change:"+a.key,function(b,c){c&&"object"==typeof c&&"on"in c&&"off"in c&&"trigger"in c&&c.off("change update",null,a),b&&"object"==typeof b&&"on"in b&&"off"in b&&"trigger"in b&&b.on("change update",function(){f()},a),f()},a)},this),f(),this},unbind:function(a,b){if(a in this.__properties.bindings){for(var c=this.__properties.bindings[a].length-1;c>=0;--c){var d=this.__properties.bindings[a][c];b&&b!=d||(d.left&&d.properties.off(null,null,d),d.right&&this.off(null,null,d),this.__properties.bindings[a].splice(c,1),c--)}0===this.__properties.bindings[a].length&&delete this.__properties.bindings[a]}return this},bind:function(a,c,d){d=b.extend({secondKey:a,left:!0,right:!0,deep:!1},d);var e={key:d.secondKey,left:d.left,right:d.right,deep:d.deep,properties:c};this.__properties.bindings[a]=this.__properties.bindings[a]||[],this.__properties.bindings[a].push(e);var f=this;return e.left&&(e.properties.on("strongchange:"+e.key,function(b){f.set(a,b)},e),e.properties.on("unset:"+e.key,function(b){f.unset(a)},e),e.deep&&(e.properties.on("strongdeepchange:"+e.key,function(b,c,d){f.get(a?a+"."+d:d)===b?f.__setChanged(a?a+"."+d:d,b,c,!0):f.set(a?a+"."+d:d,b)},e),e.properties.on("deepunset:"+e.key,function(b,c){f.has(a?a+"."+c:c)?f.unset(a?a+"."+c:c):f.__unsetChanged(a?a+"."+c:c,b)},e)),e.right&&this.has(a)||this.set(a,e.properties.get(e.key)),""===a&&b.iter(e.properties.data(),function(a,b){this.set(b,a)},this)),e.right&&(this.on("strongchange:"+a,function(a){e.properties.set(e.key,a)},e),this.on("unset:"+a,function(a){e.properties.unset(e.key)},e),e.deep&&(this.on("strongdeepchange:"+a,function(a,b,c){e.properties.get(e.key?e.key+"."+c:c)===a?e.properties.__setChanged(e.key?e.key+"."+c:c,a,b,!0):e.properties.set(e.key?e.key+"."+c:c,a)},e),this.on("deepunset:"+a,function(a,b){e.properties.has(e.key?e.key+"."+b:b)?e.properties.unset(e.key?e.key+"."+b:b):e.properties.__unsetChanged(e.key?e.key+"."+b:b,a)},e)),e.left&&!this.has(a)||e.properties.set(e.key,this.get(a)),""===a&&b.iter(this.data(),function(a,b){e.properties.set(b,a)},this)),e.properties.on("destroy",function(){f.destroyed()||f.unbind(a)},e),this},__unsetChanged:function(a,e){function f(a,c,e){d.is_undefined(e)||(a.eventCount>0&&this.trigger("unset:"+c,e),b.iter(a.children,function(a,b){f.call(this,a,c?c+"."+b:b,e[b])},this))}this.trigger("unset",a,e);for(var g=a?a.split("."):[],h=this.__properties.watchers,i="",j=a,k=0;k<g.length;++k){if(h.eventCount>0&&this.trigger("deepunset:"+i,e,j),!(g[k]in h.children))return this;h=h.children[g[k]],i=i?i+"."+g[k]:g[k],j=c.first_after(j,".")}return f.call(this,h,a,e),this},__setChanged:function(a,e,f,g){function h(a,c,e,f){e!=f&&(a.eventCount>0&&(g||this.trigger("strongchange:"+c,e,f),this.trigger("change:"+c,e,f)),b.iter(a.children,function(a,b){h.call(this,a,c?c+"."+b:b,d.is_object(e)&&e?e[b]:null,d.is_object(f)&&f?f[b]:null)},this))}if(this.trigger("change",a,e,f),this._afterSet(a,e),!this.destroyed()){for(var i=a?a.split("."):[],j=this.__properties.watchers,k="",l=a,m=0;m<i.length;++m){if(j.eventCount>0&&(g||this.trigger("strongdeepchange:"+k,e,f,l),this.trigger("deepchange:"+k,e,f,l)),!(i[m]in j.children))return;j=j.children[i[m]],k=k?k+"."+i[m]:i[m],l=c.first_after(l,".")}h.call(this,j,a,e,f)}},unset:function(b){if(this.has(b)){var c=this.get(b);a.unset(b,this.__properties.data),this.__unsetChanged(b,c)}return this},__properties_guid:"ec816b66-7284-43b1-a945-0600c6abfde3",set:function(b,c,e){if(d.is_object(c)&&c&&c.guid==this.__properties_guid)return c.properties&&this.bind(b,c.properties,{secondKey:c.key}),c.func&&this.compute(b,c.func,c.dependencies),this;c=this._beforeSet(b,c);var f=this.get(b);return f!==c?(a.set(b,c,this.__properties.data),this.__setChanged(b,c,f)):e&&(this.trigger("change",b,c,f,!0),this.trigger("change:"+b,c,f,!0)),this},binding:function(a){return{guid:this.__properties_guid,properties:this,key:a}},computed:function(a,b){return{guid:this.__properties_guid,func:a,dependencies:b}},pid:function(){return this.cid()},isSubsetOf:function(a){return b.subset_of(this.data(),a.data?a.data():a)},isSupersetOf:function(a){return b.superset_of(this.data(),a.data?a.data():a)}}}),a.define("module:Properties.Properties",["module:Class","module:Objs","module:Events.EventsMixin","module:Properties.PropertiesMixin"],function(a,b,c,d,e,f){return a.extend({scoped:f},[c,d,e,function(a){return{constructor:function(c,d){a.constructor.call(this),c&&this.setAll(c),d&&b.iter(d,function(a){this.materializeAttr(a)},this)}}}])}),a.define("module:Lists.ArrayList",["module:Lists.AbstractList","module:Ids","module:Objs"],function(a,b,c,d){return a.extend({scoped:d},function(a){return{constructor:function(b,c){this.__idToIndex={},this.__items=[],c=c||{},"compare"in c&&(this._compare=c.compare),"get_ident"in c&&(this._get_ident=c.get_ident),a.constructor.call(this,b)},set_compare:function(a){this._compare=a,a&&this.sort()},get_compare:function(){return this._compare},sort:function(a){if(a=a||this._compare){this.__items.sort(a);for(var b=0;b<this.__items.length;++b)this.__ident_changed(this.__items[b],b);this._sorted()}},_sorted:function(){},re_index:function(a){if(!this._compare)return a;for(var b=this.__items.length-1,c=this.__items[a],d=a;b>d&&this._compare(this.__items[d],this.__items[d+1])>0;)this.__items[d]=this.__items[d+1],this.__ident_changed(this.__items[d],d),this.__items[d+1]=c,++d;if(d==a)for(;d>0&&this._compare(this.__items[d],this.__items[d-1])<0;)this.__items[d]=this.__items[d-1],this.__ident_changed(this.__items[d],d),this.__items[d-1]=c,--d;return d!=a&&(this.__ident_changed(c,d),this._re_indexed(c)),d},_re_indexed:function(a){},__objectId:function(a){return this._get_ident?this._get_ident(a):b.objectId(a)},_add:function(a){var b=this.__items.length;this.__items.push(a);var c=this.re_index(b);return this.__idToIndex[this.__objectId(a)]=c,c},_remove:function(a){for(var b=this.__items[a],c=a+1;c<this.__items.length;++c)this.__items[c-1]=this.__items[c],this.__ident_changed(this.__items[c-1],c-1);return this.__items.pop(),delete this.__idToIndex[this.__objectId(b)],b},_get:function(a){return this.__items[a]},_iterate:function(a,b){for(var d=c.clone(this.__items,1),e=0;e<d.length;++e)a.apply(b||this,[d[e],this.get_ident(d[e])])},__ident_changed:function(a,b){this.__idToIndex[this.__objectId(a)]=b,this._ident_changed(a,b)},get_ident:function(a){var b=this.__objectId(a);return b in this.__idToIndex?this.__idToIndex[b]:null},ident_by_id:function(a){return this.__idToIndex[a]}}})}),a.define("module:Iterators.FilteredIterator",["module:Iterators.Iterator"],function(a,b){return a.extend({scoped:b},function(a){return{constructor:function(b,c,d){a.constructor.call(this),this.__iterator=b,this.__filter=c,this.__context=d||this,this.__next=null},hasNext:function(){return this.__crawl(),null!==this.__next},next:function(){this.__crawl();var a=this.__next;return this.__next=null,a},__crawl:function(){for(;!this.__next&&this.__iterator.hasNext();){var a=this.__iterator.next();this.__filter_func(a)&&(this.__next=a)}},__filter_func:function(a){return this.__filter.apply(this.__context,[a])}}})}),a.define("module:Iterators.ObjectValuesIterator",["module:Iterators.ArrayIterator","module:Objs"],function(a,b,c){return a.extend({scoped:c},function(a){return{constructor:function(c){a.constructor.call(this,b.values(c))}}})}),a.define("module:Collections.Collection",["module:Class","module:Events.EventsMixin","module:Objs","module:Functions","module:Lists.ArrayList","module:Ids","module:Properties.Properties","module:Iterators.ArrayIterator","module:Iterators.FilteredIterator","module:Iterators.ObjectValuesIterator","module:Types","module:Promise"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){return a.extend({scoped:m},[b,function(b){return{constructor:function(a){b.constructor.call(this),k.is_array(a)&&(a={objects:a}),a=a||{},this.__indices={},a.release_references&&(this.__release_references=!0),a.indices&&c.iter(a.indices,this.add_secondary_index,this);var f={};"compare"in a&&(f.compare=a.compare),f.get_ident=d.as_method(this.get_ident,this),this.__data=new e([],f);var g=this;this.__data._ident_changed=function(a,b){g._index_changed(a,b)},this.__data._re_indexed=function(a){g._re_indexed(a)},this.__data._sorted=function(){g._sorted()},"objects"in a&&this.add_objects(a.objects)},add_secondary_index:function(a){this.__indices[a]={},this.iterate(function(b){var c=b.get(a);this.__indices[a][c]=this.__indices[a][c]||{},this.__indices[a][c][this.get_ident(b)]=b},this)},get_by_secondary_index:function(a,b){return this.__indices[a][b]},get_ident:function(a){return f.objectId(a)},set_compare:function(a){this.trigger("set_compare",a),this.__data.set_compare(a)},get_compare:function(){this.__data.get_compare()},__unload_item:function(a){"off"in a&&a.off(null,null,this),this.__release_references&&a.decreaseRef()},destroy:function(){this.__data.iterate(this.__unload_item,this),this.__data.destroy(),this.trigger("destroy"),b.destroy.call(this)},count:function(){return this.__data.count()},_index_changed:function(a,b){this.trigger("index",a,b)},_re_indexed:function(a){this.trigger("reindexed",a)},_sorted:function(){this.trigger("sorted")},_object_changed:function(a,b,c){this.trigger("update"),this.trigger("change",a,b,c),this.trigger("change:"+b,a,c),this.__data.re_index(this.getIndex(a))},add:function(b){if(a.is_class_instance(b)||(b=new g(b)),this.exists(b))return null;var d=this.__data.add(b);return null!==d&&(c.iter(this.__indices,function(a,c){var d=b.get(c);a[d]=a[d]||{},a[d][this.get_ident(b)]=b},this),this.trigger("add",b),this.trigger("update"),"on"in b&&b.on("change",function(a,c,d){this._object_changed(b,a,c,d)},this)),d},replace_objects:function(b,d){var e=[],f={};if(c.iter(b,function(b){var c=a.is_class_instance(b),d=c?b:new g(b),h=this.get_ident(d);f[h]=!0;var i=this.getById(h);i?c?(this.remove(i),this.add(d)):(d.destroy(),i.setAll(b)):e.push(d)},this),!d){for(var h=this.iterator();h.hasNext();){var i=h.next();f[this.get_ident(i)]||(this.remove(i),e.length>0&&this.add(e.shift()))}h.destroy()}for(;e.length>0;)this.add(e.shift())},add_objects:function(a){var b=0;return c.iter(a,function(a){this.add(a)&&b++},this),b},exists:function(a){return this.__data.exists(a)},remove:function(a){if(!this.exists(a))return null;c.iter(this.__indices,function(b,c){var d=a.get(c);b[d]&&(delete b[d][this.get_ident(a)],k.is_empty(b[d])&&delete b[d])},this);var b=this.__data.remove(a);return this.trigger("remove",a),this.__unload_item(a),this.trigger("update"),b},getByIndex:function(a){return this.__data.get(a)},getById:function(a){return this.__data.get(this.__data.ident_by_id(a))},getIndex:function(a){return this.__data.get_ident(a)},iterate:function(a,b){this.__data.iterate(a,b)},iterator:function(){return h.byIterate(this.iterate,this)},iterateSecondaryIndexValue:function(a,b){return new j(this.__indices[a][b])},query:function(a){var b=null;for(var c in this.__indices)if(c in a){b=this.iterateSecondaryIndexValue(c,a[c]);break}return new i(b||this.iterator(),function(b){return b.isSupersetOf(a)})},clear:function(){this.iterate(function(a){this.remove(a)},this)},increase_forwards:function(a){return l.error(!0)}}}])}),a.define("module:Collections.FilteredCollection",["module:Collections.Collection"],function(a,b){return a.extend({scoped:b},function(a){return{constructor:function(b,c){this.__parent=b,c=c||{},delete c.objects,c.compare=c.compare||b.get_compare(),a.constructor.call(this,c),this.__parent.on("add",this.add,this),this.__parent.on("remove",this.__selfRemove,this),this.setFilter(c.filter,c.context)},filter:function(a){return!this.__filter||this.__filter.call(this.__filterContext||this,a)},setFilter:function(a,b){this.__filterContext=b,this.__filter=a,this.iterate(function(a){this.filter(a)||this.__selfRemove(a)},this),this.__parent.iterate(function(a){return!this.exists(a)&&this.filter(a)&&this.__selfAdd(a),!0},this)},_object_changed:function(b,c,d){a._object_changed.call(this,b,c,d),this.filter(b)||this.__selfRemove(b)},destroy:function(){this.__parent.off(null,null,this),a.destroy.call(this)},__selfAdd:function(b){return a.add.call(this,b)},add:function(a){if(this.exists(a)||!this.filter(a))return null;var b=this.__selfAdd(a);return this.__parent.add(a),b},__selfRemove:function(b){return a.remove.call(this,b)},remove:function(a){if(!this.exists(a))return null;var b=this.__selfRemove(a);return b?this.__parent.remove(a):null}}})}),a.define("module:Classes.Taggable",["module:Objs"],function(a){return{__tags:{},hasTag:function(a){return a in this.__tags},getTags:function(){return Object.keys(this.__tags)},removeTag:function(a){return delete this.__tags[a],this._notify("tags-changed"),this},removeTags:function(b){a.iter(b,this.removeTag,this)},addTag:function(a){return this.__tags[a]=!0,this._notify("tags-changed"),this},addTags:function(b){a.iter(b,this.addTag,this)},tagIntersect:function(b){return a.filter(b,this.hasTag,this)}}}),a.define("module:Classes.StringTable",["module:Class","module:Classes.Taggable","module:Functions","module:Objs"],function(a,b,c,d,e){return a.extend({scoped:e},[b,function(a){return{_notifications:{"tags-changed":function(){this.__cache={}}},constructor:function(){a.constructor.call(this),this.__cache={},this.__strings={}},__resolveKey:function(a,b){return b&&(a=b+"."+a),a=a.replace(/[^\.]+\.</g,"")},__betterMatch:function(a,b){var c=this.tagIntersect(a.tags).length-this.tagIntersect(b.tags).length;return 0!==c?c>0:(c=a.priority-b.priority,0!==c?c>0:(c=b.tags.length-a.tags.length,c>0))},register:function(){var a=c.matchArgs(arguments,{strings:!0,prefix:"string",tags:"array",priority:"int"});d.iter(a.strings,function(b,c){c=this.__resolveKey(c,a.prefix),this.__strings[c]=this.__strings[c]||[],this.__strings[c].push({value:b,tags:a.tags||[],priority:a.priority||0}),delete this.__cache[c]},this)},get:function(a,b){if(a=this.__resolveKey(a,b),a in this.__cache)return this.__cache[a];if(!(a in this.__strings))return null;var c=null;return d.iter(this.__strings[a],function(a){c&&!this.__betterMatch(a,c)||(c=a)},this),this.__cache[a]=c.value,c.value},all:function(){return d.map(this.__strings,function(a,b){return this.get(b)},this)}}}])}),a.define("module:Classes.LocaleMixin",function(){return{_clearLocale:function(){},_setLocale:function(a){},getLocale:function(){return this.__locale},clearLocale:function(){this._clearLocale(),this.__locale=null},setLocale:function(a){this.clearLocale(),this.__locale=a,this._setLocale(a)},isLocaleSet:function(){return!!this.__locale},setWeakLocale:function(a){this.isLocaleSet()||this.setLocale(a)}}}),a.define("module:Classes.LocaleTable",["module:Classes.StringTable","module:Classes.LocaleMixin"],function(a,b,c){return a.extend({scoped:c},[b,{_localeTags:function(a){if(!a)return null;var b=[];return b.push("language:"+a),a.indexOf("-")>0&&b.push("language:"+a.substring(0,a.indexOf("-"))),b},_clearLocale:function(){this.removeTags(this._localeTags(this.getLocale()))},_setLocale:function(a){this.addTags(this._localeTags(a))}}])}),a.define("module:Events.ListenMixin",["module:Ids","module:Objs"],function(a,b){return{_notifications:{destroy:"listenOff"},listenOn:function(b,c,d,e){this.__listen_mixin_listen||(this.__listen_mixin_listen={}),this.__listen_mixin_listen[a.objectId(b)]=b,b.on(c,d,this,e)},listenOnce:function(b,c,d,e){this.__listen_mixin_listen||(this.__listen_mixin_listen={}),this.__listen_mixin_listen[a.objectId(b)]=b,b.once(c,d,this,e)},listenOff:function(c,d,e){this.__listen_mixin_listen&&(c?(c.off(d,e,this),d||e||delete this.__listen_mixin_listen[a.objectId(c)]):b.iter(this.__listen_mixin_listen,function(b){b&&"off"in b&&b.off(d,e,this),d||e||delete this.__listen_mixin_listen[a.objectId(b)]},this))}}}),a.define("module:Classes.ObjectIdScopeMixin",function(){return{__objects:{},get:function(a){return this.__objects[a]}}}),a.define("module:Classes.ObjectIdScope",["module:Class","module:Classes.ObjectIdScopeMixin"],function(a,b,c){return a.extend({scoped:c},b,{singleton:function(){return this.__singleton||(this.__singleton=new this),this.__singleton}})}),a.define("module:Classes.ObjectIdMixin",["module:Classes.ObjectIdScope","module:Objs","module:Ids"],function(a,b,c){return{_notifications:{construct:"__register_object_id",destroy:"__unregister_object_id"},__object_id_scope:function(){return this.object_id_scope||(this.object_id_scope=a.singleton()),this.object_id_scope},__register_object_id:function(){var a=this.__object_id_scope();a.__objects[this.cid()]=this},__unregister_object_id:function(){var a=this.__object_id_scope();delete a.__objects[this.cid()]}}}),a.define("module:Events.Events",["module:Class","module:Events.EventsMixin"],function(a,b,c){return a.extend({scoped:c},b)}),a.define("module:Trees.TreeNavigator",function(){return{nodeRoot:function(){},nodeId:function(a){},nodeParent:function(a){},nodeChildren:function(a){},nodeWatch:function(a,b,c){},nodeUnwatch:function(a,b,c){},nodeData:function(a){}}}),a.define("module:Comparators",["module:Types","module:Properties.Properties"],function(a,b){return{byObject:function(a){var c=this;return function(d,e){for(var f in a){var g=0;if(g=b.is_class_instance(d)&&b.is_class_instance(e)?c.byValue(d.get(f)||null,e.get(f)||null):c.byValue(d[f]||null,e[f]||null),0!==g)return g*a[f]}return 0}},byValue:function(b,c){return a.is_string(b)?b.localeCompare(c):c>b?-1:b>c?1:0},deepEqual:function(b,c,d){if(0===d)return!0;if(1===d)return b===c;if(a.is_array(b)&&a.is_array(c)){if(b.length!==c.length)return!1;for(var e=0;e<b.length;++e)if(!this.deepEqual(b[e],c[e],d-1))return!1;return!0}if(a.is_object(b)&&a.is_object(c)){if(b&&!c||c&&!b)return b||c;for(var f in b)if(!this.deepEqual(b[f],c[f],d-1))return!1;for(f in c)if(!(f in b))return!1;return!0}return b===c},listEqual:function(a,b){return this.deepEqual(a,b,2)}}}),a.define("module:Exceptions.Exception",["module:Class","module:Comparators"],function(a,b,c){return a.extend({scoped:c},function(a){return{constructor:function(b){a.constructor.call(this),this.__message=b},assert:function(a){if(!this.instance_of(a))throw this;return this},message:function(){return this.__message},toString:function(){return this.message()},format:function(){return this.cls.classname+": "+this.toString()},json:function(){return{classname:this.cls.classname,message:this.message()}},equals:function(a){return a&&this.cls===a.cls&&b.deepEqual(this.json(),a.json(),-1)}}})}),a.define("module:Parser.LexerException",["module:Exceptions.Exception"],function(a,b){return a.extend({scoped:b},function(a){return{constructor:function(b,c){a.constructor.call(this,"Lexer error: Unrecognized identifier at "+b.length+"."),this.__head=b,this.__tail=c}}})}),a.define("module:Parser.Lexer",["module:Class","module:Types","module:Objs","module:Parser.LexerException"],function(a,b,c,d,e){return a.extend({scoped:e},function(a){return{constructor:function(d){a.constructor.call(this),this.__patterns=[],c.iter(d,function(a,c){this.__patterns.push({regex:new RegExp("^"+c,"m"),data:b.is_string(a)?{token:a}:a})},this)},lex:function(a){for(var e=[],f="",g=a;g;){for(var h=null,i=null,j=0;j<this.__patterns.length;++j)if(h=this.__patterns[j].regex.exec(g)){i=c.clone(this.__patterns[j].data,1);break}if(!h)throw new d(f,g);if(f+=h[0],g=g.substring(h[0].length),i){for(var k in i)if(b.is_string(i[k]))for(var l=0;l<h.length;++l)i[k]=i[k].replace("$"+l,h[l]);e.push(i)}}return e}}})}),a.define("module:Trees.TreeQueryObject",["module:Class","module:Events.EventsMixin","module:Objs","module:Types"],function(a,b,c,d,e){return a.extend({scoped:e},[b,function(a){return{constructor:function(b,c,d){a.constructor.call(this),this.__navigator=b,this.__node=c,this.__query=d,this.__result={},this.__partials={},this.__ids=0,this.__register(c,0,{})},destroy:function(){c.iter(this.__partials,function(a){c.iter(a.partials,function(b){this.__navigator.nodeUnwatch(a.node,null,b)},this)},this),a.destroy.call(this)},result:function(){var a=[];return c.iter(this.__result,function(b){a.push(b.node)}),a},__register:function(a,b){var c=this.__navigator.nodeId(a);this.__partials[c]||(this.__partials[c]={node:a,partials:{}});var d=this.__partials[c];this.__ids++;var e={owner:d,id:this.__ids,query_index_start:b,query_index_next:b,query_index_last:b,partial_match:!1,partial_final:b>=this.__query.length,partial_data:!1,partial_children:!1,partial_parent:!1,partial_star:!1,parent:null,deps:{}};d.partials[e.id]=e;for(var f=e.query_index_start;f<this.__query.length;++f){if("Selector"!=this.__query[f].token){"Up"==this.__query[f].token?e.partial_parent=!0:"Down"==this.__query[f].token&&(e.partial_children=!0),e.partial_star=!this.__query[f].single,e.partial_star||(e.query_index_next=f+1);break}e.partial_data=!0,e.query_index_next=f+1,e.partial_final=f+1==this.__query.length}e.query_index_last=e.partial_star?e.query_index_next+1:e.query_index_next;var g=this;return this.__navigator.nodeWatch(a,function(a,b){"data"==a&&e.partial_data&&g.__update(e),"remove"==a&&g.__unregisterPartial(e),"addChild"==a&&e.partial_children&&e.partial_match&&g.__addDependentPartial(e,b)},e),this.__update(e),e},__unregisterPartial:function(a){var b=a.owner,e=b.node,f=this.__navigator.nodeId(e);a.partial_final&&this.__result[f]&&(this.__result[f].count--,this.__result[f].count<=0&&(delete this.__result[f],this.trigger("remove",e),this.trigger("change"))),c.iter(a.deps,this.__unregisterPartial,this),a.parent&&delete a.parent.deps[a.id],this.__navigator.nodeUnwatch(e,null,a),delete b.partials[a.id],d.is_empty(b.partials)&&delete this.__partials[f]},__addDependentPartial:function(a,b){var d=[];d.push(this.__register(b,a.query_index_next)),a.partial_star&&d.push(this.__register(b,a.query_index_next+1)),c.iter(d,function(b){a.deps[b.id]=b,b.parent=a},this)},__update:function(a){for(var b=!0,d=a.owner.node,e=this.__navigator.nodeId(d),f=this.__navigator.nodeData(d),g=a.query_index_start;g<a.query_index_last;++g){var h=this.__query[g];if("Selector"!=h.token)break;if(f[h.key]!=h.value){b=!1;break}}if(b!=a.partial_match)if(a.partial_match=b,b)if(a.partial_final)this.__result[e]?this.__result[e].count++:(this.__result[e]={node:d,count:1},this.trigger("add",d),this.trigger("change"));else if(a.partial_parent){var i=this.__navigator.nodeParent(d);i&&this.__addDependentPartial(a,i)}else a.partial_children&&c.iter(this.__navigator.nodeChildren(d),function(b){this.__addDependentPartial(a,b)},this);else a.partial_final&&(this.__result[e].count--,this.__result[e].count<=0&&(delete this.__result[e],this.trigger("remove",d),this.trigger("change"))),c.iter(a.deps,this.__unregisterPartial,this)}}}])}),a.define("module:Trees.TreeQueryEngine",["module:Class","module:Parser.Lexer","module:Trees.TreeQueryObject"],function(a,b,c,d){return a.extend({scoped:d},function(a){return{constructor:function(c){a.constructor.call(this),this.__navigator=c,this.__lexer=this._auto_destroy(new b({"<\\+":{token:"Up"},"<":{token:"Up",single:!0},">\\+":{token:"Down"},">":{token:"Down",single:!0},"\\[s*([a-zA-Z]+)s*=s*'([^']*)'s*\\]":{token:"Selector",key:"$1",value:"$2"},'\\[s*([a-zA-Z]+)s*=s*"([^\']*)"s*\\]':{token:"Selector",key:"$1",value:"$2"},s:null}))},query:function(a,b){return new c(this.__navigator,a,this.__lexer.lex(b))}}})}),a.define("module:TimeFormat",["module:Time","module:Strings","module:Objs"],function(a,b,c){return{formatMappings:{HH:function(c){return b.padZeros(a.timeModulo(c,"hour","floor"),2)},H:function(b){return a.timeModulo(b,"hour","floor")},"h+":function(b){return a.timeComponent(b,"hour","floor")},hh:function(c){var d=a.timeModulo(c,"hour","floor");return d=0===d?12:d>12?d-12:d,b.padZeros(d," ",2)},h:function(b){var c=a.timeModulo(b,"hour","floor");return c=0===c?12:c>12?c-12:c},"M+":function(b){return a.timeComponent(b,"minute","floor")},MM:function(c){return b.padZeros(a.timeModulo(c,"minute","floor"),2)},M:function(b){return a.timeModulo(b,"minute","floor")},"s+":function(b){return a.timeComponent(b,"second","floor")},ss:function(c){return b.padZeros(a.timeModulo(c,"second","floor"),2)},s:function(b){return a.timeModulo(b,"second","floor")},mmm:function(a){return new Date(a).toDateString().substring(4,7)},mm:function(c){return b.padZeros(a.timeComponentGet(c,"month"),2)},m:function(b){return a.timeComponentGet(b,"month")},"d+":function(b){return a.timeComponent(b,"day","floor")},dddd:function(b){var c={2:"s",3:"nes",4:"rs",6:"ur"};return new Date(b).toDateString().substring(0,3)+(c[a.timeComponentGet(b,"weekday")]||"")+"day"},ddd:function(a){return new Date(a).toDateString().substring(0,3)},dd:function(c){return b.padZeros(a.timeComponentGet(c,"day"),2)},d:function(b){return a.timeComponentGet(b,"day")},yyyy:function(b){return a.timeComponentGet(b,"year")},yy:function(b){return a.timeComponentGet(b,"year")%100},"l+":function(a){return a},l:function(b){return a.timeComponent(b,"millisecond","floor")},L:function(b){return a.timeComponent(b,"millisecond","floor")%10},tt:function(b){return a.timeModulo(b,"hour","floor")<12?"am":"pm"},t:function(b){return a.timeModulo(b,"hour","floor")<12?"a":"p"},TT:function(b){return a.timeModulo(b,"hour","floor")<12?"AM":"PM"},T:function(b){return a.timeModulo(b,"hour","floor")<12?"A":"P"},o:function(a,c){return c=Math.floor(c/1e3/60),(c>0?"-":"+")+b.padZeros(100*Math.floor(Math.abs(c)/60)+Math.abs(c)%60,4)}},ELAPSED_HOURS_MINUTES_SECONDS:"h+:MM:ss",ELAPSED_MINUTES_SECONDS:"M+:ss",FULL_YEAR:"yyyy",LETTER_MONTH:"mmm",LETTER_MONTH_AND_DAY:"mmm d",WEEKDAY:"ddd",HOURS_MINUTES_TT:"hh:MM tt",format:function(b,d,e){var f=a.timeToTimezoneBasedDate(d,e),g=a.timezoneBias(e),h=b,i=[];c.iter(this.formatMappings,function(a,b){if(h.indexOf(b)>=0){var c=i.length;i.push(a(f,g)),h=h.replace(b,"$"+c+"$")}},this);for(var j=0;j<i.length;++j)h=h.replace("$"+j+"$",i[j]);return h},monthString:function(b){return this.format("mmm",a.encodePeriod({month:b}))},weekdayString:function(b){return this.format("ddd",a.encodePeriod({weekday:b}))},formatRelativeMostSignificant:function(b,c,d){c=c||a.now();var e=a.decodeTime(b,d),f=a.decodeTime(c,d);return e.year===f.year&&e.month===f.month&&e.day===f.day?this.format(this.HOURS_MINUTES_TT,b,d):6048e5>c-b&&e.weekday!==f.weekday?this.format(this.WEEKDAY,b,d):e.year===f.year&&e.month+1>=f.month||e.year+1===f.year&&e.month+1>=f.month+12-1?this.format(this.LETTER_MONTH_AND_DAY,b,d):e.year===f.year||e.year+1===f.year&&e.month>f.month?this.format(this.LETTER_MONTH,b,d):this.format(this.FULL_YEAR,b,d)}}}),a.define("module:States.State",["module:Class","module:Types","module:Strings","module:Async","module:Objs"],function(a,b,c,d,e,f){return a.extend({scoped:f},function(a){return{_locals:[],_persistents:[],_defaults:{},_clonedDefaults:{},_white_list:null,_starting:!1,_started:!1,_stopped:!1,_transitioning:!1,__next_state:null,__suspended:0,constructor:function(c,d,f){a.constructor.call(this),this.host=c,this.transitionals=f,d=e.extend(e.extend(e.clone(this._clonedDefaults||{},-1),e.clone(this._defaults||{},1)),d),this._locals=b.is_function(this._locals)?this._locals():this._locals;for(var g={},h=0;h<this._locals.length;++h)this["_"+this._locals[h]]=d[this._locals[h]],g[this._locals[h]]=!0;for(this._persistents=b.is_function(this._persistents)?this._persistents():this._persistents,h=0;h<this._persistents.length;++h)this["_"+this._persistents[h]]=d[this._persistents[h]],g[this._locals[h]]=!0;c.suspendEvents(),this.__hostArgs={},e.iter(d,function(a,b){g[b]||(this.__hostArgs[b]=!0,c.set(b,a))},this),c.resumeEvents()},allAttr:function(){var a=e.clone(this.host.data(),1);return e.iter(this._locals,function(b){a[b]=this["_"+b]},this),e.iter(this._persistents,function(b){a[b]=this["_"+b]},this),a},state_name:function(){return c.last_after(this.cls.classname,".")},description:function(){return this.state_name()},start:function(){this._starting||(this._starting=!0,this.host._start(this),this._start(),this.host&&(this.host._afterStart(this),this._started=!0))},end:function(){this._stopped||(this._stopped=!0,this._end(),this.host._end(this),this.host._afterEnd(this),this.destroy())},eventualNext:function(a,b,c){this.suspend(),this.next(a,b,c),this.eventualResume()},next:function(a,b,c){if(this._starting&&!this._stopped&&!this.__next_state){b=b||{};for(var d=0;d<this._persistents.length;++d)this._persistents[d]in b||(b[this._persistents[d]]=this["_"+this._persistents[d]]);var e=this.host._createState(a,b,c);if(!this.can_transition_to(e))return void e.destroy();this._started||(this.host._afterStart(this),this._started=!0),this.__next_state=e,this._transitioning=!0,this._transition(),this.__suspended<=0&&this.__next()}},weakSame:function(a,b,c){var d=!0;a!==this.state_name()&&(d=!1);var f=this.allAttr();return e.iter(b,function(a,b){f[b]!==a&&(d=!1)},this),d},weakNext:function(a,b,c){return this.weakSame.apply(this,arguments)?this:this.next.apply(this,arguments)},__next:function(){var a=this.host,b=this.__next_state;a._next(b);var c=this.__hostArgs;this.end(),b.start(),a.suspendEvents(),b=a.state(),e.iter(c,function(c,d){b.__hostArgs[d]||a.unset(d)},this),a.resumeEvents(),a._afterNext(b)},_transition:function(){},suspend:function(){this.__suspended++},eventualResume:function(){d.eventually(this.resume,this)},resume:function(){this.__suspended--,0===this.__suspended&&!this._stopped&&this.__next_state&&this.__next()},can_transition_to:function(a){return this.host&&this.host._can_transition_to(a)&&this._can_transition_to(a)},_start:function(){},_end:function(){},_can_transition_to:function(a){return!b.is_array(this._white_list)||e.contains_value(this._white_list,a.state_name())}}},{_extender:{_defaults:function(a,b){return e.extend(e.clone(a,1),b)}}})}),a.define("module:States.Host",["module:Properties.Properties","module:Events.EventsMixin","module:States.State","module:Types","module:Strings","module:Classes.ClassRegistry"],function(b,c,d,e,f,g,h){return b.extend({scoped:h},[c,function(b){return{constructor:function(a){b.constructor.call(this),a=a||{},this._stateRegistry=a.stateRegistry,this._baseState=a.baseState,this._enabled=!0},initialize:function(b,c){if(!this._stateRegistry){var d=null;if(e.is_string(b)&&b.indexOf(".")>=0){var h=f.splitLast(b,".");b=h.tail,d=h.head}else d=e.is_string(b)?f.splitLast(this.cls.classname,".").head:f.splitLast(b.classname,".").head;this._stateRegistry=this._auto_destroy(new g(a.getGlobal(d)))}this._createState(b,c).start(),this._baseState=this._baseState||this._state.cls},_createState:function(a,b,c){return this._stateRegistry.create(a,this,b||{},c||{})},finalize:function(){this._state&&this._state.end(),this._state=null},destroy:function(){this.finalize(),b.destroy.call(this)},enable:function(){this._enabled=!0},disable:function(){this._enabled=!1},state:function(){return this._state},state_name:function(){return this.state().state_name()},next:function(){return this.state()?this.state().next.apply(this.state(),arguments):this.initialize.apply(this,arguments)},weakNext:function(){return this.state()?this.state().weakNext.apply(this.state(),arguments):this.initialize.apply(this,arguments)},_start:function(a){this._stateEvent(a,"before_start"),this._state=a,this.set("name",a.state_name())},_afterStart:function(a){this._stateEvent(a,"start")},_end:function(a){this._stateEvent(a,"end"),this._state=null},_afterEnd:function(a){this._stateEvent(a,"after_end")},_next:function(a){this._stateEvent(a,"next")},_afterNext:function(a){this._stateEvent(a,"after_next")},_can_transition_to:function(a){return this._enabled},_stateEvent:function(a,b){this.trigger("event",b,a.state_name(),a.description()),this.trigger(b,a.state_name(),a.description()),this.trigger(b+":"+a.state_name(),a.description())},register:function(a,b,c){e.is_string(b)||(c=b,b=null),this._stateRegistry||(this._stateRegistry=this._auto_destroy(new g(f.splitLast(this.cls.classname).head)));
var h=this._baseState?f.splitLast(this._baseState.classname,".").head+"."+a:a.indexOf(".")>=0?a:null,i=(this._stateRegistry.get(b)||this._baseState||d).extend(h,c);return h||(i.classname=a),this._stateRegistry.register(f.last_after(a,"."),i),this}}}])}),a.define("module:Net.AbstractAjax",["module:Class","module:Objs","module:Net.Uri"],function(a,b,c,d){return a.extend({scoped:d},function(a){return{constructor:function(c){a.constructor.call(this),this.__options=b.extend({method:"GET",data:{}},c)},asyncCall:function(a){return this._shouldMap(a)&&(a=this._mapToPost(a)),this._asyncCall(b.extend(b.clone(this.__options,1),a))},_asyncCall:function(a){throw"Abstract"},_shouldMap:function(a){return this.__options.mapPutToPost&&a.method&&"put"===a.method.toLowerCase()||this.__options.mapDestroyToPost&&a.method&&"destroy"===a.method.toLowerCase()},_mapToPost:function(a){return a.uri=c.appendUriParams(a.uri,{_method:a.method.toUpperCase()}),a.method="POST",a}}})}),a.define("module:Net.AjaxException",["module:Exceptions.Exception","module:Objs"],function(a,b,c){return a.extend({scoped:c},function(a){return{constructor:function(b,c,d){a.constructor.call(this,b+": "+c),this.__status_code=b,this.__status_text=c,this.__data=d},status_code:function(){return this.__status_code},status_text:function(){return this.__status_text},data:function(){return this.__data},json:function(){return b.extend({data:this.data(),status_code:this.status_code(),status_text:this.status_text()},a.json.call(this))}}})}),a.define("module:Sort",["module:Comparators","module:Types","module:Objs"],function(a,b,c){return{sort_object:function(a,b){var c=[];for(var d in a)c.push({key:d,value:a[d]});c.sort(function(a,c){return b(a.key,c.key,a.value,c.value)});for(var e={},f=0;f<c.length;++f)e[c[f].key]=c[f].value;return e},deep_sort:function(c,d){if(d=d||a.byValue,b.is_array(c)){for(var e=0;e<c.length;++e)c[e]=this.deep_sort(c[e],d);return c.sort(d)}if(b.is_object(c)){for(var f in c)c[f]=this.deep_sort(c[f],d);return this.sort_object(c,d)}return c},dependency_sort:function(a,d,e,f){var g=b.is_string(d)?function(a){return a[d]}:d,h=b.is_string(e)?function(a){return a[e]}:e,i=b.is_string(f)?function(a){return a[f]}:f,j=a.length,k=[],l={},m={},n=0;for(n=0;j>n;++n){m[n]=!0;var o=g(a[n],n);l[o]=n,k.push({before:{},after:{}})}var p=function(a){return function(c){var d=l[c];b.is_defined(d)&&(k[a].before[d]=!0,k[d].after[a]=!0)}},q=function(a){return function(c){var d=l[c];b.is_defined(d)&&(k[a].after[d]=!0,k[d].before[a]=!0)}};for(n=0;j>n;++n)c.iter(h(a[n],n)||[],p(n)),c.iter(i(a[n])||[],q(n));for(var r=[];!b.is_empty(m);)for(n in m)if(b.is_empty(k[n].after)){delete m[n],r.push(a[n]);for(var s in k[n].before)delete k[s].after[n]}return r}}}),a.define("module:Net.HttpHeader",function(){return{HTTP_STATUS_OK:200,HTTP_STATUS_CREATED:201,HTTP_STATUS_UNAUTHORIZED:401,HTTP_STATUS_PAYMENT_REQUIRED:402,HTTP_STATUS_FORBIDDEN:403,HTTP_STATUS_NOT_FOUND:404,HTTP_STATUS_PRECONDITION_FAILED:412,HTTP_STATUS_INTERNAL_SERVER_ERROR:500,STRINGS:{0:"Unknown Error",200:"OK",201:"Created",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not found",412:"Precondition Failed",500:"Internal Server Error"},format:function(a,b){var c=this.STRINGS[a in this.STRINGS?a:0];return b?a+" "+c:c}}}),a.define("module:Classes.LocaleAggregator",["module:Class","module:Classes.LocaleMixin","module:Objs"],function(a,b,c,d){return a.extend({scoped:d},[b,function(a){return{constructor:function(){a.constructor.call(this),this.__locales=[]},register:function(a){this.__locales.push(a)},_clearLocale:function(){c.iter(this.__locales,function(a){a.clearLocale()},this)},_setLocale:function(a){c.iter(this.__locales,function(b){b.setLocale(a)},this)}}}])})}.call(c),function(){var a=this.subScope();a.binding("base","root:BetaJS"),a.binding("module","root:BetaJS.Browser"),a.binding("jquery","root:jQuery"),a.binding("resumablejs","root:Resumable"),a.define("module:FlashDetect",["base:Class"],function(a,b){return a.extend({scoped:b},function(a){return{constructor:function(){if(a.constructor.call(this),this.__version=null,navigator.plugins&&navigator.plugins.length>0){var b="application/x-shockwave-flash",c=navigator.mimeTypes;c&&c[b]&&c[b].enabledPlugin&&c[b].enabledPlugin.description&&(this.__version=this.parseVersion(c[b].enabledPlugin.description))}else if(-1==navigator.appVersion.indexOf("Mac")&&"execScript"in window)for(var d=0;d<this.__activeXDetectRules.length;d++)try{var e=new ActiveXObject(this.__activeXDetectRules[d].name),f=this.__activeXDetectRules[d].version(e);if(f){this.__version=this.parseActiveXVersion(f);break}}catch(g){}},parseVersion:function(a){var b=a.split(/ +/),c=b[2].split(/\./),d=b[3];return{raw:a,major:parseInt(c[0],10),minor:parseInt(c[1],10),revisionStr:d,revision:parseInt(d.replace(/[a-zA-Z]/g,""),10)}},parseActiveXVersion:function(a){var b=a.split(",");return{raw:a,major:parseInt(b[0].split(" ")[1],10),minor:parseInt(b[1],10),revision:parseInt(b[2],10),revisionStr:b[2]}},version:function(){return this.__version},installed:function(){return null!==this.__version},supported:function(){var a=navigator.userAgent;return this.installed()||!(-1!=a.indexOf("iPhone")||-1!=a.indexOf("iPod")||-1!=a.indexOf("iPad"))},majorAtLeast:function(a){return this.installed()&&this.version().major>=a},minorAtLeast:function(a){return this.installed()&&this.version().minor>=a},revisionAtLeast:function(a){return this.installed()&&this.version().revision>=a},versionAtLeast:function(a){if(!this.installed())return!1;for(var b=[this.version().major,this.version().minor,this.version().revision],c=Math.min(b.length,arguments.length),d=0;c>d;d++)if(b[d]!=arguments[d])return b[d]>arguments[d];return!0},__activeXDetectRules:[{name:"ShockwaveFlash.ShockwaveFlash.7",version:function(a){try{return a.GetVariable("$version")}catch(b){return null}}},{name:"ShockwaveFlash.ShockwaveFlash.6",version:function(a){try{a.AllowScriptAccess="always";try{return a.GetVariable("$version")}catch(b){return null}}catch(b){return"6,0,21"}}},{name:"ShockwaveFlash.ShockwaveFlash",version:function(a){try{return a.GetVariable("$version")}catch(b){return null}}}]}})}),a.define("module:Info",["base:Objs","module:FlashDetect"],function(a,b){return{__navigator:null,getNavigator:function(){return this.__navigator||(this.__navigator={appCodeName:navigator.appCodeName,appName:navigator.appName,appVersion:navigator.appVersion,cookieEnabled:navigator.cookieEnabled,onLine:navigator.onLine,platform:navigator.platform,userAgent:navigator.userAgent,window_chrome:"chrome"in window,window_opera:"opera"in window,language:navigator.language||navigator.userLanguage||""}),this.__navigator},__cache:{},__cached:function(a,b){if(!(a in this.__cache)){var c=this.getNavigator();this.__cache[a]=b.call(this,c,c.userAgent,c.userAgent.toLowerCase())}return this.__cache[a]},setNavigator:function(a){this.__navigator=a,this.__cache={}},language:function(){return this.__cached("language",function(a){return a.language})},flash:function(){return this.__cached("flash",function(){return new b})},isiOS:function(){return this.__cached("isiOS",function(a,b){return this.isInternetExplorer()||this.isIEMobile()?!1:-1!=b.indexOf("iPhone")||-1!=b.indexOf("iPod")||-1!=b.indexOf("iPad")})},isEdge:function(){return this.__cached("isEdge",function(a,b){return-1!=b.indexOf("Edge")})},isCordova:function(){return this.__cached("isCordova",function(){return!!window.cordova||!!window._cordovaNative||0===document.location.href.indexOf("file:///android_asset/www")||0===document.location.href.indexOf("file:///var/mobile/Containers/Bundle/Application")})},isLocalCordova:function(){return this.__cached("isLocalCordova",function(){return this.isCordova()&&0!==document.location.href.indexOf("http")})},isChrome:function(){return this.__cached("isChrome",function(a,b){return(a.window_chrome||-1!=b.indexOf("CriOS"))&&!this.isOpera()&&!this.isEdge()})},isChromium:function(){return this.__cached("isChromium",function(a,b,c){return!this.isChrome()&&this.isAndroid()&&c.indexOf("linux")>=0})},isChromiumBased:function(){return this.__cached("isChromiumBased",function(){return this.isChrome()||this.isChromium()})},isOpera:function(){return this.__cached("isOpera",function(a,b){return a.window_opera||b.indexOf(" OPR/")>=0||b.indexOf("OPiOS")>=0||b.indexOf("Opera")>=0})},isAndroid:function(){return this.__cached("isAndroid",function(a,b,c){return-1!=c.indexOf("android")})},isWebOS:function(){return this.__cached("isWebOS",function(a,b,c){return-1!=c.indexOf("webos")})},isWindowsPhone:function(){return this.__cached("isWindowsPhone",function(a,b,c){return-1!=c.indexOf("windows phone")})},isBlackberry:function(){return this.__cached("isBlackberry",function(a,b,c){return-1!=c.indexOf("blackberry")})},iOSversion:function(){return this.__cached("iOSversion",function(a){if(!this.isiOS())return!1;var b=a.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return{major:parseInt(b[1],10),minor:parseInt(b[2],10),revision:parseInt(b[3]||0,10)}})},isMobile:function(){return this.__cached("isMobile",function(){return this.isiOS()||this.isAndroid()||this.isWebOS()||this.isWindowsPhone()||this.isBlackberry()})},isDesktop:function(){return this.__cached("isDesktop",function(){return!this.isMobile()})},isInternetExplorer:function(){return this.__cached("isInternetExplorer",function(){return!this.isIEMobile()&&null!==this.internetExplorerVersion()})},isIEMobile:function(){return this.__cached("isIEMobile",function(a,b,c){return c.indexOf("iemobile")>=0})},isFirefox:function(){return this.__cached("isFirefox",function(a,b,c){return-1!=c.indexOf("firefox")||-1!=c.indexOf("fxios")})},isSafari:function(){return this.__cached("isSafari",function(a,b,c){return!(this.isChrome()||this.isOpera()||this.isEdge()||this.isFirefox()||-1==c.indexOf("safari")||this.isAndroid())})},isWindows:function(){return this.__cached("isWindows",function(a){return-1!=a.appVersion.toLowerCase().indexOf("win")&&!this.isWindowsPhone()})},isMacOS:function(){return this.__cached("isMacOS",function(a){return!this.isiOS()&&-1!=a.appVersion.toLowerCase().indexOf("mac")})},isUnix:function(){return this.__cached("isUnix",function(a){return-1!=a.appVersion.toLowerCase().indexOf("x11")})},isLinux:function(){return this.__cached("isLinux",function(a){return!this.isAndroid()&&-1!=a.appVersion.toLowerCase().indexOf("linux")})},internetExplorerVersion:function(){return this.__cached("internetExplorerVersion",function(a,b){if("Microsoft Internet Explorer"==a.appName){var c=new RegExp("MSIE ([0-9]+)"),d=c.exec(b);if(d)return d[1]}else if("Netscape"==a.appName){var e=new RegExp("Trident/.*rv:([0-9]+)"),f=e.exec(a.userAgent);if(f)return parseFloat(f[1])}return null})},chromeVersion:function(){return this.__cached("chromeVersion",function(a,b){var c=/Chrome\/(\d+\.\d+)[^\d]/gi,d=c.exec(b);return d?parseFloat(d[1]):null})},operaVersion:function(){return this.__cached("operaVersion",function(a,b){var c=/OPR\/(\d+\.\d+)[^\d]/gi,d=c.exec(b);return d?parseFloat(d[1]):null})},safariVersion:function(){return this.__cached("safariVersion",function(a,b){var c=/Version\/(\d+\.\d+)[^\d]/gi,d=c.exec(b);return d?parseFloat(d[1]):null})},firefoxVersion:function(){return this.__cached("firefoxVersion",function(a,b){var c=/Firefox\/(\d+\.\d+)/gi,d=c.exec(b);return d?parseFloat(d[1]):null})},inIframe:function(){try{return window.self!==window.top}catch(a){return!0}},__devicesMap:{mobile:{format:"Mobile",check:function(){return this.isMobile()}},desktop:{format:"Desktop",check:function(){return this.isDesktop()}}},__obtainMatch:function(b,c){var d=null;return a.iter(b,function(b,c){if(b.check.apply(this)){if(d)return d=null,!1;d=a.clone(b,1),delete d.check,d.key=c}},this),d||c},getDevice:function(){return this.__cached("getDevice",function(){return this.__obtainMatch(this.__devicesMap,{key:"unknown",format:"Unknown Device"})})},formatDevice:function(){return this.getDevice().format},__osMap:{macosx:{format:"Mac OS-X",check:function(){return this.isMacOS()}},windows:{format:"Windows",check:function(){return this.isWindows()}},unix:{format:"Unix",check:function(){return this.isUnix()}},linux:{format:"Linux",check:function(){return this.isLinux()}},ios:{format:"iOS",check:function(){return this.isiOS()},version:function(){return this.iOSversion().major+"."+this.iOSversion().minor+"."+this.iOSversion().revision}},android:{format:"Android",check:function(){return this.isAndroid()}},webos:{format:"WebOS",check:function(){return this.isWebOS()}},windowsphone:{format:"Windows Phone",check:function(){return this.isWindowsPhone()}},blackberry:{format:"Blackberry",check:function(){return this.isBlackberry()}}},getOS:function(){return this.__cached("getOS",function(){return this.__obtainMatch(this.__osMap,{key:"unknown",format:"Unknown Operating System"})})},formatOS:function(){return this.getOS().format},formatOSVersion:function(){return this.getOS().version?this.getOS().version.apply(this):""},__browserMap:{chrome:{format:"Chrome",check:function(){return this.isChrome()}},chromium:{format:"Chromium",check:function(){return this.isChromium()}},opera:{format:"Opera",check:function(){return this.isOpera()}},internetexplorer:{format:"Internet Explorer",check:function(){return this.isInternetExplorer()},version:function(){return this.internetExplorerVersion()}},firefox:{format:"Firefox",check:function(){return this.isFirefox()}},safari:{format:"Safari",check:function(){return this.isSafari()}},webos:{format:"WebOS",check:function(){return this.isWebOS()}},blackberry:{format:"Blackberry",check:function(){return this.isBlackberry()}},edge:{format:"Edge",check:function(){return this.isEdge()}},iemobile:{format:"IE Mobile",check:function(){return this.isIEMobile()}}},getBrowser:function(){return this.__cached("getBrowser",function(){return this.__obtainMatch(this.__browserMap,{key:"unknown",format:"Unknown Browser"})})},formatBrowser:function(){return this.getBrowser().format},formatBrowserVersion:function(){return this.getBrowser().version?this.getBrowser().version.apply(this):""},formatFlash:function(){return this.flash().installed()?"Flash "+this.flash().version().raw:this.flash().supported()?"Flash not installed but supported":"Flash not supported"}}}),a.define("module:FlashHelper",["base:Time","base:Objs","base:Types","base:Net.Uri","base:Ids","module:Info","jquery:"],function(a,b,c,d,e,f,g){return{getFlashObject:function(a){var b=g(a).find("embed").get(0);if(f.isInternetExplorer()&&f.internetExplorerVersion()<=10&&(b=null),b||(b=g(a).find("object").get(0)),!b)for(var c=g("object"),d=0;d<c.length;++d)g(c[d]).closest(a).length>0&&(b=g(c[d]).get(0));return b},embedTemplate:function(f){f=f||{};var g=[];g.push({objectKey:"classid",value:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"}),g.push({objectKey:"codebase",value:"http://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab"}),g.push({embedKey:"align",value:"middle"}),g.push({embedKey:"play",value:"true"}),g.push({embedKey:"loop",value:"false"}),g.push({embedKey:"type",value:"application/x-shockwave-flash"}),g.push({embedKey:"pluginspage",value:"http://www.adobe.com/go/getflashplayer"}),g.push({objectParam:"quality",embedKey:"quality",value:"high"}),g.push({objectParam:"allowScriptAccess",embedKey:"allowScriptAccess",value:"always"}),g.push({objectParam:"wmode",embedKey:"wmode",value:"opaque"}),g.push({objectParam:"movie",embedKey:"src",value:f.flashFile+(f.forceReload?"?"+a.now():"")}),f.width&&g.push({objectKey:"width",embedKey:"width",value:f.width}),f.height&&g.push({objectKey:"height",embedKey:"height",value:f.height}),f.bgcolor&&g.push({objectParam:"bgcolor",embedKey:"bgcolor",value:f.bgcolor}),f.FlashVars&&g.push({objectParam:"FlashVars",embedKey:"FlashVars",value:c.is_object(f.FlashVars)?d.encodeUriParams(f.FlashVars):f.FlashVars}),g.push({objectKey:"id",value:f.objectId||e.uniqueId("flash")});var h=[],i=[],j=[];return b.iter(g,function(a){a.objectKey&&h.push(a.objectKey+'="'+a.value+'"'),a.embedKey&&j.push(a.embedKey+'="'+a.value+'"'),a.objectParam&&i.push('<param name="'+a.objectParam+'" value="'+a.value+'" />')},this),"<object "+h.join(" ")+">"+i.join(" ")+"<embed "+j.join(" ")+"></embed></object>"},embedFlashObject:function(a,b){b=b||{};var c=g(a);if(b.parentBgcolor)try{var d=c.css("background-color");if(d.indexOf("rgb")>=0){var e=d.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),f=function(a){return("0"+parseInt(a,10).toString(16)).slice(-2)};e&&e.length>3&&(d="#"+f(e[1])+f(e[2])+f(e[3]))}b.bgcolor=d}catch(h){}if(b.fixHalfPixels)try{var i=c.offset();i.top%1!==0&&c.css("margin-top",Math.round(i.top)-i.top+"px"),i.left%1!==0&&c.css("margin-left",Math.round(i.left)-i.left+"px")}catch(h){}return c.html(this.embedTemplate(b)),this.getFlashObject(a)}}}),a.define("module:DomMutation.NodeRemoveObserver",["base:Classes.ConditionalInstance","base:Events.EventsMixin"],function(a,b,c){return a.extend({scoped:c},[b,function(a){return{constructor:function(b){a.constructor.call(this),this._node=b},_nodeRemoved:function(a){a===this._node&&this.trigger("node-removed")}}}])}),a.define("module:DomMutation.MutationObserverNodeRemoveObserver",["module:DomMutation.NodeRemoveObserver","base:Objs"],function(a,b,c){return a.extend({scoped:c},function(a){return{constructor:function(c){a.constructor.call(this,c);var d=this;this._observer=new window.MutationObserver(function(a){b.iter(a,function(a){for(var b=0;b<a.removedNodes.length;++b)d._nodeRemoved(a.removedNodes[b])})}),this._observer.observe(c.parentNode,{childList:!0})},destroy:function(){this._observer.disconnect(),a.destroy.call(this)}}},{supported:function(a){try{return!!window.MutationObserver}catch(b){return!1}}})}),a.define("module:DomMutation.DOMNodeRemovedNodeRemoveObserver",["module:DomMutation.NodeRemoveObserver","module:Info","jquery:"],function(a,b,c,d){return a.extend({scoped:d},function(a){return{constructor:function(b){a.constructor.call(this,b);var d=this;c(document).on("DOMNodeRemoved."+this.cid(),function(a){d._nodeRemoved(a.target)})},destroy:function(){c(document).off("DOMNodeRemoved."+this.cid()),a.destroy.call(this)}}},{supported:function(a){return!b.isInternetExplorer()||b.internetExplorerVersion()>=9}})}),a.define("module:DomMutation.TimerNodeRemoveObserver",["module:DomMutation.NodeRemoveObserver","base:Timers.Timer","jquery:"],function(a,b,c,d){return a.extend({scoped:d},function(a){return{constructor:function(c){a.constructor.call(this,c),this._timer=new b({context:this,fire:this._fire,delay:100})},destroy:function(){this._timer.weakDestroy(),a.destroy.call(this)},_fire:function(){this._node.parentElement||(this._timer.stop(),this._nodeRemoved(this._node))}}},{supported:function(a){return!0}})}),a.extend("module:DomMutation.NodeRemoveObserver",["module:DomMutation.NodeRemoveObserver","module:DomMutation.MutationObserverNodeRemoveObserver","module:DomMutation.DOMNodeRemovedNodeRemoveObserver","module:DomMutation.TimerNodeRemoveObserver"],function(a,b,c,d){return a.register(b,3),a.register(c,2),a.register(d,1),{}}),a.define("module:DomMutation.NodeResizeObserver",["base:Class","base:Events.EventsMixin","jquery:"],function(a,b,c,d){return a.extend({scoped:d},[b,function(a){return{constructor:function(b){a.constructor.call(this);var d=this;c(window).on("resize."+this.cid(),function(){d._resized()})},destroy:function(){c(window).off("."+this.cid()),a.destroy.call(this)},_resized:function(){this.trigger("node-resized")}}}])}),a.define("module:DomExtend.DomExtension",["base:Class","jquery:","base:Objs","base:Functions","base:Async","module:DomMutation.NodeRemoveObserver","module:DomMutation.NodeResizeObserver","jquery:"],function(a,b,c,d,e,f,g,h,i){return a.extend({scoped:i},function(a){return{_domMethods:[],_domAttrs:{},constructor:function(b,i){a.constructor.call(this),this._element=b,this._$element=h(b),b.domExtension=this,this._actualBB=null,this._idealBB=null,this._attrs=i||{},c.iter(this._domMethods,function(a){this._element[a]=d.as_method(this[a],this)},this),c.iter(["get","set"],function(a){this._element[a]=d.as_method(this[a],this)},this),e.eventually(function(){this._nodeRemoveObserver=this.auto_destroy(new f(b)),this._nodeRemoveObserver.on("node-removed",this.weakDestroy,this),this._nodeResizeObserver=this.auto_destroy(new g(b)),this._nodeResizeObserver.on("node-resized",function(){this.recomputeBB(),this._notify("resized")},this)},this),this._$element.css("display")&&"inline"!=this._$element.css("display")||this._$element.css("display","inline-block")},domEvent:function(a){this._$element.trigger(a)},readAttr:function(a){return a in this._element.attributes?this._element.attributes[a].value:a in this._element?this._element[a]:this._attrs[a]},hasAttr:function(a){return a in this._element.attributes||a in this._element||a in this._attrs},writeAttr:function(a,b){a in this._element.attributes?this._element.attributes[a].value=b:a in this._element?this._element[a]=b:this._attrs[a]=b},unsetAttr:function(a){delete this._element[a],this._element.removeAttribute(a),delete this._attrs[a]},get:function(a){var b=this._domAttrs[a]||{};if(!b.get)return this.readAttr(a);var c=d.callWithin(this,b.get);return this.writeAttr(a,c),c},set:function(a,b){this.writeAttr(a,b);var c=this._domAttrs[a]||{};c.set&&d.callWithin(this,c.set,b)},computeActualBB:function(a){var b=this._$element.width();if(this._$element.width()<a.width&&!this._element.style.width){this._element.style.width=a.width+"px",b=this._$element.width();for(var c=this._$element;c.get(0)!=document;)c=c.parent(),b=Math.min(b,c.width());this._element.style.width=null}return{width:b,height:b*a.height/a.width}},idealBB:function(){return null},recomputeBB:function(){var a=this.idealBB();if(a){var b=this.computeActualBB(a);this._idealBB=a,this._actualBB=b,this.setActualBB(b)}},setActualBB:function(a){}}})}),a.define("module:Dom",["base:Objs","jquery:","base:Types","module:Info"],function(a,b,c,d){return{outerHTML:function(a){return!d.isFirefox()||d.firefoxVersion()>=11?a.outerHTML:b("<div>").append(b(a).clone()).html()},changeTag:function(a,b){for(var c=document.createElement(b),d=0;d<a.attributes.length;++d)c.setAttribute(a.attributes[d].nodeName,a.attributes[d].nodeValue);for(;a.firstChild;)c.appendChild(a.firstChild);return a.parentNode.replaceChild(c,a),c},traverseNext:function(a,c){return"get"in a&&(a=a.get(0)),a.firstChild&&!c?b(a.firstChild):a.parentNode?a.nextSibling?b(a.nextSibling):this.traverseNext(a.parentNode,!0):null},selectNode:function(a,c){a=b(a).get(0);var d=null,e=null;window.getSelection?(d=window.getSelection(),d.removeAllRanges(),e=document.createRange()):document.selection&&(d=document.selection,e=d.createRange()),c?(e.setStart(a,c),e.setEnd(a,c),d.addRange(e)):(e.selectNode(a),d.addRange(e))},selectionStartNode:function(){return window.getSelection?b(window.getSelection().getRangeAt(0).startContainer):document.selection?b(document.selection.createRange().startContainer):null},selectedHtml:function(){return window.getSelection?window.getSelection().toString():document.selection?document.selection.createRange().htmlText:""},selectionAncestor:function(){return window.getSelection?b(window.getSelection().getRangeAt(0).commonAncestorContainer):document.selection?b(document.selection.createRange().parentElement()):null},selectionStartOffset:function(){return window.getSelection?window.getSelection().getRangeAt(0).startOffset:document.selection?document.selection.createRange().startOffset:null},selectionEndOffset:function(){return window.getSelection?window.getSelection().getRangeAt(0).endOffset:document.selection?document.selection.createRange().endOffset:null},selectionStart:function(){return window.getSelection?b(window.getSelection().getRangeAt(0).startContainer):document.selection?b(document.selection.createRange().startContainer):null},selectionEnd:function(){return window.getSelection?b(window.getSelection().getRangeAt(0).endContainer):document.selection?b(document.selection.createRange().endContainer):null},selectionNonEmpty:function(){var a=this.selectionStart(),b=this.selectionEnd();return a&&b&&a.get(0)&&b.get(0)&&(a.get(0)!=b.get(0)||this.selectionStartOffset()!=this.selectionEndOffset())},selectionContained:function(a){return a.has(this.selectionStart()).length>0&&a.has(this.selectionEnd()).length>0},selectionNodes:function(){var a=[],b=this.selectionStart(),c=this.selectionEnd();a.push(b);for(var d=b;d.get(0)!=c.get(0);)d=this.traverseNext(d),a.push(d);return a},selectionLeaves:function(){return a.filter(this.selectionNodes(),function(a){return 0===a.children().length})},contentSiblings:function(a){return a.parent().contents().filter(function(){return this!=a.get(0)})},remove_tag_from_parent_path:function(a,c,d){c=c.toLowerCase(),a=b(a);for(var e=a.parents(d?d+" "+c:c),f=0;f<e.length;++f){var g=e.get(f);for(g=b(g);a.get(0)!=g.get(0);)this.contentSiblings(a).wrap("<"+c+"></"+c+">"),a=a.parent();g.contents().unwrap()}},selectionSplitOffsets:function(){var a=this.selectionStartOffset(),c=this.selectionEndOffset(),d=this.selectionStart(),e=this.selectionEnd(),f=d.get(0)==e.get(0);if(c<e.get(0).wholeText.length){var g=e.get(0);g.splitText(c),e=b(g),f&&(d=e)}a>0&&(d=b(d.get(0).splitText(a)),f&&(e=d)),this.selectRange(d,e)},selectRange:function(a,c,d,e){a=b(a),c=b(c);var f=null,g=null;window.getSelection?(f=window.getSelection(),f.removeAllRanges(),g=document.createRange()):document.selection&&(f=document.selection,g=f.createRange()),g.setStart(a.get(0),d||0),g.setEnd(c.get(0),e||c.get(0).data.length),f.addRange(g)},splitNode:function(a,c,d){if(a=b(a),c=c||0,d=d||a.get(0).data.length,d<a.get(0).data.length){var e=a.get(0);e.splitText(d),a=b(e)}return c>0&&(a=b(a.get(0).splitText(c))),a},entitiesToUnicode:function(a){if(!a||!c.is_string(a)||a.indexOf("&")<0)return a;var d=document.createElement("span");return d.innerHTML=a,a=b(d).text(),d.remove&&d.remove(),a},elementSupportsFullscreen:function(a){return["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"].some(function(b){return b in a})},elementEnterFullscreen:function(b){a.iter(["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],function(a){return a in b&&b[a].call(b),!(a in b)})},elementIsFullscreen:function(a){return["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].some(function(b){return document[b]===a})},elementOnFullscreenChange:function(a,c,d){var e=this;b(a).on(["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"].join(" "),function(){c.call(d||this,a,e.elementIsFullscreen(a))})},elementOffFullscreenChange:function(a){b(a).off(["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"].join(" "))}}}),a.define("module:Upload.FileUploader",["base:Classes.ConditionalInstance","base:Events.EventsMixin","base:Objs","base:Types"],function(a,b,c,d,e){return a.extend({scoped:e},[b,function(a){return{constructor:function(b){a.constructor.call(this,b),this._state="idle"},_setState:function(a,b){this._state=a,this.trigger(a,b),this.trigger("state",a,b)},state:function(){return this._state},data:function(){return this._data},progress:function(){return{uploaded:this._uploaded,total:this._total}},reset:function(){"error"===this.state()&&(this._setState("idle"),delete this._data,delete this._uploaded,delete this._total)},upload:function(){return"idle"!==this.state()?this:(this._setState("uploading"),this.__upload(),this)},__upload:function(){this._options.resilience--,this._upload()},_upload:function(){},_progressCallback:function(a,b){"uploading"===this.state()&&(this._uploaded=a,this._total=b,this.trigger("progress",a,b))},_successCallback:function(a){"uploading"===this.state()&&(this._data=a,this._setState("success",a))},_errorCallback:function(a){if("uploading"===this.state()){if(this._options.resilience>0)return void this.__upload();this._data=a,this._setState("error",a)}}}}],{_initializeOptions:function(a){return a=a||{},c.extend({serverSupportChunked:!1,serverSupportPostMessage:!1,isBlob:"undefined"!=typeof Blob&&a.source instanceof Blob,resilience:1,data:{}},a)}})}),a.define("module:Upload.FormDataFileUploader",["module:Upload.FileUploader","module:Info","jquery:","base:Objs"],function(a,b,c,d,e){return a.extend({scoped:e},{_upload:function(){var a=this,b=new FormData;b.append("file",this._options.isBlob?this._options.source:this._options.source.files[0]),d.iter(this._options.data,function(a,c){b.append(c,a)},this),c.ajax({type:"POST",async:!0,url:this._options.url,data:b,cache:!1,contentType:!1,processData:!1,xhr:function(){var b=c.ajaxSettings.xhr();return b.upload&&b.upload.addEventListener("progress",function(b){b.lengthComputable&&a._progressCallback(b.loaded,b.total)},!1),b}}).success(function(b){a._successCallback(b)}).error(function(b){a._errorCallback(b)})}},{supported:function(a){if(b.isInternetExplorer()&&b.internetExplorerVersion()<=9)return!1;try{new FormData}catch(c){return!1}return!0}})}),a.define("module:Upload.FormIframeFileUploader",["module:Upload.FileUploader","jquery:","base:Net.Uri","base:Objs"],function(a,b,c,d,e){return a.extend({scoped:e},{_upload:function(){var a=this,e=document.createElement("iframe"),f="upload-iframe-"+this.cid();e.id=f,e.name=f,e.style.display="none";var g=document.createElement("form");g.method="POST",g.target=f,g.style.display="none",document.body.appendChild(e),document.body.appendChild(g);var h=this._options.source.parent;g.appendChild(this._options.source),d.iter(this._options.data,function(a,b){var c=document.createElement("input");c.type="hidden",c.name=b,c.value=a,g.appendChild(c)},this);var i=!("postMessage"in window);e.onerror=function(){i&&(window.postMessage=null),b(window).off("message."+a.cid()),h&&h.appendChild(this._options.source),document.body.removeChild(g),document.body.removeChild(e),a._errorCallback()},g.action=c.appendUriParams(this._options.url,{_postmessage:!0}),g.encoding=g.enctype="multipart/form-data";var j=function(c){i&&(window.postMessage=null),b(window).off("message."+a.cid()),h&&h.appendChild(this._options.source);var d=JSON.parse(c);document.body.removeChild(g),document.body.removeChild(e),a._successCallback(d)};b(window).on("message."+this.cid(),function(a){j(a.originalEvent.data)}),i&&(window.postMessage=j),g.submit()}},{supported:function(a){return!a.isBlob&&a.serverSupportPostMessage}})}),a.define("module:Upload.CordovaFileUploader",["module:Upload.FileUploader"],function(a,b){return a.extend({scoped:b},{_upload:function(){var a=this,b=this._options.source.fullPath.split(":")[1],c=new window.FileUploadOptions;c.fileKey="file",c.fileName=b.substr(b.lastIndexOf("/")+1),c.mimeType=this._options.source.type,c.httpMethod="POST",c.params=this._options.data;var d=new window.FileTransfer;d.upload(b,this._options.url,function(b){a._successCallback(b)},function(b){a._errorCallback(b)},c)}},{supported:function(a){var b=!!navigator.device&&!!navigator.device.capture&&!!navigator.device.capture.captureVideo&&!!window.FileTransfer&&!!window.FileUploadOptions&&!a.isBlob&&"localURL"in a.source;return b}})}),a.extend("module:Upload.FileUploader",["module:Upload.FileUploader","module:Upload.FormDataFileUploader","module:Upload.FormIframeFileUploader","module:Upload.CordovaFileUploader"],function(a,b,c,d){return a.register(b,2),a.register(c,1),a.register(d,4),{}}),a.define("module:Upload.ResumableFileUploader",["module:Upload.FileUploader","resumablejs:","base:Async","base:Objs","jquery:"],function(a,b,c,d,e,f){return a.extend({scoped:f},{_upload:function(){this._resumable=new b(d.extend({target:this._options.url,headers:this._options.data},this._options.resumable)),this._options.isBlob&&(this._options.source.fileName="blob"),this._resumable.addFile(this._options.isBlob?this._options.source:this._options.source.files[0]);var a=this;this._resumable.on("fileProgress",function(b){var c=a._resumable.getSize();a._progressCallback(Math.floor(a._resumable.progress()*c),c)}),this._resumable.on("fileSuccess",function(b,c){
a._options.resumable.assembleUrl?a._resumableSuccessCallback(b,c,a._options.resumable.assembleResilience||1):a._successCallback(c)}),this._resumable.on("fileError",function(b,c){a._errorCallback(c)}),c.eventually(this._resumable.upload,this._resumable)},_resumableSuccessCallback:function(a,b,f){0>=f&&this._errorCallback(b);var g=this;e.ajax({type:"POST",async:!0,url:this._options.resumable.assembleUrl,dataType:null,data:d.extend({resumableIdentifier:a.file.uniqueIdentifier,resumableFilename:a.file.fileName||a.file.name,resumableTotalSize:a.file.size,resumableType:a.file.type},this._options.data),success:function(a){g._successCallback(b)},error:function(d,e,h){return g._options.resumable.acceptedAssembleError&&g._options.resumable.acceptedAssembleError==d.status?void g._successCallback(b):void c.eventually(function(){g._resumableSuccessCallback(a,b,f-1)},g._options.resumable.assembleResilienceTimeout||0)}})}},{supported:function(a){return a.serverSupportChunked&&(new b).support}})}),a.extend("module:Upload.FileUploader",["module:Upload.FileUploader","module:Upload.ResumableFileUploader"],function(a,b){return a.register(b,3),{}}),a.define("module:Upload.MultiUploader",["module:Upload.FileUploader","base:Objs"],function(a,b,c){return a.extend({scoped:c},function(a){return{constructor:function(b){a.constructor.call(this,b),this._uploaders={}},addUploader:function(a){return this._uploaders[a.cid()]=a,a.on("state",this._updateState,this),a.on("progress",this._updateProgress,this),"uploading"===this.state()&&("error"===a.state()&&a.reset(),"idle"===a.state()&&a.upload()),this},_upload:function(){b.iter(this._uploaders,function(a){"error"===a.state()&&a.reset(),"idle"===a.state()&&a.upload()},this),this._updateState()},_updateState:function(){if("uploading"===this.state()){var a=!1,c=!1;if(b.iter(this._uploaders,function(b){c=c||"uploading"===b.state(),a=a||"error"===b.state()},this),!c){var d=[];b.iter(this._uploaders,function(b){var c=a&&"error"===b.state()||!a&&"success"===b.state()?b.data():void 0;d.push(c)},this),a?this._errorCallback(d):this._successCallback(d)}}},_updateProgress:function(){if("uploading"===this.state()){var a=0,c=0;b.iter(this._uploaders,function(b){var d=(b.state(),b.progress());d&&d.total&&("success"===b.state()&&(a+=d.total,c+=d.total),"uploading"===b.state()&&(a+=d.total,c+=d.uploaded))},this),this._progressCallback(c,a)}}}})}),a.define("module:Upload.CustomUploader",["module:Upload.FileUploader"],function(a,b){return a.extend({scoped:b},{_upload:function(){this.trigger("upload",this._options)},progressCallback:function(a,b){this._progressCallback(a,b)},successCallback:function(a){this._successCallback(a)},errorCallback:function(a){this._errorCallback(a)}})}),a.define("module:Loader",["jquery:"],function(a){return{loadScript:function(a,b,c){var d=!1,e=document.getElementsByTagName("head")[0],f=document.createElement("script");f.src=a,f.onload=f.onreadystatechange=function(){d||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(d=!0,f.onload=f.onreadystatechange=null,b&&b.call(c||this,a))},e.appendChild(f)},loadStyles:function(a,b,c){var d=!1,e=document.getElementsByTagName("head")[0],f=document.createElement("link");f.rel="stylesheet",f.href=a,f.onload=f.onreadystatechange=function(){d||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(d=!0,f.onload=f.onreadystatechange=null,b&&b.call(c||this,a))},e.appendChild(f)},inlineStyles:function(b){return a("<style>"+b+"</style>").appendTo("head")},loadHtml:function(b,c,d){a.ajax({url:b,dataType:"html"}).done(function(a){c.call(d||this,a,b)})},findScript:function(a){for(var b=0;b<document.scripts.length;++b)if(document.scripts[b].src.toLowerCase().indexOf(a.toLowerCase())>=0)return document.scripts[b];return null},loadByIframe:function(a,b,c){var d=document.createElement("iframe");a.visible?(d.style.border="none",d.style.width="1px",d.style.height="1px"):d.style.display="none",d.onload=function(){b.call(c||this),a.remove&&d.remove()},d.src=a.url,document.body.appendChild(d)}}}),a.define("module:JQueryAjax",["base:Net.AbstractAjax","base:Net.AjaxException","base:Promise","module:Info","jquery:"],function(a,b,c,d,e,f){return a.extend({scoped:f},function(a){return{_asyncCall:function(a,f){var g=c.create();return d.isInternetExplorer()&&d.internetExplorerVersion()<=9&&(e.support.cors=!0),e.ajax({type:a.method,cache:!1,async:!0,url:a.uri,dataType:a.decodeType?a.decodeType:null,data:a.encodeType&&"json"==a.encodeType?JSON.stringify(a.data):a.data,success:function(a){g.asyncSuccess(a)},error:function(a,c,d){var e="";try{e=JSON.parse(a.responseText)}catch(f){try{e=JSON.parse('"'+a.responseText+'"')}catch(h){e={}}}g.asyncError(new b(a.status,d,e))}}),g}}})}),a.define("module:Cookies",["base:Objs","base:Types"],function(a,b){return{getCookielikeValue:function(a,b){return decodeURIComponent(a.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(b).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},get:function(a){return this.getCookielikeValue(document.cookie,a)},createCookielikeValue:function(c,d,e,f,g,h){if(!c||/^(?:expires|max\-age|path|domain|secure)$/i.test(c))return null;var i=[];return i.push([encodeURIComponent(c),encodeURIComponent(d)]),e&&(e===1/0?i.push(["expires","Fri, 31 Dec 9999 23:59:59 GMT"]):"number"==typeof e?i.push(["max-age",e]):"object"==typeof e?i.push(["expires",e.toUTCString()]):i.push(["expires",e])),g&&i.push(["domain",g]),f&&i.push(["path",f]),h&&i.push("secure"),a.map(i,function(a){return b.is_array(a)?a.join("="):a}).join("; ")},set:function(a,b,c,d,e,f){document.cookie=this.createCookielikeValue(a,b,c,d,e,f)},removeCookielikeValue:function(a,b,c,d){return this.createCookielikeValue(a,b,new Date(0),c,d)},remove:function(a,b,c,d){document.cookie=this.removeCookielikeValue(a,b,c,d)},hasCookielikeValue:function(a,b){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(b).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(a)},has:function(a){return this.hasCookielikeValue(document.cookie,a)},keysCookielike:function(b){var c=b.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/);return a.map(c,decodeURIComponent)},keys:function(){return this.keysCookielike(document.cookie)}}}),a.define("module:DomMutation.NodeInsertObserver",["base:Classes.ConditionalInstance","base:Events.EventsMixin"],function(a,b,c){return a.extend({scoped:c},[b,function(a){return{_nodeInserted:function(a,b){if(b)for(var c=0;c<a.childNodes.length;++c)this._nodeInserted(a.childNodes[c],b);this._options.parent&&a.parentNode!==this._options.parent||this._options.root&&!this._options.root.contains(a)||this._options.filter&&!this._options.filter.call(this._options.context||this,a)||this.trigger("node-inserted",a)}}}])}),a.define("module:DomMutation.MutationObserverNodeInsertObserver",["module:DomMutation.NodeInsertObserver","base:Objs"],function(a,b,c){return a.extend({scoped:c},function(a){return{constructor:function(c){c=c||{},a.constructor.call(this,c);var d=this;this._observer=new window.MutationObserver(function(a){b.iter(a,function(a){for(var b=0;b<a.addedNodes.length;++b)d._nodeInserted(a.addedNodes[b],!0)})}),this._observer.observe(this._options.root||this._options.parent||document.body,{childList:!0,subtree:!this._options.parent})},destroy:function(){this._observer.disconnect(),a.destroy.call(this)}}},{supported:function(a){try{return!!window.MutationObserver}catch(b){return!1}}})}),a.define("module:DomMutation.DOMNodeInsertedNodeInsertObserver",["module:DomMutation.NodeInsertObserver","jquery:"],function(a,b,c){return a.extend({scoped:c},function(a){return{constructor:function(c){c=c||{},a.constructor.call(this,c);var d=this;b(document).on("DOMNodeInserted."+this.cid(),function(a){d._nodeInserted(a.target)})},destroy:function(){b(document).off("DOMNodeInserted."+this.cid()),a.destroy.call(this)}}},{supported:function(a){return!0}})}),a.extend("module:DomMutation.NodeInsertObserver",["module:DomMutation.NodeInsertObserver","module:DomMutation.MutationObserverNodeInsertObserver","module:DomMutation.DOMNodeInsertedNodeInsertObserver"],function(a,b,c){return a.register(b,3),a.register(c,2),{}})}.call(c),function(){var a=this.subScope();a.binding("base","root:BetaJS"),a.binding("browser","root:BetaJS.Browser"),a.binding("module","root:BetaJS.Flash"),a.binding("jquery","root:jQuery"),a.define("module:",function(){return{guid:"3adc016a-e639-4d1a-b4cb-e90cab02bc4f",version:"33.1465770701066"}}),a.extend("module:",["module:"],function(){return{options:{flashFile:"betajs-flash.swf"}}}),a.define("module:FlashClassRegistry",["base:Class"],function(a,b){return a.extend({scoped:b},{interfaces:{},register:function(a,b,c){this.interfaces[a]={methods:b||{},statics:c||{}}},get:function(a){return this.interfaces[a]}})}),a.define("module:FlashObjectWrapper",["base:Class","base:Objs","base:Functions"],function(a,b,c,d){return a.extend({scoped:d},function(a){return{constructor:function(d,e,f){if(a.constructor.call(this),this.__embedding=d,this.__ident=e,this.__type=f,d.__registry){var g=d.__registry.get(f);g&&b.iter(g.methods,function(a){this[a]=function(){var b=c.getArguments(arguments);return b.unshift(a),b.unshift(this.__ident),this.__embedding.flashCall.apply(this.__embedding,b)},this[a+"Void"]=function(){var b=c.getArguments(arguments);return b.unshift(a),b.unshift(this.__ident),this.__embedding.flashCallVoid.apply(this.__embedding,b)}},this)}},destroy:function(){this.__embedding.flashDestroy(this.__ident),a.destroy.call(this)},set:function(a,b){return this.__embedding.flashSet.call(this.__embedding,this.__ident,a,b)},get:function(a){return this.__embedding.flashGet.call(this.__embedding,this.__ident,a)}}})}),a.define("module:FlashClassWrapper",["base:Class","base:Objs","base:Functions"],function(a,b,c,d){return a.extend({scoped:d},function(a){return{constructor:function(d,e){if(a.constructor.call(this),this.__embedding=d,this.__type=e,d.__registry){var f=d.__registry.get(e);f&&b.iter(f.statics,function(a){this[a]=function(){var b=c.getArguments(arguments);return b.unshift(a),b.unshift(this.__type),this.__embedding.flashStaticCall.apply(this.__embedding,b)},this[a+"Void"]=function(){var b=c.getArguments(arguments);return b.unshift(a),b.unshift(this.__type),this.__embedding.flashStaticCallVoid.apply(this.__embedding,b)}},this)}},set:function(a,b){return this.__embedding.flashSetStatic.call(this.__embedding,this.__type,a,b)},get:function(a){return this.__embedding.flashGetStatic.call(this.__embedding,this.__type,a)}}})}),a.define("module:FlashEmbedding",["base:Class","base:Events.EventsMixin","jquery:","base:Strings","base:Functions","base:Types","base:Objs","base:Ids","base:Time","base:Timers.Timer","base:Async","base:Tokens","module:FlashObjectWrapper","module:FlashClassWrapper","browser:FlashHelper","module:"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){return a.extend({scoped:q},[b,function(a){return{constructor:function(b,d,f){a.constructor.call(this),d=d||{},this.__registry=d.registry,this.__wrap=d.wrap,this.__cache={},this.__callbacks={ready:e.as_method(this.__ready,this)},this.__namespace="flash_"+l.generate_token(),this.__is_ready=!1,this.__is_suspended=!1,this.__throttle_status="",this.__ready_queue=[],this.__wrappers={},this.__staticWrappers={},window[this.__namespace]=this.__callbacks,f=g.extend(g.clone(p.options,1),g.extend({FlashVars:{}},f)),f.FlashVars.ready=this.__namespace+".ready",d.debug&&(f.FlashVars.debug=!0),b||(this.__helper_container=!0,b=c("<div></div>").appendTo("body"),b.css("width","1px"),b.css("height","1px"),b.css("visibility","hidden"),b.css("position","absolute"),b.css("z-index","-1"),b=b.get(0)),this.__container=c(b),this.__embedding=o.embedFlashObject(b,f),this.__suspendedTimer=this.auto_destroy(new j({delay:50,context:this,fire:this.__suspendedCheck}))},destroy:function(){try{window[this.__namespace]=null,delete window[this.__namespace]}catch(b){}g.iter(this.__wrappers,function(a){a.weakDestroy()}),g.iter(this.__staticWrappers,function(a){a.weakDestroy()}),this.__container.html(""),this.__helper_container&&c(this.__container).remove(),a.destroy.call(this)},registerCallback:function(a,b){var c="__FLASHCALLBACK__"+h.uniqueId(),d=this;return this.__callbacks[c]=function(){a.apply(b||d,g.map(e.getArguments(arguments),d.unserialize,d))},c},unregisterCallback:function(a){delete this.__callbacks[a]},serialize:function(a){return f.is_array(a)?g.map(a,this.serialize,this):(f.is_function(a)&&(a=this.registerCallback(a)),f.is_string(a)&&d.starts_with(a,"__FLASHCALLBACK__")&&(a=this.__namespace+"."+a),m.is_instance_of(a)&&(a=a.__ident),n.is_instance_of(a)&&(a=a.__type),a)},unserialize:function(a){if(f.is_string(a)&&d.starts_with(a,"__FLASHERR__"))throw d.strip_start(a,"__FLASHERR__");if(f.is_string(a)&&d.starts_with(a,"__FLASHOBJ__")&&this.__wrap){var b=d.strip_start(a,"__FLASHOBJ__");if(b=d.splitFirst(b,"__").head.replace("::","."),"object"!=b.toLowerCase())return a in this.__wrappers||(this.__wrappers[a]=new m(this,a,b)),this.__wrappers[a]}return a},invoke:function(a,b){if(!this.__is_ready)throw"Flash is not ready yet";return b=b||[],this.unserialize(this.__embedding[a].apply(this.__embedding,this.serialize(e.getArguments(b))))},invokeCached:function(a,b){b=b||[];var c=a+"__"+e.getArguments(b).join("__");return c in this.__cache||(this.__cache[c]=this.invoke.call(this,a,b)),this.__cache[c]},getClass:function(a){return this.__wrap?(a in this.__staticWrappers||(this.__staticWrappers[a]=new n(this,a)),this.__staticWrappers[a]):null},newObject:function(){return this.flashCreate.apply(this,arguments)},newCallback:function(){return f.is_string(arguments[0])?this.flashCreateCallbackObject.apply(this,arguments):this.flashCreateCallbackFunction.apply(this,arguments)},flashCreateCallbackObject:function(){return this.invoke("create_callback_object",arguments)},flashCreateCallbackFunction:function(){return this.invoke("create_callback_function",arguments)},flashCreate:function(){return this.invoke("create",arguments)},flashDestroy:function(){return this.invoke("destroy",arguments)},flashCall:function(){return this.invoke("call",arguments)},flashCallVoid:function(){return this.invoke("call_void",arguments)},flashGet:function(){return this.invoke("get",arguments)},flashSet:function(){return this.invoke("set",arguments)},flashStaticCall:function(){return this.invoke("static_call",arguments)},flashStaticCallVoid:function(){return this.invoke("static_call_void",arguments)},flashGetStatic:function(){return this.invoke("get_static",arguments)},flashSetStatic:function(){return this.invoke("set_static",arguments)},flashMain:function(){return this.invokeCached("main")},__suspendedCheck:function(){if(this.__is_ready){for(var a=i.now(),b=10;b>0;){try{if(this.__embedding.echo(a)==a)break}catch(c){}b--}var d=0===b;d!==this.__is_suspended&&(this.__is_suspended=d,this.trigger(d?"suspended":"resumed"));try{var e=this.__embedding.throttle(),f=e!==this.__throttle_status;this.__throttle_status=e,f&&this.trigger(this.isThrottled()?"throttled":"unthrottled")}catch(c){}}},isSuspended:function(){return this.__is_ready&&this.__is_suspended},isThrottled:function(){return"throttle"===this.__throttle_status},__ready:function(){this.__is_ready||(this.__is_ready=!0,this.__is_suspended=!1,k.eventually(function(){g.iter(this.__ready_queue,function(a){a.callback.call(a.context||this)},this)},this),this.trigger("ready"))},ready:function(a,b){this.__is_ready?k.eventually(function(){a.call(b||this)},this):this.__ready_queue.push({callback:a,context:b})}}}])})}.call(c),function(){var a=this.subScope();a.binding("base","root:BetaJS"),a.binding("browser","root:BetaJS.Browser"),a.binding("flash","root:BetaJS.Flash"),a.binding("module","root:BetaJS.Media"),a.binding("jquery","root:jQuery"),a.define("module:",function(){return{guid:"8475efdb-dd7e-402e-9f50-36c76945a692",version:"60.1468716098987"}}),a.define("module:Player.FlashPlayer",["browser:DomExtend.DomExtension","browser:Dom","browser:Info","flash:FlashClassRegistry","flash:FlashEmbedding","base:Strings","base:Async","base:Objs","base:Functions","base:Types","jquery:","base:Promise"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=a.extend({scoped:m},function(a){return{constructor:function(b,c){a.constructor.call(this,b,c),this._source=this.__preferedSource(),this._embedding=this.auto_destroy(new e(b,{registry:this.cls.flashRegistry(),wrap:!0,debug:!1})),this._flashObjs={},this._flashData={status:"idle"},this.ready=l.create(),this._embedding.ready(this.__initializeEmbedding,this)},__preferedSource:function(){var a=[".mp4",".flv"],b=[];if(this.readAttr("src")||this.readAttr("source")||this.readAttr("sources")){var d=this.readAttr("src")||this.readAttr("source")||this.readAttr("sources");j.is_array(d)?b=d:b.push(d)}var e=this._element;if(c.isInternetExplorer()&&c.internetExplorerVersion()<9)for(var g=this._$element;;){var i=g.next(),k=i.get(0);if(!k||"source"!=k.tagName.toLowerCase())break;b.push(i.attr("src").toLowerCase()),g=i}else for(var l=0;l<this._element.childNodes.length;++l)e.childNodes[l].tagName&&"source"==e.childNodes[l].tagName.toLowerCase()&&e.childNodes[l].src&&b.push(e.childNodes[l].src.toLowerCase());b=h.map(b,function(a){return a.src||a});for(var m=b[0],n=a.length-1,o=b.length-1;o>=0;--o)for(var p=0;n>=p;++p)if(f.ends_with(b[o],a[p])){m=b[o],n=p;break}-1==m.indexOf("://")&&(m=document.location.href+"/../"+m);var q=null,r=m;if(f.starts_with(m,"rtmp")){var s=f.splitLast(m,"/");q=s.head,r=s.tail}return{sourceUrl:m,connectionUrl:q,playUrl:r}},__initializeEmbedding:function(){if(this._flashObjs.main=this._embedding.flashMain(),this._flashObjs.stage=this._flashObjs.main.get("stage"),this._flashObjs.stage.set("scaleMode","noScale"),this._flashObjs.stage.set("align","TL"),this.readAttr("poster")){this._flashObjs.imageLoader=this._embedding.newObject("flash.display.Loader");var a=this._flashObjs.imageLoader.get("contentLoaderInfo");a.addEventListener("complete",this._embedding.newCallback(i.as_method(function(){this.__imageLoaded={width:this._flashObjs.imageLoader.get("width"),height:this._flashObjs.imageLoader.get("height")},this.__metaLoaded||this.recomputeBB()},this))),a.addEventListener("ioError",this._embedding.newCallback(i.as_method(function(){this.domEvent("postererror")},this))),this._flashObjs.imageUrlRequest=this._embedding.newObject("flash.net.URLRequest",this.readAttr("poster")),this._flashObjs.imageLoader.load(this._flashObjs.imageUrlRequest),this._flashObjs.main.addChildVoid(this._flashObjs.imageLoader)}this._flashObjs.video=this._embedding.newObject("flash.media.Video",this._flashObjs.stage.get("stageWidth"),this._flashObjs.stage.get("stageHeight")),this._flashObjs.connection=this._embedding.newObject("flash.net.NetConnection"),this._flashObjs.connection.addEventListener("netStatus",this._embedding.newCallback(i.as_method(this.__connectionStatusEvent,this))),this._flashObjs.connection.connectVoid(this._source.connectionUrl)},__connectionStatusEvent:function(){this._flashObjs.stream=this._embedding.newObject("flash.net.NetStream",this._flashObjs.connection),this._flashObjs.stream.set("client",this._embedding.newCallback("onMetaData",i.as_method(function(a){this._flashData.meta=a,this._element.duration=a.duration,this.__metaLoaded=!0,g.eventually(this.recomputeBB,this)},this))),this._flashObjs.stream.addEventListener("netStatus",this._embedding.newCallback(i.as_method(this.__streamStatusEvent,this))),this._flashObjs.soundTransform=this._embedding.newObject("flash.media.SoundTransform"),this._flashObjs.stream.set("soundTransform",this._flashObjs.soundTransform),this._flashObjs.video.attachNetStreamVoid(this._flashObjs.stream),this.writeAttr("volume",1),this.hasAttr("muted")&&(this._flashObjs.soundTransform.set("volume",0),this._flashObjs.stream.set("soundTransform",null),this._flashObjs.stream.set("soundTransform",this._flashObjs.soundTransform),this.writeAttr("volume",0)),this._flashObjs.main.addChildVoid(this._flashObjs.video),this.hasAttr("autoplay")&&this._element.play(),this.ready.asyncSuccess(this)},__streamStatusEvent:function(a){var b=a.get("info").code;"NetStream.Play.StreamNotFound"==b&&(this._flashData.status="error",this.domEvent("videoerror")),"NetStream.Play.Start"==b&&(this._flashData.status="start"),"NetStream.Play.Stop"==b&&(this._flashData.status="stopping"),"NetStream.Buffer.Empty"==b&&"stopping"==this._flashData.status&&(this._flashData.status="stopped",this.domEvent("ended")),"stopped"==this._flashData.status&&this.hasAttr("loop")&&(this._flashData.status="idle",this._element.play())},idealBB:function(){return this.__imageLoaded||this.__metaLoaded?{width:this.__metaLoaded?this._flashData.meta.width:this.__imageLoaded.width,height:this.__metaLoaded?this._flashData.meta.height:this.__imageLoaded.height}:null},setActualBB:function(a){this._$element.find("object").css("width",a.width+"px"),this._$element.find("embed").css("width",a.width+"px"),this._$element.find("object").css("height",a.height+"px"),this._$element.find("embed").css("height",a.height+"px"),this.__metaLoaded&&(this._flashObjs.video.set("width",a.width),this._flashObjs.video.set("height",a.height)),this.__imageLoaded&&(this._flashObjs.imageLoader.set("width",a.width),this._flashObjs.imageLoader.set("height",a.height))},videoWidth:function(){return this.__metaLoaded?this._flashData.meta.width:this.__imageLoaded?this.__imageLoaded.width:NaN},videoHeight:function(){return this.__metaLoaded?this._flashData.meta.height:this.__imageLoaded?this.__imageLoaded.height:NaN},_domMethods:["play","pause","load"],_domAttrs:{volume:{set:"_setVolume"},currentTime:{get:"_getCurrentTime",set:"_setCurrentTime"}},load:function(){},play:function(){this._flashObjs.main.imageLoader&&this._flashObjs.main.setChildIndex(this._flashObjs.video,1),"paused"===this._flashData.status?this._flashObjs.stream.resumeVoid():this._flashObjs.stream.playVoid(this._source.playUrl),this._flashData.status="playing",this.domEvent("playing")},pause:function(){"paused"!==this._flashData.status&&(this._flashData.status="paused",this._flashObjs.stream.pauseVoid(),this.domEvent("pause"))},_setVolume:function(a){this._flashObjs.soundTransform.set("volume",a),this._flashObjs.stream.set("soundTransform",null),this._flashObjs.stream.set("soundTransform",this._flashObjs.soundTransform),this.domEvent("volumechange")},_getCurrentTime:function(){return this._flashObjs.stream.get("time")},_setCurrentTime:function(a){this._flashObjs.stream.seek(a)}}},{flashRegistry:function(){return this.__flashRegistry||(this.__flashRegistry=new d,this.__flashRegistry.register("flash.media.Video",["attachNetStream"]),this.__flashRegistry.register("flash.display.Sprite",["addChild","setChildIndex"]),this.__flashRegistry.register("flash.display.Stage",[]),this.__flashRegistry.register("flash.net.NetStream",["play","pause","resume","addEventListener","seek"]),this.__flashRegistry.register("flash.net.NetConnection",["connect","addEventListener"]),this.__flashRegistry.register("flash.media.SoundTransform",[]),this.__flashRegistry.register("flash.display.Loader",["load"]),this.__flashRegistry.register("flash.net.URLRequest",[]),this.__flashRegistry.register("flash.display.LoaderInfo",["addEventListener"])),this.__flashRegistry},polyfill:function(a,c,d,e){if(e){var f=l.create();return g.eventually(function(){f.asyncSuccess(n.polyfill(a,c,d))}),f}return"video"==a.tagName.toLowerCase()&&"networkState"in a?a.networkState==a.NETWORK_NO_SOURCE||d?n.attach(b.changeTag(a,c||"videopoly")):a:n.attach(a)},attach:function(a,b){new n(a,b);return a}});return n}),a.define("module:Player.VideoPlayerWrapper",["base:Classes.OptimisticConditionalInstance","base:Events.EventsMixin","base:Types","base:Objs","base:Strings","jquery:"],function(a,b,c,d,e,f,g){return a.extend({scoped:g},[b,function(a){return{constructor:function(b,g){a.constructor.call(this),b=d.extend(d.clone(b||{},1),g),this._poster=b.poster||null;var h=b.source||b.sources||[];c.is_string(h)?h=h.split(" "):c.is_array(h)||(h=[h]);var i=[];d.iter(h,function(a){if(c.is_string(a)?a={src:a.trim()}:"undefined"!=typeof Blob&&a instanceof Blob&&(a={src:a}),a.ext&&!a.type&&(a.type="video/"+a.ext),!a.ext&&a.type&&(a.ext=e.last_after(a.type,"/")),!a.ext&&!a.type&&c.is_string(a.src)){var b=e.splitFirst(a.src,"?").head;b.indexOf(".")>=0&&(a.ext=e.last_after(b,"."),a.type="video/"+a.ext)}a.ext&&(a.ext=a.ext.toLowerCase()),a.type&&(a.type=a.type.toLowerCase()),"undefined"!=typeof Blob&&a.src instanceof Blob&&(a.src=(window.URL||window.webkitURL).createObjectURL(a.src)),"undefined"!=typeof Blob&&a.audiosrc instanceof Blob&&(a.audiosrc=(window.URL||window.webkitURL).createObjectURL(a.audiosrc)),i.push(a)},this),this._sources=i,this._element=b.element,this._$element=f(b.element),this._preload=b.preload||!1,this._reloadonplay=b.reloadonplay||!1,this._options=b,this._loop=b.loop||!1,this._loaded=!1,this._postererror=!1,this._error=0},destroy:function(){this._$element.off("."+this.cid()),a.destroy.call(this)},poster:function(){return this._poster},sources:function(){return this._sources},loaded:function(){return this._loaded},postererror:function(){return this._postererror},buffered:function(){},_eventLoaded:function(){this._loaded=!0,this.trigger("loaded")},_eventPlaying:function(){this.trigger("playing")},_eventPaused:function(){this.trigger("paused")},_eventEnded:function(){this.trigger("ended")},_eventError:function(a){this._error=a,this.trigger("error",a)},_eventPosterError:function(){this._postererror=!0,this.trigger("postererror")},supportsFullscreen:function(){return!1},duration:function(){return this._element.duration},position:function(){return this._element.currentTime},enterFullscreen:function(){},error:function(){return this._error},play:function(){this._reloadonplay&&this._element.load(),this._element.play()},pause:function(){this._element.pause()},setPosition:function(a){this._element.currentTime=a},muted:function(){return this._element.muted},setMuted:function(a){this._element.muted=a},volume:function(){return this._element.volume},setVolume:function(a){this._element.volume=a},videoWidth:function(){},videoHeight:function(){}}}],{ERROR_NO_PLAYABLE_SOURCE:1,ERROR_FLASH_NOT_INSTALLED:2})}),a.define("module:Player.Html5VideoPlayerWrapper",["module:Player.VideoPlayerWrapper","browser:Info","base:Promise","base:Objs","base:Timers.Timer","base:Strings","base:Async","jquery:","browser:Dom"],function(a,b,c,d,e,f,g,h,i,j){return a.extend({scoped:j},function(a){return{_initialize:function(){if(this._options.nohtml5)return c.error(!0);if(this._sources.length<1)return c.error(!0);if(b.isInternetExplorer()&&b.internetExplorerVersion()<9)return c.error(!0);if(this._options.forceflash)return c.error(!0);var a=this,g=c.create();this._$element.html("");var j=this.sources(),k=b.isInternetExplorer()&&9==b.internetExplorerVersion();if("video"!==this._element.tagName.toLowerCase())this._element=i.changeTag(this._element,"video"),this._$element=h(this._element),this._transitionals.element=this._element;else if(k){var l=f.splitLast(this._element.outerHTML,"</video>").head;d.iter(j,function(a){l+="<source"+(a.type?" type='"+a.type+"'":"")+" src='"+a.src+"' />"}),l+="</video>";var m=h(l);this._$element.replaceWith(m),this._$element=m,this._element=this._$element.get(0),this._transitionals.element=this._element}var n="loadstart";this._$element.on(n+"."+this.cid(),function(){return a._element.networkState===a._element.NETWORK_NO_SOURCE?void g.asyncError(!0):void g.asyncSuccess(!0)});var o=10,p=new e({context:this,fire:function(){this._element.networkState===this._element.NETWORK_NO_SOURCE?(o--,0>=o&&g.asyncError(!0)):this._element.networkState===this._element.NETWORK_IDLE&&g.asyncSuccess(!0)},delay:50});this._preload||this._$element.attr("preload","none"),this._loop&&this._$element.attr("loop","loop");var q=0;this._audioElement=null,k?this._$element.find("source").on("error",function(){q++,q===j.length&&g.asyncError(!0)}):d.iter(j,function(a){var b=h("<source"+(a.type?" type='"+a.type+"'":"")+" />").appendTo(this._$element);b.on("error",function(){q++,q===j.length&&g.asyncError(!0)}),b.get(0).src=a.src,a.audiosrc&&(this._audioElement||(this._audioElement=h("<audio></audio>").insertAfter(this._$element).get(0)),b=h("<source"+(a.type?" type='"+a.type+"'":"")+" />").appendTo(this._audioElement),b.get(0).src=a.audiosrc)},this),this.poster()&&(this._element.poster=this.posterURL()),g.callback(function(){this._$element.find("source").off("error"),p.destroy()},this),g.success(function(){this._setup()},this);try{this._$element.get(0).load()}catch(r){}return g},posterURL:function(){var a=this.poster();return a&&"undefined"!=typeof Blob&&a instanceof Blob?(window.URL||window.webkitURL).createObjectURL(a):a},destroy:function(){this._audioElement&&this._audioElement.remove(),this.supportsFullscreen()&&i.elementOffFullscreenChange(this._element),this._$element.html(""),a.destroy.call(this)},_setup:function(){this._loaded=!1;var a=this,c=function(b,c){a._$element.on(b+"."+a.cid(),function(){c.apply(a,arguments)})};if(c("canplay",this._eventLoaded),c("playing",this._eventPlaying),c("pause",this._eventPaused),c("ended",this._eventEnded),a._$element.find("source").on("error."+a.cid(),function(){a._eventError(a.cls.ERROR_NO_PLAYABLE_SOURCE)}),this.poster()){var d=new Image;d.onerror=function(){a._$element.attr("poster",""),a._$element.attr("preload",""),a._eventPosterError()},d.src=this.posterURL(),d.onload=function(){a.__imageWidth=d.width,a.__imageHeight=d.height}}b.isSafari()&&(b.safariVersion()>5||b.safariVersion()<9)&&this._element.networkState===this._element.NETWORK_LOADING&&g.eventually(function(){this.destroyed()||this._element.networkState!==this._element.NETWORK_LOADING||0!==this._element.buffered.length||this._eventError(this.cls.ERROR_NO_PLAYABLE_SOURCE)},this,1e4),this.supportsFullscreen()&&(this.__videoClassBackup="",i.elementOnFullscreenChange(this._element,function(a,b){b?(this.__videoClassBackup=this._$element.attr("class"),this._$element.attr("class","")):(this._$element.attr("class",this.__videoClassBackup),this.__videoClassBackup="")},this))},buffered:function(){return this._element.buffered.end(0)},supportsFullscreen:function(){return i.elementSupportsFullscreen(this._element)},enterFullscreen:function(){i.elementEnterFullscreen(this._element)},videoWidth:function(){return this._$element.get(0).width||this.__imageWidth||NaN},videoHeight:function(){return this._$element.get(0).height||this.__imageHeight||NaN},play:function(){a.play.call(this),this._audioElement&&(this._reloadonplay&&this._audioElement.load(),this._audioElement.play())},pause:function(){this._element.pause(),this._audioElement&&this._audioElement.pause()},setPosition:function(a){this._element.currentTime=a,this._audioElement&&(this._audioElement.currentTime=a)},muted:function(){return(this._audioElement?this._audioElement:this._element).muted},setMuted:function(a){(this._audioElement?this._audioElement:this._element).muted=a},volume:function(){return(this._audioElement?this._audioElement:this._element).volume},setVolume:function(a){(this._audioElement?this._audioElement:this._element).volume=a}}})}),a.define("module:Player.FlashPlayerWrapper",["module:Player.VideoPlayerWrapper","module:Player.FlashPlayer","browser:Info","base:Promise","browser:Dom","jquery:"],function(a,b,c,d,e,f,g){return a.extend({scoped:g},function(a){return{_initialize:function(){if(this._options.noflash)return d.error(!0);if(this._sources.length<1)return d.error(!0);if(c.isMobile()||!c.flash().supported())return d.error(!0);if(!c.flash().installed()&&this._options.flashinstallrequired)return d.error(!0);if(!c.flash().installed())return this._eventError(this.cls.ERROR_NO_FLASH_INSTALLED),d.value(!0);d.create();"div"!==this._element.tagName.toLowerCase()&&(this._element=e.changeTag(this._element,"div"),this._$element=f(this._element),this._transitionals.element=this._element);var a={poster:this.poster(),sources:this.sources()};return this._loop&&(a.loop=!0),
this._flashPlayer=new b(this._element,a),this._flashPlayer.ready.success(function(){this._setup()},this)},destroy:function(){this._flashPlayer&&this._flashPlayer.weakDestroy(),this._$element.html(""),a.destroy.call(this)},_setup:function(){this._loaded=!0,this._eventLoaded();var a=this,b=function(b,c){a._$element.on(b+"."+a.cid(),function(){c.apply(a,arguments)})};b("playing",this._eventPlaying),b("pause",this._eventPaused),b("ended",this._eventEnded),b("videoerror",function(){this._eventError(this.cls.ERROR_NO_PLAYABLE_SOURCE)}),b("postererror",this._eventPosterError)},position:function(){return this._element.get("currentTime")},buffered:function(){return this.position()},setPosition:function(a){this._element.set("currentTime",a)},setVolume:function(a){this._element.set("volume",a)},videoWidth:function(){return this._flashPlayer.videoWidth()},videoHeight:function(){return this._flashPlayer.videoHeight()}}})}),a.extend("module:Player.VideoPlayerWrapper",["module:Player.VideoPlayerWrapper","module:Player.Html5VideoPlayerWrapper"],function(a,b){return a.register(b,2),{}}),a.extend("module:Player.VideoPlayerWrapper",["module:Player.VideoPlayerWrapper","module:Player.FlashPlayerWrapper"],function(a,b){return a.register(b,1),{}}),a.define("module:Flash.Support",["base:Promise","base:Timers.Timer","base:Async","base:Objs","flash:FlashClassRegistry","flash:FlashEmbedding","browser:Info"],function(a,b,c,d,e,f,g){return{flashCanConnect:function(d,h){if(!g.flash().installed())return a.error(!1);var i=a.create(),j=new e;j.register("flash.net.NetConnection",["connect","addEventListener"]);var k=new f(null,{registry:j,wrap:!0});k.ready(function(){var a=k.newObject("flash.net.NetConnection");a.addEventListener("netStatus",k.newCallback(function(a){a.get("info")&&"NetConnection.Connect.Success"===a.get("info").code?i.asyncSuccess(!0):i.asyncError(!1)})),a.connectVoid(d)});var l=null;return h&&(l=new b({delay:h,once:!0,start:!0,fire:function(){i.asyncError()}})),i.callback(function(){l&&l.destroy(),c.eventually(function(){k.destroy()})}),i},enumerateMediaSources:function(){if(!g.flash().installed())return a.error(!1);var b=a.create(),h=new e;h.register("flash.media.Microphone"),h.register("flash.media.Camera");var i=new f(null,{registry:h,wrap:!0});return i.ready(function(){var a=i.getClass("flash.media.Camera").get("names"),c=i.getClass("flash.media.Microphone").get("names");b.asyncSuccess({videoCount:d.count(a),audioCount:d.count(c),video:d.map(a,function(a,b){return{id:b,label:a}}),audio:d.map(c,function(a,b){return{id:b,label:a}})})}),b.callback(function(){c.eventually(function(){i.destroy()})}),b}}}),a.define("module:Recorder.PixelSampleMixin",[],function(){return{lightLevel:function(a){a=a||100;var b=0;return this._pixelSample(a,function(a,c,d){b+=a+c+d}),b/(3*a)},blankLevel:function(a){a=a||100;var b=0;return this._pixelSample(a,function(a,c,d){b+=Math.pow(a,2)+Math.pow(c,2)+Math.pow(d,2)}),Math.sqrt(b/(3*a))},_materializePixelSample:function(a){var b=[];return this._pixelSample(a,function(a,c,d){b.push([a,c,d])}),b},deltaCoefficient:function(a){a=a||100;var b=this._materializePixelSample(a);if(!this.__deltaSample)return this.__deltaSample=b,null;for(var c=0,d=0;d<b.length;++d)for(var e=0;3>e;++e)c+=Math.pow(b[d][e]-this.__deltaSample[d][e],2);return this.__deltaSample=b,Math.sqrt(c/(3*a))}}}),a.define("module:Flash.FlashRecorder",["browser:DomExtend.DomExtension","browser:Dom","browser:Info","flash:FlashClassRegistry","flash:FlashEmbedding","base:Strings","base:Async","base:Objs","base:Functions","base:Types","base:Timers.Timer","base:Time","jquery:","base:Promise","base:Events.EventsMixin","module:Recorder.PixelSampleMixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=a.extend({scoped:q},[o,p,function(a){return{constructor:function(b,c){a.constructor.call(this,b,c),this._embedding=this.auto_destroy(new e(b,{registry:this.cls.flashRegistry(),wrap:!0,debug:!1},{parentBgcolor:!0,fixHalfPixels:!0})),this._flashObjs={},this.ready=n.create(),this.__status="idle",this.__cameraWidth=this.readAttr("camerawidth")||640,this.__cameraHeight=this.readAttr("cameraheight")||480,this.__streamType=this.readAttr("streamtype")||"mp4",this.__fps=this.readAttr("fps")||20,this._embedding.ready(this.__initializeEmbedding,this)},averageFrameRate:function(){return this.__fps},__initializeEmbedding:function(){this.__hasMicrophoneActivity=!1,this._flashObjs.main=this._embedding.flashMain(),this._flashObjs.stage=this._flashObjs.main.get("stage"),this._flashObjs.stage.set("scaleMode","noScale"),this._flashObjs.stage.set("align","TL"),this._flashObjs.video=this._embedding.newObject("flash.media.Video",this._flashObjs.stage.get("stageWidth"),this._flashObjs.stage.get("stageHeight")),this._flashObjs.cameraVideo=this._embedding.newObject("flash.media.Video",this.__cameraWidth,this.__cameraHeight),this._flashObjs.main.addChildVoid(this._flashObjs.video),this._flashObjs.Microphone=this._embedding.getClass("flash.media.Microphone"),this._flashObjs.Camera=this._embedding.getClass("flash.media.Camera"),this._flashObjs.microphone=this._flashObjs.Microphone.getMicrophone(0),this.setMicrophoneProfile(),this._flashObjs.camera=this._flashObjs.Camera.getCamera(0),this._currentCamera=0,this._currentMicrophone=0,this._flashObjs.Security=this._embedding.getClass("flash.system.Security"),this.recomputeBB(),this.ready.asyncSuccess(this),this.auto_destroy(new k({delay:100,fire:this._fire,context:this}))},isAccessGranted:function(){return!(this._flashObjs.camera&&this._flashObjs.camera.get("muted")||this._flashObjs.microphone&&this._flashObjs.microphone.get("muted"))},isSecurityDialogOpen:function(){var a=this._embedding.newObject("flash.display.BitmapData",1,1),b=!1;try{a.draw(this._flashObjs.stage)}catch(c){b=!0}return a.dispose(),a.destroy(),b},openSecurityDialog:function(a){this.trigger("require_display"),a?this._flashObjs.Security.showSettings("privacy"):(this._flashObjs.video.attachCamera(null),this._flashObjs.video.attachCamera(this._flashObjs.camera))},grantAccess:function(a,b){var c=n.create(),d=new k({fire:function(){this.isSecurityDialogOpen()||(this.isAccessGranted()?(d.destroy(),c.asyncSuccess(!0)):b?(d.destroy(),c.asyncError(!0)):this.openSecurityDialog(a))},context:this,delay:10,start:!0});return c},bindMedia:function(a,b){return this.grantAccess(a,b).mapSuccess(function(){this._mediaBound=!0,this._attachCamera()},this)},unbindMedia:function(){this._detachCamera(),this._mediaBound=!1},_attachCamera:function(){this._flashObjs.camera.setMode(this.__cameraWidth,this.__cameraHeight,this.__fps),this._flashObjs.camera.setQuality(0,90),this._flashObjs.camera.setKeyFrameInterval(5),this._flashObjs.video.attachCamera(this._flashObjs.camera),this._flashObjs.cameraVideo.attachCamera(this._flashObjs.camera)},_detachCamera:function(){this._flashObjs.video.attachCamera(null),this._flashObjs.cameraVideo.attachCamera(null)},enumerateDevices:function(){return{audios:this._flashObjs.Microphone.get("names"),videos:this._flashObjs.Camera.get("names")}},selectMicrophone:function(a){this._flashObjs.microphone&&this._flashObjs.microphone.weakDestroy(),this.__hasMicrophoneActivity=!1,this.__microphoneActivityTime=null,this._flashObjs.microphone=this._flashObjs.Microphone.getMicrophone(a),this._currentMicrophone=a,this.setMicrophoneProfile(this._currentMicrophoneProfile)},selectCamera:function(a){this._flashObjs.camera&&this._flashObjs.camera.weakDestroy(),this.__cameraActivityTime=null,this._flashObjs.camera=this._flashObjs.Camera.getCamera(a),this._currentCamera=a,this._mediaBound&&this._attachCamera()},currentCamera:function(){return this._currentCamera},currentMicrophone:function(){return this._currentMicrophone},microphoneInfo:function(){return{muted:this._flashObjs.microphone.get("muted"),name:this._flashObjs.microphone.get("name"),activityLevel:this._flashObjs.microphone.get("activityLevel"),gain:this._flashObjs.microphone.get("gain"),rate:this._flashObjs.microphone.get("rate"),encodeQuality:this._flashObjs.microphone.get("encodeQuality"),codec:this._flashObjs.microphone.get("codec"),hadActivity:this.__hadMicrophoneActivity,inactivityTime:this.__microphoneActivityTime?l.now()-this.__microphoneActivityTime:null}},cameraInfo:function(){return{muted:this._flashObjs.camera.get("muted"),name:this._flashObjs.camera.get("name"),activityLevel:this._flashObjs.camera.get("activityLevel"),fps:this._flashObjs.camera.get("fps"),width:this._flashObjs.camera.get("width"),height:this._flashObjs.camera.get("height"),inactivityTime:this.__cameraActivityTime?l.now()-this.__cameraActivityTime:null}},setMicrophoneProfile:function(a){a=a||{},this._flashObjs.microphone.setLoopBack(a.loopback||!1),this._flashObjs.microphone.set("gain",a.gain||55),this._flashObjs.microphone.setSilenceLevel(a.silenceLevel||0),this._flashObjs.microphone.setUseEchoSuppression(a.echoSuppression||!1),this._currentMicrophoneProfile=a},setMicrophoneCodec:function(a,b){this._flashObjs.microphone.set("codec",a);for(var c in b||{})this._flashObjs.microphone.set(c,b[c])},_pixelSample:function(a,b,c){a=a||100;var d=this._flashObjs.cameraVideo.get("width"),e=this._flashObjs.cameraVideo.get("height"),f=this._embedding.newObject("flash.display.BitmapData",d,e);f.draw(this._flashObjs.cameraVideo);for(var g=2;a>0;){for(var h=1;g>h;++h){for(var i=1;g>i;++i){var j=f.getPixel(Math.floor(h*d/g),Math.floor(i*e/g));if(b.call(c||this,j%256,j/256%256,j/256/256%256),--a,0>=a)break}if(0>=a)break}++g}f.destroy()},testSoundLevel:function(a){this.setMicrophoneProfile(a?{loopback:!0,gain:55,silenceLevel:100,echoSuppression:!0}:{})},soundLevel:function(){return this._flashObjs.microphone.get("activityLevel")},_fire:function(){if(this._mediaBound&&(this.__hadMicrophoneActivity=this.__hadMicrophoneActivity||this._flashObjs.microphone&&this._flashObjs.microphone.get("activityLevel")>0,this._flashObjs.microphone&&this._flashObjs.microphone.get("activityLevel")>0&&(this.__microphoneActivityTime=l.now()),this._flashObjs.camera)){var a=this._flashObjs.camera.get("activityLevel");this.__lastCameraActivity&&this.__lastCameraActivity===a||(this.__cameraActivityTime=l.now()),this.__lastCameraActivity=a}},createSnapshot:function(){var a=this._embedding.newObject("flash.display.BitmapData",this._flashObjs.cameraVideo.get("videoWidth"),this._flashObjs.cameraVideo.get("videoHeight"));return a.draw(this._flashObjs.cameraVideo),a},postSnapshot:function(a,b,c,d){var e=n.create();d=d||90;var f=this._embedding.newObject("flash.net.URLRequestHeader","Content-type","application/octet-stream"),g=this._embedding.newObject("flash.net.URLRequest",b);if(g.set("requestHeaders",[f]),g.set("method","POST"),"jpg"===c){var h=this._embedding.newObject("com.adobe.images.JPGEncoder",d);g.set("data",h.encode(a)),h.destroy()}else{var j=this._embedding.getClass("com.adobe.images.PNGEncoder");g.set("data",j.encode(a))}var k=this._embedding.newObject("flash.net.URLLoader");return k.set("dataFormat","BINARY"),k.addEventListener("complete",this._embedding.newCallback(i.as_method(function(){e.asyncSuccess(!0)},this))),k.addEventListener("ioError",this._embedding.newCallback(i.as_method(function(){e.asyncError("IO Error")},this))),k.load(g),e.callback(function(){k.destroy(),g.destroy(),f.destroy()}),e},createSnapshotDisplay:function(a,b,c,d,e){var f=this._embedding.newObject("flash.display.Bitmap",a);return this.updateSnapshotDisplay(a,f,b,c,d,e),this._flashObjs.main.addChildVoid(f),f},updateSnapshotDisplay:function(a,b,c,d,e,f){b.set("x",c),b.set("y",d),b.set("scaleX",e/a.get("width")),b.set("scaleY",f/a.get("height"))},removeSnapshotDisplay:function(a){this._flashObjs.main.removeChildVoid(a),a.destroy()},idealBB:function(){return{width:this.__cameraWidth,height:this.__cameraHeight}},setActualBB:function(a){this._$element.find("object").css("width",a.width+"px"),this._$element.find("embed").css("width",a.width+"px"),this._$element.find("object").css("height",a.height+"px"),this._$element.find("embed").css("height",a.height+"px");var b=this._flashObjs.video;b&&(b.set("width",a.width),b.set("height",a.height))},_error:function(a){this.__status="error",this.trigger("error",a)},_status:function(a){return a&&a!==this.__status&&(this.__status=a,this.trigger("status",a),this.trigger(a)),this.__status},startRecord:function(a,b){this._status("connecting"),this._flashObjs.connection=this._embedding.newObject("flash.net.NetConnection"),this._flashObjs.connection.addEventListener("netStatus",this._embedding.newCallback(i.as_method(function(a){var c=a.get("info").code;return"NetConnection.Connect.Closed"===c&&"recording"===this._status()?void this._error("Connection to server interrupted."):"NetConnection.Connect.Success"===c&&"connecting"!==this._status()?void this._error("Could not connect to server"):void("NetConnection.Connect.Success"===c&&"connecting"===this._status()&&("mp4"===this.__streamType&&this._flashObjs.connection.callVoid("setStreamType",null,"live"),this._flashObjs.stream=this._embedding.newObject("flash.net.NetStream",this._flashObjs.connection),this._flashObjs.stream.addEventListener("netStatus",this._embedding.newCallback(i.as_method(function(a){var b=a.get("info").code;return"NetStream.Record.Start"===b?void this._status("recording"):"NetStream.Play.StreamNotFound"===b?(this._flashObjs.stream.closeVoid(),void("none"!==this._status()&&this._error("Stream not found"))):("NetStream.Buffer.Empty"===b&&"uploading"===this._status()&&"mp4"===this.__streamType&&this._flashObjs.stream.publish(null),void(("NetStream.Unpublish.Success"===b||"uploading"===this._status()&&"NetStream.Buffer.Empty"===b&&"flv"===this.__streamType&&0===this._flashObjs.stream.get("bufferLength"))&&(this._flashObjs.stream.closeVoid(),this._flashObjs.stream.destroy(),this._flashObjs.stream=null,this._flashObjs.connection.closeVoid(),this._flashObjs.connection.destroy(),this._flashObjs.connection=null,this._status("finished"))))},this))),this._flashObjs.stream.set("bufferTime",120),"mp4"===this.__streamType&&(this._flashObjs.h264Settings=this._embedding.newObject("flash.media.H264VideoStreamSettings"),this._flashObjs.h264Settings.setProfileLevel("baseline","3.1"),this._flashObjs.stream.set("videoStreamSettings",this._flashObjs.h264Settings)),this._flashObjs.stream.attachCameraVoid(this._flashObjs.camera),this._flashObjs.stream.attachAudioVoid(this._flashObjs.microphone),this._flashObjs.stream.publish(b,"record")))},this))),this._flashObjs.connection.connectVoid(a)},stopRecord:function(){"recording"===this._status()&&(this.__initialBufferLength=0,this._status("uploading"),this.__initialBufferLength=this._flashObjs.stream.get("bufferLength"),this._flashObjs.stream.attachCameraVoid(null))},uploadStatus:function(){return{total:this.__initialBufferLength,remaining:this._flashObjs.stream.get("bufferLength")}}}}],{flashRegistry:function(){return this.__flashRegistry||(this.__flashRegistry=new d,this.__flashRegistry.register("flash.media.Microphone",["setLoopBack","setSilenceLevel","setUseEchoSuppression"],["getMicrophone"]),this.__flashRegistry.register("flash.media.Camera",["setMode","setQuality","setKeyFrameInterval","addEventListener"],["getCamera"]),this.__flashRegistry.register("flash.media.Video",["attachCamera","attachNetStream"]),this.__flashRegistry.register("flash.media.SoundTransform",[]),this.__flashRegistry.register("flash.media.H264VideoStreamSettings",["setProfileLevel"]),this.__flashRegistry.register("flash.net.NetStream",["play","pause","resume","addEventListener","seek","attachCamera","attachAudio","publish","close"]),this.__flashRegistry.register("flash.net.NetConnection",["connect","addEventListener","call","close"]),this.__flashRegistry.register("flash.net.URLRequest",[]),this.__flashRegistry.register("flash.net.URLRequestHeader",[]),this.__flashRegistry.register("flash.net.URLLoader",["addEventListener","load"]),this.__flashRegistry.register("flash.display.Sprite",["addChild","removeChild","setChildIndex"]),this.__flashRegistry.register("flash.display.Stage",[]),this.__flashRegistry.register("flash.display.Loader",["load"]),this.__flashRegistry.register("flash.display.LoaderInfo",["addEventListener"]),this.__flashRegistry.register("flash.display.BitmapData",["draw","getPixel","dispose"]),this.__flashRegistry.register("flash.display.Bitmap",[]),this.__flashRegistry.register("flash.system.Security",[],["allowDomain","showSettings"]),this.__flashRegistry.register("com.adobe.images.PNGEncoder",[],["encode"]),this.__flashRegistry.register("com.adobe.images.JPGEncoder",["encode"])),this.__flashRegistry},attach:function(a,b){new r(a,b);return a}});return r}),a.define("module:Recorder.VideoRecorderWrapper",["base:Classes.ConditionalInstance","base:Events.EventsMixin","base:Objs","base:Promise"],function(a,b,c,d,e){return a.extend({scoped:e},[b,function(a){return{constructor:function(b){a.constructor.call(this,b),this._element=this._options.element,this.ready=d.create()},destroy:function(){a.destroy.call(this)},bindMedia:function(){return this._bindMedia()},_bindMedia:function(){},unbindMedia:function(){return this._unbindMedia()},_unbindMedia:function(){},cameraWidth:function(){return this._options.recordingWidth},cameraHeight:function(){return this._options.recordingHeight},lightLevel:function(){},soundLevel:function(){},testSoundLevel:function(a){},blankLevel:function(){},deltaCoefficient:function(){},enumerateDevices:function(){},currentDevices:function(){},setCurrentDevices:function(a){},createSnapshot:function(){},removeSnapshot:function(a){},createSnapshotDisplay:function(a,b,c,d,e,f){},updateSnapshotDisplay:function(a,b,c,d,e,f){},removeSnapshotDisplay:function(a){},createSnapshotUploader:function(a,b,c){},startRecord:function(a){},stopRecord:function(a){},isFlash:function(){return!1},supportsLocalPlayback:function(){return!1},snapshotToLocalPoster:function(a){return null},localPlaybackSource:function(){return null},averageFrameRate:function(){return null}}}],{_initializeOptions:function(a){return c.extend({forceflash:!1,noflash:!1,recordingWidth:640,recordingHeight:480,recordVideo:!0,recordAudio:!0},a)}})}),a.define("module:Recorder.FlashVideoRecorderWrapper",["module:Recorder.VideoRecorderWrapper","module:Flash.FlashRecorder","browser:Dom","browser:Info","base:Promise","base:Objs","base:Timers.Timer","browser:Upload.CustomUploader"],function(a,b,c,d,e,f,g,h,i){return a.extend({scoped:i},function(a){return{constructor:function(d){a.constructor.call(this,d),"div"!==this._element.tagName.toLowerCase()&&(this._element=c.changeTag(this._element,"div")),this._recorder=new b(this._element,{streamtype:this._options.rtmpStreamType,camerawidth:this._options.recordingWidth,cameraheight:this._options.recordingHeight,fps:this._options.framerate}),this._recorder.ready.forwardCallback(this.ready),this._recorder.on("require_display",function(){this.trigger("require_display")},this)},destroy:function(){this._recorder.destroy(),a.destroy.call(this)},_bindMedia:function(){return this._recorder.bindMedia(this._options.flashFullSecurityDialog)},_unbindMedia:function(){return this._recorder.unbindMedia()},blankLevel:function(){return this._recorder.blankLevel()},deltaCoefficient:function(){return this._recorder.deltaCoefficient()},lightLevel:function(){return this._recorder.lightLevel()},soundLevel:function(){var a=this._recorder.soundLevel();return 1>=a?1:1+(a-1)/100},testSoundLevel:function(a){this._recorder.testSoundLevel(a)},enumerateDevices:function(){var a=this._recorder.enumerateDevices();return e.value({videoCount:f.count(a.videos),audioCount:f.count(a.audios),video:f.map(a.videos,function(a,b){return{id:b,label:a}}),audio:f.map(a.audios,function(a,b){return{id:b,label:a}})})},currentDevices:function(){return{video:this._recorder.currentCamera(),audio:this._recorder.currentMicrophone()}},setCurrentDevices:function(a){a&&a.video&&this._recorder.selectCamera(a.video),a&&a.audio&&this._recorder.selectMicrophone(a.audio)},createSnapshot:function(a){return this._recorder.createSnapshot()},createSnapshotDisplay:function(a,b,c,d,e,f){return this._recorder.createSnapshotDisplay(b,c,d,e,f)},updateSnapshotDisplay:function(a,b,c,d,e,f){return this._recorder.updateSnapshotDisplay(a,b,c,d,e,f)},removeSnapshotDisplay:function(a){this._recorder.removeSnapshotDisplay(a)},createSnapshotUploader:function(a,b,c){var d=new h(f.extend({source:a,type:b,recorder:this._recorder},c));return d.on("upload",function(a){a.recorder.postSnapshot(a.source,a.url,a.type).success(d.successCallback,d).error(d.errorCallback,d)}),d},startRecord:function(a){var b=this,c={},d=e.create();return this._recorder.on("recording",function(){d.asyncSuccess(),b._recorder.off(null,null,c)},c).on("error",function(a){d.asyncError(a),b._recorder.off(null,null,c)},c),this._recorder.startRecord(a.rtmp.serverUrl,a.rtmp.streamName),d},stopRecord:function(a){var b=this,c={},d=new h,f=new g({delay:100,context:this,fire:function(){var a=this._recorder.uploadStatus();d.progressCallback(a.total-a.remaining,a.total)}});return this._recorder.on("finished",function(){d.successCallback(!0),b._recorder.off(null,null,c),f.weakDestroy()},c).on("error",function(a){d.errorCallback(a),b._recorder.off(null,null,c),f.weakDestroy()},c),this._recorder.stopRecord(),e.create(d)},isFlash:function(){return!0},averageFrameRate:function(){return this._recorder.averageFrameRate()}}},{supported:function(a){return!d.isMobile()&&!a.noflash}})}),a.extend("module:Recorder.VideoRecorderWrapper",["module:Recorder.VideoRecorderWrapper","module:Recorder.FlashVideoRecorderWrapper"],function(a,b){return a.register(b,1),{}}),a.define("module:WebRTC.Support",["base:Promise","base:Objs","browser:Info"],function(a,b,c){return{canvasSupportsImageFormat:function(a){try{var b=document.createElement("canvas").toDataURL(a);b.indexOf(";");return-1!=b.substring(0,b.indexOf(";")).indexOf(a)}catch(c){return!1}},getGlobals:function(){var a=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,b=window.URL||window.webkitURL,c=window.MediaRecorder,d=window.AudioContext||window.webkitAudioContext,e=null,f=null;if(d){var g=new d;e=g.createJavaScriptNode||g.createScriptProcessor,f=g.createAnalyser}return{getUserMedia:a,URL:b,MediaRecorder:c,AudioContext:d,createAnalyser:f,audioContextScriptProcessor:e,webpSupport:this.canvasSupportsImageFormat("image/webp")}},globals:function(){return this.__globals||(this.__globals=this.getGlobals()),this.__globals},userMediaSupported:function(){return!!this.globals().getUserMedia},mediaStreamTrackSourcesSupported:function(){},enumerateMediaSources:function(){var c=a.create(),d=function(a){var d={audio:{},audioCount:0,video:{},videoCount:0};b.iter(a,function(a){0===a.kind.indexOf("video")&&(d.videoCount++,d.video[a.id||a.deviceId]={id:a.id||a.deviceId,label:a.label}),0===a.kind.indexOf("audio")&&(d.audioCount++,d.audio[a.id||a.deviceId]={id:a.id||a.deviceId,label:a.label})}),c.asyncSuccess(d)};try{MediaStreamTrack&&MediaStreamTrack.getSources?MediaStreamTrack.getSources(d):navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(d):c.asyncError("Unsupported")}catch(e){c.asyncError(e)}return c},streamQueryResolution:function(b){var c=a.create(),d=this.bindStreamToVideo(b);return d.addEventListener("playing",function(){setTimeout(function(){c.asyncSuccess({stream:b,width:d.videoWidth,height:d.videoHeight}),d.remove()},500)}),c},userMedia:function(b){var c=a.create();return this.globals().getUserMedia.call(navigator,b,function(a){c.asyncSuccess(a)},function(a){c.asyncError(a)}),c},userMedia2:function(a){var b={};if(a.audio&&(b.audio=a.audio),!a.video)return this.userMedia(b);if(c.isFirefox())return b.video={},!a.video.aspectRatio||a.video.width&&a.video.height||(a.video.width?a.video.height=Math.round(a.video.width/a.video.aspectRatio):a.video.height&&(a.video.width=Math.round(a.video.height*a.video.aspectRatio))),a.video.width&&(b.video.width={ideal:a.video.width}),a.video.height&&(b.video.height={ideal:a.video.height}),a.video.sourceId&&(b.video.sourceId=a.video.sourceId),this.userMedia(b);b.video={mandatory:{}},a.video.width&&(b.video.mandatory.minWidth=a.video.width,b.video.mandatory.maxWidth=a.video.width),!a.video.width&&a.video.height&&(b.video.mandatory.minHeight=a.video.height,b.video.mandatory.maxHeight=a.video.height);var d=a.video.aspectRatio?a.video.aspectRatio:a.video.width&&a.video.height?a.video.width/a.video.height:null;d&&(b.video.mandatory.minAspectRatio=d,b.video.mandatory.maxAspectRatio=d),a.video.sourceId&&(b.video.mandatory.sourceId=a.video.sourceId);var e=function(){var a=b.video.mandatory;return this.userMedia(b).mapError(function(b){if("ConstraintNotSatisfiedError"!==b.name)return b;var c=b.constraintName,d=c.indexOf("aspect")>0,f=0===c.indexOf("min")?-1:1,g=Math.max(0,a[c]*(1+f/10));return a[c]=d?g:Math.round(g),e.call(this)},this)};return e.call(this)},stopUserMediaStream:function(a){try{a.stop?a.stop():a.getTracks&&a.getTracks().forEach(function(a){a.stop()})}catch(b){}},bindStreamToVideo:function(a,b){return b||(b=document.createElement("video")),b.volume=0,b.muted=!0,void 0!==b.mozSrcObject?b.mozSrcObject=a:b.src=this.globals().URL.createObjectURL(a),b.autoplay=!0,b.play(),b},dataURItoBlob:function(a){for(var b=atob(a.split(",")[1]),c=a.split(",")[0].split(":")[1].split(";")[0],d=new ArrayBuffer(b.length),e=new Uint8Array(d),f=0;f<b.length;f++)e[f]=b.charCodeAt(f);var g=new DataView(d),h=new Blob([g],{type:c});return h}}}),a.define("module:WebRTC.AudioAnalyser",["base:Class","module:WebRTC.Support"],function(a,b,c){return a.extend({scoped:c},function(a){return{constructor:function(c){a.constructor.call(this);var d=b.globals().AudioContext;this._audioContext=new d,this._analyserNode=b.globals().createAnalyser.call(this._audioContext),this._analyserNode.fftSize=32,c.getAudioTracks().length>0&&(this._audioInput=this._audioContext.createMediaStreamSource(c),this._audioInput.connect(this._analyserNode))},destroy:function(){this._analyserNode.disconnect(),delete this._analyserNode,this._audioContext.close(),delete this._audioContext,a.destroy.call(this)},soundLevel:function(){if(!this._audioInput)return 0;var a=this._analyserNode.fftSize,b=new Uint8Array(a);this._analyserNode.getByteTimeDomainData(b);for(var c=0,d=0;a>d;d++)c=Math.max(c,Math.abs(b[d]/128));return c}}},{supported:function(){return!!b.globals().AudioContext&&!!b.globals().createAnalyser}})}),a.define("module:WebRTC.AudioRecorder",["base:Class","base:Events.EventsMixin","base:Objs","base:Functions","module:WebRTC.Support"],function(a,b,c,d,e,f){return a.extend({scoped:f},[b,function(a){return{constructor:function(b,d){a.constructor.call(this),this._channels=[],this._recordingLength=0,this._options=c.extend({audioChannels:2,bufferSize:16384,sampleRate:44100},d),this._stream=b,this._started=!1,this._stopped=!1},_audioProcess:function(a){if(this._started){var b=0,c=this._actualBufferSize;this._channels.push({left:new Float32Array(a.inputBuffer.getChannelData(0)),right:this._options.audioChannels>1?new Float32Array(a.inputBuffer.getChannelData(1)):null,offset:b,endOffset:c}),this._recordingLength+=c-b}},destroy:function(){this.stop(),a.destroy.call(this)},__initializeContext:function(){var a=e.globals().AudioContext;this._audioContext=new a,this._actualSampleRate=this._audioContext.sampleRate||this._options.sampleRate,this._volumeGain=this._audioContext.createGain(),this._audioInput=this._audioContext.createMediaStreamSource(this._stream),this._audioInput.connect(this._volumeGain),this._scriptProcessor=e.globals().audioContextScriptProcessor.call(this._audioContext,this._options.bufferSize,this._options.audioChannels,this._options.audioChannels),this._actualBufferSize=this._scriptProcessor.bufferSize,this._scriptProcessor.onaudioprocess=d.as_method(this._audioProcess,this),this._volumeGain.connect(this._scriptProcessor),this._scriptProcessor.connect(this._audioContext.destination)},__finalizeContext:function(){this._scriptProcessor.disconnect(),this._volumeGain.disconnect(),this._audioInput.disconnect(),this._scriptProcessor.onaudioprocess=null,this._audioContext.close(),delete this._scriptProcessor,delete this._volumeGain,delete this._audioInput,delete this._audioContext},start:function(){this._started||(this.__initializeContext(),this._startContextTime=this._audioContext.currentTime,this._started=!0,this._stopped=!1,this._recordingLength=0,this._channels=[],this.trigger("started"))},stop:function(){this._started&&!this._stopped&&(this._stopContextTime=this._audioContext.currentTime,this._stopped=!0,this.trigger("stopped"),this.__finalizeContext(),this._started=!1,this._generateData())},_generateData:function(){for(var a=new Float32Array(this._recordingLength*this._options.audioChannels),b=0,c=0;c<this._channels.length;++c)for(var d=this._channels[c].offset,e=this._channels[c].endOffset,f=this._channels[c].left,g=this._channels[c].right;e>d;)a[b]=f[d],g&&(a[b+1]=g[d]),++d,b+=this._options.audioChannels;var h=new ArrayBuffer(44+2*a.length),i=new DataView(h);this.__writeUTFBytes(i,0,"RIFF"),i.setUint32(4,44+2*a.length,!0),this.__writeUTFBytes(i,8,"WAVE"),this.__writeUTFBytes(i,12,"fmt "),i.setUint32(16,16,!0),i.setUint16(20,1,!0),i.setUint16(22,this._options.audioChannels,!0),i.setUint32(24,this._actualSampleRate,!0),i.setUint32(28,4*this._actualSampleRate,!0),i.setUint16(32,2*this._options.audioChannels,!0),i.setUint16(34,16,!0),this.__writeUTFBytes(i,36,"data"),i.setUint32(40,2*a.length,!0);for(var j=a.length,k=44,l=1,m=0;j>m;m++)i.setInt16(k,a[m]*(32767*l),!0),k+=2;this._data=new Blob([i],{type:"audio/wav"}),this._leftChannel=[],this._rightChannel=[],this._recordingLength=0,this.trigger("data",this._data)},__writeUTFBytes:function(a,b,c){for(var d=0;d<c.length;d++)a.setUint8(b+d,c.charCodeAt(d))}}}],{supported:function(){return!!e.globals().AudioContext&&!!e.globals().audioContextScriptProcessor}})}),a.define("module:WebRTC.MediaRecorder",["base:Class","base:Events.EventsMixin","base:Functions","browser:Info","module:WebRTC.Support"],function(a,b,c,d,e,f){return a.extend({scoped:f},[b,function(a){return{constructor:function(b){a.constructor.call(this),this._stream=b,this._started=!1;var d=e.globals().MediaRecorder;this._mediaRecorder=new d(b),this._mediaRecorder.ondataavailable=c.as_method(this._dataAvailable,this)},destroy:function(){this.stop(),a.destroy.call(this)},start:function(){this._started||(this._started=!0,this._mediaRecorder.start(),this.trigger("started"))},stop:function(){this._started&&(this._started=!1,this._mediaRecorder.stop(),this.trigger("stopped"))},_dataAvailable:function(a){this._data=new Blob([a.data],{type:a.data.type}),this.trigger("data",this._data)}}}],{supported:function(){return!!e.globals().MediaRecorder&&!d.isChrome()&&!d.isOpera()}})}),a.define("module:WebRTC.RecorderWrapper",["base:Classes.ConditionalInstance","base:Events.EventsMixin","base:Objs","module:WebRTC.Support","base:Time","module:Recorder.PixelSampleMixin"],function(a,b,c,d,e,f,g){return a.extend({scoped:g},[b,f,function(a){return{constructor:function(b){a.constructor.call(this,b),this._video=b.video,this._recording=!1,this._bound=!1,this._hasAudio=!1,this._hasVideo=!1},_getConstraints:function(){return{audio:this._options.recordAudio?{sourceId:this._options.audioId}:!1,video:this._options.recordVideo?{sourceId:this._options.videoId,width:this._options.recordResolution.width,height:this._options.recordResolution.height}:!1}},stream:function(){return this._stream},bindMedia:function(){return this._bound?void 0:d.userMedia2(this._getConstraints()).success(function(a){this._hasAudio=this._options.recordAudio&&a.getAudioTracks().length>0,this._hasVideo=this._options.recordVideo&&a.getVideoTracks().length>0,this._bound=!0,this._stream=a,d.bindStreamToVideo(a,this._video),this.trigger("bound",a),this._boundMedia()},this)},selectCamera:function(a){this._options.videoId=a,this._bound&&(this.unbindMedia(),this.bindMedia())},selectMicrophone:function(a){this._options.audioId=a,this._bound&&(this.unbindMedia(),
this.bindMedia())},startRecord:function(){this._recording||(this._recording=!0,this._startRecord(),this._startTime=e.now())},stopRecord:function(){this._recording&&(this._recording=!1,this._stopRecord(),this._stopTime=e.now())},duration:function(){return(this._recording||!this._stopTime?e.now():this._stopTime)-this._startTime},unbindMedia:function(){this._bound&&!this._recording&&(d.stopUserMediaStream(this._stream),this._bound=!1,this.trigger("unbound"),this._unboundMedia())},createSnapshot:function(a){return d.dataURItoBlob(this._createSnapshot(a))},_createSnapshot:function(a){var b=document.createElement("canvas");b.width=this._video.videoWidth||this._video.clientWidth,b.height=this._video.videoHeight||this._video.clientHeight;var c=b.getContext("2d");c.drawImage(this._video,0,0,b.width,b.height);var d=b.toDataURL(a);return d},_pixelSample:function(a,b,c){a=a||100;var d=document.createElement("canvas"),e=this._video.videoWidth||this._video.clientWidth,f=this._video.videoHeight||this._video.clientHeight;d.width=e,d.height=f;var g=d.getContext("2d");g.drawImage(this._video,0,0,e,f);for(var h=2;a>0;){for(var i=1;h>i;++i){for(var j=1;h>j;++j){var k=g.getImageData(Math.floor(i*e/h),Math.floor(j*f/h),1,1).data;if(b.call(c||this,k[0],k[1],k[2]),--a,0>=a)break}if(0>=a)break}++h}},_boundMedia:function(){},_unboundMedia:function(){},_startRecord:function(){},_stopRecord:function(){},_dataAvailable:function(a,b){this.destroyed()||this.trigger("data",a,b)},destroy:function(){this.stopRecord(),this.unbindMedia(),a.destroy.call(this)},averageFrameRate:function(){return null}}}],{_initializeOptions:function(a){return c.extend({recordAudio:!0,recordVideo:!0,recordResolution:{width:320,height:200}},a)},supported:function(a){return!!d.globals().getUserMedia&&!!d.globals().URL}})}),a.define("module:Recorder.WebRTCVideoRecorderWrapper",["module:Recorder.VideoRecorderWrapper","module:WebRTC.RecorderWrapper","module:WebRTC.Support","module:WebRTC.AudioAnalyser","browser:Dom","base:Objs","browser:Upload.FileUploader","browser:Upload.MultiUploader","base:Promise","jquery:"],function(a,b,c,d,e,f,g,h,i,j,k){return a.extend({scoped:k},function(a){return{constructor:function(c){a.constructor.call(this,c),"video"!==this._element.tagName.toLowerCase()&&(this._element=e.changeTag(this._element,"video")),this._recorder=b.create({video:this._element,framerate:this._options.framerate,recordVideo:this._options.recordVideo,recordAudio:this._options.recordAudio,recordResolution:{width:this._options.recordingWidth,height:this._options.recordingHeight}}),this._recorder.on("bound",function(){this._analyser&&this.testSoundLevel(!0)},this),this.ready.asyncSuccess(!0)},destroy:function(){this._analyser&&this._analyser.destroy(),this._recorder.destroy(),a.destroy.call(this)},_bindMedia:function(){return this._recorder.bindMedia()},_unbindMedia:function(){return this._recorder.unbindMedia()},lightLevel:function(){return this._recorder.lightLevel()},blankLevel:function(){return this._recorder.blankLevel()},deltaCoefficient:function(){return this._recorder.deltaCoefficient()},soundLevel:function(){return this._analyser?this._analyser.soundLevel():0},testSoundLevel:function(a){this._analyser&&(this._analyser.destroy(),delete this._analyser),a&&(this._analyser=new d(this._recorder.stream()))},currentDevices:function(){return{video:this._currentVideo,audio:this._currentAudio}},enumerateDevices:function(){return c.enumerateMediaSources().success(function(a){this._currentVideo||(this._currentVideo=f.ithKey(a.video)),this._currentAudio||(this._currentAudio=f.ithKey(a.audio))},this)},setCurrentDevices:function(a){a&&a.video&&this._recorder.selectCamera(a.video),a&&a.audio&&this._recorder.selectMicrophone(a.audio)},createSnapshot:function(a){return this._recorder.createSnapshot(a)},removeSnapshot:function(a){},createSnapshotDisplay:function(a,b,d,e,f,g){var h=c.globals().URL.createObjectURL(b),i=document.createElement("img");return i.style.position="absolute",this.updateSnapshotDisplay(b,i,d,e,f,g),i.src=h,j(a).prepend(i),i},updateSnapshotDisplay:function(a,b,c,d,e,f){b.style.left=c+"px",b.style.top=d+"px",b.style.width=e+"px",b.style.height=f+"px"},removeSnapshotDisplay:function(a){a.remove()},createSnapshotUploader:function(a,b,c){return g.create(f.extend({source:a},c))},startRecord:function(a){return this.__localPlaybackSource=null,this._recorder.startRecord(),i.value(!0)},stopRecord:function(a){var b=i.create();return this._recorder.once("data",function(c,d){var e=g.create(f.extend({source:c},a.video));d||b.asyncSuccess(e);var i=g.create(f.extend({source:d},a.audio));this.__localPlaybackSource={src:c,audiosrc:d};var j=new h;j.addUploader(e),j.addUploader(i),b.asyncSuccess(j)},this),this._recorder.stopRecord(),b},supportsLocalPlayback:function(){return!0},snapshotToLocalPoster:function(a){return a},localPlaybackSource:function(){return this.__localPlaybackSource},averageFrameRate:function(){return this._recorder.averageFrameRate()}}},{supported:function(a){return b.anySupport(a)&&!a.forceflash}})}),a.extend("module:Recorder.WebRTCVideoRecorderWrapper",["module:Recorder.VideoRecorderWrapper","module:Recorder.WebRTCVideoRecorderWrapper"],function(a,b){return a.register(b,2),{}}),a.define("module:WebRTC.MediaRecorderWrapper",["module:WebRTC.RecorderWrapper","module:WebRTC.MediaRecorder"],function(a,b,c){return a.extend({scoped:c},{_boundMedia:function(){this._recorder=new b(this._stream),this._recorder.on("data",function(a){this._dataAvailable(a)},this)},_unboundMedia:function(){this._recorder.destroy()},_startRecord:function(){this._recorder.start()},_stopRecord:function(){this._recorder.stop()},averageFrameRate:function(){return null}},function(a){return{supported:function(c){return a.supported.call(this,c)?b.supported():!1}}})}),a.define("module:WebRTC.WhammyRecorder",["base:Class","base:Events.EventsMixin","base:Objs","base:Time","base:Functions","base:Async","module:WebRTC.Support"],function(a,b,c,d,e,f,g,h){return a.extend({scoped:h},[b,function(a){return{constructor:function(b,d){a.constructor.call(this),this._stream=b,this._options=c.extend({recordWidth:320,recordHeight:240,video:null,framerate:null},d),this._started=!1},destroy:function(){this._started=!1,this.trigger("stopped"),a.destroy.call(this)},start:function(){this._started||(this._started=!0,this._options.video&&(this._options.recordWidth=this._options.video.videoWidth||this._options.video.clientWidth,this._options.recordHeight=this._options.video.videoHeight||this._options.video.clientHeight),this._video=document.createElement("video"),this._video.width=this._options.recordWidth,this._video.height=this._options.recordHeight,g.bindStreamToVideo(this._stream,this._video),this._canvas=document.createElement("canvas"),this._canvas.width=this._options.recordWidth,this._canvas.height=this._options.recordHeight,this._context=this._canvas.getContext("2d"),this._frames=[],this._isOnStartedDrawingNonBlankFramesInvoked=!1,this._lastTime=d.now(),this._startTime=this._lastTime,this.trigger("started"),f.eventually(this._process,[],this))},stop:function(){this._started&&(this._started=!1,this.trigger("stopped"),this._generateData())},_process:function(){if(this._started){var a=d.now(),b=a-this._lastTime;this._lastTime=a,this._context.drawImage(this._video,0,0,this._canvas.width,this._canvas.height),this._frames.push({duration:b,image:this._canvas.toDataURL("image/webp")}),this._isOnStartedDrawingNonBlankFramesInvoked||this.__isBlankFrame(this._canvas,this._frames[this._frames.length-1])||(this._isOnStartedDrawingNonBlankFramesInvoked=!0,this.trigger("onStartedDrawingNonBlankFrames"));var c=this._options.framerate?1e3/this._options.framerate:10;f.eventually(this._process,[],this,Math.max(1,c-(d.now()-a)))}},averageFrameRate:function(){return this._frames.length>0?this._frames.length/(d.now()-this._startTime)*1e3:null},_generateData:function(){this._frames.length&&(this._data=this.__compile(this.__dropBlackFrames(this._canvas,this._frames,-1)),this.trigger("data",this._data))},clearOldRecordedFrames:function(){this._frames=[]},__doubleToString:function(a){return[].slice.call(new Uint8Array(new Float64Array([a]).buffer),0).map(function(a){return String.fromCharCode(a)}).reverse().join("")},__parseRIFF:function(a){for(var b=0,c={},d=function(a){var b=a.charCodeAt(0).toString(2);return new Array(8-b.length+1).join("0")+b};b<a.length;){var e=a.substr(b,4),f=parseInt(a.substr(b+4,4).split("").map(d).join(""),2),g=a.substr(b+4+4,f);b+=8+f,c[e]=c[e]||[],"RIFF"==e||"LIST"==e?c[e].push(this.__parseRIFF(g)):c[e].push(g)}return c},__parseWebP:function(a){for(var b=a.RIFF[0].WEBP[0],c=b.indexOf("*"),d=0,e=[];4>d;d++)e[d]=b.charCodeAt(c+3+d);var f,g,h;return h=e[1]<<8|e[0],f=16383&h,h=e[3]<<8|e[2],g=16383&h,{width:f,height:g,data:b,riff:a}},__checkFrames:function(a){if(!a[0])return null;var b=0;return c.iter(a,function(a){b+=a.duration}),{duration:b,width:a[0].width,height:a[0].height}},__makeSimpleBlock:function(a){var b=0;if(a.keyframe&&(b|=128),a.invisible&&(b|=8),a.lacing&&(b|=a.lacing<<1),a.discardable&&(b|=1),a.trackNum>127)throw"TrackNumber > 127 not supported";var c=[128|a.trackNum,a.timecode>>8,255&a.timecode,b].map(function(a){return String.fromCharCode(a)}).join("")+a.frame;return c},__numToBuffer:function(a){for(var b=[];a>0;)b.push(255&a),a>>=8;return new Uint8Array(b.reverse())},__strToBuffer:function(a){return new Uint8Array(a.split("").map(function(a){return a.charCodeAt(0)}))},__bitsToBuffer:function(a){var b=[],c=a.length%8?new Array(9-a.length%8).join("0"):"";a=c+a;for(var d=0;d<a.length;d+=8)b.push(parseInt(a.substr(d,8),2));return new Uint8Array(b)},__generateEBML:function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c].data;"object"==typeof d&&(d=this.__generateEBML(d)),"number"==typeof d&&(d=this.__bitsToBuffer(d.toString(2))),"string"==typeof d&&(d=this.__strToBuffer(d));var e=d.size||d.byteLength||d.length,f=Math.ceil(Math.ceil(Math.log(e)/Math.log(2))/8),g=e.toString(2),h=new Array(7*f+7+1-g.length).join("0")+g,i=new Array(f).join("0")+"1"+h;b.push(this.__numToBuffer(a[c].id)),b.push(this.__bitsToBuffer(i)),b.push(d)}return new Blob(b,{type:"video/webm"})},__toWebM:function(a){for(var b=this.__checkFrames(a),c=3e4,d=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:this.__doubleToString(b.duration),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:25541},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:b.width,id:176},{data:b.height,id:186}]}]}]}]}],e=0,f=0,g=this,h=0,i=function(a){var b=g.__makeSimpleBlock({discardable:0,frame:a.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:Math.round(h)});return h+=a.duration,{data:b,id:163}};e<a.length;){var j=[],k=0;do j.push(a[e]),k+=a[e].duration,e++;while(e<a.length&&c>k);h=0;var l={id:524531317,data:[{data:f,id:231}].concat(j.map(i))};d[1].data.push(l),f+=k}return this.__generateEBML(d)},__compile:function(a){var b=this,c=this.__toWebM(a.map(function(a){var c=b.__parseWebP(b.__parseRIFF(atob(a.image.slice(23))));return c.duration=a.duration,c}));return c},__dropBlackFrames:function(a,b,c,d,e){var f=document.createElement("canvas");f.width=a.width,f.height=a.height;for(var g=f.getContext("2d"),h=[],i=-1===c,j=c&&c>0&&c<=b.length?c:b.length,k={r:0,g:0,b:0},l=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),m=d&&d>=0&&1>=d?d:0,n=e&&e>=0&&1>=e?e:0,o=!1,p=0;j>p;p++){var q,r,s;if(!o){var t=new Image;t.src=b[p].image,g.drawImage(t,0,0,a.width,a.height);var u=g.getImageData(0,0,a.width,a.height);q=0,r=u.data.length,s=u.data.length/4;for(var v=0;r>v;v+=4){var w={r:u.data[v],g:u.data[v+1],b:u.data[v+2]},x=Math.sqrt(Math.pow(w.r-k.r,2)+Math.pow(w.g-k.g,2)+Math.pow(w.b-k.b,2));l*m>=x&&q++}}!o&&s*n>=s-q||(i&&(o=!0),h.push(b[p]))}return h=h.concat(b.slice(j)),h.length<=0&&h.push(b[b.length-1]),h},__isBlankFrame:function(a,b,c,d){var e=document.createElement("canvas");e.width=a.width,e.height=a.height;var f,g,h,i=e.getContext("2d"),j={r:0,g:0,b:0},k=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),l=c&&c>=0&&1>=c?c:0,m=d&&d>=0&&1>=d?d:0,n=new Image;n.src=b.image,i.drawImage(n,0,0,a.width,a.height);var o=i.getImageData(0,0,a.width,a.height);f=0,g=o.data.length,h=o.data.length/4;for(var p=0;g>p;p+=4){var q={r:o.data[p],g:o.data[p+1],b:o.data[p+2]},r=Math.sqrt(Math.pow(q.r-j.r,2)+Math.pow(q.g-j.g,2)+Math.pow(q.b-j.b,2));k*l>=r&&f++}return!(h*m>=h-f)},createSnapshot:function(a){return this._context.drawImage(this._video,0,0,this._canvas.width,this._canvas.height),this._canvas.toDataURL(a)}}}],{supported:function(){return g.globals().webpSupport}})}),a.define("module:WebRTC.WhammyAudioRecorderWrapper",["module:WebRTC.RecorderWrapper","module:WebRTC.AudioRecorder","module:WebRTC.WhammyRecorder","browser:Info"],function(a,b,c,d,e){return a.extend({scoped:e},{_createSnapshot:function(a){return this._whammyRecorder.createSnapshot(a)},_boundMedia:function(){this._videoBlob=null,this._audioBlob=null,this._hasVideo&&(this._whammyRecorder=new c(this._stream,{video:this._video,framerate:this._options.framerate})),this._hasAudio&&(this._audioRecorder=new b(this._stream),this._audioRecorder.on("data",function(a){this._audioBlob=a,!this._videoBlob&&this._hasVideo||this._dataAvailable(this._videoBlob,this._audioBlob)},this)),this._hasVideo&&this._whammyRecorder.on("data",function(a){this._videoBlob=a,!this._audioBlob&&this._hasAudio||this._dataAvailable(this._videoBlob,this._audioBlob)},this)},_unboundMedia:function(){this._hasAudio&&this._audioRecorder.destroy(),this._hasVideo&&this._whammyRecorder.destroy()},_startRecord:function(){this._hasVideo&&this._whammyRecorder.start(),this._hasAudio&&this._audioRecorder.start()},_stopRecord:function(){this._hasVideo&&this._whammyRecorder.stop(),this._hasAudio&&this._audioRecorder.stop()},averageFrameRate:function(){return this._hasVideo?this._whammyRecorder.averageFrameRate():0}},function(a){return{supported:function(e){if(!a.supported.call(this,e))return!1;if(0!==document.location.href.indexOf("https://")&&"localhost"!==document.location.hostname){if(d.isChrome()&&d.chromeVersion()>=47)return!1;if(d.isOpera()&&d.operaVersion()>=34)return!1}return b.supported()&&c.supported()}}})}),a.extend("module:WebRTC.RecorderWrapper",["module:WebRTC.RecorderWrapper","module:WebRTC.MediaRecorderWrapper","module:WebRTC.WhammyAudioRecorderWrapper"],function(a,b,c){return a.register(b,2),a.register(c,1),{}})}.call(c),function(){var a=this.subScope();a.binding("base","root:BetaJS"),a.binding("browser","root:BetaJS.Browser"),a.binding("module","root:BetaJS.Dynamics"),a.binding("jquery","root:jQuery"),a.define("module:Parser",["base:Types","base:Objs","base:JavaScript"],function(a,b,c){return{__cache:{},parseText:function(c){if(!c)return null;for(var d=[];c;){var e=c.indexOf("{{"),f=null;if(0===e){for(e=c.indexOf("}}");e+2<c.length&&"}"==c.charAt(e+2);)e++;e>=0?(e+=2,f=this.parseCode(c.substring(2,e-2))):e=c.length}else 0>e&&(e=c.length);d.push(f?f:c.substring(0,e)),c=c.substring(e)}if(1==d.length)return a.is_string(d[0])?null:d[0];var g={};return b.iter(d,function(c){a.is_string(c)||b.iter(c.dependencies,function(a){g[a]=!0})}),{func:function(c){var e=null;return b.iter(d,function(b){var d=a.is_string(b)?b:b.func(c);e=null===e?d:e+d}),e},dependencies:Object.keys(g)}},parseCode:function(a){var d=this.__cache[a];if(d)return d;var e=!1,f=a;"="==f.charAt(0)&&(e=!0,f=f.substring(1));var g=f.indexOf("::"),h=null;return g>=0&&(h=f.substring(0,g).trim(),f=f.substring(g+2)),d={bidirectional:e,args:h,variable:e?f:null,func:new Function("obj","with (obj) { return "+f+"; }"),dependencies:Object.keys(b.objectify(c.extractIdentifiers(f,!0)))},this.__cache[a]=d,d}}}),a.define("module:Registries",["base:Classes.ClassRegistry","jquery:"],function(a,b){return{handler:new a({},!0),partial:new a({},!0),prefixes:{ba:!0},templates:{cache:{},create:function(a){a=a.trim();var c=this.cache[a];if(c)return c.clone();var d;try{d=b(a)}catch(e){d=b(document.createTextNode(a))}return this.cache[a]=d,d.clone()}},warning:function(a){try{console.log(a)}catch(b){}},handlerCache:{cache:{},cacheDom:null,suspend:function(a,c){this.cacheDom||(this.cacheDom=b("<div ba-ignore style='display:none'></div>").appendTo(document.body));var d=this.cacheDom,e=a.data("tagname");this.cache[e]=this.cache[e]||[],this.cache[e].push({handler:a,elements:c.children()}),c.children().each(function(){d.append(this)})},resume:function(a,b,c){if(!this.cache[a]||0===this.cache[a].length)return null;var d=this.cache[a].shift();return b.html(d.elements),d.handler._handlerInitialize({parentHandler:c,parentElement:b}),d.handler}}}}),a.define("module:Handlers.Partial",["base:Class","module:Parser","module:Registries"],function(a,b,c,d){return a.extend({scoped:d},function(a){return{constructor:function(b,c,d,e){a.constructor.call(this),this._node=b,this._args=c,this._value=d,this._active=!1,this._postfix=e},change:function(a,b){this._value=a,this._change(a,b),this._apply(a,b)},activate:function(){this._active||(this._active=!0,this._activate(),this._apply(this._value,null))},deactivate:function(){this._active&&(this._active=!1,this._deactivate())},bindTagHandler:function(a){},unbindTagHandler:function(a){},prepareTagHandler:function(a){},_change:function(a,b){},_activate:function(){},_deactivate:function(){},_apply:function(a,b){},_execute:function(a){var c=b.parseCode(a||this._value);this._node.__executeDyn(c)}}},{meta:{},register:function(a,b){b=b||c.partial,b.register(a,this)}})}),a.define("module:Partials.RepeatPartial",["module:Handlers.Partial","base:Properties.Properties","base:Collections.Collection","base:Collections.FilteredCollection","base:Objs","jquery:","module:Parser","module:Registries"],function(a,b,c,d,e,f,g,h,i){var j=a.extend({scoped:i},function(a){return{constructor:function(b,c,d){if(a.constructor.apply(this,arguments),this.__registered=!1,c=c.split("~"),this.__repeatArg=c[0].trim(),this._destroyCollection=!1,this._destroyValueCollection=!1,c.length>1){this.__repeatFilter=g.parseCode(c[1].trim());var e=this;b.mesh().watch(this.__repeatFilter.dependencies,function(){e.__filterChanged()},this.__repeatFilter)}b._expandChildren=!1,b._$element.html("")},destroy:function(){this.__unregister(),this.__repeatFilter&&node.mesh().unwatch(this.__repeatFilter.dependencies,this.__repeatFilter),a.destroy.call(this)},_activate:function(){this.__register()},_deactivate:function(){this.__unregister()},__filterChanged:function(){this._active&&this._collection.setFilter(this.__filterFunc,this)},_change:function(a,b){this.__register(a)},__filterFunc:function(a){var b=this.__repeatFilter;if(!b)return!0;var c=this;return this._node.mesh().call(b.dependencies,function(d){return d[c.__repeatArg]=c._isArray?a.get("value"):a.data(),b.func.call(this,d)},!0)},_iterateCollection:function(a){this._collection.iterate(a,this)},__register:function(){this.__unregister(),this._isArray=!c.is_instance_of(this._value),this._destroyValueCollection=!c.is_instance_of(this._value),this._valueCollection=this._destroyValueCollection?new c({objects:e.map(this._value,function(a){return new b({value:a})}),release_references:!0}):this._value,this._destroyCollection=!!this.__repeatFilter,this._collection=this._destroyCollection?new d(this._valueCollection,{filter:this.__filterFunc,context:this}):this._valueCollection,this._collectionChildren={},this._iterateCollection(this.__addItem),this._collection.on("add",this.__addItem,this),this._collection.on("remove",this.__removeItem,this),this._collection.on("reindexed",function(a){if(!(this._collection.count()<2)){var b=this._collection.getIndex(a);0===b?this._prependItem(this._collection.getByIndex(1),a):this._appendItem(this._collection.getByIndex(b-1),a)}},this)},__unregister:function(){if(this._collection){this._iterateCollection(this.__removeItem);var a=this._node._$element;this._node._removeChildren(),a.html(""),this._collection.off(null,null,this),this._valueCollection.off(null,null,this),this._destroyCollection&&this._collection.destroy(),this._destroyValueCollection&&this._valueCollection.destroy(),this._valueCollection=null,this._collection=null}},__addItem:function(a){if(!this._collectionChildren[a.cid()]){var b={};this.__repeatArg&&(b[this.__repeatArg]=this._isArray?a.get("value"):a);var c=[],d=this,e=this._newItemElements();e.each(function(){c.push(d._node._registerChild(this,b))}),this._collectionChildren[a.cid()]={item:a,nodes:c};var f=this._collection.getIndex(a);f<this._collection.count()-1&&this._prependItem(this._collection.getByIndex(f+1),a)}},__removeItem:function(a){this._collectionChildren[a.cid()]&&(e.iter(this._collectionChildren[a.cid()].nodes,function(a){var b=a.$element();a.destroy(),b.remove()},this),delete this._collectionChildren[a.cid()])},_itemData:function(a){return this._collectionChildren[a.cid()]},_itemDataElements:function(a){var b=this._itemData(a);if(!b)return null;var c=[];return e.iter(b.nodes,function(a){c.push(a.$element())}),c},_prependItem:function(a,b){var c=this._itemDataElements(a),d=this._itemDataElements(b);c&&d&&e.iter(d,function(a){a.insertBefore(c[0])})},_appendItem:function(a,b){var c=this._itemDataElements(a),d=this._itemDataElements(b);if(c&&d){var f=c[c.length-1];e.iter(d,function(a){f.after(a),f=a})}},_newItemElements:function(){return h.templates.create(this._node._innerTemplate).appendTo(this._node._$element)}}});return j.register("ba-repeat"),j}),a.define("module:Partials.RepeatElementPartial",["module:Partials.RepeatPartial","base:Collections.Collection","base:Collections.FilteredCollection","base:Objs","jquery:","module:Parser","base:Properties.Properties","browser:Dom"],function(a,b,c,d,e,f,g,h,i){var j=a.extend({scoped:i},function(a){return{constructor:function(b,c,d){a.constructor.apply(this,arguments),this.__filteredTemplate=h.outerHTML(e(b._template).removeAttr("ba-repeat-element").get(0))},_activate:function(){this._node._$element.hide(),a._activate.call(this)},_iterateCollection:function(a){for(var b=this._collection.iterator().asArray(),c=b.length-1;c>=0;--c)a.call(this,b[c])},_newItemElements:function(){var a=this.__filteredTemplate.trim(),b=e(a).get(0);return this._node._$element.after(b),b["ba-handled"]=!0,e(b)},prepareTagHandler:function(a){a.ignoreTagHandler=!0}}});return j.register("ba-repeat-element"),j}),a.define("module:Partials.ClassPartial",["module:Handlers.Partial"],function(a,b){var c=a.extend({scoped:b},{_apply:function(a){for(var b in a)a[b]?this._node._$element.addClass(b):this._node._$element.removeClass(b)}});return c.register("ba-class"),c}),a.define("module:Partials.ReturnPartial",["module:Handlers.Partial"],function(a,b){var c=a.extend({scoped:b},function(a){return{constructor:function(b,c,d){a.constructor.apply(this,arguments);var e=this;this._node._$element.on("keypress",function(a){13===a.which&&e._execute()})}}});return c.register("ba-return"),c}),a.define("module:Data.ScopeManager",["base:Class","base:Trees.TreeNavigator","base:Classes.ObjectIdScopeMixin","base:Trees.TreeQueryEngine"],function(a,b,c,d,e){return a.extend({scoped:e},[b,c,function(a){return{constructor:function(b){a.constructor.call(this),this.__root=b,this.__watchers=[],this.__query=this._auto_destroy(new d(this))},nodeRoot:function(){return this.__root},nodeId:function(a){return a.cid()},nodeParent:function(a){return a.__parent},nodeChildren:function(a){return a.__children},nodeData:function(a){return a.data()},nodeWatch:function(a,b,c){a.on("data",function(){b.call(c,"data")},c),a.on("add",function(a){b.call(c,"addChild",a)},c),a.on("destroy",function(){b.call(c,"remove")},c)},nodeUnwatch:function(a,b,c){a.off(null,null,c)},query:function(a,b){return this.__query.query(a,b)}}}])}),a.define("module:Data.MultiScope",["base:Class","base:Events.EventsMixin","base:Events.ListenMixin","base:Objs","base:Iterators.ArrayIterator"],function(a,b,c,d,e,f){return a.extend({scoped:f},[b,c,function(a){return{constructor:function(b,c,e){a.constructor.call(this),this.__owner=b,this.__base=c,this.__queryStr=e,this.__query=this.__owner.__manager.query(this.__owner,e),this.__query.on("add",function(a){this.delegateEvents(null,a),this.trigger("addscope",a)},this),this.__query.on("remove",function(a){a.off(null,null,this),this.trigger("removescope",a)},this),d.iter(this.__query.result(),function(a){this.delegateEvents(null,a)},this),this.__freeze=!1},destroy:function(){d.iter(this.__query.result(),function(a){a.off(null,null,this)},this),this.__query.destroy(),a.destroy.call(this)},iterator:function(){return new e(this.__query.result())},set:function(a,b){for(var c=this.iterator();c.hasNext();)c.next().set(a,b);return this},get:function(a){var b=this.iterator();return b.hasNext()?b.next().get(a):null},setProp:function(a,b){for(var c=this.iterator();c.hasNext();)c.next().setProp(a,b);return this},getProp:function(a){var b=this.iterator();return b.hasNext()?b.next().getProp(a):null},define:function(a,b){for(var c=this.iterator();c.hasNext();)c.next().define(a,b);return this},call:function(a){for(var b=this.iterator(),c=null;b.hasNext();){var d=b.next(),e=d.call.apply(d,arguments);c=c||e}return c},parent:function(){return this.__owner.scope(this.__base,this.__queryStr+"<")},root:function(){return this.__owner.root()},children:function(){return this.__owner.scope(this.__base,this.__queryStr+">")},scope:function(a,b){return arguments.length<2&&(b=this.__queryStr+a,a=this.__base),this.__owner.scope(a,b)},materialize:function(a){return a?this.iterator().next():this.iterator().asArray()},freeze:function(){this.__freeze=!0,this.__query.off("add",null,this)}}}])}),a.define("module:Data.Scope",["base:Class","base:Events.EventsMixin","base:Events.ListenMixin","base:Classes.ObjectIdMixin","base:Functions","base:Types","base:Strings","base:Objs","base:Ids","base:Properties.Properties","base:Collections.Collection","base:Events.Events","module:Data.ScopeManager","module:Data.MultiScope"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){return a.extend({scoped:o},[b,c,d,function(a){return{constructor:function(b){b=h.extend({functions:{},data:{},parent:null,scopes:{},bind:{},attrs:{},extendables:[],collections:{},computed:{},events:{},channels:{},registerchannels:[]},b),b.bindings&&(b.bind=h.extend(b.bind,b.bindings)),this._channels={},this.__channelCache={};var c=b.parent;this.__manager=c?c.__manager:this._auto_destroy(new m(this)),a.constructor.call(this),this.__parent=c,this.__root=c?c.root():this,this.__children={},this.__extendables=h.objectify(b.extendables),this.__properties=b.properties||new j,this.__properties.increaseRef(),this.__properties.on("change",function(a,b,c){this.trigger("change:"+a,b,c)},this),this.__functions=h.map(b.functions,function(a){return f.is_string(a)?e.as_method(this[a],this):a},this),this.__scopes={},this.__data=b.data,h.iter(f.is_function(b.attrs)?b.attrs():b.attrs,function(a,b){this.__properties.has(b)||this.set(b,a)},this),this.setAll(),h.iter(b.collections,function(a,b){this.__properties.has(b)||this.set(b,this.auto_destroy(new k({objects:a,release_references:!0})))},this),c&&c.__add(this),this.scopes=h.map(b.scopes,function(a){return this.scope(a)},this),h.iter(b.bind,function(a,b){var c=a.indexOf(":");this.bind(this.scope(a.substring(0,c)),b,{secondKey:a.substring(c+1)})},this),h.iter(b.computed,function(a,b){var c=g.splitFirst(b,":");this.__properties.compute(c.head,a,c.tail.split(","))},this),h.iter(b.events,function(a,b){this.on(b,a,this)},this),h.iter(b.registerchannels,this.registerChannel,this),h.iter(b.channels,function(a,b){var c=g.splitFirst(b,":"),d=this.channel(c.head);d&&this.listenOn(this.channel(c.head),c.tail,a,this)},this)},destroy:function(){this.trigger("destroy"),h.iter(this.__scopes,function(a){a.destroy()}),h.iter(this.__children,function(a){a.destroy()}),this.__properties.decreaseRef(),this.__parent&&this.__parent.__remove(this),a.destroy.call(this)},__object_id_scope:function(){return this.__manager},__add:function(a){this.__children[a.cid()]=a,this.trigger("add",a)},__remove:function(a){this.trigger("remove",a),delete this.__children[a.cid()]},data:function(a,b){return 0===arguments.length?this.__data:1===arguments.length?this.__data[a]:(this.__data[a]=b,this.trigger("data",a,b),this)},set:function(a,b,c){return a in this.__extendables&&(b=h.tree_extend(this.__properties.get(a)||{},b)),this.__properties.set(a,b,c),this},setAll:function(a){return this.__properties.setAll(a),this},get:function(a){return this.__properties.get(a)},setProp:function(a,b){return this.__properties.setProp(a,b),this},getProp:function(a){return this.__properties.getProp(a)},define:function(a,b,c){return this.__functions[a]=e.as_method(b,c||this),this},call:function(a){return this.execute.apply(this,arguments)},execute:function(a){var b=e.getArguments(arguments,1);try{return f.is_string(a)?this.__functions[a].apply(this,b):a.apply(this,b)}catch(c){return this.handle_call_exception(a,b,c)}},handle_call_exception:function(a,b,c){throw c},parent:function(){return this.__parent},_eventChain:function(){return this.parent()},registerChannel:function(a){this._channels[a]=this.auto_destroy(new l)},channel:function(a){if(!(a in this.__channelCache)){var b=null;this._channels[a]?b=this._channels[a]:this.__parent&&(b=this.__parent.channel(a)),this.__channelCache[a]=b}return this.__channelCache[a]},root:function(){return this.__root},children:function(){return this.scope(">")},properties:function(){return this.__properties},compute:function(a,b,c){this.properties().compute(a,b,this,c)},scope:function(a,b){if(arguments.length<2&&(b=a,a=this),!b)return a;if(a&&a.instance_of(n)&&(a=a.iterator().next()),!a)return a;var c=i.objectId(a)+"_"+b;return this.__scopes[c]||(this.__scopes[c]=new n(this,a,b)),this.__scopes[c]},bind:function(a,b,c){if(a.instance_of(n)){for(var d=a.iterator();d.hasNext();)this.properties().bind(b,d.next().properties(),c);a.on("addscope",function(a){this.properties().bind(b,a.properties(),c)},this),a.on("removescope",function(a){this.properties().unbind(b,a.properties())},this)}else this.properties().bind(b,a.properties(),c)}}}],{_extender:{functions:function(a,b){return h.extend(h.clone(a,1),b)}}})}),a.define("module:Data.Mesh",["base:Class","base:Events.EventsMixin","base:Properties.Properties","base:Objs","base:Types","base:Strings","base:Ids","base:Functions"],function(a,b,c,d,e,f,g,h,i){return a.extend({scoped:i},[b,function(a){return{constructor:function(b,c,d){a.constructor.call(this),this.__environment=b,this.__defaults=d,this.__context=c,this.__watchers={}},destroy:function(){d.iter(this.__watchers,function(a){this.__destroyWatcher(a)},this),a.destroy.call(this)},watch:function(a,b,c){d.iter(a,function(a){var d=this.__createWatcher(a);d.cbs[g.objectId(c)]={callback:b,context:c}},this)},unwatch:function(a,b){d.iter(a,function(a){var c=this.__createWatcher(a,!0);c&&(delete c.cbs[g.objectId(b)],this.__destroyWatcher(c,!0))},this)},__destroyWatcher:function(a,b){e.is_string(a)&&(a=this.__watchers[a]),a&&(!b||e.is_empty(a.cbs)&&e.is_empty(a.children))&&(d.iter(a.children,this.__destroyWatcher,this),this.__unbindWatcher(a),a.parent&&delete a.parent.children[a.key],delete this.__watchers[a.expression],a.parent&&e.is_empty(a.parent.cbs)&&e.is_empty(a.parent.children)&&this.__destroyWatcher(a.parent))},__createWatcher:function(a,b){var c=this.__watchers[a];if(c||b)return c;var d=f.splitLast(a,"."),e=d.head?this.__createWatcher(d.head):null;return c={cbs:{},parent:e,key:d.tail,expression:a,children:{},properties:null,propertiesPrefix:null},e&&(e.children[d.tail]=c),this.__watchers[a]=c,this.__bindWatcher(c),c},__unbindWatcher:function(a){a.properties&&a.properties.off(null,null,a),d.iter(a.children,this.__unbindWatcher,this)},__bindWatcher:function(a){for(var b=null,e=this.__environment.length-1;e>=0;--e){
var f=this.__environment[e];if(b=this._navigate(f,a.expression),b.properties&&!b.tail)break;b=null}if(null===b){var g=this.__defaults.watch||this.__environment[0];b=this._navigate(g,a.expression),!b.properties&&c.is_instance_of(g)&&(b.properties=g),b.properties||(b=null)}if(null!==b){a.properties=b.properties;var h=b.head+(b.head&&b.tail?".":"")+b.tail;a.propertiesPrefix=h,a.properties.on("change:"+a.propertiesPrefix,function(b,c,e){d.iter(a.children,this.__unbindWatcher,this),d.iter(a.children,this.__bindWatcher,this),(a.value!=b||e)&&(a.value=b,d.iter(a.cbs,function(a){a.callback.apply(a.context)},this))},this);var i=a.properties.get(h);i!=a.value&&(a.value=i,d.iter(a.cbs,function(a){a.callback.apply(a.context)},this)),d.iter(a.children,this.__bindWatcher,this)}},read:function(a){for(var b=this.__environment.length-1;b>=0;--b){var c=this._read(this.__environment[b],a);if(c)return e.is_function(c.value)?h.as_method(c.value,c.context):c.value}return null},write:function(a,b){for(var c=this.__environment.length-1;c>=0;--c)if(this._write(this.__environment[c],a,b,!1))return;this._write(this.__defaults.write||this.__environment[0],a,b,!0)},call:function(a,b,c){var e={},g=[];d.iter(a,function(a){var b=this.read(a);null===b&&f.splitFirst(a,".").head in window||(g.push(a),e[a]=b)},this);var h=this.__expand(e),i=b.call(this.__context,h);if(!c){var j=this.__collapse(h,g);for(var k in j)k in e&&e[k]==j[k]||this.write(k,j[k])}return i},_sub_navigate:function(a,b,d,g,h){var i={properties:a,head:b,tail:d,parent:g,current:h};if(!d||!h||!e.is_object(h))return i;var j=f.splitFirst(d,"."),k=b?b+"."+j.head:j.head;return c.is_instance_of(h)?h.has(j.head)?this._sub_navigate(h,j.head,j.tail,h,h.get(j.head)):j.head in h?this._sub_navigate(a,k,j.tail,h,h[j.head]):{properties:h,head:j.head,tail:j.tail,parent:h,current:null}:j.head in h?this._sub_navigate(a,k,j.tail,h,h[j.head]):i},_navigate:function(a,b){return this._sub_navigate(null,"",b,null,a)},_read:function(a,b){var c=this._navigate(a,b);return c.tail?null:{value:c.current,context:c.parent==a?this.__context:c.parent}},_write:function(a,b,c,d){var e=this._navigate(a,b);if(e.tail&&!d)return!1;var f=e.tail.split(".");if(e.properties)e.properties.set(e.head+(e.head&&e.tail?".":"")+e.tail,c);else{for(var g=e.current,h=0;h<f.length-1;++h)g[f[h]]={},g=g[f[h]];g[f[f.length-1]]=c}return!0},__expand:function(a){var b={};return d.iter(a,function(a,c){for(var d=b,f=c.split("."),g=0;g<f.length-1;++g)f[g]in d&&e.is_object(d[f[g]])&&null!==d[f[g]]||(d[f[g]]={}),d=d[f[g]];d[f[f.length-1]]=a}),b},__collapse:function(a,b){var c={};return d.iter(b,function(b){for(var d=b.split("."),e=a,f=0;f<d.length;++f)e=e[d[f]];c[b]=e}),c}}}])}),a.define("module:Handlers.Attr",["base:Class","module:Parser","jquery:","base:Types","base:Objs","base:Strings","module:Registries","browser:Dom"],function(a,b,c,d,e,f,g,h,i){var j;return j=a.extend({scoped:i},function(i){return{constructor:function(a,c){if(i.constructor.call(this),this._node=a,this._tagHandler=null,this._attrName=c.name,this._isEvent=0===this._attrName.indexOf("on"),this._updatable=!this._isEvent,this._attrOriginalValue=c.value,this._attrValue=c.value,this._dyn=b.parseText(this._attrValue),this._dyn){var d=this;a.mesh().watch(this._dyn.dependencies,function(){d.__updateAttr()},this)}this.updateElement(a.element(),c)},destroy:function(){this._partial&&this._partial.destroy(),this._dyn&&this._node.mesh().unwatch(this._dyn.dependencies,this),i.destroy.call(this)},__inputVal:function(a,b){var c="checkbox"===a.type||"radio"===a.type?"checked":"value";return arguments.length>1&&(a[c]=null===b||void 0===b?"":b),a[c]},updateElement:function(a,b){this._element=a,this._$element=c(a),b=b||a.attributes[this._attrName],this._attribute=b,this.__updateAttr();var d=this._attrName.split(":");if(this._partial&&(this._partial.destroy(),this._partial=null),g.partial.get(d[0])&&(this._partial=g.partial.create(d[0],this._node,this._dyn?this._dyn.args:{},this._attrValue,d[1]),this._partial.cls.meta.value_hidden&&(this._attribute.value="")),this._dyn){var e=this;this._dyn.bidirectional&&"value"==this._attrName&&this._$element.on("change keyup keypress keydown blur focus update",function(){e._node.mesh().write(e._dyn.variable,e.__inputVal(e._element))}),this._isEvent&&(this._attribute.value="",this._$element.on(this._attrName.substring(2),function(){var a=e._node._locals.domEvent;e._node._locals.domEvent=arguments,e._node.__executeDyn(e._dyn),e._node&&e._node._locals&&(e._node._locals.domEvent=a)}))}},__updateAttr:function(){if(this._updatable){var a=this._dyn?this._node.__executeDyn(this._dyn):this._attrValue;if((a!=this._attrValue||d.is_array(a))&&(a||this._attrValue)){var b=this._attrValue;if(this._attrValue=a,!this._partial||!this._partial.cls.meta.value_hidden){var c=h.entitiesToUnicode(a);null===c&&"class"===this._attrName&&(c=""),this._attribute.value=c}this._partial&&this._partial.change(a,b),"value"===this._attrName&&this._element.value!==a&&this.__inputVal(this._element,a),this._tagHandler&&this._dyn&&!this._partial&&this._tagHandler.properties().set(f.first_after(this._attrName,"-"),a)}}},bindTagHandler:function(b){if(this.unbindTagHandler(),this._tagHandler=b,!this._partial&&g.prefixes[f.splitFirst(this._attrName,"-").head]){var c=f.first_after(this._attrName,"-");this._tagHandler.setArgumentAttr(c,a.is_pure_json(this._attrValue)?e.clone(this._attrValue,1):this._attrValue),this._dyn&&this._dyn.bidirectional&&(a.is_pure_json(this._attrValue)?this._tagHandler.properties().bind(c,this._node._handler.properties(),{deep:!0,left:!0,right:!0,secondKey:this._dyn.variable}):this._tagHandler.properties().on("change:"+c,function(a){this._node.mesh().write(this._dyn.variable,a)},this))}else this._partial&&this._partial.bindTagHandler(b)},prepareTagHandler:function(a){this._partial&&this._partial.prepareTagHandler(a)},unbindTagHandler:function(a){this._partial&&this._partial.unbindTagHandler(a),this._tagHandler&&this._tagHandler.properties().off(null,null,this),this._tagHandler=null},activate:function(){if(this._partial){if(this._partial.cls.meta.requires_tag_handler&&!this._tagHandler)return void g.warning(this._partial.cls.classname+" is expecting a tag handler, but no registered tag handler for "+this._node.tag()+" has been found.");this._partial.activate()}},deactivate:function(){this._partial&&this._partial.deactivate()}}})}),a.define("module:Handlers.Node",["base:Class","base:Events.EventsMixin","base:Ids","browser:Dom","browser:Info","module:Parser","jquery:","module:Data.Mesh","base:Objs","base:Types","module:Registries","module:Handlers.Attr"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n;return n=a.extend({scoped:m},[b,function(a){return{constructor:function(b,e,j,k){if(a.constructor.call(this),this._handler=b,this._parent=e,e&&(e._children[c.objectId(this)]=this),this._element=j,this._tag=j.tagName?j.tagName.toLowerCase():"",this._tag.indexOf(":")>=0&&(this._tag=this._tag.substring(this._tag.indexOf(":")+1)),this._dynTag=f.parseText(this._tag),this._tagHandler=null,this._$element=g(j),this._template=d.outerHTML(j),this._innerTemplate=j.innerHTML,this._locals=k||{},this._active=!0,this._dyn=null,this._children={},this._locked=!0,this._attrs={},this._expandChildren=!0,this._touchedInner=!1,this._mesh=new h([window,this.properties(),this._locals,this._handler.functions,this._handler._mesh_extend],this._handler,{read:this.properties(),write:this.properties(),watch:this.properties()}),this._element.attributes){for(var l=[],m=0;m<this._element.attributes.length;++m)l.push(this._element.attributes[m]);i.iter(l,this._registerAttr,this)}this._locked=!1,this._active=!this._active,this._active?this.deactivate():this.activate()},destroy:function(){i.iter(this._attrs,function(a){a.destroy()}),this._removeChildren(),this._tagHandler&&!this._tagHandler.destroyed()&&(this._tagHandler.cacheable&&this._tagHandler.cls.cacheable?k.handlerCache.suspend(this._tagHandler,this._$element):this._tagHandler.weakDestroy()),this._dyn&&this.properties().off(null,null,this._dyn),this._parent&&delete this._parent._children[c.objectId(this)],this._mesh.destroy(),a.destroy.call(this)},_registerAttr:function(a){a.name in this._attrs?this._attrs[a.name].updateAttribute(a):this._attrs[a.name]=new l(this,a)},tag:function(){return this._tag},element:function(){return this._element},$element:function(){return this._$element},__dynOff:function(a){this._mesh.unwatch(a.dependencies,a)},__dynOn:function(a,b){var c=this;this._mesh.watch(a.dependencies,function(){b.apply(c)},a)},mesh:function(){return this._mesh},__executeDyn:function(a){return j.is_object(a)?this._mesh.call(a.dependencies,a.func):a},__tagValue:function(){return this._dynTag?this.__executeDyn(this._dynTag):this._tag},__unregisterTagHandler:function(){this._tagHandler&&(i.iter(this._attrs,function(a){a.unbindTagHandler(this._tagHandler)},this),this.off(null,null,this._tagHandler),this._tagHandler.cacheable&&this._tagHandler.cls.cacheable?k.handlerCache.suspend(this._tagHandler,this._$element):this._tagHandler.weakDestroy(),this._tagHandler=null)},__registerTagHandler:function(){this.__unregisterTagHandler();var a=this.__tagValue();if(a){if(this._dynTag&&this._$element.get(0).tagName.toLowerCase()!=a.toLowerCase()&&(this._$element=g(d.changeTag(this._$element.get(0),a)),this._element=this._$element.get(0),i.iter(this._attrs,function(a){a.updateElement(this._element)},this)),!k.handler.get(a))return!1;e.isInternetExplorer()&&e.internetExplorerVersion()<9&&(this._$element=g(d.changeTag(this._$element.get(0),a)),this._element=this._$element.get(0),i.iter(this._attrs,function(a){a.updateElement(this._element)},this));var b={parentElement:this._$element.get(0),parentHandler:this._handler,autobind:!1,cacheable:!1,tagName:a};if(i.iter(this._attrs,function(a){a.prepareTagHandler(b)},this),!b.ignoreTagHandler)return b.cacheable&&(this._tagHandler=k.handlerCache.resume(a,this._$element,this._handler)),this._tagHandler||(this._tagHandler=k.handler.create(a,b)),i.iter(this._attrs,function(a){a.bindTagHandler(this._tagHandler)},this),this._tagHandler.activate(),!0}},activate:function(){if(!this._locked&&!this._active){this._locked=!0,this._active=!0,this._dynTag&&this.__dynOn(this._dynTag,function(){this.__registerTagHandler()});var a=this.__registerTagHandler();if(!a&&this._expandChildren){this._restoreInnerTemplate&&this._$element.html(this._innerTemplate),this._touchedInner=!0,3==this._element.nodeType&&(this._dyn=f.parseText(this._$element.text()),this._dyn&&this.__dynOn(this._dyn,function(){this.__updateDyn()})),this.__updateDyn(!0);for(var b=0;b<this._element.childNodes.length;++b)this._element.childNodes[b]["ba-handled"]||this._registerChild(this._element.childNodes[b])}i.iter(this._attrs,function(a){a.activate()}),this._locked=!1}},__updateDyn:function(a){if(this._dyn){var b=this.__executeDyn(this._dyn);(a||b!=this._dyn.value)&&(this._dyn.value=b,"textContent"in this._element?this._element.textContent=d.entitiesToUnicode(b):e.isInternetExplorer()&&e.internetExplorerVersion()<9&&"data"in this._element?this._element.data=d.entitiesToUnicode(null===b?"":b):this._$element.replaceWith(b))}},_registerChild:function(a,b){return new n(this._handler,this,a,i.extend(i.clone(this._locals,1),b))},_removeChildren:function(){i.iter(this._children,function(a){a.destroy()})},deactivate:function(){this._active&&(this._active=!1,this._locked||(this._locked=!0,i.iter(this._attrs,function(a){a.deactivate()}),this._removeChildren(),this._dynTag&&this.__dynOff(this._dynTag),this.__unregisterTagHandler(),this._dyn&&(this.__dynOff(this._dyn),this._dyn=null),this._touchedInner&&this._$element.html(""),this._restoreInnerTemplate=!0,this._locked=!1))},properties:function(){return this._handler.properties()}}}])}),a.define("module:Handlers.HandlerNameRegistry",["base:Class","base:Objs"],function(a,b,c){return a.extend({scoped:c},function(a){return{__handlers:{},destroy:function(){b.iter(this.__handlers,function(a,b){this.unregister(b)},this),a.destroy.call(this)},register:function(a,b){this.unregister(b),this.__handlers[b]=a,a.on("destroy",function(){this.unregister(b)},this)},unregister:function(a){if(a in this.__handlers){var b=this.__handlers[a];delete this.__handlers[a],b.destroyed()||b.off(null,null,this)}},get:function(a){return this.__handlers[a]}}})}),a.define("module:Handlers.HandlerMixin",["base:Objs","base:Strings","base:Functions","base:Types","jquery:","browser:Loader","module:Handlers.Node","module:Registries","module:Handlers.HandlerNameRegistry","browser:DomMutation.NodeRemoveObserver"],function(a,b,c,d,e,f,g,h,i,j){return{_notifications:{construct:"__handlerConstruct",destroy:"__handlerDestruct"},__handlerConstruct:function(){this.__activated=!1,this._mesh_extend={string:c.as_method(this.string,this)}},__handlerDestruct:function(){a.iter(this.__rootNodes,function(a){var b=a.$element();a.destroy(),this.remove_on_destroy&&b.html("")},this)},template:null,templateUrl:null,string:function(a){return this.cls.string?this.cls.string(a):this.parent()?this.parent().string(a):a},remove_on_destroy:!1,_handlerInitialize:function(a){a=a||{},a.name_registry&&(this.__nameRegistry=this.auto_destroy(new i)),this.__types=a.types||{},this._parentHandler=a.parentHandler||null,this._parentElement=a.parentElement,this._argumentAttrs={},this.template=a.template||this.template,this.templateUrl=a.templateUrl||this.templateUrl,this.templateUrl&&(this.templateUrl=b.replaceAll(this.templateUrl,"%",b.last_after(this.cls.classname,".").toLowerCase())),this.__element=a.element?e(a.element):null,this.initialContent=this.__element?this.__element.html():e(this._parentElement).html(),this.__activeElement=this.__element?this.__element:e(this._parentElement),a.remove_observe&&(this.__removeObserver=this.auto_destroy(j.create(this.__activeElement.get(0))),this.__removeObserver.on("node-removed",function(){this.weakDestroy()},this)),this.__activeElement.get(0).dynamicshandler=this},_handlerInitializeTemplate:function(a,b){var c=h.templates.create(a);this.__element?(this.__activeElement=this.__element,this.__element.html(""),this.__element.append(c)):b?(this.__activeElement=e(b),this.__element=c,this.__activeElement.html(""),this.__activeElement.append(c)):(this.__element=c,this.__activeElement=this.__element.parent())},nameRegistry:function(){return this.__nameRegistry||(this.parent()?this.parent().nameRegistry():null)},byName:function(a){return this.nameRegistry().get(a)},__assocs:{},addAssoc:function(a,b){this.__assocs[a]=b},removeAssoc:function(a){delete this.__assocs[a]},assoc:function(a){return this.byName(this.__assocs[a]||a)},setArgumentAttr:function(b,c){b in this.__extendables&&(c=a.tree_extend(this.properties().get(b)||{},c)),this.__types[b]&&(c=d.parseType(c,this.__types[b])),this.properties().set(b,c),this._argumentAttrs[b]=!0},isArgumentAttr:function(a){return!!this._argumentAttrs[a]},element:function(){return this.__element},activeElement:function(){return this.__activeElement},activate:function(){if(!this.__activated){if(this.__activated=!0,this.template)this._handlerInitializeTemplate(this.template,this._parentElement);else if(this.templateUrl)return void f.loadHtml(this.templateUrl,function(a){this.templateUrl=null,this.template=a,this.activate()},this);this._notify("_activate"),this.__rootNodes=[];var a=this;this.__element.each(function(){a.__rootNodes.push(new g(a,null,this))}),this._afterActivate(this.__activeElement)}},_afterActivate:function(a){}}}),a.define("module:Dynamic",["module:Data.Scope","module:Handlers.HandlerMixin","base:Objs","base:Strings","base:Types","base:Functions","base:Events.Events","module:Registries","jquery:"],function(a,b,c,d,e,f,g,h,i,j){var k;return k=a.extend({scoped:j},[b,function(a){return{supportsGc:!0,_notifications:{_activate:"__createActivate"},constructor:function(b){if(this.initial=this.initial||{},b=c.extend(c.clone(this.initial,1),b),this.domevents=c.extend(this.domevents,b.domevents),this.windowevents=c.extend(this.windowevents,b.windowevents),c.iter(this.cls.__initialForward,function(a){a in this&&(a in b?e.is_object(this[a])&&e.is_object(b[a])&&(b[a]=c.extend(c.clone(this[a],1),b[a])):b[a]=this[a])},this),this.__dispose=b.dispose,c.iter(this.object_functions,function(a){this[a]=function(){var b=f.getArguments(arguments);return b.unshift(a),this.execute.apply(this,b)}},this),!b.parent&&b.parentHandler)for(var d=b.parentHandler;d&&!b.parent;)b.parent=d.instance_of(k)?d:null,d=d._parentHandler;a.constructor.call(this,b),this._channels.global=this.cls.__globalEvents,b.tagName&&(this._tagName=b.tagName,this.data("tagname",this._tagName)),this.functions=this.__functions,this._handlerInitialize(b),this.__createActivate=b.create||function(){},this.__registered_dom_events=[],this.dom_events={},this.window_events={}},handle_call_exception:function(a,b,c){return h.warning("Dynamics Exception in '"+this.cls.classname+"' calling method '"+a+"' : "+c),null},_afterActivate:function(a){this.activeElement().off("."+this.cid()+"-domevents"),i(window).off("."+this.cid()+"-windowevents");var b=this;c.iter(this.domevents,function(a,c){var d=c.split(" "),e=1===d.length?this.activeElement():this.activeElement().find(d[1]);this.__registered_dom_events.push(e),e.on(d[0]+"."+this.cid()+"-domevents",function(c){b.call(a,c)})},this),c.iter(this.windowevents,function(a,c){i(window).on(c+"."+this.cid()+"-windowevents",function(c){b.call(a,c)})},this)},destroy:function(){c.iter(this.__dispose,function(a){var b=this.get(a);this.set(a,null),b&&b.weakDestroy&&b.weakDestroy()},this),c.iter(this.__registered_dom_events,function(a){a.off("."+this.cid()+"-domevents")},this),i(window).off("."+this.cid()+"-windowevents"),a.destroy.call(this)}}}],{__initialForward:["functions","attrs","extendables","collections","template","create","scopes","bindings","computed","types","events","dispose","channels","registerchannels"],__globalEvents:new g,canonicName:function(){return d.last_after(this.classname,".").toLowerCase()},registeredName:function(){return this.__registeredName||"ba-"+this.canonicName()},findByElement:function(a){return i(a).get(0).dynamicshandler},register:function(a,b){return b=b||h.handler,this.__registeredName=a||this.registeredName(),b.register(this.__registeredName,this),this},activate:function(a){var b=new this(a||{element:document.body,name_registry:!0});return b.activate(),b},attachStringTable:function(a){return this.__stringTable=a,this},addStrings:function(a){return this.__stringTable.register(a,this.registeredName()),this},string:function(a){var b=this.__stringTable.get(a,this.registeredName());return!b&&this.parent.string&&(b=this.parent.string(a)),b},_extender:{types:function(a,b){return c.extend(c.clone(a,1),b)},registerchannels:function(a,b){return c.extend(c.clone(a,1),b)},channels:function(a,b){return c.extend(c.clone(a,1),b)},attrs:function(a,b){return c.extend(c.clone(a,1),b)},dispose:function(a,b){return(a||[]).concat(b||[])}}})}),a.define("module:Partials.StylesPartial",["module:Handlers.Partial"],function(a,b){var c=a.extend({scoped:b},{_apply:function(a){for(var b in a)this._node._$element.css(b,a[b])}});return c.register("ba-styles"),c}),a.define("module:Partials.ShowPartial",["module:Handlers.Partial"],function(a,b){var c=a.extend({scoped:b},function(a){return{constructor:function(b,c,d){a.constructor.apply(this,arguments),this.__oldDisplay=void 0,this.__readOldDisplay=!1,this.__hidden=!1,d||this.__hide()},__hide:function(){this.__hidden||(this.__hidden=!0,this.__readOldDisplay||(this.__oldDisplay=this._node._$element.get(0).style.display,this.__readOldDisplay=!0),this._node._$element.get(0).style.display="none")},__show:function(){this.__hidden&&(this.__hidden=!1,this._node._$element.get(0).style.display=this.__oldDisplay&&"none"!==this.__oldDisplay?this.__oldDisplay:"")},_apply:function(a){a?this.__show():this.__hide()}}});return c.register("ba-show"),c}),a.define("module:Partials.IfPartial",["module:Partials.ShowPartial"],function(a,b){var c=a.extend({scoped:b},function(a){return{constructor:function(b,c,d){a.constructor.apply(this,arguments),d||b.deactivate()},_apply:function(b){a._apply.call(this,b),b?this._node.activate():this._node.deactivate()}}});return c.register("ba-if"),c}),a.define("module:Partials.ClickPartial",["module:Handlers.Partial"],function(a,b){var c=a.extend({scoped:b},function(a){return{constructor:function(b,c,d){a.constructor.apply(this,arguments);var e=this;this._node._$element.on("click",function(a){a.stopPropagation(),e._execute()})}}});return c.register("ba-click"),c}),a.define("module:Partials.EventPartial",["module:Handlers.Partial"],function(a,b){var c=a.extend({scoped:b},{bindTagHandler:function(a){a.on(this._postfix,function(a,b,c,d){this._node._handler.call(this._value,a,b,c,d)},this)}});return c.register("ba-event"),c}),a.define("module:Partials.OnPartial",["module:Handlers.Partial"],function(a,b,c){var d=a.extend({scoped:c},function(a){return{constructor:function(b,c,d,e){a.constructor.apply(this,arguments);var f=this;this._node._$element.on(e+"."+this.cid(),function(){f._execute(d.trim())})},destroy:function(){this._node._$element.off(this._postfix+"."+this.cid()),a.destroy.call(this)}}});return d.register("ba-on"),d}),a.define("module:Partials.TemplatePartial",["module:Handlers.Partial"],function(a,b){var c=a.extend({scoped:b},{bindTagHandler:function(a){this._value&&(a.template=this._value)}},{meta:{requires_tag_handler:!0,value_hidden:!0}});return c.register("ba-template"),c}),a.define("module:Partials.DataPartial",["module:Handlers.Partial"],function(a,b){var c=a.extend({scoped:b},{_apply:function(a){this._node._tagHandler.data(this._postfix,a)},bindTagHandler:function(a){this._apply(this._value)}},{meta:{requires_tag_handler:!0}});return c.register("ba-data"),c}),a.define("module:Partials.AttrsPartial",["module:Handlers.Partial","base:Objs","base:Class"],function(a,b,c,d){var e=a.extend({scoped:d},{_apply:function(a){if(this._active){var b=this._node._tagHandler?this._node._tagHandler.properties():this._node.properties();for(var c in a)b.set(c,a[c])}},bindTagHandler:function(a){for(var d in this._value)a.setArgumentAttr(d,c.is_pure_json(this._value[d])?b.clone(this._value[d],1):this._value[d])}});return e.register("ba-attrs"),e}),a.define("module:DomObserver",["base:Class","base:Objs","browser:DomMutation.NodeInsertObserver","module:Registries","module:Dynamic","jquery:"],function(a,b,c,d,e,f,g){return a.extend({scoped:g},function(a){return{constructor:function(e){a.constructor.call(this),e=e||{},this.__root=e.root||document.body,this.__persistent_dynamics=!!e.persistent_dynamics,this.__allowed_dynamics=e.allowed_dynamics?b.objectify(e.allowed_dynamics):null,this.__forbidden_dynamics=e.forbidden_dynamics?b.objectify(e.forbidden_dynamics):null,this.__dynamics={},e.ignore_existing||b.iter(d.handler.classes(),function(a,b){if((!this.__forbidden_dynamics||!this.__forbidden_dynamics[b])&&(!this.__allowed_dynamics||this.__allowed_dynamics[b])){var c=this;f(this.__root).find(b).each(function(){this.dynamicshandler||c.__nodeInserted(this)})}},this),this.__observer=c.create({root:this.__root,filter:this.__observerFilter,context:this}),this.__observer.on("node-inserted",this.__nodeInserted,this)},destroy:function(){this.__observer.destroy(),b.iter(this.__dynamics,function(a){a.off(null,null,this),this.__persistent_dynamics||a.weakDestroy()},this),a.destroy.call(this)},__observerFilter:function(a){if(a.dynamicshandler||!a.tagName)return!1;var b=a.tagName.toLowerCase();return d.handler.get(b)?this.__forbidden_dynamics&&this.__forbidden_dynamics[b]?!1:!this.__allowed_dynamics||this.__allowed_dynamics[b]:!1},__nodeInserted:function(a){var b=new e({element:a,remove_observe:!0});this.__dynamics[b.cid()]=b,b.on("destroy",function(){delete this.__dynamics[b.cid()]},this),b.activate()}}},{__singleton:null,activate:function(a){this.__singleton||(this.__singleton=new this(a))}})})}.call(c),function(){var a=this.subScope();a.binding("base","root:BetaJS"),a.binding("browser","root:BetaJS.Browser"),a.binding("dynamics","root:BetaJS.Dynamics"),a.binding("media","root:BetaJS.Media"),a.binding("module","root:BetaJS.MediaComponents"),a.binding("jquery","root:jQuery"),a.define("module:",function(){return{guid:"7a20804e-be62-4982-91c6-98eb096d2e70",version:"39.1468716255336"}}),a.extend("module:Templates",function(){return{video_player_controlbar:' <div class="{{css}}-dashboard {{activitydelta > 5000 && hideonactivity ? (css + \'-dashboard-hidden\') : \'\'}}">  <div class="{{css}}-progressbar {{activitydelta < 2500 || ismobile ? \'\' : (css + \'-progressbar-small\')}}"       onmousedown="{{startUpdatePosition(domEvent)}}"       onmouseup="{{stopUpdatePosition(domEvent)}}"       onmouseleave="{{stopUpdatePosition(domEvent)}}"       onmousemove="{{progressUpdatePosition(domEvent)}}">   <div class="{{css}}-progressbar-cache" ba-styles="{{{width: Math.round(duration ? cached / duration * 100 : 0) + \'%\'}}}"></div>   <div class="{{css}}-progressbar-position" ba-styles="{{{width: Math.round(duration ? position / duration * 100 : 0) + \'%\'}}}" title="{{string(\'video-progress\')}}">    <div class="{{css}}-progressbar-button"></div>   </div>  </div>  <div class="{{css}}-backbar"></div>  <div class="{{css}}-controlbar">         <div class="{{css}}-leftbutton-container" ba-if="{{rerecordable}}"  ba-click="rerecord()" title="{{string(\'rerecord-video\')}}">             <div class="{{css}}-button-inner">                 <i class="{{css}}-icon-ccw"></i>             </div>         </div>   <div class="{{css}}-leftbutton-container" ba-if="{{!playing}}" ba-click="play()" title="{{string(\'play-video\')}}">    <div class="{{css}}-button-inner">     <i class="{{css}}-icon-play"></i>    </div>   </div>   <div class="{{css}}-leftbutton-container" ba-if="{{playing}}" ba-click="pause()" title="{{string(\'pause-video\')}}">             <div class="{{css}}-button-inner">                 <i class="{{css}}-icon-pause"></i>             </div>   </div>   <div class="{{css}}-time-container">    <div class="{{css}}-time-value" title="{{string(\'elapsed-time\')}}">{{position_formatted}}</div>    <div class="{{css}}-time-sep">/</div>    <div class="{{css}}-time-value" title="{{string(\'total-time\')}}">{{duration_formatted}}</div>   </div>   <div class="{{css}}-rightbutton-container" ba-if="{{fullscreen}}" ba-click="toggle_fullscreen()" title="{{string(\'fullscreen-video\')}}">    <div class="{{css}}-button-inner">     <i class="{{css}}-icon-resize-full"></i>    </div>   </div>   <div class="{{css}}-volumebar">    <div class="{{css}}-volumebar-inner"         onmousedown="{{startUpdateVolume(domEvent)}}"                  onmouseup="{{stopUpdateVolume(domEvent)}}"                  onmouseleave="{{stopUpdateVolume(domEvent)}}"                  onmousemove="{{progressUpdateVolume(domEvent)}}">     <div class="{{css}}-volumebar-position" ba-styles="{{{width: Math.min(100, Math.round(volume * 100)) + \'%\'}}}">         <div class="{{css}}-volumebar-button" title="{{string(\'volume-button\')}}"></div>     </div>        </div>   </div>   <div class="{{css}}-rightbutton-container" ba-click="toggle_volume()" title="{{string(volume > 0 ? \'volume-mute\' : \'volume-unmute\')}}">    <div class="{{css}}-button-inner">     <i class="{{css + \'-icon-volume-\' + (volume >= 0.5 ? \'up\' : (volume > 0 ? \'down\' : \'off\')) }}"></i>    </div>   </div>  </div> </div> ',video_player_loader:' <div class="{{css}}-loader-container">     <div class="{{css}}-loader-loader" title="{{string(\'tooltip\')}}">     </div> </div>',video_player_message:' <div class="{{css}}-message-container" ba-click="click()">     <div class=\'{{css}}-message-message\'>         {{message}}     </div> </div>',playbutton:' <div class="{{css}}-playbutton-container" ba-click="play()" title="{{string(\'tooltip\')}}">  <div class="{{css}}-playbutton-button"></div> </div>  <div class="{{css}}-rerecord-bar" ba-if="{{rerecordable}}">  <div class="{{css}}-rerecord-backbar"></div>  <div class="{{css}}-rerecord-frontbar">         <div class="{{css}}-rerecord-button-container">          <div class="{{css}}-rerecord-button" onclick="{{rerecord()}}">           {{string(\'rerecord\')}}          </div>         </div>  </div> </div> ',player:' <div     class="{{css}}-container {{css}}-size-{{csssize}} {{iecss}}-{{ie8 ? \'ie8\' : \'noie8\'}} {{csstheme}}"     ba-on:mousemove="user_activity()"     ba-on:mousedown="user_activity()"     ba-on:touchstart="user_activity()"     style="{{width ? \'width:\' + width + ((width + \'\').match(/^\\d+$/g) ? \'px\' : \'\') + \';\' : \'\'}}{{height ? \'height:\' + height + ((height + \'\').match(/^\\d+$/g) ? \'px\' : \'\') + \';\' : \'\'}}" >     <video class="{{css}}-video" data-video="video"></video>     <div class="{{css}}-overlay" data-video="ad" style="display:none"></div>     <div class=\'{{css}}-overlay\'>      <ba-{{dyncontrolbar}}       ba-css="{{csscontrolbar || css}}"       ba-template="{{tmplcontrolbar}}"       ba-show="{{controlbar_active}}"       ba-playing="{{playing}}"       ba-event:rerecord="rerecord"       ba-event:play="play"       ba-event:pause="pause"       ba-event:position="seek"       ba-event:volume="set_volume"       ba-event:fullscreen="toggle_fullscreen"       ba-volume="{{volume}}"       ba-duration="{{duration}}"       ba-cached="{{buffered}}"       ba-position="{{position}}"       ba-activitydelta="{{activity_delta}}"       ba-hideoninactivity="{{hideoninactivity}}"       ba-rerecordable="{{rerecordable}}"       ba-fullscreen="{{fullscreensupport && !nofullscreen}}"       ba-source="{{source}}"   ></ba-{{dyncontrolbar}}>      <ba-{{dynplaybutton}}       ba-css="{{cssplaybutton || css}}"       ba-template="{{tmplplaybutton}}"       ba-show="{{playbutton_active}}"       ba-rerecordable="{{rerecordable}}"       ba-event:play="playbutton_click"       ba-event:rerecord="rerecord"   ></ba-{{dynplaybutton}}>      <ba-{{dynloader}}       ba-css="{{cssloader || css}}"       ba-template="{{tmplloader}}"       ba-show="{{loader_active}}"   ></ba-{{dynloader}}>      <ba-{{dynmessage}}       ba-css="{{cssmessage || css}}"       ba-template="{{tmplmessage}}"       ba-show="{{message_active}}"       ba-message="{{message}}"       ba-event:click="message_click"   ></ba-{{dynmessage}}>    <ba-{{dyntopmessage}}       ba-css="{{csstopmessage || css}}"       ba-template="{{tmpltopmessage}}"       ba-show="{{topmessage}}"       ba-topmessage="{{topmessage}}"   ></ba-{{dyntopmessage}}>     </div> </div> ',video_player_topmessage:" <div class=\"{{css}}-topmessage-container\">     <div class='{{css}}-topmessage-background'>     </div>     <div class='{{css}}-topmessage-message'>         {{topmessage}}     </div> </div>",video_recorder_chooser:' <div class="{{css}}-chooser-container">   <div class="{{css}}-chooser-button-container">   <div>    <div class="{{css}}-chooser-primary-button"         ba-click="primary()"         ba-if="{{has_primary}}">     <input ba-if="{{enable_primary_select && primary_select_capture}}"            type="file"            class="{{css}}-chooser-file"            style="height:100"            onchange="{{primary_select(domEvent)}}"            accept="{{primary_accept_string}}"            capture />     <input ba-if="{{enable_primary_select && !primary_select_capture}}"            type="file"            class="{{css}}-chooser-file"            style="height:100"            onchange="{{primary_select(domEvent)}}"            accept="{{primary_accept_string}}" />     <i class="{{css}}-icon-{{primaryrecord ? \'videocam\' : \'upload\'}}"></i>     <span>      {{primary_label}}     </span>    </div>   </div>   <div>    <div class="{{css}}-chooser-secondary-button"         ba-click="secondary()"         ba-if="{{has_secondary}}">     <input ba-if="{{enable_secondary_select && secondary_select_capture}}"            type="file"            class="{{css}}-chooser-file"            style="height:100"            onchange="{{secondary_select(domEvent)}}"            accept="{{secondary_accept_string}}" />     <input ba-if="{{enable_secondary_select && !secondary_select_capture}}"            type="file"            class="{{css}}-chooser-file"            style="height:100"            onchange="{{secondary_select(domEvent)}}"            accept="{{secondary_accept_string}}" />     <span>      {{secondary_label}}     </span>    </div>   </div>  </div> </div>',
video_recorder_controlbar:'<div class="{{css}}-dashboard">  <div class="{{css}}-backbar"></div>  <div class="{{css}}-settings" ba-show="{{settingsvisible && settingsopen}}">   <div class="{{css}}-settings-backbar"></div>   <div class="{{css}}-settings-front">    <ul ba-repeat="{{camera :: cameras}}">     <li>      <input type=\'radio\' name=\'camera\' value="{{selectedcamera == camera.id}}" onclick="{{selectCamera(camera.id)}}" />      <span></span>      <label onclick="{{selectCamera(camera.id)}}">       {{camera.label}}      </label>      </li>    </ul>    <hr />    <ul ba-repeat="{{microphone :: microphones}}">     <li onclick="{{selectMicrophone(microphone.id)}}">      <input type=\'radio\' name=\'microphone\' value="{{selectedmicrophone == microphone.id}}" />      <span></span>      <label>       {{microphone.label}}      </label>      </li>    </ul>   </div>  </div>  <div class="{{css}}-controlbar">         <div class="{{css}}-leftbutton-container" ba-show="{{settingsvisible}}">             <div class="{{css}}-button-inner {{css}}-button-{{settingsopen ? \'selected\' : \'unselected\'}}"                  onclick="{{settingsopen=!settingsopen}}"                  onmouseenter="{{hover(string(\'settings\'))}}"                  onmouseleave="{{unhover()}}">                 <i class="{{css}}-icon-cog"></i>             </div>         </div>         <div class="{{css}}-lefticon-container" ba-show="{{settingsvisible}}">             <div class="{{css}}-icon-inner"                  onmouseenter="{{hover(string(camerahealthy ? \'camerahealthy\' : \'cameraunhealthy\'))}}"                  onmouseleave="{{unhover()}}">                 <i class="{{css}}-icon-videocam {{css}}-icon-state-{{camerahealthy ? \'good\' : \'bad\' }}"></i>             </div>         </div>         <div class="{{css}}-lefticon-container" ba-show="{{settingsvisible}}">             <div class="{{css}}-icon-inner"                  onmouseenter="{{hover(string(microphonehealthy ? \'microphonehealthy\' : \'microphoneunhealthy\'))}}"                  onmouseleave="{{unhover()}}">                 <i class="{{css}}-icon-mic {{css}}-icon-state-{{microphonehealthy ? \'good\' : \'bad\' }}"></i>             </div>         </div>         <div class="{{css}}-lefticon-container" ba-show="{{stopvisible && recordingindication}}">             <div class="{{css}}-recording-indication">             </div>         </div>         <div class="{{css}}-label-container" ba-show="{{controlbarlabel}}">          <div class="{{css}}-label-label">           {{controlbarlabel}}          </div>         </div>         <div class="{{css}}-rightbutton-container" ba-show="{{recordvisible}}">          <div class="{{css}}-button-primary"                  onclick="{{record()}}"                  onmouseenter="{{hover(string(\'record-tooltip\'))}}"                  onmouseleave="{{unhover()}}">           {{string(\'record\')}}          </div>         </div>         <div class="{{css}}-rightbutton-container" ba-show="{{stopvisible}}">          <div class="{{css}}-button-primary"                  onclick="{{stop()}}"                  onmouseenter="{{hover(string(\'stop-tooltip\'))}}"                  onmouseleave="{{unhover()}}">           {{string(\'stop\')}}          </div>         </div>         <div class="{{css}}-centerbutton-container" ba-show="{{skipvisible}}">          <div class="{{css}}-button-primary"                  onclick="{{skip()}}"                  onmouseenter="{{hover(string(\'skip-tooltip\'))}}"                  onmouseleave="{{unhover()}}">           {{string(\'skip\')}}          </div>         </div>  </div> </div> ',video_recorder_imagegallery:'<div class="{{css}}-imagegallery-leftbutton">  <div class="{{css}}-imagegallery-button-inner" onclick="{{left()}}">   <i class="ba-videorecorder-icon-left-open"></i>  </div> </div>   <div ba-repeat="{{image::images}}" class="{{css}}-imagegallery-container" data-gallery-container>      <div class="{{css}}-imagegallery-image"           ba-styles="{{{left: image.left + \'px\', top: image.top + \'px\', width: image.width + \'px\', height: image.height + \'px\'}}}"           onclick="{{select(image)}}">      </div> </div>   <div class="{{css}}-imagegallery-rightbutton">  <div class="{{css}}-imagegallery-button-inner" onclick="{{right()}}">   <i class="ba-videorecorder-icon-right-open"></i>  </div> </div> ',video_recorder_loader:' <div class="{{css}}-loader-container">     <div class="{{css}}-loader-loader" title="{{tooltip}}">     </div> </div> <div class="{{css}}-loader-label" ba-show="{{label}}">  {{label}} </div>',video_recorder_message:' <div class="{{css}}-message-container" ba-click="click()">     <div class=\'{{css}}-message-message\'>         {{message || ""}}     </div> </div>',recorder:' <div ba-show="{{!player_active}}"      class="{{css}}-container {{css}}-size-{{csssize}} {{iecss}}-{{ie8 ? \'ie8\' : \'noie8\'}} {{csstheme}}"      style="{{width ? \'width:\' + width + ((width + \'\').match(/^\\d+$/g) ? \'px\' : \'\') + \';\' : \'width:100%;\'}}{{height ? \'height:\' + height + ((height + \'\').match(/^\\d+$/g) ? \'px\' : \'\') + \';\' : \'height:100%\'}}" >       <video class="{{css}}-video {{css}}-{{hasrecorder ? \'hasrecorder\' : \'norecorder\'}}" data-video="video"></video>     <div class=\'{{css}}-overlay\' ba-show="{{!hideoverlay}}" data-overlay="overlay">   <ba-{{dynloader}}       ba-css="{{cssloader || css}}"       ba-template="{{tmplloader}}"       ba-show="{{loader_active}}"       ba-tooltip="{{loadertooltip}}"       ba-label="{{loaderlabel}}"   ></ba-{{dynloader}}>      <ba-{{dynmessage}}       ba-css="{{cssmessage || css}}"       ba-template="{{tmplmessage}}"       ba-show="{{message_active}}"       ba-message="{{message}}"       ba-event:click="message_click"   ></ba-{{dynmessage}}>    <ba-{{dyntopmessage}}       ba-css="{{csstopmessage || css}}"       ba-template="{{tmpltopmessage}}"       ba-show="{{topmessage_active && (topmessage || hovermessage)}}"       ba-topmessage="{{hovermessage || topmessage}}"   ></ba-{{dyntopmessage}}>      <ba-{{dynchooser}}       ba-css="{{csschooser || css}}"       ba-template="{{tmplchooser}}"       ba-show="{{chooser_active}}"       ba-allowrecord="{{allowrecord}}"       ba-allowupload="{{allowupload}}"       ba-allowcustomupload="{{allowcustomupload}}"       ba-primaryrecord="{{primaryrecord}}"       ba-event:record="record_video"       ba-event:upload="upload_video"   ></ba-{{dynchooser}}>      <ba-{{dynimagegallery}}       ba-css="{{cssimagegallery || css}}"       ba-template="{{tmplimagegallery}}"       ba-if="{{imagegallery_active}}"       ba-imagecount="{{gallerysnapshots}}"       ba-imagenativewidth="{{recordingwidth}}"       ba-imagenativeheight="{{recordingheight}}"       ba-event:image-selected="{{select_image}}"   ></ba-{{dynimagegallery}}>      <ba-{{dyncontrolbar}}       ba-css="{{csscontrolbar || css}}"       ba-template="{{tmplcontrolbar}}"       ba-show="{{controlbar_active}}"       ba-cameras="{{cameras}}"       ba-microphones="{{microphones}}"       ba-selectedcamera="{{selectedcamera || 0}}"       ba-selectedmicrophone="{{selectedmicrophone || 0}}"       ba-camerahealthy="{{camerahealthy}}"       ba-microphonehealthy="{{microphonehealthy}}"       ba-hovermessage="{{=hovermessage}}"       ba-settingsvisible="{{settingsvisible}}"       ba-recordvisible="{{recordvisible}}"       ba-stopvisible="{{stopvisible}}"       ba-skipvisible="{{skipvisible}}"       ba-controlbarlabel="{{controlbarlabel}}"       ba-event:select-camera="select_camera"       ba-event:select-microphone="select_microphone"       ba-event:invoke-record="record"       ba-event:invoke-stop="stop"       ba-event:invoke-skip="invoke_skip"   ></ba-{{dyncontrolbar}}>     </div> </div>  <div ba-if="{{player_active}}"      style="{{width ? \'width:\' + width + ((width + \'\').match(/^\\d+$/g) ? \'px\' : \'\') + \';\' : \'\'}}{{height ? \'height:\' + height + ((height + \'\').match(/^\\d+$/g) ? \'px\' : \'\') + \';\' : \'\'}}" >  <ba-{{dynvideoplayer}} ba-theme="{{theme || \'default\'}}"                         ba-source="{{playbacksource}}"                         ba-poster="{{playbackposter}}"                         ba-hideoninactivity="{{false}}"                         ba-forceflash="{{forceflash}}"                         ba-noflash="{{noflash}}"                         ba-stretch="{{stretch}}"                         ba-attrs="{{playerattrs}}"                         ba-data:id="player"                         ba-width="{{width}}"                         ba-height="{{height}}"                         ba-rerecordable="{{rerecordable && (recordings === null || recordings > 0)}}"                         ba-reloadonplay="{{true}}"                         ba-autoplay="{{autoplay}}"                         ba-nofullscreen="{{nofullscreen}}"                         ba-topmessage="{{playertopmessage}}"                         ba-event:rerecord="rerecord"                         ba-event:playing="playing"                         ba-event:paused="paused"                         ba-event:ended="ended"                         >  </ba-{{dynvideoplayer}}> </div>',video_recorder_topmessage:" <div class=\"{{css}}-topmessage-container\">     <div class='{{css}}-topmessage-background'>     </div>     <div class='{{css}}-topmessage-message'>         {{topmessage}}     </div> </div>","modern-video_player_controlbar":' <div class="{{css}}-dashboard {{activitydelta > 5000 && hideoninactivity ? (css + \'-dashboard-hidden\') : \'\'}}">        <div class="{{css}}-leftbutton-container" ba-if="{{rerecordable}}" ba-click="rerecord()" title="{{string(\'rerecord-video\')}}">            <div class="{{css}}-button-inner">                <i class="{{css}}-icon-ccw"></i>            </div>        </div>  <div class="{{css}}-leftbutton-container" ba-if="{{!playing}}" ba-click="play()" title="{{string(\'play-video\')}}">   <div class="{{css}}-button-inner">    <i class="{{css}}-icon-play"></i>   </div>  </div>  <div class="{{css}}-leftbutton-container" ba-if="{{playing}}" ba-click="pause()" title="{{string(\'pause-video\')}}">    <div class="{{css}}-button-inner">    <i class="{{css}}-icon-pause"></i>   </div>  </div>  <div class="{{css}}-time-container">   <div class="{{css}}-time-value" title="{{string(\'elapsed-time\')}}">{{position_formatted}}/{{duration_formatted}}</div>  </div>  <div class="{{css}}-rightbutton-container" ba-if="{{fullscreen}}" ba-click="toggle_fullscreen()" title="{{string(\'fullscreen-video\')}}">   <div class="{{css}}-button-inner">    <i class="{{css}}-icon-resize-full"></i>   </div>  </div>  <div class="{{css}}-volumebar">   <div class="{{css}}-volumebar-inner"           onmousedown="{{startUpdateVolume(domEvent)}}"                 onmouseup="{{stopUpdateVolume(domEvent)}}"                 onmouseleave="{{stopUpdateVolume(domEvent)}}"                 onmousemove="{{progressUpdateVolume(domEvent)}}">    <div class="{{css}}-volumebar-position" ba-styles="{{{width: Math.ceil(1+Math.min(99, Math.round(volume * 100))) + \'%\'}}}" title="{{string(\'volume-button\')}}"></div>       </div>  </div>  <div class="{{css}}-rightbutton-container {{css}}-volume-button-container" ba-click="toggle_volume()" title="{{string(volume > 0 ? \'volume-mute\' : \'volume-unmute\')}}">   <div class="{{css}}-button-inner">    <i class="{{css + \'-icon-volume-\' + (volume >= 0.5 ? \'up\' : (volume > 0 ? \'down\' : \'off\')) }}"></i>   </div>  </div>  <div class="{{css}}-progressbar">   <div class="{{css}}-progressbar-inner"        onmousedown="{{startUpdatePosition(domEvent)}}"        onmouseup="{{stopUpdatePosition(domEvent)}}"        onmouseleave="{{stopUpdatePosition(domEvent)}}"        onmousemove="{{progressUpdatePosition(domEvent)}}">   <div class="{{css}}-progressbar-cache" ba-styles="{{{width: Math.round(duration ? cached / duration * 100 : 0) + \'%\'}}}"></div>   <div class="{{css}}-progressbar-position" ba-styles="{{{width: Math.round(duration ? position / duration * 100 : 0) + \'%\'}}}" title="{{string(\'video-progress\')}}"></div>  </div> </div> ',"modern-video_recorder_chooser":' <div class="{{css}}-chooser-container">   <div class="{{css}}-chooser-button-container">     <div class="{{css}}-chooser-icon-container">    <i class="{{css}}-icon-{{primaryrecord ? \'videocam\' : \'upload\'}}"></i>   </div>   <div>    <div class="{{css}}-chooser-primary-button"         ba-click="primary()"         ba-if="{{has_primary}}">     <input ba-if="{{enable_primary_select && primary_select_capture}}"            type="file"            class="{{css}}-chooser-file"            style="height:100"            onchange="{{primary_select(event)}}"            accept="{{primary_accept_string}}"            capture />     <input ba-if="{{enable_primary_select && !primary_select_capture}}"            type="file"            class="{{css}}-chooser-file"            style="height:100"            onchange="{{primary_select(event)}}"            accept="{{primary_accept_string}}" />     <span>      {{primary_label}}     </span>    </div>   </div>   <div>    <div class="{{css}}-chooser-secondary-button"         ba-click="secondary()"         ba-if="{{has_secondary}}">     <input ba-if="{{enable_secondary_select && secondary_select_capture}}"            type="file"            class="{{css}}-chooser-file"            style="height:100"            onchange="{{secondary_select(event)}}"            accept="{{secondary_accept_string}}" />     <input ba-if="{{enable_secondary_select && !secondary_select_capture}}"            type="file"            class="{{css}}-chooser-file"            style="height:100"            onchange="{{secondary_select(event)}}"            accept="{{secondary_accept_string}}" />     <span>      {{secondary_label}}     </span>    </div>   </div>  </div> </div>'}}),a.define("module:Ads.AbstractVideoAdProvider",["base:Class"],function(a,b){return a.extend({scoped:b},function(a){return{constructor:function(b){a.constructor.call(this),this._options=b},options:function(){return this._options},_newPrerollAd:function(a){},newPrerollAd:function(a){return this._newPrerollAd(a)},register:function(a){this.cls.registry[a]=this}}},{registry:{}})}),a.define("module:Ads.AbstractPrerollAd",["base:Class","base:Events.EventsMixin","jquery:"],function(a,b,c,d){return a.extend({scoped:d},[b,function(a){return{constructor:function(b,c){a.constructor.call(this),this._provider=b,this._options=c},executeAd:function(a){c(this._options.adElement).show(),this._executeAd(a)},_adFinished:function(){c(this._options.adElement).hide(),this.trigger("finished")}}}])}),a.define("module:Ads.AdSensePrerollAd",["module:Ads.AbstractPrerollAd"],function(a,b){return a.extend({scoped:b},function(a){return{constructor:function(b,c){a.constructor.call(this,b,c),this._adDisplayContainer=new google.ima.AdDisplayContainer(this._options.adElement,this._options.videoElement),this._adDisplayContainer.initialize(),this._adsLoader=new google.ima.AdsLoader(this._adDisplayContainer);var d=this;this._adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(){d._adError()},!1),this._adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(){d._adLoaded.apply(d,arguments)},!1),this._adsRequest=new google.ima.AdsRequest,this._adsRequest.adTagUrl=this._provider.options().adTagUrl},_executeAd:function(a){this._adsRequest.linearAdSlotWidth=a.width,this._adsRequest.linearAdSlotHeight=a.height,this._adsLoader.requestAds(this._adsRequest)},_adError:function(){this._adsManager&&this._adsManager.destroy(),this._adFinished()},_adLoaded:function(a){this._adsManager=a.getAdsManager(this._options.videoElement);try{this._adsManager.init(this._adsRequest.linearAdSlotWidth,this._adsRequest.linearAdSlotHeight,google.ima.ViewMode.NORMAL),this._adsManager.start()}catch(b){}var c=this;this._adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(){c._adError()},!1),this._adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(){c._adFinished()})}}})}),a.define("module:Ads.AdSenseVideoAdProvider",["module:Ads.AbstractVideoAdProvider","module:Ads.AdSensePrerollAd"],function(a,b,c){return a.extend({scoped:c},{_newPrerollAd:function(a){return new b(this,a)}})}),a.define("module:Assets",["base:Classes.LocaleTable","browser:Info"],function(a,b){var c=new a;return c.setWeakLocale(b.language()),{strings:c,playerthemes:{},recorderthemes:{}}}),a.extend("module:Assets",["module:Assets"],function(a){var b={"language:de":{"ba-videorecorder-chooser.record-video":"Video aufnehmen","ba-videorecorder-chooser.upload-video":"Video hochladen","ba-videorecorder-controlbar.settings":"Einstellungen","ba-videorecorder-controlbar.camerahealthy":"Gute Beleuchtung","ba-videorecorder-controlbar.cameraunhealthy":"Beleuchtung nicht optimal","ba-videorecorder-controlbar.microphonehealthy":"Soundqualit&#xE4;t einwandfrei","ba-videorecorder-controlbar.microphoneunhealthy":"Mikrofon bis jetzt stumm","ba-videorecorder-controlbar.record":"Video aufnehmen","ba-videorecorder-controlbar.record-tooltip":"Hier clicken um Aufnahme zu starten.","ba-videorecorder-controlbar.stop":"Aufnahme stoppen","ba-videorecorder-controlbar.stop-tooltip":"Hier clicken um Aufnahme zu stoppen.","ba-videorecorder-controlbar.skip":"&#xDC;berspringen","ba-videorecorder-controlbar.skip-tooltip":"Hier clicken um zu &#xDC;berspringen.","ba-videorecorder.recorder-error":"Es ist ein Fehler aufgetreten, bitte versuchen Sie es sp&#xE4;ter noch einmal. Hier klicken, um es noch einmal zu probieren.","ba-videorecorder.pick-covershot":"Bitte w&#xE4;hlen Sie einen Covershot aus.","ba-videorecorder.uploading":"Hochladen","ba-videorecorder.uploading-failed":"Hochladen fehlgeschlagen. Hier klicken, um es noch einmal zu probieren.","ba-videorecorder.verifying":"Verifizieren","ba-videorecorder.verifying-failed":"Verifizierung fehlgeschlagen. Hier klicken, um es noch einmal zu probieren.","ba-videorecorder.rerecord-confirm":"M&#xF6;chten Sie Ihr Video wirklich noch einmal aufnehmen?","ba-videorecorder.video_file_too_large":"Die angegebene Videodatei ist zu gro&#xDF;. Hier klicken, um eine kleinere Videodatei hochzuladen.","ba-videorecorder.unsupported_video_type":"Bitte laden Sie Dateien des folgenden Typs hoch: %s. Hier klicken, um es noch einmal zu probieren."}};for(var c in b)a.strings.register(b[c],[c]);return{}}),a.define("module:VideoPlayer.Dynamics.Controlbar",["dynamics:Dynamic","base:TimeFormat","module:Templates","jquery:","module:Assets","browser:Info"],["dynamics:Partials.StylesPartial","dynamics:Partials.ShowPartial","dynamics:Partials.IfPartial","dynamics:Partials.ClickPartial"],function(a,b,c,d,e,f,g){return a.extend({scoped:g},function(a){return{template:c.video_player_controlbar,attrs:{css:"ba-videoplayer",duration:0,position:0,cached:0,volume:1,expandedprogress:!0,playing:!1,rerecordable:!1,fullscreen:!0,activitydelta:0},functions:{startUpdatePosition:function(a){a[0].preventDefault(),this.set("_updatePosition",!0),this.call("progressUpdatePosition",a)},progressUpdatePosition:function(a){a[0].preventDefault(),this.get("_updatePosition")&&(this.set("position",this.get("duration")*(a[0].clientX-d(a[0].currentTarget).offset().left)/d(a[0].currentTarget).width()),this.trigger("position",this.get("position")))},stopUpdatePosition:function(a){a[0].preventDefault(),this.set("_updatePosition",!1)},startUpdateVolume:function(a){a[0].preventDefault(),this.set("_updateVolume",!0),this.call("progressUpdateVolume",a)},progressUpdateVolume:function(a){a[0].preventDefault(),this.get("_updateVolume")&&(this.set("volume",(a[0].clientX-d(a[0].currentTarget).offset().left)/d(a[0].currentTarget).width()),this.trigger("volume",this.get("volume")))},stopUpdateVolume:function(a){a[0].preventDefault(),this.set("_updateVolume",!1)},play:function(){this.trigger("play")},pause:function(){this.trigger("pause")},toggle_volume:function(){this.get("volume")>0?(this.__oldVolume=this.get("volume"),this.set("volume",0)):this.set("volume",this.__oldVolume||1),this.trigger("volume",this.get("volume"))},toggle_fullscreen:function(){this.trigger("fullscreen")},rerecord:function(){this.trigger("rerecord")}},create:function(){this.properties().compute("position_formatted",function(){return b.format(b.ELAPSED_MINUTES_SECONDS,1e3*this.get("position"))},["position"]),this.properties().compute("duration_formatted",function(){return b.format(b.ELAPSED_MINUTES_SECONDS,1e3*this.get("duration"))},["duration"]),this.set("ismobile",f.isMobile())}}}).register("ba-videoplayer-controlbar").attachStringTable(e.strings).addStrings({"video-progress":"Video progress","rerecord-video":"Re-record video?","play-video":"Play video","pause-video":"Pause video","elapsed-time":"Elasped time","total-time":"Total length of video","fullscreen-video":"Enter fullscreen","volume-button":"Set volume","volume-mute":"Mute sound","volume-unmute":"Unmute sound"})}),a.define("module:VideoPlayer.Dynamics.Loader",["dynamics:Dynamic","module:Templates","module:Assets"],function(a,b,c,d){return a.extend({scoped:d},function(a){return{template:b.video_player_loader,attrs:{css:"ba-videoplayer"}}}).register("ba-videoplayer-loader").attachStringTable(c.strings).addStrings({tooltip:"Loading video..."})}),a.define("module:VideoPlayer.Dynamics.Message",["dynamics:Dynamic","module:Templates"],["dynamics:Partials.ClickPartial"],function(a,b,c){return a.extend({scoped:c},function(a){return{template:b.video_player_message,attrs:{css:"ba-videoplayer",message:""},functions:{click:function(){this.trigger("click")}}}}).register("ba-videoplayer-message")}),a.define("module:VideoPlayer.Dynamics.Playbutton",["dynamics:Dynamic","module:Templates","module:Assets"],["dynamics:Partials.ClickPartial"],function(a,b,c,d){return a.extend({scoped:d},function(a){return{template:b.playbutton,attrs:{css:"ba-videoplayer",rerecordable:!1},functions:{play:function(){this.trigger("play")},rerecord:function(){this.trigger("rerecord")}}}}).register("ba-videoplayer-playbutton").attachStringTable(c.strings).addStrings({tooltip:"Click to play video.",rerecord:"Re-record"})}),a.define("module:VideoPlayer.Dynamics.PlayerStates.State",["base:States.State","base:Events.ListenMixin","base:Objs"],function(a,b,c,d){return a.extend({scoped:d},[b,{dynamics:[],_start:function(){this.dyn=this.host.dynamic,c.iter(c.extend({loader:!1,message:!1,playbutton:!1,controlbar:!1},c.objectify(this.dynamics)),function(a,b){this.dyn.set(b+"_active",a)},this),this._started()},_started:function(){},play:function(){this.dyn.set("autoplay",!0)}}])}),a.define("module:VideoPlayer.Dynamics.PlayerStates.FatalError",["module:VideoPlayer.Dynamics.PlayerStates.State"],function(a,b){return a.extend({scoped:b},{dynamics:["message"],_locals:["message"],_started:function(){this.dyn.set("message",this._message||this.dyn.string("video-error"))}})}),a.define("module:VideoPlayer.Dynamics.PlayerStates.Initial",["module:VideoPlayer.Dynamics.PlayerStates.State"],function(a,b){return a.extend({scoped:b},{dynamics:["loader"],_started:function(){this.dyn.get("ready")?this.next("LoadPlayer"):this.listenOn(this.dyn,"change:ready",function(){this.next("LoadPlayer")})}})}),a.define("module:VideoPlayer.Dynamics.Player",["dynamics:Dynamic","module:Templates","module:Assets","browser:Info","media:Player.VideoPlayerWrapper","base:Types","base:Objs","base:Strings","base:Time","base:Timers","base:States.Host","base:Classes.ClassRegistry","module:VideoPlayer.Dynamics.PlayerStates.Initial","module:VideoPlayer.Dynamics.PlayerStates","module:Ads.AbstractVideoAdProvider"],["module:VideoPlayer.Dynamics.Playbutton","module:VideoPlayer.Dynamics.Message","module:VideoPlayer.Dynamics.Loader","module:VideoPlayer.Dynamics.Controlbar","dynamics:Partials.EventPartial","dynamics:Partials.OnPartial","dynamics:Partials.TemplatePartial"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){return a.extend({scoped:p},function(a){return{template:b.player,attrs:{css:"ba-videoplayer",iecss:"ba-videoplayer",cssplaybutton:"",cssloader:"",cssmessage:"",csstopmessage:"",csscontrolbar:"",width:"",height:"",theme:"",csstheme:"",dynplaybutton:"videoplayer-playbutton",dynloader:"videoplayer-loader",dynmessage:"videoplayer-message",dyntopmessage:"videoplayer-topmessage",dyncontrolbar:"videoplayer-controlbar",tmplplaybutton:"",tmplloader:"",tmplmessage:"",tmpltopmessage:"",tmplcontrolbar:"",poster:"",source:"",sources:[],playlist:null,forceflash:!1,noflash:!1,reloadonplay:!1,adprovider:null,preroll:!1,rerecordable:!1,autoplay:!1,preload:!1,loop:!1,nofullscreen:!1,ready:!0,stretch:!1,hideoninactivity:!0,skipinitial:!1,topmessage:"",states:{poster_error:{ignore:!1,click_play:!0}}},types:{forceflash:"boolean",noflash:"boolean",rerecordable:"boolean",loop:"boolean",autoplay:"boolean",preload:"boolean",ready:"boolean",nofullscreen:"boolean",stretch:"boolean",preroll:"boolean",hideoninactivity:"boolean",skipinitial:"boolean"},extendables:["states"],remove_on_destroy:!0,create:function(){if(this.get("theme")in c.playerthemes&&g.iter(c.playerthemes[this.get("theme")],function(a,b){this.isArgumentAttr(b)||this.set(b,a)},this),this.get("adprovider")&&(this._adProvider=this.get("adprovider"),f.is_string(this._adProvider)&&(this._adProvider=o.registry[this._adProvider])),this.get("playlist")){var a=this.get("playlist")[0];this.set("poster",a.poster),this.set("source",a.source),this.set("sources",a.sources)}this.set("ie8",d.isInternetExplorer()&&d.internetExplorerVersion()<9),this.set("duration",0),this.set("position",0),this.set("buffered",0),this.set("volume",1),this.set("message",""),this.set("fullscreensupport",!1),this.set("csssize","normal"),this.set("loader_active",!1),this.set("playbutton_active",!1),this.set("controlbar_active",!1),this.set("message_active",!1),this.set("last_activity",i.now()),this.set("activity_delta",0),this.set("playing",!1),this.__attachRequested=!1,this.__activated=!1,this.__error=null,this.__currentStretch=null,this.on("change:stretch",function(){this._updateStretch()},this),this.host=this.auto_destroy(new k({stateRegistry:new l(this.cls.playerStates())})),this.host.dynamic=this,this.host.initialize(m),this._timer=this.auto_destroy(new j.Timer({context:this,fire:this._timerFire,delay:100,start:!0})),this.properties().compute("buffering",function(){return this.get("playing")&&this.get("buffered")<this.get("position")&&this.get("last_position_change_delta")>1e3},["buffered","position","last_position_change_delta","playing"])},state:function(){return this.host.state()},videoAttached:function(){return!!this.player},videoLoaded:function(){return this.videoAttached()&&this.player.loaded()},videoError:function(){return this.__error},_error:function(a,b){this.__error={error_type:a,error_code:b},this.trigger("error:"+a,b),this.trigger("error",a,b)},_clearError:function(){this.__error=null},_detachVideo:function(){this.set("playing",!1),this.player&&this.player.weakDestroy(),this._prerollAd&&this._prerollAd.weakDestroy(),this.player=null},_attachVideo:function(){if(!this.videoAttached()){if(!this.__activated)return void(this.__attachRequested=!0);this.__attachRequested=!1;var a=this.element().find("[data-video='video']").get(0);this._clearError(),e.create({element:a,poster:this.get("poster"),source:this.get("source"),sources:this.get("sources"),forceflash:!!this.get("forceflash"),noflash:!!this.get("noflash"),preload:!!this.get("preload"),loop:!!this.get("loop"),reloadonplay:!!this.get("reloadonplay")}).error(function(a){this._error("attach",a)},this).success(function(a){this._adProvider&&this.get("preroll")&&(this._prerollAd=this._adProvider.newPrerollAd({videoElement:this.element().find("[data-video='video']").get(0),adElement:this.element().find("[data-video='ad']").get(0)})),this.player=a,this.player.on("postererror",function(){this._error("poster")},this),this.player.on("playing",function(){this.set("playing",!0),this.trigger("playing")},this),this.player.on("error",function(a){this._error("video",a)},this),this.player.error()&&this.player.trigger("error",this.player.error()),this.player.on("paused",function(){this.set("playing",!1),this.trigger("paused")},this),this.player.on("ended",function(){this.set("playing",!1),this.trigger("ended")},this),this.trigger("attached",a),this.player.once("loaded",function(){this.set("duration",this.player.duration()),this.set("fullscreensupport",this.player.supportsFullscreen()),this.trigger("loaded"),this._updateStretch()},this),this.player.loaded()&&this.player.trigger("loaded"),this._updateStretch()},this)}},_afterActivate:function(b){a._afterActivate.call(this,b),this.__activated=!0,this.__attachRequested&&this._attachVideo()},reattachVideo:function(){this._detachVideo(),this._attachVideo()},object_functions:["play","rerecord","pause","stop","seek","set_volume"],functions:{user_activity:function(){this.set("last_activity",i.now()),this.set("activity_delta",0)},message_click:function(){this.trigger("message:click")},playbutton_click:function(){this.host.state().play()},play:function(){this.host.state().play()},rerecord:function(){this.get("rerecordable")&&this.trigger("rerecord")},pause:function(){this.get("playing")&&this.player.pause()},stop:function(){this.videoLoaded()&&(this.get("playing")&&this.player.pause(),this.player.setPosition(0),this.trigger("stopped"))},seek:function(a){this.videoLoaded()&&this.player.setPosition(a),this.trigger("seek",a)},set_volume:function(a){a=Math.min(1,a),this.set("volume",a),this.videoLoaded()&&(this.player.setVolume(a),this.player.setMuted(0>=a))},toggle_fullscreen:function(){this.videoLoaded()&&this.player.enterFullscreen()}},destroy:function(){this._detachVideo(),a.destroy.call(this)},_timerFire:function(){try{if(this.videoLoaded()){this.set("activity_delta",i.now()-this.get("last_activity"));var a=this.player.position();(a!=this.get("position")||this.get("last_position_change"))&&this.set("last_position_change",i.now()),this.set("last_position_change_delta",i.now()-this.get("last_position_change")),this.set("position",a),this.set("buffered",this.player.buffered()),this.set("duration",this.player.duration())}}catch(b){}this._updateStretch(),this._updateCSSSize()},_updateCSSSize:function(){this.set("csssize",this.element().width()>400?"normal":this.element().width()>300?"medium":"small")},videoHeight:function(){return this.videoAttached()?this.player.videoHeight():NaN},videoWidth:function(){return this.videoAttached()?this.player.videoWidth():NaN},aspectRatio:function(){return this.videoWidth()/this.videoHeight()},parentWidth:function(){return this.activeElement().parent().width()},parentHeight:function(){return this.activeElement().parent().height()},parentAspectRatio:function(){return this.parentWidth()/this.parentHeight()},_updateStretch:function(){var a=null;if(this.get("stretch")){var b=this.aspectRatio();if(isFinite(b)){var c=this.parentAspectRatio();isFinite(c)?(c>b&&(a="height"),b>c&&(a="width")):c===1/0&&(a="height")}}this.__currentStretch!==a&&(this.__currentStretch&&this.activeElement().removeClass(this.get("css")+"-stretch-"+this.__currentStretch),a&&this.activeElement().addClass(this.get("css")+"-stretch-"+a)),this.__currentStretch=a}}},{playerStates:function(){return[n]}}).register("ba-videoplayer").attachStringTable(c.strings).addStrings({"video-error":"An error occurred, please try again later. Click to retry."})}),a.define("module:VideoPlayer.Dynamics.PlayerStates.LoadPlayer",["module:VideoPlayer.Dynamics.PlayerStates.State"],function(a,b){return a.extend({scoped:b},{dynamics:["loader"],_started:function(){this.listenOn(this.dyn,"error:attach",function(){this.next("LoadError")},this),this.listenOn(this.dyn,"error:poster",function(){this.dyn.get("states").poster_error.ignore||this.next("PosterError")},this),this.listenOn(this.dyn,"attached",function(){this.next("PosterReady")},this),this.dyn.reattachVideo()}})}),a.define("module:VideoPlayer.Dynamics.PlayerStates.LoadError",["module:VideoPlayer.Dynamics.PlayerStates.State"],function(a,b){return a.extend({
scoped:b},{dynamics:["message"],_started:function(){this.dyn.set("message",this.dyn.string("video-error")),this.listenOn(this.dyn,"message:click",function(){this.next("LoadPlayer")},this)}})}),a.define("module:VideoPlayer.Dynamics.PlayerStates.PosterReady",["module:VideoPlayer.Dynamics.PlayerStates.State"],function(a,b){return a.extend({scoped:b},{dynamics:["playbutton"],_started:function(){this.listenOn(this.dyn,"error:poster",function(){this.dyn.get("states").poster_error.ignore||this.next("PosterError")},this),(this.dyn.get("autoplay")||this.dyn.get("skipinitial"))&&this.play()},play:function(){this.next("Preroll")}})}),a.define("module:VideoPlayer.Dynamics.PlayerStates.Preroll",["module:VideoPlayer.Dynamics.PlayerStates.State"],function(a,b){return a.extend({scoped:b},{dynamics:[],_started:function(){this.dyn._prerollAd?(this.dyn._prerollAd.once("finished",function(){this.next("LoadVideo")},this),this.dyn._prerollAd.executeAd({width:this.dyn.videoWidth(),height:this.dyn.videoHeight()})):this.next("LoadVideo")}})}),a.define("module:VideoPlayer.Dynamics.PlayerStates.PosterError",["module:VideoPlayer.Dynamics.PlayerStates.State"],function(a,b){return a.extend({scoped:b},{dynamics:["message"],_started:function(){this.dyn.set("message",this.dyn.string("video-error")),this.listenOn(this.dyn,"message:click",function(){this.next(this.dyn.get("states").poster_error.click_play?"LoadVideo":"LoadPlayer")},this)}})}),a.define("module:VideoPlayer.Dynamics.PlayerStates.LoadVideo",["module:VideoPlayer.Dynamics.PlayerStates.State","base:Async"],function(a,b,c){return a.extend({scoped:c},{dynamics:["loader"],_started:function(){this.listenOn(this.dyn,"error:video",function(){this.next("ErrorVideo")},this),this.listenOn(this.dyn,"playing",function(){this.next("PlayVideo")},this),this.dyn.get("skipinitial")&&!this.dyn.get("autoplay")?this.next("PlayVideo"):this.dyn.player.play()}})}),a.define("module:VideoPlayer.Dynamics.PlayerStates.ErrorVideo",["module:VideoPlayer.Dynamics.PlayerStates.State"],function(a,b){return a.extend({scoped:b},{dynamics:["message"],_started:function(){this.dyn.set("message",this.dyn.string("video-error")),this.listenOn(this.dyn,"message:click",function(){this.next("LoadVideo")},this)}})}),a.define("module:VideoPlayer.Dynamics.PlayerStates.PlayVideo",["module:VideoPlayer.Dynamics.PlayerStates.State"],function(a,b){return a.extend({scoped:b},{dynamics:["controlbar"],_started:function(){this.dyn.set("autoplay",!1),this.listenOn(this.dyn,"ended",function(){this.next("NextVideo")},this),this.listenOn(this.dyn,"change:buffering",function(){this.dyn.set("loader_active",this.dyn.get("buffering"))},this),this.listenOn(this.dyn,"error:video",function(){this.next("ErrorVideo")},this)},play:function(){this.dyn.get("playing")||this.dyn.player.play()}})}),a.define("module:VideoPlayer.Dynamics.PlayerStates.NextVideo",["module:VideoPlayer.Dynamics.PlayerStates.State"],function(a,b){return a.extend({scoped:b},{_started:function(){if(this.dyn.get("playlist")){var a=this.dyn.get("playlist"),b=a.shift();if(this.dyn.get("loop")&&a.push(b),this.dyn.set("playlist",a),a.length>0){var c=a[0];return this.dyn.set("poster",c.poster),this.dyn.set("source",c.source),this.dyn.set("sources",c.sources),this.dyn.reattachVideo(),this.dyn.set("autoplay",!0),void this.next("LoadPlayer")}}this.next("PosterReady")}})}),a.define("module:VideoPlayer.Dynamics.Topmessage",["dynamics:Dynamic","module:Templates"],function(a,b,c){return a.extend({scoped:c},function(a){return{template:b.video_player_topmessage,attrs:{css:"ba-videoplayer",topmessage:""}}}).register("ba-videoplayer-topmessage")}),a.define("module:VideoRecorder.Dynamics.Chooser",["dynamics:Dynamic","module:Templates","module:Assets","browser:Info"],["dynamics:Partials.ClickPartial","dynamics:Partials.IfPartial"],function(a,b,c,d,e){return a.extend({scoped:e},function(a){return{template:b.video_recorder_chooser,attrs:{css:"ba-videorecorder",allowrecord:!0,allowupload:!0,allowcustomupload:!0,primaryrecord:!0},create:function(){this.set("has_primary",!0),this.set("enable_primary_select",!1),this.set("primary_label",this.string(this.get("primaryrecord")?"record-video":"upload-video")),this.set("secondary_label",this.string(this.get("primaryrecord")?"upload-video":"record-video")),this.get("allowrecord")&&this.get("primaryrecord")&&(!d.isMobile()||d.isAndroid()&&d.isCordova())||(this.set("enable_primary_select",!0),this.set("primary_select_capture",d.isMobile()&&this.get("allowrecord")&&this.get("primaryrecord")),this.set("primary_accept_string",d.isMobile()&&this.get("allowrecord")&&this.get("primaryrecord")?"video/*,video/mp4;capture=camcorder":d.isMobile()||!this.get("allowcustomupload")?"video/*,video/mp4":"")),this.set("has_secondary",this.get("allowrecord")&&this.get("allowupload")),this.set("enable_secondary_select",!1),!this.get("primaryrecord")&&(!d.isMobile()||d.isAndroid()&&d.isCordova())||(this.set("enable_secondary_select",!0),this.set("secondary_select_capture",d.isMobile()&&!this.get("primaryrecord")),this.set("secondary_accept_string",d.isMobile()&&!this.get("primaryrecord")?"video/*,video/mp4;capture=camcorder":d.isMobile()||!this.get("allowcustomupload")?"video/*,video/mp4":""))},__recordCordova:function(){var a=this;navigator.device.capture.captureVideo(function(b){var c=b[0];a.trigger("upload",c)},function(a){},{limit:1})},functions:{primary:function(){this.get("enable_primary_select")||(d.isMobile()&&d.isAndroid()&&d.isCordova()?this.__recordCordova():this.trigger("record"))},secondary:function(){this.get("enable_secondary_select")||(d.isMobile()&&d.isAndroid()&&d.isCordova()?this.__recordCordova():this.trigger("record"))},primary_select:function(a){this.get("enable_primary_select")&&this.trigger("upload",a[0].target)},secondary_select:function(a){this.get("enable_secondary_select")&&this.trigger("upload",a[0].target)}}}}).register("ba-videorecorder-chooser").attachStringTable(c.strings).addStrings({"record-video":"Record Your Video","upload-video":"Upload Video"})}),a.define("module:VideoRecorder.Dynamics.Controlbar",["dynamics:Dynamic","module:Templates","module:Assets","base:Timers.Timer"],["dynamics:Partials.ShowPartial","dynamics:Partials.RepeatPartial"],function(a,b,c,d,e){return a.extend({scoped:e},function(a){return{template:b.video_recorder_controlbar,attrs:{css:"ba-videorecorder",hovermessage:"",recordingindication:!0},create:function(){this.auto_destroy(new d({context:this,fire:function(){this.set("recordingindication",!this.get("recordingindication"))},delay:500}))},functions:{selectCamera:function(a){this.trigger("select-camera",a)},selectMicrophone:function(a){this.trigger("select-microphone",a)},hover:function(a){this.set("hovermessage",a)},unhover:function(){this.set("hovermessage","")},record:function(){this.trigger("invoke-record")},stop:function(){this.trigger("invoke-stop")},skip:function(){this.trigger("invoke-skip")}}}}).register("ba-videorecorder-controlbar").attachStringTable(c.strings).addStrings({settings:"Settings",camerahealthy:"Lighting is good",cameraunhealthy:"Lighting is not optimal",microphonehealthy:"Sound is good",microphoneunhealthy:"Cannot pick up any sound",record:"Record","record-tooltip":"Click here to record.",stop:"Stop","stop-tooltip":"Click here to stop.",skip:"Skip","skip-tooltip":"Click here to skip."})}),a.define("module:VideoRecorder.Dynamics.Imagegallery",["dynamics:Dynamic","module:Templates","base:Collections.Collection","base:Properties.Properties","jquery:","base:Timers.Timer"],["dynamics:Partials.StylesPartial"],function(a,b,c,d,e,f,g){return a.extend({scoped:g},function(a){return{template:b.video_recorder_imagegallery,attrs:{css:"ba-videorecorder",imagecount:3,imagenativewidth:0,imagenativeheight:0,containerwidth:0,containerheight:0,containeroffset:0,deltafrac:1/8},computed:{"imagewidth:imagecount,containerwidth,deltafrac":function(){return this.get("imagecount")<=0?0:this.get("containerwidth")*(1-this.get("deltafrac"))/this.get("imagecount")},"imagedelta:imagecount,containerwidth,deltafrac":function(){return this.get("imagecount")<=1?0:this.get("containerwidth")*this.get("deltafrac")/(this.get("imagecount")-1)},"imageheight:imagewidth,imagenativewidth,imagenativeheight":function(){return this.get("imagenativeheight")*this.get("imagewidth")/this.get("imagenativewidth")}},create:function(){var a=this.auto_destroy(new c);this.set("images",a),this.snapshotindex=0,this._updateImageCount(),this.on("change:imagecount",this._updateImageCount,this),this.on("change:imagewidth change:imageheight change:imagedelta",this._recomputeImageBoxes,this),this.auto_destroy(new f({context:this,delay:1e3,fire:function(){this.updateContainerSize()}}))},destroy:function(){this.get("images").iterate(function(a){a.snapshotDisplay&&this.parent().recorder.removeSnapshotDisplay(a.snapshotDisplay)},this),a.destroy.call(this)},_updateImageCount:function(){for(var a=this.get("images"),b=this.get("imagecount");a.count()<b;){var c=new d({index:a.count()});this._recomputeImageBox(c),a.add(c)}for(;a.count()>b;)a.remove(a.getByIndex(a.count()-1))},_recomputeImageBoxes:function(){this.get("images").iterate(function(a){this._recomputeImageBox(a)},this)},_recomputeImageBox:function(a){var b=a.get("index"),c=this.get("imagewidth"),d=this.get("imageheight"),e=this.get("imagedelta"),f=this.get("containerheight");a.set("left",1+Math.round(b*(c+e))),a.set("top",1+Math.round((f-d)/2)),a.set("width",1+Math.round(c)),a.set("height",1+Math.round(d)),a.snapshot&&a.snapshotDisplay&&this.parent().recorder.updateSnapshotDisplay(a.snapshot,a.snapshotDisplay,a.get("left")+this.get("containeroffset"),a.get("top"),a.get("width"),a.get("height"))},updateContainerSize:function(){var a=this.activeElement().find("[data-gallery-container]");this.set("containeroffset",parseInt(a.position().left,10)),this.set("containerheight",parseInt(a.height(),10)),this.set("containerwidth",parseInt(a.width(),10))},_afterActivate:function(b){a._afterActivate.apply(this,arguments),this.updateContainerSize()},loadImageSnapshot:function(a,b){a.snapshotDisplay&&(this.parent().recorder.removeSnapshotDisplay(a.snapshotDisplay),a.snapshotDisplay=null);var c=this.parent().snapshots;a.snapshot=c[(b%c.length+c.length)%c.length],a.snapshotDisplay=this.parent().recorder.createSnapshotDisplay(this.activeElement().get(0),a.snapshot,a.get("left")+this.get("containeroffset"),a.get("top"),a.get("width"),a.get("height"))},loadSnapshots:function(){this.get("images").iterate(function(a){this.loadImageSnapshot(a,this.snapshotindex+a.get("index"))},this)},nextSnapshots:function(){this.snapshotindex+=this.get("imagecount"),this.loadSnapshots()},prevSnapshots:function(){this.snapshotindex-=this.get("imagecount"),this.loadSnapshots()},functions:{left:function(){this.prevSnapshots()},right:function(){this.nextSnapshots()},select:function(a){this.trigger("image-selected",a.snapshot)}}}}).register("ba-videorecorder-imagegallery")}),a.define("module:VideoRecorder.Dynamics.Loader",["dynamics:Dynamic","module:Templates"],["dynamics:Partials.ShowPartial"],function(a,b,c){return a.extend({scoped:c},function(a){return{template:b.video_recorder_loader,attrs:{css:"ba-videorecorder",tooltip:"",label:"",message:""}}}).register("ba-videorecorder-loader")}),a.define("module:VideoRecorder.Dynamics.Message",["dynamics:Dynamic","module:Templates"],["dynamics:Partials.ClickPartial"],function(a,b,c){return a.extend({scoped:c},function(a){return{template:b.video_recorder_message,attrs:{css:"ba-videorecorder",message:""},functions:{click:function(){this.trigger("click")}}}}).register("ba-videorecorder-message")}),a.define("module:VideoRecorder.Dynamics.RecorderStates.State",["base:States.State","base:Events.ListenMixin","base:Objs"],function(a,b,c,d){return a.extend({scoped:d},[b,{dynamics:[],_start:function(){this.dyn=this.host.dynamic,c.iter(c.extend({message:!1,chooser:!1,topmessage:!1,controlbar:!1,loader:!1,imagegallery:!1},c.objectify(this.dynamics)),function(a,b){this.dyn.set(b+"_active",a)},this),this.dyn.set("playertopmessage",""),this.dyn._accessing_camera=!1,this._started()},_started:function(){},record:function(){this.dyn.set("autorecord",!0)},stop:function(){this.dyn.scopes.player.execute("stop")},play:function(){this.dyn.scopes.player.execute("play")},pause:function(){this.dyn.scopes.player.execute("pause")},rerecord:function(){},selectRecord:function(){},selectUpload:function(a){}}])}),a.define("module:VideoRecorder.Dynamics.RecorderStates.FatalError",["module:VideoRecorder.Dynamics.RecorderStates.State"],function(a,b){return a.extend({scoped:b},{dynamics:["message"],_locals:["message","retry"],_started:function(){this.dyn.set("message",this._message||this.dyn.string("recorder-error")),this.listenOn(this.dyn,"message-click",function(){this._retry&&this.next(this._retry)})}})}),a.define("module:VideoRecorder.Dynamics.RecorderStates.Initial",["module:VideoRecorder.Dynamics.RecorderStates.State"],function(a,b){return a.extend({scoped:b},{_started:function(){this.dyn.set("player_active",!1),this.dyn._initializeUploader(),this.dyn.get("recordermode")?this.dyn.get("autorecord")||this.dyn.get("skipinitial")?this.next("CameraAccess"):this.next("Chooser"):this.next("Player")}})}),a.define("module:VideoRecorder.Dynamics.RecorderStates.Player",["module:VideoRecorder.Dynamics.RecorderStates.State"],function(a,b){return a.extend({scoped:b},{rerecord:function(){this.dyn.trigger("rerecord"),this.dyn.set("recordermode",!0),this.next("Initial")},_started:function(){this.dyn.set("player_active",!0)},_end:function(){this.dyn.set("player_active",!1)}})}),a.define("module:VideoRecorder.Dynamics.RecorderStates.Chooser",["module:VideoRecorder.Dynamics.RecorderStates.State","jquery:","base:Strings","browser:Info"],function(a,b,c,d,e){return a.extend({scoped:e},{dynamics:["chooser"],record:function(){this.dyn.set("autorecord",!0),this.selectRecord()},selectRecord:function(){this.next("CameraAccess")},selectUpload:function(a){if(!(d.isMobile()&&d.isAndroid()&&d.isCordova())){if(this.dyn.get("allowedextensions")){var e=b(a).val().toLowerCase(),f=!1;if(this.dyn.get("allowedextensions").forEach(function(a){c.ends_with(e,"."+a.toLowerCase())&&(f=!0)},this),!f)return void this.next("FatalError",{message:this.dyn.strings("unsupported_video_type").replace("%s",this.dyn.get("allowedextensions").join(" / ")),retry:"Chooser"})}if(this.dyn.get("filesizelimit")){var g=a;if(g.files&&g.files.length>0&&g.files[0].size>this.dyn.get("filesizelimit"))return void this.next("FatalError",{message:this.dyn.strings("video_file_too_large"),retry:"Chooser"})}}this.dyn._prepareRecording().success(function(){this.dyn._uploadVideoFile(a),this.next("Uploading")},this).error(function(a){this.next("FatalError",{message:a,retry:"Chooser"})},this)}})}),a.define("module:VideoRecorder.Dynamics.RecorderStates.CameraAccess",["module:VideoRecorder.Dynamics.RecorderStates.State"],function(a,b){return a.extend({scoped:b},{dynamics:["topmessage","controlbar"],_started:function(){this.dyn.set("settingsvisible",!0),this.dyn.set("recordvisible",!0),this.dyn.set("stopvisible",!1),this.dyn.set("skipvisible",!1),this.dyn.set("controlbarlabel",""),this.listenOn(this.dyn,"bound",function(){this.dyn.get("autorecord")&&this.next("RecordPrepare")},this),this.listenOn(this.dyn,"error",function(a){this.next("FatalError",{message:a,retry:"Initial"})},this),this.dyn._attachRecorder(),this.dyn._bindMedia()},record:function(){this.dyn.get("autorecord")||this.next("RecordPrepare")}})}),a.define("module:VideoRecorder.Dynamics.RecorderStates.RecordPrepare",["module:VideoRecorder.Dynamics.RecorderStates.State","base:Timers.Timer","base:Time"],function(a,b,c,d){return a.extend({scoped:d},{dynamics:["loader"],_started:function(){if(this.dyn._accessing_camera=!0,this._promise=this.dyn._prepareRecording(),this.dyn.set("message",""),this.dyn.get("countdown")){this.dyn.set("loaderlabel",this.dyn.get("countdown"));var a=c.now()+1e3*this.dyn.get("countdown"),d=new b({context:this,delay:100,fire:function(){this.dyn.set("loaderlabel",""+Math.round(Math.max(0,a-c.now())/1e3)),a<=c.now()&&(this.dyn.set("loaderlabel",""),d.stop(),this._startRecording())}});this.auto_destroy(d)}else this._startRecording()},record:function(){this._startRecording()},_startRecording:function(){this._promise.success(function(){this.dyn._startRecording().success(function(){this.next("Recording")},this).error(function(a){this.next("FatalError",{message:a,retry:"CameraAccess"})},this)},this).error(function(a){this.next("FatalError",{message:a,retry:"CameraAccess"})},this)}})}),a.define("module:VideoRecorder.Dynamics.RecorderStates.Recording",["module:VideoRecorder.Dynamics.RecorderStates.State","base:Timers.Timer","base:Time","base:TimeFormat"],function(a,b,c,d,e){return a.extend({scoped:e},{dynamics:["topmessage","controlbar"],_started:function(){this.dyn._accessing_camera=!0,this.dyn.trigger("recording"),this.dyn.set("settingsvisible",!1),this.dyn.set("recordvisible",!1),this.dyn.set("stopvisible",!0),this.dyn.set("skipvisible",!1),this._startTime=c.now(),this._stopping=!1,this._timer=this.auto_destroy(new b({immediate:!0,delay:10,context:this,fire:this._timerFire}))},_timerFire:function(){var a=this.dyn.get("timelimit"),b=c.now(),e=Math.max(0,a?this._startTime+1e3*a-b:b-this._startTime);this.dyn.set("controlbarlabel",d.format(d.ELAPSED_MINUTES_SECONDS,e)),a&&this._startTime+1e3*a<=b&&(this._timer.stop(),this.stop())},stop:function(){this._stopping||(this._stopping=!0,this.dyn._stopRecording().success(function(){this.dyn._showBackgroundSnapshot(),this.dyn._unbindMedia(),this.dyn.trigger("recording_stopped"),this.dyn.get("picksnapshots")?this.next("CovershotSelection"):this.next("Uploading")},this).error(function(a){this.next("FatalError",{message:a,retry:"CameraAccess"})},this))}})}),a.define("module:VideoRecorder.Dynamics.RecorderStates.CovershotSelection",["module:VideoRecorder.Dynamics.RecorderStates.State"],function(a,b){return a.extend({scoped:b},{dynamics:["imagegallery","topmessage","controlbar"],_started:function(){this.dyn.set("settingsvisible",!1),this.dyn.set("recordvisible",!1),this.dyn.set("stopvisible",!1),this.dyn.set("skipvisible",!0),this.dyn.set("controlbarlabel",""),this.dyn.set("topmessage",this.dyn.string("pick-covershot"));var a=this.dyn.scope(">[tagname='ba-videorecorder-imagegallery']").materialize(!0);a.loadSnapshots(),a.updateContainerSize(),this.listenOn(this.dyn,"invoke-skip",function(){this.next("Uploading")},this),this.listenOn(this.dyn,"select-image",function(a){this.dyn._uploadCovershot(a),this.next("Uploading")},this)}})}),a.define("module:VideoRecorder.Dynamics.RecorderStates.Uploading",["module:VideoRecorder.Dynamics.RecorderStates.State"],function(a,b){return a.extend({scoped:b},{dynamics:["loader","message"],_started:function(){this.dyn.trigger("uploading"),this.dyn.set("topmessage",""),this.dyn.set("message",this.dyn.string("uploading")),this.dyn.set("playertopmessage",this.dyn.get("message"));var a=this.dyn._dataUploader;this.listenOn(a,"success",function(){this.next("Verifying")}),this.listenOn(a,"error",function(){this.dyn.set("player_active",!1),this.next("FatalError",{message:this.dyn.string("uploading-failed"),retry:"Uploading"})}),this.listenOn(a,"progress",function(a,b){0!==b&&(this.dyn.trigger("upload_progress",a/b),this.dyn.set("message",this.dyn.string("uploading")+": "+Math.round(a/b*100)+"%"),this.dyn.set("playertopmessage",this.dyn.get("message")))}),a.reset(),a.upload(),this.dyn.get("localplayback")&&this.dyn.recorder.supportsLocalPlayback()&&(this.dyn.set("playbacksource",this.dyn.recorder.localPlaybackSource()),this.dyn.__lastCovershotUpload&&this.dyn.set("playbackposter",this.dyn.recorder.snapshotToLocalPoster(this.dyn.__lastCovershotUpload)),this.dyn.set("loader_active",!1),this.dyn.set("message_active",!1),this.dyn._hideBackgroundSnapshot(),this.dyn.set("player_active",!0))},rerecord:function(){this.dyn._hideBackgroundSnapshot(),this.dyn._detachRecorder(),this.dyn.trigger("rerecord"),this.dyn.set("recordermode",!0),this.next("Initial")}})}),a.define("module:VideoRecorder.Dynamics.RecorderStates.Verifying",["module:VideoRecorder.Dynamics.RecorderStates.State"],function(a,b){return a.extend({scoped:b},{dynamics:["loader","message"],_started:function(){this.dyn.trigger("verifying"),this.dyn.set("message",this.dyn.string("verifying")+"..."),this.dyn.set("playertopmessage",this.dyn.get("message")),this.dyn.get("localplayback")&&this.dyn.recorder.supportsLocalPlayback()&&(this.dyn.set("loader_active",!1),this.dyn.set("message_active",!1)),this.dyn._verifyRecording().success(function(){this.dyn.trigger("verified"),this.dyn._hideBackgroundSnapshot(),this.dyn._detachRecorder(),this.dyn.get("recordings")&&this.dyn.set("recordings",this.dyn.get("recordings")-1),this.next("Player")},this).error(function(){this.dyn.set("player_active",!1),this.next("FatalError",{message:this.dyn.string("verifying-failed"),retry:"Verifying"})},this)},rerecord:function(){this.dyn._hideBackgroundSnapshot(),this.dyn._detachRecorder(),this.dyn.trigger("rerecord"),this.dyn.set("recordermode",!0),this.next("Initial")}})}),a.define("module:VideoRecorder.Dynamics.Topmessage",["dynamics:Dynamic","module:Templates"],function(a,b,c){return a.extend({scoped:c},function(a){return{template:b.video_recorder_topmessage,attrs:{css:"ba-videorecorder",topmessage:""}}}).register("ba-videorecorder-topmessage")}),a.define("module:VideoRecorder.Dynamics.Recorder",["dynamics:Dynamic","module:Templates","module:Assets","browser:Info","browser:Upload.MultiUploader","browser:Upload.FileUploader","media:Recorder.VideoRecorderWrapper","base:Types","base:Objs","base:Strings","base:Time","base:Timers","base:States.Host","base:Classes.ClassRegistry","base:Collections.Collection","base:Promise","module:VideoRecorder.Dynamics.RecorderStates.Initial","module:VideoRecorder.Dynamics.RecorderStates"],["module:VideoRecorder.Dynamics.Imagegallery","module:VideoRecorder.Dynamics.Loader","module:VideoRecorder.Dynamics.Controlbar","module:VideoRecorder.Dynamics.Message","module:VideoRecorder.Dynamics.Topmessage","module:VideoRecorder.Dynamics.Chooser","dynamics:Partials.ShowPartial","dynamics:Partials.IfPartial","dynamics:Partials.EventPartial","dynamics:Partials.OnPartial","dynamics:Partials.DataPartial","dynamics:Partials.AttrsPartial","dynamics:Partials.TemplatePartial"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){return a.extend({scoped:s},function(a){return{template:b.recorder,attrs:{css:"ba-videorecorder",iecss:"ba-videorecorder",cssimagegallery:"",cssloader:"",csscontrolbar:"",cssmessage:"",csstopmessage:"",csschooser:"",width:"",height:"",gallerysnapshots:3,theme:"",csstheme:"",dynimagegallery:"videorecorder-imagegallery",dynloader:"videorecorder-loader",dyncontrolbar:"videorecorder-controlbar",dynmessage:"videorecorder-message",dyntopmessage:"videorecorder-topmessage",dynchooser:"videorecorder-chooser",dynvideoplayer:"videoplayer",tmplimagegallery:"",tmplloader:"",tmplcontrolbar:"",tmplmessage:"",tmpltopmessage:"",tmplchooser:"",autorecord:!1,autoplay:!1,allowrecord:!0,allowupload:!0,allowcustomupload:!0,primaryrecord:!0,nofullscreen:!1,recordingwidth:640,recordingheight:480,countdown:3,snapshotmax:15,framerate:null,snapshottype:"jpg",picksnapshots:!0,playbacksource:"",playbackposter:"",recordermode:!0,skipinitial:!1,timelimit:null,rtmpstreamtype:"mp4",allowedextensions:null,filesizelimit:null,forceflash:!1,noflash:!1,flashicognitosupport:!1,localplayback:!1,uploadoptions:{},playerattrs:{},rerecordable:!0,recordings:null,ready:!0,stretch:!1},scopes:{player:">[id='player']"},types:{forceflash:"boolean",noflash:"boolean",rerecordable:"boolean",ready:"boolean",stretch:"boolean",autorecord:"boolean",autoplay:"boolean",allowrecord:"boolean",allowupload:"boolean",allowcustomupload:"boolean",primaryrecord:"boolean",flashicognitosupport:"boolean",recordermode:"boolean",nofullscreen:"boolean",picksnapshots:"boolean",localplayback:"boolean"},extendables:["states"],remove_on_destroy:!0,create:function(){this.get("theme")in c.recorderthemes&&i.iter(c.recorderthemes[this.get("theme")],function(a,b){this.isArgumentAttr(b)||this.set(b,a)},this),this.set("ie8",d.isInternetExplorer()&&d.internetExplorerVersion()<9),this.set("hideoverlay",!1),this.__attachRequested=!1,this.__activated=!1,this._bound=!1,this.__recording=!1,this.__error=null,this.__currentStretch=null,this.on("change:stretch",function(){this._updateStretch()},this),this.host=this.auto_destroy(new m({stateRegistry:new n(this.cls.recorderStates())})),this.host.dynamic=this,this.host.initialize(q),this._timer=this.auto_destroy(new l.Timer({context:this,fire:this._timerFire,delay:250,start:!0})),this.__cameraResponsive=!0,this.__cameraSignal=!0},state:function(){return this.host.state()},recorderAttached:function(){return!!this.recorder},videoError:function(){return this.__error},_error:function(a,b){this.__error={error_type:a,error_code:b},this.trigger("error:"+a,b),this.trigger("error",a,b)},_clearError:function(){this.__error=null},_detachRecorder:function(){this.recorder&&this.recorder.weakDestroy(),this.recorder=null,this.set("hasrecorder",!1)},_attachRecorder:function(){if(!this.recorderAttached()){if(!this.__activated)return void(this.__attachRequested=!0);this.set("hasrecorder",!0),this.snapshots=[],this.__attachRequested=!1;var a=this.element().find("[data-video='video']").get(0);this._clearError(),this.recorder=g.create({element:a,forceflash:this.get("forceflash"),noflash:this.get("noflash"),recordVideo:!0,recordAudio:!0,recordingWidth:this.get("recordingwidth"),recordingHeight:this.get("recordingheight"),flashFullSecurityDialog:!this.get("flashicognitosupport"),rtmpStreamType:this.get("rtmpstreamtype"),framerate:this.get("framerate")}),this.recorder||this._error("attach")}},_bindMedia:function(){!this._bound&&this.recorderAttached()&&this.recorder.ready.success(function(){this.recorder.on("require_display",function(){this.set("hideoverlay",!0)},this),this.recorder.bindMedia().error(function(a){this.trigger("access_forbidden",a),this.set("hideoverlay",!1),this.off("require_display",null,this),this._error("bind",a)},this).success(function(){for(this.trigger("access_granted"),this.set("hideoverlay",!1),this.off("require_display",null,this),this.recorder.enumerateDevices().success(function(a){var b=this.recorder.currentDevices();this.set("selectedcamera",b.video),this.set("selectedmicrophone",b.audio),this.set("cameras",new o(i.values(a.video))),this.set("microphones",new o(i.values(a.audio)))},this),this.recorder.testSoundLevel(!0),this.set("devicetesting",!0),this._updateStretch();this.snapshots.length>0;){var a=this.snapshots.unshift();this.recorder.removeSnapshot(a)}this._bound=!0,this.trigger("bound")},this)},this)},isFlash:function(){return this.recorder&&this.recorder.isFlash()},_initializeUploader:function(){this._dataUploader&&this._dataUploader.weakDestroy(),this._dataUploader=new e},_unbindMedia:function(){this._bound&&(this.recorder.unbindMedia(),this._bound=!1)},_uploadCovershot:function(a){this.__lastCovershotUpload=a;var b=this.recorder.createSnapshotUploader(a,this.get("snapshottype"),this.get("uploadoptions").image);b.upload(),this._dataUploader.addUploader(b)},_uploadVideoFile:function(a){var b=f.create(i.extend({source:a},this.get("uploadoptions").video));b.upload(),this._dataUploader.addUploader(b)},_prepareRecording:function(){return p.create(!0)},_startRecording:function(){return this.__recording?p.error(!0):(this.recorder.testSoundLevel(!1),this.set("devicetesting",!1),this.recorder.startRecord({rtmp:this.get("uploadoptions").rtmp,video:this.get("uploadoptions").video,audio:this.get("uploadoptions").audio}).success(function(){this.__recording=!0,this.__recording_start_time=k.now()},this))},_stopRecording:function(){return this.__recording?this.recorder.stopRecord({rtmp:this.get("uploadoptions").rtmp,video:this.get("uploadoptions").video,audio:this.get("uploadoptions").audio}).success(function(a){this.__recording=!1,a.upload(),this._dataUploader.addUploader(a)},this):p.error(!0)},_verifyRecording:function(){return p.create(!0)},_afterActivate:function(b){a._afterActivate.call(this,b),this.__activated=!0,this.__attachRequested&&this._attachRecorder()},_showBackgroundSnapshot:function(){this._hideBackgroundSnapshot(),this.__backgroundSnapshot=this.recorder.createSnapshot(this.get("snapshottype"));var a=this.activeElement().find("[data-video]");this.__backgroundSnapshotDisplay=this.recorder.createSnapshotDisplay(a.get(0),this.__backgroundSnapshot,0,0,parseInt(a.width(),10),parseInt(a.height(),10))},_hideBackgroundSnapshot:function(){this.__backgroundSnapshotDisplay&&this.recorder.removeSnapshotDisplay(this.__backgroundSnapshotDisplay),delete this.__backgroundSnapshotDisplay,this.__backgroundSnapshot&&this.recorder.removeSnapshot(this.__backgroundSnapshot),delete this.__backgroundSnapshot},object_functions:["record","rerecord","stop","play","pause"],functions:{record:function(){this.host.state().record()},record_video:function(){this.host.state().selectRecord()},upload_video:function(a){this.host.state().selectUpload(a)},select_camera:function(a){this.recorder&&(this.recorder.setCurrentDevices({video:a}),this.set("selectedcamera",a))},select_microphone:function(a){this.recorder&&(this.recorder.setCurrentDevices({audio:a}),this.set("selectedmicrophone",a)),this.set("microphonehealthy",!1)},invoke_skip:function(){this.trigger("invoke-skip")},select_image:function(a){this.trigger("select-image",a)},rerecord:function(){confirm(this.string("rerecord-confirm"))&&this.host.state().rerecord()},stop:function(){this.host.state().stop()},play:function(){this.host.state().play()},pause:function(){this.host.state().pause()},message_click:function(){this.trigger("message-click")},playing:function(){this.trigger("playing")},paused:function(){this.trigger("paused")},ended:function(){this.trigger("ended")}},destroy:function(){this._detachRecorder(),a.destroy.call(this)},deltaCoefficient:function(){return this.recorderAttached()?this.recorder.deltaCoefficient():null},blankLevel:function(){return this.recorderAttached()?this.recorder.blankLevel():null},lightLevel:function(){return this.recorderAttached()?this.recorder.lightLevel():null},soundLevel:function(){return this.recorderAttached()?this.recorder.soundLevel():null},_timerFire:function(){try{if(this.recorderAttached()&&this.get("devicetesting")){var a=this.lightLevel();this.set("camerahealthy",a>=100&&200>=a),this.set("microphonehealthy",this.get("microphonehealthy")||this.soundLevel()>=1.01)}}catch(b){}if(this.__recording&&this.__recording_start_time+500<k.now()){var c=this.snapshots.length<this.get("snapshotmax")?.25:.05;if(Math.random()<=c){var d=this.recorder.createSnapshot(this.get("snapshottype"));if(d)if(this.snapshots.length<this.get("snapshotmax"))this.snapshots.push(d);else{var e=Math.floor(Math.random()*this.get("snapshotmax"));this.recorder.removeSnapshot(this.snapshots[e]),this.snapshots[e]=d}}}try{if(this.recorderAttached()&&this._timer.fire_count()%20===0&&this._accessing_camera){var f=this.blankLevel()>=.01;f!==this.__cameraSignal&&(this.__cameraSignal=f,this.trigger(f?"camera_signal":"camera_nosignal"))}if(this.recorderAttached()&&this._timer.fire_count()%20===10&&this._accessing_camera){var g=this.recorder.deltaCoefficient(),h=null===g||g>=.5;h!==this.__cameraResponsive&&(this.__cameraResponsive=h,this.trigger(h?"camera_responsive":"camera_unresponsive"))}}catch(b){}this._updateStretch(),this._updateCSSSize()},_updateCSSSize:function(){this.set("csssize",this.element().width()>400?"normal":this.element().width()>300?"medium":"small")},videoHeight:function(){return this.recorderAttached()?this.recorder.cameraHeight():NaN},videoWidth:function(){return this.recorderAttached()?this.recorder.cameraWidth():NaN},aspectRatio:function(){return this.videoWidth()/this.videoHeight()},parentWidth:function(){return this.get("width")||this.activeElement().width()},parentHeight:function(){return this.get("height")||this.activeElement().height();
},parentAspectRatio:function(){return this.parentWidth()/this.parentHeight()},averageFrameRate:function(){return this.recorderAttached()?this.recorder.averageFrameRate():null},_updateStretch:function(){var a=null;if(this.get("stretch")){var b=this.aspectRatio();if(isFinite(b)){var c=this.parentAspectRatio();isFinite(c)?(c>b&&(a="height"),b>c&&(a="width")):c===1/0&&(a="height")}}this.__currentStretch!==a&&(this.__currentStretch&&this.activeElement().removeClass(this.get("css")+"-stretch-"+this.__currentStretch),a&&this.activeElement().addClass(this.get("css")+"-stretch-"+a)),this.__currentStretch=a}}},{recorderStates:function(){return[r]}}).register("ba-videorecorder").attachStringTable(c.strings).addStrings({"recorder-error":"An error occurred, please try again later. Click to retry.","pick-covershot":"Pick a covershot.",uploading:"Uploading","uploading-failed":"Uploading failed - click here to retry.",verifying:"Verifying","verifying-failed":"Verifying failed - click here to retry.","rerecord-confirm":"Do you really want to re-record your video?",video_file_too_large:"Your video file is too large - click here to try again with a smaller video file.",unsupported_video_type:"Please upload: %s - click here to retry."})})}.call(c),function(){var a=this.subScope();a.binding("browser","root:BetaJS.Browser"),a.binding("module","root:BetaJS.MediaComponents"),a.extend("module:Templates",function(){return{"modern-video_player_controlbar":' <div class="{{css}}-dashboard {{activitydelta > 5000 && hideoninactivity ? (css + \'-dashboard-hidden\') : \'\'}}">        <div class="{{css}}-leftbutton-container" ba-if="{{rerecordable}}" ba-click="rerecord()" title="{{string(\'rerecord-video\')}}">            <div class="{{css}}-button-inner">                <i class="{{css}}-icon-ccw"></i>            </div>        </div>  <div class="{{css}}-leftbutton-container" ba-if="{{!playing}}" ba-click="play()" title="{{string(\'play-video\')}}">   <div class="{{css}}-button-inner">    <i class="{{css}}-icon-play"></i>   </div>  </div>  <div class="{{css}}-leftbutton-container" ba-if="{{playing}}" ba-click="pause()" title="{{string(\'pause-video\')}}">    <div class="{{css}}-button-inner">    <i class="{{css}}-icon-pause"></i>   </div>  </div>  <div class="{{css}}-time-container">   <div class="{{css}}-time-value" title="{{string(\'elapsed-time\')}}">{{position_formatted}}/{{duration_formatted}}</div>  </div>  <div class="{{css}}-rightbutton-container" ba-if="{{fullscreen}}" ba-click="toggle_fullscreen()" title="{{string(\'fullscreen-video\')}}">   <div class="{{css}}-button-inner">    <i class="{{css}}-icon-resize-full"></i>   </div>  </div>  <div class="{{css}}-volumebar">   <div class="{{css}}-volumebar-inner"           onmousedown="{{startUpdateVolume(domEvent)}}"                 onmouseup="{{stopUpdateVolume(domEvent)}}"                 onmouseleave="{{stopUpdateVolume(domEvent)}}"                 onmousemove="{{progressUpdateVolume(domEvent)}}">    <div class="{{css}}-volumebar-position" ba-styles="{{{width: Math.ceil(1+Math.min(99, Math.round(volume * 100))) + \'%\'}}}" title="{{string(\'volume-button\')}}"></div>       </div>  </div>  <div class="{{css}}-rightbutton-container {{css}}-volume-button-container" ba-click="toggle_volume()" title="{{string(volume > 0 ? \'volume-mute\' : \'volume-unmute\')}}">   <div class="{{css}}-button-inner">    <i class="{{css + \'-icon-volume-\' + (volume >= 0.5 ? \'up\' : (volume > 0 ? \'down\' : \'off\')) }}"></i>   </div>  </div>  <div class="{{css}}-progressbar">   <div class="{{css}}-progressbar-inner"        onmousedown="{{startUpdatePosition(domEvent)}}"        onmouseup="{{stopUpdatePosition(domEvent)}}"        onmouseleave="{{stopUpdatePosition(domEvent)}}"        onmousemove="{{progressUpdatePosition(domEvent)}}">   <div class="{{css}}-progressbar-cache" ba-styles="{{{width: Math.round(duration ? cached / duration * 100 : 0) + \'%\'}}}"></div>   <div class="{{css}}-progressbar-position" ba-styles="{{{width: Math.round(duration ? position / duration * 100 : 0) + \'%\'}}}" title="{{string(\'video-progress\')}}"></div>  </div> </div> '}}),a.extend("module:Assets.playerthemes",["module:Templates","browser:Info"],function(a,b){var c=b.isInternetExplorer()&&b.internetExplorerVersion()<=8;return{modern:{css:"ba-videoplayer-theme-modern",tmplcontrolbar:a["modern-video_player_controlbar"],cssloader:c?"ba-videoplayer":"",cssmessage:"ba-videoplayer",cssplaybutton:c?"ba-videoplayer":""},"modern-green":{css:"ba-videoplayer-theme-modern",csstheme:"ba-videoplayer-theme-modern-green",tmplcontrolbar:a["modern-video_player_controlbar"],cssloader:c?"ba-videoplayer":"",cssmessage:"ba-videoplayer",cssplaybutton:c?"ba-videoplayer":""},"modern-blue":{css:"ba-videoplayer-theme-modern",csstheme:"ba-videoplayer-theme-modern-blue",tmplcontrolbar:a["modern-video_player_controlbar"],cssloader:c?"ba-videoplayer":"",cssmessage:"ba-videoplayer",cssplaybutton:c?"ba-videoplayer":""}}}),a.extend("module:Assets.recorderthemes",["module:Templates","browser:Info"],function(a,b){b.isInternetExplorer()&&b.internetExplorerVersion()<=8;return{modern:{css:"ba-videorecorder-theme-modern",cssmessage:"ba-videorecorder",cssloader:"ba-videorecorder",tmplchooser:a["modern-video_recorder_chooser"]},"modern-green":{css:"ba-videorecorder-theme-modern",csstheme:"ba-videorecorder-theme-modern-green",cssmessage:"ba-videorecorder",cssloader:"ba-videorecorder",tmplchooser:a["modern-video_recorder_chooser"]},"modern-blue":{css:"ba-videorecorder-theme-modern",csstheme:"ba-videorecorder-theme-modern-blue",cssmessage:"ba-videorecorder",cssloader:"ba-videorecorder",tmplchooser:a["modern-video_recorder_chooser"]}}})}.call(c),function(){var a=this.subScope();a.binding("browser","root:BetaJS.Browser"),a.binding("base","root:BetaJS"),a.binding("module","global:ZiggeoApi.V2"),a.binding("private","root:ZiggeoApi.V2"),a.binding("media","root:BetaJS.Media"),a.binding("mediacomponents","root:BetaJS.MediaComponents"),a.binding("dynamics","root:BetaJS.Dynamics"),a.binding("flash","root:BetaJS.Flash"),a.binding("jquery","root:jQuery"),a.define("module:",function(){return{guid:"6c65838a-53fd-4fd1-8d48-e571a0500135",version:"38.1469204590217"}}),a.define("private:Core",function(){return{servers:{local:{whitedomains:["*"],"server.api.server.public.domain":"localhost:91","server.api.server.public.protocol":"http","assets.api.server.public.domain":"localhost:92","assets.api.server.public.protocol":"http","assets-cdn.api.server.public.domain":"localhost:92","assets-cdn.api.server.public.protocol":"http","embed.api.server.public.domain":"localhost:93","embed.api.server.public.protocol":"http","embed-cdn.api.server.public.domain":"localhost:93","embed-cdn.api.server.public.protocol":"http","webserver.public.domain":"localhost:98","webserver.public.protocol":"http","wowza.api.record.rtmp.protocol":"rtmp","wowza.api.record.rtmp.domain":"localhost","wowza.api.record.rtmp.path":"record/_definst_"},production:{whitedomains:["*.ziggeo.com","ziggeo.com","localhost"],"server.api.server.public.domain":"srvapi.ziggeo.com","server.api.server.public.protocol":"https","assets.api.server.public.domain":"assets.ziggeo.com","assets.api.server.public.protocol":"https","assets-cdn.api.server.public.domain":"assets-cdn.ziggeo.com","assets-cdn.api.server.public.protocol":"https","embed.api.server.public.domain":"embed.ziggeo.com","embed.api.server.public.protocol":"https","embed-cdn.api.server.public.domain":"embed-cdn.ziggeo.com","embed-cdn.api.server.public.protocol":"https","webserver.public.domain":"ziggeo.com","webserver.public.protocol":"https","wowza.api.record.rtmp.protocol":"rtmps","wowza.api.record.rtmp.domain":"wowza.ziggeo.com","wowza.api.record.rtmp.path":"record/_definst_"},development:{whitedomains:["*.ziggeo.com",null,"localhost"],"server.api.server.public.domain":"srvapi-dev.ziggeo.com","server.api.server.public.protocol":"https","assets.api.server.public.domain":"assets-dev.ziggeo.com","assets.api.server.public.protocol":"https","assets-cdn.api.server.public.domain":"assets-cdn.ziggeo.com","assets-cdn.api.server.public.protocol":"https","embed.api.server.public.domain":"embed-dev.ziggeo.com","embed.api.server.public.protocol":"https","embed-cdn.api.server.public.domain":"embed-cdn.ziggeo.com","embed-cdn.api.server.public.protocol":"https","webserver.public.domain":"www-dev.ziggeo.com","webserver.public.protocol":"https","wowza.api.record.rtmp.protocol":"rtmps","wowza.api.record.rtmp.domain":"wowza-dev.ziggeo.com","wowza.api.record.rtmp.path":"record/_definst_"},devsep:{whitedomains:["*.ziggeo.com",null,"localhost"],"server.api.server.public.domain":"srvapi-dev-sep.ziggeo.com","server.api.server.public.protocol":"https","assets.api.server.public.domain":"assets-dev-sep.ziggeo.com","assets.api.server.public.protocol":"https","assets-cdn.api.server.public.domain":"assets-cdn.ziggeo.com","assets-cdn.api.server.public.protocol":"https","embed.api.server.public.domain":"embed-dev-sep.ziggeo.com","embed.api.server.public.protocol":"https","embed-cdn.api.server.public.domain":"embed-cdn.ziggeo.com","embed-cdn.api.server.public.protocol":"https","webserver.public.domain":"www-dev-sep.ziggeo.com","webserver.public.protocol":"https","wowza.api.record.rtmp.protocol":"rtmps","wowza.api.record.rtmp.domain":"wowza-dev-sep.ziggeo.com","wowza.api.record.rtmp.path":"record/_definst_"}},models:{session_cookie_prefix:"i07af2jp98rvoctt26y5egy3"}}}),a.define("private:Application.Connect",["base:Class","browser:JQueryAjax","browser:Info","base:Promise","base:Async"],function(a,b,c,d,e,f){return a.extend({scoped:f},function(a){return{constructor:function(c){a.constructor.call(this),this.application=c,this.ajax=new b},destroy:function(){this.ajax.destroy(),a.destroy.call(this)},rawRequest:function(a,b){b=b||{};var f=this.ajax.asyncCall({method:b.method||"GET",data:b.data||{},uri:a,decodeType:c.isInternetExplorer()&&c.internetExplorerVersion()<=9?"json":null,dataType:"json"});return b.resilience&&(f=f.mapError(function(){var c=d.create();return e.eventually(function(){b.resilience--,this.rawRequest(a,b).forwardCallback(c)},this,1e3),c},this)),f},request:function(a,b){return this.rawRequest(this.application.urls.apiResourceUrl(a,b),b)}}})}),a.define("private:Application.Data",["base:Properties.Properties","browser:Cookies","private:Core","browser:Upload.FileUploader"],function(a,b,c,d,e){return a.extend({scoped:e},function(a){return{constructor:function(d,e){if(a.constructor.call(this),e=e||{},this.set("token",e.token),!this.get("token"))throw"You need to specify an application token when creating an application";this.set("cdn","boolean"==typeof e.cdn?e.cdn:!0),this.set("resumable","boolean"==typeof e.resumable?e.resumable:!0),this.set("auth","boolean"==typeof e.auth?e.auth:!1),this.compute("cookie_key",function(){return c.models.session_cookie_prefix+this.get("token")},["token"]),this.set("cookie_value",this.get("auth")?b.get(this.get("cookie_key")):""),this.on("change:cookie_value",function(a){this.get("auth")&&b.set(this.get("cookie_key"),a)},this),this.set("testing_application",!1)},getUploaderConfig:function(a,b){var c={url:a,serverSupportChunked:this.get("resumable"),serverSupportPostMessage:!0,resumable:{withCredentials:!1,assembleUrl:a,assembleResilience:50,assembleResilienceTimeout:1e3,acceptedAssembleError:412}};return b&&(c.source=b),c},getUploader:function(a,b){return d.create(this.getUploaderConfig(a,b))}}})}),a.define("module:Device",["base:Events.Events","base:Functions","base:Async","media:Recorder.WebRTCVideoRecorderWrapper","media:Recorder.FlashVideoRecorderWrapper","media:WebRTC.Support","media:Flash.Support"],function(a,b,c,d,e,f,g){var h=function(a,b){try{return a()}catch(c){return b||!1}},i=new a,j={on:b.as_method(i.on,i),webrtc:h(function(){return d.supported({})}),flash:h(function(){return e.supported({})}),cameras:null,microphones:null,camera_count:null,microphone_count:null},k=function(a){j.cameras=a.video,j.microphones=a.audio,j.camera_count=a.videoCount,j.microphone_count=a.audioCount,i.persistentTrigger("device_info",j.cameras,j.microphones,j.camera_count,j.microphone_count),i.persistentTrigger(j.camera_count>0?"has_camera":"no_camera"),i.persistentTrigger(j.microphone_count>0?"has_microphone":"no_microphone")},l=function(){i.persistentTrigger("device_error")};return c.eventually(function(){try{f.enumerateMediaSources().success(function(a){k(a)}).error(function(){try{g.enumerateMediaSources().success(function(a){k(a)}).error(function(){l()})}catch(a){l()}})}catch(a){try{g.enumerateMediaSources().success(function(a){k(a)}).error(function(){l()})}catch(a){l()}}}),j}),a.define("private:Environment",["private:Core","browser:Info","browser:Loader","base:Objs","base:Types","base:Net.Uri"],function(b,c,d,e,f,g){var h=!1;try{h=-1!=location.protocol.indexOf("https")||0===location.protocol.indexOf("file")||c.isCordova()}catch(i){}var j=!!a.getGlobal("ZiggeoLocal"),k=!j,l=j||!!a.getGlobal("ZiggeoDev")||!!a.getGlobal("ZiggeoDevSep"),m=!!a.getGlobal("ZiggeoDevSep"),n=!l,o=j?"local":n?"production":m?"devsep":"development",p=e.clone(b.servers[o],1),q={};if(n&&(q.cdn=p["assets-cdn.api.server.public.domain"]),q.normal=p["assets.api.server.public.domain"],j)try{window.location.hostname&&/^\d+\.\d+\.\d+\.\d+$/.test(window.location.hostname)&&(p=e.map(p,function(a){return f.is_string(a)?a.replace("localhost",window.location.hostname):a}),q.local=p["assets.api.server.public.domain"])}catch(i){}var r=p["assets.api.server.public.domain"],s=!1,t="/v1-latest/",u=h?"https":"http",v=null;n&&(r=p["assets-cdn.api.server.public.domain"],s=!0);for(var w in q)try{var x=q[w],y=d.findScript(x);if(y&&-1!==y.src.indexOf("ziggeo.js")){s="cdn"===w;var z=g.parse(y.src);u=h?"https":z.protocol,r=z.host,z.port&&(r+=":"+z.port),t=z.directory;break}}catch(i){}v||(v=u+"://"+r+t);var A={isLocal:j,isServer:k,isDevelopment:l,isDevSep:m,isProduction:n,environment:o,serverEnvironments:b.servers,servers:p,assetsDomain:r,assetsCdn:s,assetsPath:t,assetsBase:v,sslRequired:h};return A}),a.define("private:Application.Urls",["base:Class","base:Objs","base:Sort","base:Comparators","base:Net.Uri","browser:Info","media:Flash.Support","private:Environment"],function(a,b,c,d,e,f,g,h,i){var j=h.servers;return a.extend({scoped:i},function(a){return{constructor:function(b){a.constructor.call(this),this.application=b,this.__rtmpConnectivityResults={},this.__testRtmpConnectivity()},__testRtmpConnectivity:function(){this.rtmpRecordingUrls().forEach(function(a){this.__rtmpConnectivityResults[a]=0,f.flash().installed()&&g.flashCanConnect(a,1e4).success(function(){this.__rtmpConnectivityResults[a]=1},this).error(function(){this.__rtmpConnectivityResults[a]=-1},this)},this)},httpApiBaseUrl:function(){return(h.sslRequired?"https":"http")+"://"+j["embed.api.server.public.domain"]},httpStreamingBaseUrl:function(){return(h.sslRequired?"https":"http")+"://"+j[this.application.data.get("cdn")?"embed-cdn.api.server.public.domain":"embed.api.server.public.domain"]},rtmpRecordingUrls:function(){var a=[];return a.push("rtmp://"+j["wowza.api.record.rtmp.domain"]+"/"+j["wowza.api.record.rtmp.path"]),h.isLocal||a.push("rtmp://"+j["wowza.api.record.rtmp.domain"]+":80/"+j["wowza.api.record.rtmp.path"]),a.filter(function(a){return this.__rtmpConnectivityResults[a]>0},this).concat(a.filter(function(a){return!this.__rtmpConnectivityResults[a]},this)).concat(a.filter(function(a){return this.__rtmpConnectivityResults[a]<0},this))},rtmpRecordingUrl:function(){var a=this.rtmpRecordingUrls();return a[0]},httpApiAppUrl:function(){return this.httpApiBaseUrl()+"/v1/applications/"+this.application.data.get("token")},apiResourceUrl:function(a,c){return this.resourceUrl(this.httpApiAppUrl(),a,b.extend({auth:!0},c))},httpStreamingAppUrl:function(){return this.httpStreamingBaseUrl()+"/v1/applications/"+this.application.data.get("token")},streamingResourceUrl:function(a,b){return this.resourceUrl(this.httpStreamingAppUrl(),a,b)},urlParams:function(a){a=a||{};var e=b.extend({},b.filter(a.params,function(a,b){return null!==a&&""!==a}));return a.auth&&this.application.data.get("auth")&&(e=b.extend(e,b.filter(a.auth,function(a,b){return null!==a&&""!==a})),e[this.application.data.get("cookie_key")]=this.application.data.get("cookie_value")),c.sort_object(e,d.byValue)},resourceUrl:function(a,b,c){return e.appendUriParams(a+(b&&0!==b.indexOf("/")?"/":"")+b,this.urlParams(c))}}})}),a.define("module:Config",["private:Environment","base:Properties.Properties","base:Functions","flash:"],function(a,b,c,d){var e=new b,f=function(a,b,c){c(b),e.set(a,b),e.on("change:key",function(a){c(a)})};return f("flash",a.assetsBase+"ziggeo.swf",function(a){d.options=d.options||{},d.options.flashFile=a}),{set:c.as_method(e.set,e),get:c.as_method(e.get,e)}}),a.define("module:Locale",["base:Classes.LocaleAggregator","base:Classes.LocaleTable","browser:Info","mediacomponents:Assets"],function(a,b,c,d){var e=new a,f=new b;return e.register(f),e.register(d.strings),e.setWeakLocale(c.language()),{setLocale:function(a){e.setLocale(a)},mainLocale:f}}),a.define("module:Ads",["mediacomponents:Ads.AdSenseVideoAdProvider"],function(a){return{AdSenseVideoAdProvider:a}}),a.define("private:Dynamics",["dynamics:DomObserver","dynamics:Registries","base:Async","jquery:"],function(a,b,c,d){return b.prefixes.ziggeo=!0,d(document).ready(function(){c.eventually(function(){new a({allowed_dynamics:["ziggeoplayer","ziggeorecorder"]})})}),{}}),a.define("module:PlayerStates.PosterError",["mediacomponents:VideoPlayer.Dynamics.PlayerStates.State"],function(a,b){return a.extend({scoped:b},{dynamics:["loader"],_fail:function(){return 4===this.get("video_data").state?void this.next("VideoProcessing"):(this.dyn.set("loader_active",!1),this.dyn.set("message_active",!0),this.dyn.set("message",this.dyn.string("video-access-error")),void this.listenOn(this.dyn,"message:click",function(){this.next(this.dyn.get("states").poster_error.click_play?"LoadVideo":"LoadPlayer")},this))},_started:function(){this.dyn.get("video_status")===!0&&this._fail(),this.listenOn(this.dyn,"change:video_status",function(){this.dyn.get("video_status")===!0&&this._fail()})}})}),a.define("module:PlayerStates.VideoProcessing",["mediacomponents:VideoPlayer.Dynamics.PlayerStates.State"],function(a,b){return a.extend({scoped:b},function(a){return{dynamics:["loader","message"],_started:function(){this.dyn.set("message",this.dyn.string("video-processing")),this.dyn.application.videos.watch(this.dyn.get("video"),{auth:this.dyn.get("auth"),maxage:5e3},this.dyn.__videoUpdate,this.dyn)},_end:function(){this.dyn.application.videos.unwatch(this.dyn.get("video"),this),a._end.call(this)}}})}),a.extend("module:Locale",["module:Locale"],function(a){var b={"language:de":{"application.error_503":"Das System wird gerade gewartet. Die Videofunktion ist in K&#xFC;rze wieder aktiv.","application.error_404":"Der API Schl&#xFC;ssel wurde nicht gefunden. Bitte &#xFC;berpr&#xFC;fen.","application.error_401":"Der Zugriff auf die Applikation wurde verweigert.","application.error_412":"Ihr Account muss best&#xE4;tigt bzw. f&#xFC;r weitere Videos freigeschaltet werden.","application.error_unknown":"Ein unbekannter Fehler ist aufgetreten. Unser Team wurde dar&#xFC;ber informiert und wird das Problem l&#xF6;sen.","ziggeoplayer.video-not-found":"Das angegebene Video konnte nicht gefunden werden.","ziggeoplayer.video-access-forbidden":"Der Zugriff auf das angegebene Video wurde verweigert.","ziggeoplayer.video-unknown-error":"Auf das angegebene Video kann zur Zeit nicht zugegriffen werden. Bitte zu einem sp&#xE4;teren Zeitpunkt erneut versuchen.","ziggeoplayer.video-rejected":"Das Video wurde nicht freigegeben.","ziggeoplayer.video-processing":"Das Video wird gerade verarbeitet, bitte kurz warten.","ziggeoplayer.video-access-error":"Das Video wird gerade moderiert, bitte etwas sp&#xE4;ter erneut versuchen."}};for(var c in b)a.mainLocale.register(b[c],[c]);return{}}),a.define("private:Application.VideosApiMixin",function(){return{index:function(a,b,c){return this.application.connect.request("/videos/",{method:"GET",auth:b,resilience:c,data:a})},destroy:function(a,b,c){return this.application.connect.request("/videos/"+a,{method:"DELETE",auth:b,resilience:c})},create:function(a,b,c){return this.application.connect.request("/videos",{method:"POST",auth:b,resilience:c,data:a})},update:function(a,b,c,d){return this.application.connect.request("/videos/"+a,{method:"POST",auth:c,resilience:d,data:b})},_playback:function(a,b,c,d){return this.application.connect.request("/videos/"+a+"/playback",{method:"POST",auth:c,resilience:d,data:b})},get:function(a,b,c){return this.application.connect.request("/videos/"+a,{method:"GET",auth:b,resilience:c})}}}),a.define("private:Application.Videos",["base:Class","base:Promise","base:Objs","base:Time","base:Async","base:Net.HttpHeader","base:Ids","base:Comparators","private:Application.VideosApiMixin"],function(a,b,c,d,e,f,g,h,i,j){return a.extend({scoped:j},[i,function(a){return{constructor:function(b){a.constructor.call(this),this.application=b,this.__cache={}},imageUrl:function(a,b){b=b||{};var d="videos/"+a+"/image";return this.application.urls.streamingResourceUrl(d,{auth:b.auth,params:c.extend({refresh:this.refreshToken(a)},b.params)})},videoUrl:function(a,b){b=b||{};var d="videos/"+a+"/"+(b.download?"download_video.mp4":"video.mp4");return this.application.urls.streamingResourceUrl(d,{auth:b.auth,params:c.extend({refresh:this.refreshToken(a)},b.params)})},refreshToken:function(a){try{var b=this.cache(a,{weak:!0}).value();if(!b||b.submission_date===b.resubmission_date)return null;var c=d.now()/1e3-b.resubmission_date;return c>86400?null:b.resubmission_date}catch(e){return null}},__cacheGet:function(a){return this.__cache[a]||(this.__cache[a]={ready:!1,data:null,error:null,last_update:null,auth:null,next_update:null,next_update_timer:null,updating:!1,promises:[],watchers:{}}),this.__cache[a]},__cacheUpdate:function(a,b){var f=this.__cacheGet(a);if(!(f.updating||f.next_update&&f.next_update<=b)){f.next_update&&(e.clearEventually(f.next_update_timer),f.next_update=null);var g=d.now();if(b>g)return f.next_update=b,void(f.next_update_timer=e.eventually(function(){this.__cacheUpdate(a)},this,b-g));f.updating=!0,this.get(a,f.auth).callback(function(b,g){f.ready=!0,f.updating=!1;var i=d.now(),j=f.last_update?i-f.last_update:null;f.last_update=i,f.next_update=null;var k=f.data,l=b;f.data=g,f.error=b,e.clearEventually(f.next_update_timer),c.iter(f.promises,function(a){a.asyncCallback(b,g)},this),(b&&!b.equals(l)||!h.deepEqual(g,k,10))&&c.iter(f.watchers,function(a){a.callback.call(a.context,b,g)},this),null===j?c.iter(f.watchers,function(a){a.weak||(j=null===j?a.initialage:Math.min(a.initialage,j))},this):j*=2,null!==j&&(c.iter(f.watchers,function(a){!a.weak&&a.maxage&&(j=Math.min(j,a.maxage))},this),this.__cacheUpdate(a,i+j))},this)}},cacheInvalidate:function(a){this.__cacheGet(a).ready=!1},cache:function(a,d){var e=this.__cacheGet(a);if(d=c.extend({auth:null,weak:!1,force:!1,age:null},d),d.weak&&!e.ready)return b.error(!0);if(e.ready&&!d.force&&(!d.age||now-e.last_update<d.age))return e.data?b.value(e.data):b.error(e.error);d.auth&&(e.auth=d.auth);var f=b.create();return e.promises.push(f),this.__cacheUpdate(a),f},watch:function(a,b,e,f){var h=this.__cacheGet(a);b=c.extend({auth:null,weak:!1,maxage:null,initialage:1e3},b),b.auth&&(h.auth=b.auth),h.watchers[g.objectId(f)]={context:f,callback:e,weak:b.weak,maxage:b.maxage,age:b.initialage},b.weak||this.__cacheUpdate(a,b.initialage+d.now())},unwatch:function(a,b){var c=this.__cacheGet(a);delete c.watchers[g.objectId(b)]},createByUpload:function(a){return this.create(c.extend(c.clone(a.data,1),{create_stream:!0}),a.auth).mapSuccess(function(c){var d=b.create(),e=this.application.streams.dataUploader(c.video.token,c.stream.token,{auth:a.auth,video_data:a.video_data,audio_data:a.audio_data,image_data:a.image_data});return a.progress&&e.on("progress",a.progress,a.context),e.on("error",function(a){d.asyncError(a)},this),e.on("success",function(){this.application.streams._recorder_submit(c.video.token,c.stream.token,null,a.auth,50).forwardCallback(d)},this),e.upload(),d},this)}}}])}),a.define("private:Application.StreamsApiMixin",function(){return{destroy:function(a,b,c,d){return this.application.connect.request("/videos/"+a+"/streams/"+b,{method:"DELETE",auth:c,resilience:d})},create:function(a,b,c,d){return this.application.connect.request("/videos/"+a+"/streams",{method:"POST",auth:c,resilience:d,data:b})},accept:function(a,b,c,d){return this.application.connect.request("/videos/"+a+"/streams/"+b+"/accept",{method:"POST",auth:c,resilience:d})},_image_attach:function(a,b,c,d,e){return this.application.connect.request("/videos/"+a+"/streams/"+b+"/imageattach",{method:"POST",auth:d,resilience:e,data:c})},_audio_attach:function(a,b,c,d,e){return this.application.connect.request("/videos/"+a+"/streams/"+b+"/audioattach",{method:"POST",auth:d,resilience:e,data:c})},_recorder_submit:function(a,b,c,d,e){return this.application.connect.request("/videos/"+a+"/streams/"+b+"/recordersubmit",{method:"POST",auth:d,resilience:e,data:c})},_uploader_state:function(a,b,c,d){return this.application.connect.request("/videos/"+a+"/streams/"+b+"/uploaderstate",{method:"GET",auth:c,resilience:d})}}}),a.define("private:Application.Streams",["base:Class","base:Objs","private:Application.StreamsApiMixin","browser:Upload.MultiUploader"],function(a,b,c,d,e){return a.extend({scoped:e},[c,function(a){return{constructor:function(b){a.constructor.call(this),this.application=b},imageUrl:function(a,b,c){c=c||{};var d="videos/"+a+"/streams/"+b+"/image";return this.application.urls.streamingResourceUrl(d,{auth:c.auth,params:c.params})},videoUrl:function(a,b,c){c=c||{};var d="videos/"+a+"/streams/"+b+"/"+(c.download?"download_video.mp4":"video.mp4");return this.application.urls.streamingResourceUrl(d,{auth:c.auth,params:c.params})},videoAttachUrl:function(a,b,c){return this.application.urls.apiResourceUrl("/videos/"+a+"/streams/"+b+"/videoattach",{auth:c})},videoAttachUploaderConfig:function(a,b,c,d){return this.application.data.getUploaderConfig(this.videoAttachUrl(a,b,c),d)},videoAttachUploader:function(a,b,c,d){return this.application.data.getUploader(this.videoAttachUrl(a,b,c),d)},imageAttachUrl:function(a,b,c){return this.application.urls.apiResourceUrl("/videos/"+a+"/streams/"+b+"/imageattach",{auth:c})},imageAttachUploaderConfig:function(a,b,c,d){return this.application.data.getUploaderConfig(this.imageAttachUrl(a,b,c),d)},imageAttachUploader:function(a,b,c,d){return this.application.data.getUploader(this.imageAttachUrl(a,b,c),d)},audioAttachUrl:function(a,b,c){return this.application.urls.apiResourceUrl("/videos/"+a+"/streams/"+b+"/audioattach",{auth:c})},audioAttachUploaderConfig:function(a,b,c,d){return this.application.data.getUploaderConfig(this.audioAttachUrl(a,b,c),d)},audioAttachUploader:function(a,b,c,d){return this.application.data.getUploader(this.audioAttachUrl(a,b,c),d)},rtmpStreamName:function(a,b,c){return this.application.urls.resourceUrl("applications/"+this.application.data.get("token"),"/videos/"+a+"/streams/"+b+"/video.mp4",{auth:c})},dataUploader:function(a,b,c){var e=new d;return c.video_data&&e.addUploader(this.videoAttachUploader(a,b,c.auth,c.video_data)),c.audio_data&&e.addUploader(this.audioAttachUploader(a,b,c.auth,c.audio_data)),c.image_data&&e.addUploader(this.imageAttachUploader(a,b,c.auth,c.image_data)),e}}}])}),a.define("module:Application",["base:Class","base:Events.EventsMixin","base:Async","module:Locale","private:Application.Data","private:Application.Urls","private:Application.Connect","private:Application.Videos","private:Application.Streams"],function(a,b,c,d,e,f,g,h,i,j){return d.mainLocale.register({error_503:"We are maintaining our service. Videos will be back soon.",error_404:"We cannot recognize your api key. Please make sure to specify it in your website's header.",error_401:"You are not allowed to access the application from this site.",error_412:"You need to confirm / upgrade your account.",error_unknown:"An unknown error occured. Our team has been notified and will resolve the issue."},"application"),a.extend({scoped:j},[b,function(a){return{constructor:function(b){a.constructor.call(this),this.data=this.auto_destroy(new e(this,b)),this.urls=this.auto_destroy(new f(this)),this.connect=this.auto_destroy(new g(this)),this.videos=this.auto_destroy(new h(this)),this.streams=this.auto_destroy(new i(this)),this.cls.register(this),this.__init()},destroy:function(){this.cls.unregister(this),a.destroy.call(this)},__init:function(){this.connect.request("session",{method:"POST",params:{noauth:!this.data.get("auth")}}).success(function(a){this.data.set("cookie_changed",a.token!==this.data.get("cookie_value")),this.data.set("cookie_value",a.token),this.data.set("testing_application",a.testing_application),this.data.set("ready",!0),c.eventually(function(){this.persistentTrigger("ready")},this)},this).error(function(a){this.data.set("error",a.status_code());var b=d.mainLocale.get("error_"+a.status_code(),"application");this.data.set("error_message",b||d.mainLocale.get("error_unknown","application")),this.persistentTrigger("error",a.status_code(),this.data.get("error_message"))},this)}}}],{__default:null,__instances:{},setDefault:function(a){this.__default=a},getDefault:function(){return this.__default||ZiggeoApi.v2app(),this.__default},getByToken:function(a){return this.__instances[a]},register:function(a){var b=a.data.get("token");if(b in this.__instances)throw"Application Instance already existing for this application token.";this.__instances[b]=a,this.__default||this.setDefault(a)},unregister:function(a){var b=a.data.get("token");this.__instances[b]===a&&delete this.__instances[b],this.getDefault()===a&&this.setDefault(null)}})}),a.define("module:Player",["mediacomponents:VideoPlayer.Dynamics.Player","module:Application","base:Types","module:PlayerStates","base:Net.HttpHeader","module:Locale","base:Objs"],function(a,b,c,d,e,f,g,h){return a.extend({scoped:h},function(a){return{attrs:{"stream-width":null,"stream-height":null,"effect-profile":null,"client-auth":null,"server-auth":null,"intermediate-token":null,video:null,stream:null,application:null},create:function(){this.set("ready",!1),this.set("force_refresh",null);var d=this.get("playlist");if(this.set("playlist",null),a.create.call(this),this.get("application")&&(this.application=c.is_string(this.get("application"))?b.getByToken(this.get("application")):this.get("application")),this.application=this.application||b.getDefault(),this.set("auth",{client_auth:this.get("client-auth"),server_auth:this.get("server-auth"),intermediate_token:this.get("intermediate-token")}),this.set("application_status",null),this.set("video_status",null),d){this.set("playlist",d.map(function(a){return this.__sourceByVideo(a)},this));var e=this.get("playlist")[0];this.set("poster",e.poster),this.set("source",e.source)}this.application.on("ready",function(){this.set("application_status",!0),this.get("playlist")?this.set("ready",!0):(this.get("source")||(this.get("stream")||this.set("refresh_token",this.application.videos.refreshToken(this.get("video"))),this.__setSources(),this.application.videos.cache(this.get("video"),{auth:this.get("auth")}).callback(this.__videoUpdate,this)),this.set("ready",!0))},this).on("error",function(a,b){this.set("application_status",!1),this.state().next("FatalError",{message:b})},this)},__sourceByVideo:function(a,b){var c=b?this.application.streams:this.application.videos,d=[a];return b&&d.push(b),d.push({auth:this.get("auth"),params:{stream_width:this.get("stream-width"),stream_height:this.get("stream-height"),effect_profile:this.get("effect-profile"),force_refresh:this.get("force_refresh")}}),{poster:c.imageUrl.apply(c,d),source:c.videoUrl.apply(c,d)}},__setSources:function(){this.setAll(this.__sourceByVideo(this.get("video"),this.get("stream")));
},__videoUpdate:function(a,b){if(!this.destroyed())if(a)this.set("video_status",!1),a.status_code()===e.HTTP_STATUS_NOT_FOUND?this.state().next("FatalError",{message:this.string("video-not-found")}):a.status_code()===e.HTTP_STATUS_FORBIDDEN?this.state().next("FatalError",{message:this.string("video-access-forbidden")}):this.state().next("FatalError",{message:this.string("video-unknown-error")});else{if(this.set("video_data",b),b.approved===!1)return void this.state().next("FatalError",{message:b.moderation_reason||this.string("video-rejected")});if(b.state<4)return void this.state().next("FatalError",{message:this.string("video-unknown-error")});if(this.set("video_status",!0),4===b.state)return void("VideoProcessing"!==this.state().state_name()&&this.state().next("VideoProcessing"));if(this.get("effect-profile")){var c=!1;if(g.iter(b.streams,function(a){a.effect_profile===this.get("effect-profile")&&a.state>4&&(c=!0)},this),!c)return void("VideoProcessing"!==this.state().state_name()&&this.state().next("VideoProcessing"));if("VideoProcessing"===this.state().state_name())return this.set("force_refresh",!0),this.__setSources(),void this.state().next("LoadPlayer")}if("VideoProcessing"===this.state().state_name())return void this.state().next("LoadPlayer");this.get("stream")||this.get("refresh_token")||!this.application.videos.refreshToken(this.get("video"))||(this.set("refresh_token",this.application.videos.refreshToken(this.get("video"))),this.__setSources(),this.state().next("LoadPlayer"))}}}},function(a){return{playerStates:function(){return a.playerStates.call(this).concat([d])}}}).register("ba-ziggeoplayer").register("ziggeoplayer").attachStringTable(f.mainLocale).addStrings({"video-not-found":"We could not find the specified video file.","video-access-forbidden":"You are not permitted to access this video file.","video-unknown-error":"We cannot access this video at the moment. Please try again later.","video-rejected":"The video has been rejected.","video-processing":"The video is processing - stay tuned.","video-access-error":"The video is currently under moderation. You may click to retry."})}),a.define("module:Recorder",["mediacomponents:VideoRecorder.Dynamics.Recorder","module:Application","private:Environment","base:Types","module:Locale","base:Objs","base:Promise"],function(a,b,c,d,e,f,g,h){return a.extend({scoped:h},function(a){return{template:a.template.replace('"overlay">','"overlay"><a class="ziggeo-v2-testing" ba-if="{{testing}}" href="https://ziggeo.com/pricing" target="_blank"></a>'),attrs:{dynvideoplayer:"ziggeoplayer","effect-profile":null,"video-profile":null,"meta-profile":null,"client-auth":null,"server-auth":null,"intermediate-token":null,application:null,video:null,description:null,title:null,tags:null,"custom-data":null,key:null,"auto-crop":null,"auto-pad":null,"expiration-days":null,"force-overwrite":null,"enforce-duration":null,"recover-streams":null},types:{tags:"array","custom-data":"object",auto_crop:"bool",auto_pad:"bool",expiration_days:"int",force_overwrite:"bool",enforce_duration:"bool",recover_streams:"bool"},create:function(){this.set("ready",!1),this.set("rtmpstreamtype",c.isLocal?"flv":"mp4"),a.create.call(this),this.get("application")&&(this.application=d.is_string(this.get("application"))?b.getByToken(this.get("application")):this.get("application")),this.application=this.application||b.getDefault(),this.set("auth",{client_auth:this.get("client-auth"),server_auth:this.get("server-auth"),intermediate_token:this.get("intermediate-token")}),this.set("application_status",null),this.application.on("ready",function(){this.set("application_status",!0),this.set("ready",!0),this.set("testing",this.application.data.get("testing_application"))},this).on("error",function(a,b){this.set("application_status",!1),this.state().next("FatalError",{message:b})},this),this.set("playerattrs",{application:this.get("application"),"client-auth":this.get("client-auth"),"server-auth":this.get("server-auth"),"intermediate-token":this.get("intermediate-token"),video:this.get("video")})},_updateUrls:function(){this.set("playerattrs.video",this.get("video")),this.set("uploadoptions",{rtmp:{serverUrl:this.application.urls.rtmpRecordingUrl(),streamName:this.application.streams.rtmpStreamName(this.get("video"),this.get("stream"),this.get("auth"))},image:this.application.streams.imageAttachUploaderConfig(this.get("video"),this.get("stream"),this.get("auth")),video:this.application.streams.videoAttachUploaderConfig(this.get("video"),this.get("stream"),this.get("auth")),audio:this.application.streams.audioAttachUploaderConfig(this.get("video"),this.get("stream"),this.get("auth"))})},__createParams:function(){return{description:this.get("description"),title:this.get("title"),tags:this.get("tags")?this.get("tags").join(","):void 0,data:this.get("custom-data")?JSON.stringify(this.get("custom-data")):void 0,key:this.get("key"),auto_crop:this.get("auto-crop"),auto_pad:this.get("auto-pad"),expiration_days:this.get("expiration-days"),effect_profile:this.get("effect-profile")?this.get("effect-profile").join(","):void 0,force_overwrite:this.get("force-overwrite"),video_profile:this.get("video-profile"),meta_profile:this.get("meta-profile"),enforce_duration:this.get("enforce-duration"),recover_streams:this.get("recover-streams"),max_duration:this.get("timelimit")}},__recordingTypeParams:function(){return this.isFlash()?{flash_recording:!0}:this.recorder?{webrtc_recording:!0,create_stream:!0}:{create_stream:!0}},_prepareRecording:function(){return this.get("video")?this.application.streams.create(this.get("video"),this.__recordingTypeParams(),this.get("auth")).mapSuccess(function(a){this.set("stream",a.token),this._updateUrls()},this):this.application.videos.create(f.extend(this.__createParams(),this.__recordingTypeParams()),this.get("auth")).mapSuccess(function(a){this.set("video",a.video.token),this.set("stream",a.stream.token),this._updateUrls()},this)},_verifyRecording:function(){return this.application.streams._recorder_submit(this.get("video"),this.get("stream"),{},this.get("auth"),50).success(function(){this.application.videos.cacheInvalidate(this.get("video"))},this)}}},function(a){return{}}).register("ba-ziggeorecorder").register("ziggeorecorder").attachStringTable(e.mainLocale).addStrings({})})}.call(c),function(){var a=this.subScope();a.binding("module","global:ZiggeoApi"),a.binding("v2public","module:V2"),a.binding("v2private","root:ZiggeoApi.V2");var b=window.jQuery;try{window.jQuery=void 0,delete window.jQuery}catch(c){}a.define("global:BetaJS",["root:BetaJS","root:jQuery"],function(a,b){return a.$=b,a.Templates=a.Templates||{},window.jQuery=b,a}),BetaJS.$="jQuery"in window?window.jQuery:null,BetaJS.Classes.ModuleMixin={_notifications:{construct:function(){this.__modules={}},destroy:function(){BetaJS.Objs.iter(this.__modules,this.remove_module,this)}},add_module:function(a){a.cid()in this.__modules||(this.__modules[a.cid()]=a,a.register(this),this._notify("add_module",a))},remove_module:function(a){a.cid()in this.__modules&&(delete this.__modules[a.cid()],a.unregister(this),this._notify("remove_module",a))}},BetaJS.Classes.Module=BetaJS.Class.extend("BetaJS.Classes.Module",function(a){return{constructor:function(b){a.constructor.call(this),this._objects={},this.__auto_destroy="auto_destroy"in b?b.auto_destroy:!0},destroy:function(){BetaJS.Objs.iter(this._objects,this.unregister,this),a.destroy.call(this)},register:function(a){var b=BetaJS.Ids.objectId(a);if(!(b in this._objects)){var c={};this._objects[b]={object:a,data:c},a.add_module(this),this._register(a,c)}},_register:function(a){},unregister:function(a){var b=BetaJS.Ids.objectId(a);if(b in this._objects){var c=this._objects[b].data;this._unregister(a,c),delete this._objects[b],a.remove_module(this),"off"in a&&a.off(null,null,this),this.__auto_destroy&&BetaJS.Types.is_empty(this._objects)&&this.destroy()}},_unregister:function(a){},_data:function(a){return this._objects[BetaJS.Ids.objectId(a)].data}}},{__instance:null,singleton:function(){return this.__instance||(this.__instance=new this({auto_destroy:!1})),this.__instance}}),BetaJS.Locales={__data:{},language:null,get:function(a){return this.language&&this.language+"."+a in this.__data?this.__data[this.language+"."+a]:a in this.__data?this.__data[a]:a},register:function(a,b){b=b?b+".":"";for(var c in a)this.__data[b+c]=a[c]},view:function(a){return{context:this,prefix:a,get:function(a){return this.context.get(this.prefix+"."+a)},view:function(a){return this.context.view(this.prefix+"."+a)},register:function(a,b){this.context.register(a,this.prefix+(b?"."+b:""))}}}},BetaJS.Exceptions.Exception.extend("BetaJS.Views.ViewException"),BetaJS.Views.View=BetaJS.Class.extend("BetaJS.Views.View",[BetaJS.Events.EventsMixin,BetaJS.Events.ListenMixin,BetaJS.Properties.PropertiesMixin,BetaJS.Classes.ModuleMixin,{$el:null,_templates:function(){return{}},_dynamics:function(){return{}},_events:function(){return[]},_global_events:function(){return[]},_css:function(){return{}},css:function(a){if(this.__css[a])return this.__css[a];var b=null;return this.__parent&&(b=this.__parent.css(a),b&&b!=a)?b:(b=this._css(),b[a]?b[a]:a)},_render:function(){this.__html?this.$el.html(this.__html):this.__templates["default"]?this.$el.html(this.evaluateTemplate("default",{})):this.__dynamics["default"]&&this.evaluateDynamics("default",this.$el,{},{name:"default"})},templates:function(a){return a in this.__templates?this.__templates[a]:null},dynamics:function(a){return a in this.__dynamics?this.__dynamics[a]:null},_supp:function(){return{__context:this,css:function(a){return this.__context.css(a)},attrs:function(a){var b="";for(var c in a)b+=(a[c]?c+"='"+a[c]+"'":c)+" ";return b},styles:function(a){var b="";for(var c in a)b+=c+":"+a[c]+";";return b},selector:function(a){return"data-selector='"+a+"' "},view_id:this.cid()}},templateArguments:function(){var a=this.getAll();return a.supp=this._supp(),a},evaluateTemplate:function(a,b){return b=b||{},this.__templates[a].evaluate(BetaJS.Objs.extend(b,this.templateArguments()))},evaluateDynamics:function(a,b,c,d){return this.__dynamics[a].renderInstance(b,BetaJS.Objs.extend(d||{},{args:c||{}}))},_setOption:function(a,b,c,d){d=d?d:"__",this[d+b]=a&&b in a&&BetaJS.Types.is_defined(a[b])?a[b]:c},_setOptionTyped:function(a,b,c,d,e){this._setOption(a,b,this.cls._parseType(c,d),e)},_setOptionProperty:function(a,b,c){this.set(b,a&&b in a&&BetaJS.Types.is_defined(a[b])?a[b]:c)},_setOptionPropertyTyped:function(a,b,c,d){this._setOptionProperty(a,b,this.cls._parseType(c,type))},constructor:function(a){a=a||{},this._inherited(BetaJS.Views.View,"constructor"),this._setOption(a,"el",null),this._setOption(a,"visible",!0),this._setOption(a,"html",null),this._setOption(a,"events",[]),this._setOption(a,"attributes",{}),this._setOption(a,"invalidate_on_show",!1),this._setOption(a,"append_to_el",!1),this.__old_attributes={},this._setOption(a,"el_classes",[]),BetaJS.Types.is_string(this.__el_classes)&&(this.__el_classes=this.__el_classes.split(" ")),this.__added_el_classes=[],this._setOption(a,"el_styles",{}),this._setOption(a,"children_styles",{}),this._setOption(a,"children_classes",[]),BetaJS.Types.is_string(this.__children_classes)&&(this.__children_classes=this.__children_classes.split(" ")),this._setOption(a,"invalidate_on_change",!1),this.__old_el_styles={},this._setOption(a,"css",{}),this.__parent=null,this.__children={},this.__active=!1,this.$el=null;var b=BetaJS.Types.is_function(this._events)?this._events():this._events;BetaJS.Types.is_array(b)||(b=[b]),this.__events=b.concat(this.__events);var c=BetaJS.Types.is_function(this._global_events)?this._global_events():this._global_events;BetaJS.Types.is_array(c)||(c=[c]),this.__global_events=c;var d=BetaJS.Objs.extend(BetaJS.Types.is_function(this._templates)?this._templates():this._templates,a.templates||{});"template"in a&&(d["default"]=a.template),this.__templates={};var e=null;for(e in d){if(!d[e])throw new BetaJS.Views.ViewException("Could not find template '"+e+"' in View '"+this.cls.classname+"'");this.__templates[e]=new BetaJS.Templates.Template(BetaJS.Types.is_string(d[e])?d[e]:d[e].html())}var f=BetaJS.Objs.extend(BetaJS.Types.is_function(this._dynamics)?this._dynamics():this._dynamics,a.dynamics||{});"dynamic"in a&&(f["default"]=a.dynamic),this.__dynamics={};for(e in f)this.__dynamics[e]=new BetaJS.Views.DynamicTemplate(this,BetaJS.Types.is_string(f[e])?f[e]:f[e].html());this.setAll(a.properties||{}),this.__invalidate_on_change&&this.on("change",function(){this.invalidate()},this),this.__modules={},BetaJS.Objs.iter(a.modules||[],this.add_module,this),this._notify("created",a),this.ns={};var g=this._domain(),h=this._domain_defaults(),i=null;if(!BetaJS.Types.is_empty(g)){var j=[];for(i in g)j.push({name:i,data:g[i]});j=BetaJS.Sort.dependency_sort(j,function(a){return a.name},function(a){return a.data.before||[]},function(a){var b=a.data.after||[];return a.data.parent&&b.push(a.data.parent),b});for(var k=0;k<j.length;++k){i=j[k].name;var l=j[k].data,m=l.options||{};BetaJS.Types.is_function(m)&&(m=m.apply(this,[this]));var n=h[l.type]||{};BetaJS.Types.is_function(n)&&(n=n.apply(this,[this])),m=BetaJS.Objs.tree_merge(n,m),l.type in BetaJS.Views&&(l.type=BetaJS.Views[l.type]),BetaJS.Types.is_string(l.type)&&(l.type=BetaJS.Objs.Scopes.get(l.type,window));var o=new l.type(m);this.ns[i]=o;var p=l.parent_options||{},q=this;l.parent&&(q=BetaJS.Objs.Scopes.get(l.parent,this.ns)),l.method?l.method(q,o):q.addChild(o,p),o.domain=this;var r=null;for(r in l.events||{})o.on(r,l.events[r],o);for(r in l.listeners||{})this.on(r,l.listeners[r],o)}}},_domain:function(){return{}},_domain_defaults:function(){return{}},isActive:function(){return this.__active},activate:function(){if(this.isActive())return this;if(this.__parent&&!this.__parent.isActive())return null;if(this.__parent?this.$el=this.__el?this.__parent.$(this.__el):this.__parent.$el:this.$el=BetaJS.$(this.__el),0===this.$el.size()&&(this.$el=null),!this.$el)return null;this.__append_to_el&&(this.$el.append("<div data-view-id='"+this.cid()+"'></div>"),this.$el=this.$el.find("[data-view-id='"+this.cid()+"']")),this.__old_attributes={};var a=null,b=null;for(a in this.__attributes)b=this.$el.attr(a),BetaJS.Types.is_defined(b)?this.__old_attributes[a]=b:this.__old_attributes[a]=null,this.$el.attr(a,this.__attributes[a]);this.__added_el_classes=[];for(var c=this._el_classes().concat(this.__el_classes),d=0;d<c.length;++d)this.$el.hasClass(c[d])||(this.$el.addClass(c[d]),this.__added_el_classes.push(c[d]));this.__old_el_styles={};var e=BetaJS.Objs.extend(this._el_styles(),this.__el_styles);for(a in e)b=this.$el.css(a),BetaJS.Types.is_defined(b)?this.__old_el_styles[a]=b:this.__old_el_styles[a]=null,this.$el.css(a,e[a]);return this.__bind(),this.__visible||this.$el.css("display",this.__visible?"":"none"),this.__active=!0,this.__render(),this._notify("preactivate"),BetaJS.Objs.iter(this.__children,function(a){a.view.activate()}),this._notify("activate"),this.trigger("activate"),this.__visible&&this.trigger("show"),this.trigger("visibility",this.__visible),this.trigger("resize"),this},deactivate:function(){if(!this.isActive())return!1;this.__visible&&this.trigger("hide"),this.trigger("visibility",!1),this._notify("deactivate"),this.trigger("deactivate"),BetaJS.Objs.iter(this.__children,function(a){a.view.deactivate()}),this.__active=!1,BetaJS.Objs.iter(this.__dynamics,function(a){a.reset()},this),this.__unbind(),this.$el.html("");var a=null;for(a in this.__old_attributes)this.$el.attr(a,this.__old_attributes[a]);for(var b=0;b<this.__added_el_classes.length;++b)this.$el.removeClass(this.__added_el_classes[b]);for(a in this.__old_el_styles)this.$el.css(a,this.__old_el_styles[a]);return this.__append_to_el&&this.$el.remove(),this.$el=null,!0},_el_styles:function(){return{}},_el_classes:function(){return[]},$:function(a){return this.$el.find(a)},$data:function(a,b){b||(b=this.$el);var c="";for(var d in a)c+="[data-"+d+"='"+a[d]+"']";return b.find(c)},destroy:function(){this.deactivate(),this.setParent(null);var a=this.__children;this.__children={},BetaJS.Objs.iter(a,function(a){a.view.destroy()}),this.__children={},BetaJS.Objs.iter(this.__dynamics,function(a){a.destroy()},this),BetaJS.Objs.iter(this.__templates,function(a){a.destroy()},this),this.trigger("destroy"),this._inherited(BetaJS.Views.View,"destroy")},show:function(){this.setVisibility(!0)},hide:function(){this.setVisibility(!1)},isVisible:function(){return this.__visible},setVisibility:function(a){a!=this.__visible&&(this.__visible=a,this.isActive()&&(this.$el.css("display",this.__visible?"":"none"),this.__visible&&(this.trigger("resize"),this.__invalidate_on_show&&this.invalidate()),this.trigger(a?"show":"hide"),this.trigger("visibility",a)),this.__parent&&this.__parent.updateChildVisibility(this))},updateChildVisibility:function(a){},toggle:function(){this.setVisibility(!this.isVisible())},__bind:function(){var a=this;this.__unbind(),BetaJS.Objs.iter(this.__events,function(b){BetaJS.Objs.iter(b,function(b,c){var d=BetaJS.Types.is_function(b)?b:a[b],e=c.match(BetaJS.Views.BIND_EVENT_SPLITTER),f=e[1],g=e[2];f=f+".events"+a.cid();var h=BetaJS.Functions.as_method(d,a);""===g?a.$el.on(f,h):a.$el.on(f,g,h)})}),BetaJS.Objs.iter(this.__global_events,function(b){BetaJS.Objs.iter(b,function(b,c){var d=BetaJS.Types.is_function(b)?b:a[b],e=c.match(BetaJS.Views.BIND_EVENT_SPLITTER),f=e[1],g=e[2];f=f+".events"+a.cid();var h=BetaJS.Functions.as_method(d,a);""===g?BetaJS.$(document).on(f,h):BetaJS.$(document).on(f,g,h)})})},__unbind:function(){this.$el.off(".events"+this.cid()),BetaJS.$(document).off(".events"+this.cid())},__render:function(){if(this.isActive()){this._render();var a=this.$el.children();if(!BetaJS.Types.is_empty(this.__children_styles))for(var b in this.__children_styles)a.css(b,this.__children_styles[b]);BetaJS.Objs.iter(this.__children_classes,function(b){a.addClass(b)}),this.trigger("render")}},invalidate:function(){this.isActive()&&(BetaJS.Objs.iter(this.__children,function(a){a.view.deactivate()}),BetaJS.Objs.iter(this.__dynamics,function(a){a.reset()},this),this.__render(),BetaJS.Objs.iter(this.__children,function(a){a.view.activate()}))},setEl:function(a){this.isActive()?(this.deactivate(),this.__el=a,this.activate()):this.__el=a},getParent:function(){return this.__parent},hasChild:function(a){return a&&a.cid()in this.__children},setParent:function(a){if(a!=this.__parent){if(this.deactivate(),this.__parent){this._unbindParent(this.__parent);var b=this.__parent;this.__parent.off(null,null,this),this.__parent=null,b.removeChild(this)}a&&(this.__parent=a,a.addChild(this),this._bindParent(a),a.isActive()&&this.activate())}},_bindParent:function(){},_unbindParent:function(){},children:function(){var a={};return BetaJS.Objs.iter(this.__children,function(b,c){a[c]=b.view},this),a},childOptions:function(a){return this.__children[a.cid()].options},addChildren:function(a){BetaJS.Objs.iter(a,function(a){this.addChild(a)},this)},addChild:function(a,b){return this.hasChild(a)?null:(b=b||{},this.__children[a.cid()]={view:a,options:b},this._notify("addChild",a,b),a.setParent(this),this.isActive()&&this.isVisible()&&this.trigger("resize"),a)},removeChildren:function(a){BetaJS.Objs.iter(a,function(a){this.removeChild(a)},this)},removeChild:function(a){this.hasChild(a)&&(delete this.__children[a.cid()],a.setParent(null),a.off(null,null,this),this._notify("removeChild",a),this.isActive()&&this.isVisible()&&this.trigger("resize"))},width:function(){return this.$el.width()},innerWidth:function(){return this.$el.innerWidth()},outerWidth:function(){return this.$el.outerWidth()},height:function(){return this.$el.height()},innerHeight:function(){return this.$el.innerHeight()},outerHeight:function(){return this.$el.outerHeight()}}],{parseType:function(a,b){if(BetaJS.Types.is_defined(a)&&BetaJS.Types.is_string(a)){if(a=a.replace(/\s+/g,""),"int"==b)return parseInt(a,10);if("array"==b)return a.split(",");if("bool"==b)return""===a||BetaJS.Types.parseBool(a);if("object"==b||"function"==b)return BetaJS.Objs.Scopes.get(a,window)}return a}}),BetaJS.Views.BIND_EVENT_SPLITTER=/^(\S+)\s*(.*)$/,BetaJS.Class.extend("BetaJS.Views.DynamicTemplate",{constructor:function(a,b){this._inherited(BetaJS.Views.DynamicTemplate,"constructor"),this.__parent=a,this.__template=new BetaJS.Templates.Template(b),this.__instances={},this.__instances_by_name={}},reset:function(){BetaJS.Objs.iter(this.__instances,function(a){this.removeInstance(a)},this)},destroy:function(){this.reset(),this._inherited(BetaJS.Views.DynamicTemplate,"destroy")},renderInstance:function(a,b){b=b||{},b.name&&this.removeInstanceByName(b.name);var c=new BetaJS.Views.DynamicTemplateInstance(this,a,b);this.__instances[c.cid()]=c,b.name&&(this.__instances_by_name[b.name]=c)},removeInstanceByName:function(a){a in this.__instances_by_name&&this.removeInstance(this.__instances_by_name[a])},removeInstance:function(a){delete this.__instances[a.cid()],delete this.__instances_by_name[a.name()],a.destroy()},view:function(){return this.__parent},template:function(){return this.__template}}),BetaJS.Class.extend("BetaJS.Views.DynamicTemplateInstance",[BetaJS.Events.ListenMixin,{__bind:{attr:function(a,b){return this.__context.__bind_attribute(a,b)},attrs:function(a){var b="";for(var c in a)b+=this.attr(c,a[c])+" ";return b},value:function(a){return this.__context.__bind_value(a)},inner:function(a){return this.__context.__bind_inner(a)},css_if:function(a,b){return this.__context.__bind_css_if(a,b,!0)},css_if_not:function(a,b){return this.__context.__bind_css_if(a,b,!1)}},__new_element:function(a){var b=BetaJS.Ids.uniqueId();return this.__elements[b]=BetaJS.Objs.extend({id:b,$el:null},a),this.__elements[b]},__decompose_variable:function(a){var b=a.split(".");return{object:1==b.length?this.__parent.view():this.__args[b[0]],key:1==b.length?a:b[1]}},__get_variable:function(a){var b=this.__decompose_variable(a);return b.object.get(b.key)},__set_variable:function(a,b){var c=this.__decompose_variable(a);return c.object.set(c.key,b)},__update_element:function(a){var b=this.__get_variable(a.variable);"inner"==a.type?a.$el.html(b):"value"==a.type?a.$el.val()!=b&&a.$el.val(b):"attribute"==a.type?a.$el.attr(a.attribute,b):"css"==a.type&&(a.positive||(b=!b),b?a.$el.addClass(this.__parent.view().css(a.css)):a.$el.removeClass(this.__parent.view().css(a.css)))},__prepare_element:function(a){var b=this;a.$el=this.$el.find(a.selector),"inner"==a.type||"css"==a.type?this.__update_element(a):"value"==a.type&&a.$el.on("change input keyup paste",function(){b.__set_variable(a.variable,a.$el.val())})},__bind_attribute:function(a,b){var c=this.__new_element({type:"attribute",attribute:a,variable:b}),d="data-bind-"+a+"='"+c.id+"'";c.selector="["+d+"]";var e=this.__decompose_variable(b);return this.listenOn(e.object,"change:"+e.key,function(){this.__update_element(c)},this),d+" "+a+"='"+e.object.get(e.key)+"'"},__bind_css_if:function(a,b,c){var d=this.__new_element({type:"css",css:a,variable:b,positive:c}),e="data-bind-css-"+a+"='"+d.id+"'";d.selector="["+e+"]";var f=this.__decompose_variable(b);return this.listenOn(f.object,"change:"+f.key,function(){this.__update_element(d)},this),e},__bind_value:function(a){var b=this.__new_element({type:"value",variable:a}),c="data-bind-value='"+b.id+"'";b.selector="["+c+"]";var d=this.__decompose_variable(a);return this.listenOn(d.object,"change:"+d.key,function(){this.__update_element(b)},this),c+" value='"+d.object.get(d.key)+"'"},__bind_inner:function(a){var b=this.__new_element({type:"inner",variable:a}),c="data-bind-inner='"+b.id+"'";b.selector="["+c+"]";var d=this.__decompose_variable(a);return this.listenOn(d.object,"change:"+d.key,function(){this.__update_element(b)},this),c},constructor:function(a,b,c){this._inherited(BetaJS.Views.DynamicTemplateInstance,"constructor"),this.__elements={},this.__inners={},c=c||{},c.name&&(this.__name=c.name),this.__parent=a,this.$el=b,this.__args=BetaJS.Objs.extend(c.args||{},this.__parent.view().templateArguments()),this.__args.bind=BetaJS.Objs.extend({__context:this},this.__bind),this.$el.html(a.template().evaluate(this.__args)),BetaJS.Objs.iter(this.__elements,function(a){this.__prepare_element(a)},this)},destroy:function(){BetaJS.Objs.iter(this.__elements,function(a){a.$el.off()},this),this._inherited(BetaJS.Views.DynamicTemplateInstance,"destroy")},name:function(){return this.__name}}]),BetaJS.Views.ActiveDom={__prefix_alias:["bjs","betajs"],__view_alias:{},__views:{},__active:!1,__on_add_element:function(a){var b=BetaJS.$(a.target);if(b){var c=!1;b.prop("tagName")&&(BetaJS.Objs.iter(BetaJS.Views.ActiveDom.__prefix_alias,function(a){b.prop("tagName").toLowerCase()==a+"view"&&(BetaJS.Views.ActiveDom.__attach(b),c=!0)}),BetaJS.Objs.iter(BetaJS.Views.ActiveDom.__view_alias,function(a,d){b.prop("tagName").toLowerCase()==d&&(BetaJS.Views.ActiveDom.__attach(b,a),c=!0)})),c||(BetaJS.Objs.iter(BetaJS.Views.ActiveDom.__prefix_alias,function(a){b.find(a+"view").each(function(){BetaJS.Views.ActiveDom.__attach(BetaJS.$(this))})}),BetaJS.Objs.iter(BetaJS.Views.ActiveDom.__view_alias,function(a,c){b.find(c).each(function(){BetaJS.Views.ActiveDom.__attach(BetaJS.$(this),a)})}))}},__on_remove_element:function(a){var b=BetaJS.$(a.target);b.attr("data-active-dom-id")in BetaJS.Views.ActiveDom.__views?BetaJS.Views.ActiveDom.__views[b.attr("data-active-dom-id")].destroy():b.find("[data-active-dom-id]").each(function(){var a=BetaJS.$(this);a.attr("data-active-dom-id")in BetaJS.Views.ActiveDom.__views&&BetaJS.Views.ActiveDom.__views[a.attr("data-active-dom-id")].destroy()})},__attach:function(a,b){if(!a.attr("data-active-dom-element")){var c=function(a,c){for(var d=0;d<BetaJS.Views.ActiveDom.__prefix_alias.length;){var i=BetaJS.Views.ActiveDom.__prefix_alias[d];if(BetaJS.Strings.starts_with(a,i+"-"))return a=BetaJS.Strings.strip_start(a,i+"-"),void(BetaJS.Strings.starts_with(a,"child-")?(a=BetaJS.Strings.strip_start(a,"child-"),f[a]=c):a in h?b[a]=c:g[a]=c);++d}e[a]=c},d=function(a){var b=a.find("script[type='text/param']");return BetaJS.Strings.nltrim(b.length>0?b.html():a.html())},e={},f={},g={},h={type:"View","default":null,name:null,"keep-tag":!0};b=BetaJS.Objs.extend(BetaJS.Objs.clone(h,1),b||{});for(var i=a.get(0).attributes,j=0;j<i.length;++j)c(i.item(j).nodeName,i.item(j).nodeValue);BetaJS.Objs.iter(BetaJS.Views.ActiveDom.__prefix_alias,function(b){a.children(b+"param").each(function(){var a=BetaJS.$(this);c(b+"-"+a.attr(b+"-key"),d(a))})}),b["default"]&&(g[b["default"]]=d(a)),b.type in BetaJS.Views&&(b.type=BetaJS.Views[b.type]),BetaJS.Types.is_string(b.type)&&(b.type=BetaJS.Objs.Scopes.get(b.type,window));var k=new b.type(g);k.setEl("[data-active-dom-id='"+k.cid()+"']");var l="<div data-active-dom-id='"+k.cid()+"'></div>";b["keep-tag"]&&(l="<"+a.prop("tagName")+" data-active-dom-element='"+k.cid()+"'>"+l+"</"+a.prop("tagName")+">"),a.replaceWith(l),a=BetaJS.$("[data-active-dom-id='"+k.cid()+"']");var m=null;for(m in e)a.attr(m,e[m]);k.on("destroy",function(){delete BetaJS.Views.ActiveDom.__views[k.cid()]}),BetaJS.Views.ActiveDom.__views[k.cid()]=k,k.activate();for(m in f)a.children().attr(m,f[m]);b.name&&BetaJS.Objs.Scopes.set(k,b.name,window)}},activate:function(){BetaJS.$(document).ready(function(){BetaJS.Views.ActiveDom.__active||(document.addEventListener?(document.addEventListener("DOMNodeInserted",BetaJS.Views.ActiveDom.__on_add_element),document.addEventListener("DOMNodeRemoved",BetaJS.Views.ActiveDom.__on_remove_element)):(document.attachEvent("DOMNodeInserted",BetaJS.Views.ActiveDom.__on_add_element),document.attachEvent("DOMNodeRemoved",BetaJS.Views.ActiveDom.__on_remove_element)),BetaJS.Objs.iter(BetaJS.Views.ActiveDom.__prefix_alias,function(a){BetaJS.$(a+"view").each(function(){BetaJS.Views.ActiveDom.__attach(BetaJS.$(this))})}),BetaJS.Objs.iter(BetaJS.Views.ActiveDom.__view_alias,function(a,b){BetaJS.$(b).each(function(){BetaJS.Views.ActiveDom.__attach(BetaJS.$(this),a)})}),BetaJS.Views.ActiveDom.__active=!0)})},deactivate:function(){BetaJS.$(document).ready(function(){BetaJS.Views.ActiveDom.__active&&(document.removeEventListener("DOMNodeInserted",BetaJS.Views.ActiveDom.__on_add_element),document.removeEventListener("DOMNodeRemoved",BetaJS.Views.ActiveDom.__on_remove_element),BetaJS.Objs.iter(BetaJS.Views.ActiveDom.__views,function(a){a.destroy()}),BetaJS.Views.ActiveDom.__active=!1)})},registerPrefixAlias:function(a){this.__prefix_alias.push(a)},registerViewAlias:function(a,b,c){this.__view_alias[a]={type:b},this.__view_alias[a]["default"]=c}},BetaJS.Classes.Module.extend("BetaJS.Views.Modules.Centering",{constructor:function(a){this._inherited(BetaJS.Views.Modules.Centering,"constructor",a),this.__vertical="vertical"in a?a.vertical:!1,this.__horizontal="horizontal"in a?a.horizontal:!1},_register:function(a,b){a.on("resize",function(){a.isVisible()&&this.__update(a)},this),a.isActive()&&a.isVisible()&&this.__update(a)},__update:function(a){this.__vertical&&(a.$el.css("top","50%"),a.$el.css("margin-top",Math.round(-a.$el.height()/2)+"px")),this.__horizontal&&(a.$el.css("left","50%"),a.$el.css("margin-left",Math.round(-a.$el.width()/2)+"px"))}},{__vertical:null,vertical:function(){return this.__vertical||(this.__vertical=new this({auto_destroy:!1,vertical:!0,horizontal:!1})),this.__vertical},__horizontal:null,horizontal:function(){return this.__horizontal||(this.__horizontal=new this({auto_destroy:!1,horizontal:!0,vertical:!1})),this.__horizontal},__both:null,both:function(){return this.__both||(this.__both=new this({auto_destroy:!1,vertical:!0,horizontal:!0})),this.__both}}),BetaJS.Classes.Module.extend("BetaJS.Views.Modules.BindOnVisible",{_register:function(a,b){b.bound=!1,a.on("visibility",function(b){b?this.__bind(a):this.__unbind(a)},this),a.isActive()&&a.isVisible()&&this.__bind(a)},_unregister:function(a,b){this.__unbind(a)},__bind:function(a){var b=this._data(a);b.bound||(this._bind(a,b),b.bound=!0)},__unbind:function(a){var b=this._data(a);b.bound&&(this._unbind(a,b),b.bound=!1)},_bind:function(a,b){},_unbind:function(a,b){}}),BetaJS.Views.Modules.BindOnVisible.extend("BetaJS.Views.Modules.HideOnLeave",{_bind:function(a,b){var c=a.$el.get(0);b.hide_on_leave_func=function(d){return b.hide_on_leave_skip?void(b.hide_on_leave_skip=!1):void(document.contains(d.target)&&d.target!==c&&!BetaJS.$.contains(c,d.target)&&a.hide())},b.hide_on_leave_skip=!0,BetaJS.$(document.body).on("click",b.hide_on_leave_func)},_unbind:function(a,b){BetaJS.$(document.body).unbind("click",b.hide_on_leave_func)}}),BetaJS=BetaJS||{},BetaJS.Templates=BetaJS.Templates||{},BetaJS.Templates.Cached=BetaJS.Templates.Cached||{},function(a,b){for(var c in b)a[c]=b[c]}.call(this,BetaJS.Templates.Cached,{"video-player-image-template":'  <div class="video-player-outer" style="width: {%= meta.width %}px; height: {%= meta.height %}px">   <div class="video-player-inner">    {% if (meta.image) { %}     <img class="video-player-content"      src="{%= meta.image %}"      width="{%= meta.fit_width %}"      height="{%= meta.fit_height %}"      style="max-width: {%= meta.fit_width %}px; width: {%= meta.fit_width %}px; max-height: {%= meta.fit_height %}px; height: {%= meta.fit_height %}px"/>    {% } %}   </div>   <div data-selector="play-button"></div>   <div data-selector="status"></div>  </div> ',"video-player-play-template":'  <div data-selector="player" class="video-player-outer" style="width: {%= meta.width %}px; height: {%= meta.height %}px">   <div class="video-player-inner" stylex="width: 100%; height: 100%">    <div class="video-player-content" data-selector="inner-player" style="width: 100%; height: 100%">     <div id="player-{%= id %}"></div>    </div>   </div>  </div> ',"initial-template":'  <div class="inner-container">                 <a href="http://ziggeo.com" target="_blank">         <div class="recorder-front-logo"></div>         </a>   <p class="center"><a href="javascript: {}" data-selector="record-video"><i class="bjs-icon-videocam hero-img"></i></a></p>   <a href="javascript: {}" class="btn-primary" data-selector="record-video">{%= BetaJS.Locales.get(\'video_recorder.record_video\') %}</a>   {% if (info_message) { %}   <p class=\'recorder-info-message\'>{%= info_message %}</p>   {% } %}   <p><a href="javascript: {}" data-selector="upload-video" style="display: {%= external_upload ? "inline" : "none"%}"><i class="bjs-icon-upload"></i> {%= BetaJS.Locales.get(\'video_recorder.external_upload\') %} &nbsp; </a></p>  </div> ',
"video-recorder-error-template":'  <p class="error-label">{%= error %}</p>  <a href="javascript: {}" class="call-to-action" style="display: {%= call_to_action ? \'inline\' : \'none\' %}">{%= call_to_action %}</a> ',"video-recorder-progress-template":'  <p class="progress-label" {%= bind.inner(\'progress_label\') %}></p>  <i class="bjs-icon-spinner animate-spin progress-spinner"></i> ',"video-recorder-device-popup-template":'  {% for (var i = 0; i < items.length; ++i) { %}   <div class="video-recorder-radio">     <span class="video-recorder-label">       <input type="radio" name="options-{%= supp.view_id %}" value="{%= i %}" {%= i == current ? \'checked\' : \'\' %}>       {%= items[i] %}     </span>   </div>  {% } %} ',"video-uploader-upload-button-view-template":'   <{%= button_container_element %} data-selector="button-inner"    {%= bind.css_if("disabled", "disabled") %}>       {% if (!cordova) { %}    <input type="file" name="file" class="video-uploader-upload-input" style="height:100%" {%= accept_string %} />       {% } %}    {%= label %}   </{%= button_container_element %}>  ',"video-uploader-progress-template":'   <p class="progress-label" {%= bind.inner(\'progress_label\') %}></p>   <i class="bjs-icon-spinner animate-spin progress-spinner"></i>  ',"video-uploader-error-template":'   <p class="error-label">{%= error %}</p>   <a href="javascript: {}" class="call-to-action" style="display: {%= call_to_action ? \'inline\' : \'none\' %}">{%= call_to_action %}</a>  ',"video-uploader-upload-template":'   <div class="inner-container">          <a href="http://ziggeo.com" target="_blank">          <div class="recorder-front-logo"></div>          </a>    <p class="center"><i class="fa {%= BetaJS.Browser.Info.isMobile() ? \'bjs-icon-videocam\' : \'bjs-icon-upload\' %} hero-img"></i></p>    <div data-selector="upload-video" style="position:relative"></div>    <p><a href="javascript: {}" data-selector="record-video" style="display: {%= external_record ? "inline" : "none"%}"><i class="fa bjs-icon-videocam"></i> {%= external_record_label %} &nbsp; </a></p>   </div>   <p class="progress-label" {%= bind.inner(\'progress_label\') %} style="display:none"></p>   <i class="bjs-icon-spinner animate-spin progress-spinner" style="display:none"></i>  ',"list-container-view-item-template":'  <{%= container_element %} data-view-id="{%= cid %}"></{%= container_element %}> ',"button-view-template":'   <{%= button_container_element %} type="button" data-selector="button-inner" class="{%= supp.css("default") %}"    {%= bind.css_if("disabled", "disabled") %}    {%= bind.css_if("selected", "selected") %}    {%= bind.inner("label") %}>   </{%= button_container_element %}>  ',"label-view-template":'  <{%= element %} class="{%= supp.css(\'label\') %}" {%= bind.inner("label") %}></{%= element %}> ',"progress-template":'  <div class="{%= supp.css(\'outer\') %}">   <div data-selector="inner" class="{%= supp.css(\'inner\') %}" style="{%= horizontal ? \'width\': \'height\' %}:{%= value*100 %}%">   </div>   <div class="progress-view-overlay" data-selector="label">    {%= label %}   </div>  </div> ',"list-view-template":'   <{%= list_container_element %}    {%= supp.attrs(list_container_attrs) %}    class="{%= list_container_classes %}"    data-selector="list">   </{%= list_container_element %}>  ',"list-view-item-container-template":'   <{%= item_container_element %}    {%= supp.attrs(item_container_attrs) %}    class="{%= item_container_classes %}"    {%= supp.list_item_attr(item) %}>   </{%= item_container_element %}>  ',"fullscreen-overlay-view-template":'  <div class="fullscreen-overlay-background" data-selector="outer"></div>  <div class="fullscreen-overlay" data-selector="container">   <div class="fullscreen-overlay-inner" data-selector="inner"></div>  </div> ',"overlay-view-template":'  <div data-selector="container"></div> '}),BetaJS.Views.View.extend("BetaJS.Views.ListContainerView",{_templates:{item:BetaJS.Templates.Cached["list-container-view-item-template"]},_notifications:{addChild:"__addChildContainer",removeChild:"__removeChildContainer"},constructor:function(a){a=a||{},this._inherited(BetaJS.Views.ListContainerView,"constructor",a),this._setOption(a,"alignment","horizontal"),this._setOption(a,"positioning","float"),this._setOption(a,"clear_float",!1),this._setOption(a,"container_element","div"),this.on("show",function(){"computed"==this.__positioning&&this.__updatePositioning()},this)},isHorizontal:function(){return"horizontal"==this.__alignment},_render:function(){this.__clear_float?this.$el.html("<div data-selector='clearboth' style='clear:both'></div>"):this.$el.html(""),BetaJS.Objs.iter(this.children(),function(a){this.__addChildContainer(a)},this)},__addChildContainer:function(a){var b=this.childOptions(a);if(this.isActive()){var c=this.evaluateTemplate("item",{cid:a.cid(),container_element:this.__container_element});this.__clear_float?this.$("[data-selector='clearboth']").before(c):this.$el.append(c)}if(a.setEl("[data-view-id='"+a.cid()+"']"),!this.isHorizontal()||"float"in b||"float"!=this.__positioning||(b["float"]="left"),this.isActive()&&"float"in b&&"float"==this.__positioning){var d=this.$("[data-view-id='"+a.cid()+"']");d.css("float",b["float"])}},__removeChildContainer:function(a){this.$data({"view-id":a.cid()}).remove()},__updatePositioningHelper:function(a,b,c){var d=0;BetaJS.Objs.iter(a,function(a){var e=this.childOptions(a);return e.type&&"ignore"==e.type||(a.$el.css(b,d+"px"),a.isVisible()&&(d+=parseInt(a.$el.css(c),10)),!e.type||"dynamic"!=e.type)?void 0:!1},this)},__updatePositioning:function(){var a=BetaJS.Objs.values(this.children()),b=BetaJS.Objs.clone(a,1).reverse(),c=this.isHorizontal()?"left":"top",d=this.isHorizontal()?"right":"bottom",e=this.isHorizontal()?"width":"height";this.__updatePositioningHelper(b,d,e),this.__updatePositioningHelper(a,c,e)},updateChildVisibility:function(a){this._inherited(BetaJS.Views.ListContainerView,"updateChildVisibility",a),"computed"==this.__positioning&&this.__updatePositioning()}}),BetaJS.Views.View.extend("BetaJS.Views.ButtonView",{_dynamics:{"default":BetaJS.Templates.Cached["button-view-template"]},_css:function(){return{disabled:"","default":"",selected:""}},constructor:function(a){a=a||{},this._inherited(BetaJS.Views.ButtonView,"constructor",a),this._setOptionProperty(a,"label",""),this._setOptionProperty(a,"button_container_element","button"),this._setOptionProperty(a,"disabled",!1),this._setOptionProperty(a,"selected",!1),this._setOption(a,"selectable",!1),this._setOption(a,"deselect_all",!1)},_events:function(){return this._inherited(BetaJS.Views.ButtonView,"_events").concat([{"click [data-selector='button-inner']":"click"}])},click:function(){this.get("disabled")||(this.__selectable&&this.select(),this.trigger("click"))},_bindParent:function(a){a.on("deselect",function(){this.unselect()},this)},_unbindParent:function(a){a.off("deselect",this)},select:function(){this.__selectable&&(this.__deselect_all&&this.getParent().trigger("deselect"),this.getParent().trigger("select",this),this.set("selected",!0))},unselect:function(){this.__selectable&&this.set("selected",!1)},isSelected:function(){return this.get("selected")}}),BetaJS.Views.View.extend("BetaJS.Views.LabelView",{_dynamics:{"default":BetaJS.Templates.Cached["label-view-template"]},_css:function(){return{label:"label-view-class"}},_events:function(){return[{click:"__clickEvent"}]},constructor:function(a){this._inherited(BetaJS.Views.LabelView,"constructor",a),this._setOptionProperty(a,"label",""),this._setOptionProperty(a,"element","span")},__clickEvent:function(){this.trigger("click")}}),BetaJS.Views.View.extend("BetaJS.Views.ProgressView",{_templates:{"default":BetaJS.Templates.Cached["progress-template"]},_css:function(){return{outer:"",inner:""}},constructor:function(a){this._inherited(BetaJS.Views.ProgressView,"constructor",a),this._setOptionProperty(a,"label",""),this._setOptionProperty(a,"horizontal",!0),this._setOptionProperty(a,"value",1),this.on("change:value",function(a){this.isActive()&&this.$("[data-selector='inner']").css(this.get("horizontal")?"width":"height",100*a+"%")},this),this.on("change:label",function(a){this.isActive()&&this.$("[data-selector='label']").html(a)},this)}}),BetaJS.Views.View.extend("BetaJS.Views.CustomListView",{_templates:function(){return{"default":BetaJS.Templates.Cached["list-view-template"],"item-container":BetaJS.Templates.Cached["list-view-item-container-template"]}},_supp:function(){return BetaJS.Objs.extend(this._inherited(BetaJS.Views.CustomListView,"_supp"),{list_item_attr:function(a){return this.attrs({"data-view-id":this.__context.cid(),"data-cid":BetaJS.Ids.objectId(a),"data-index":this.__context.__collection.getIndex(a)})}})},_notifications:{activate:"__activateItems",deactivate:"__deactivateItems"},_events:function(){return[{click:"__click"}]},constructor:function(a){if(this._inherited(BetaJS.Views.CustomListView,"constructor",a),this._setOption(a,"list_container_element","ul"),this._setOption(a,"list_container_attrs",{}),this._setOption(a,"list_container_classes",""),this._setOption(a,"item_container_element","li"),this._setOption(a,"item_container_classes",""),this._setOption(a,"selectable",!0),this._setOption(a,"multi_select",!1),this._setOption(a,"click_select",!1),this.__itemData={},"table"in a){var b=this.cls.parseType(a.table,"object");this.active_query=new BetaJS.Queries.ActiveQuery(b.active_query_engine(),{}),a.collection=this.active_query.collection(),a.destroy_collection=!0}if("compare"in a&&(a.compare=this.cls.parseType(a.compare,"function")),"collection"in a)this.__collection=a.collection,this.__destroy_collection="destroy_collection"in a?a.destroy_collection:!1,"compare"in a&&this.__collection.set_compare(a.compare);else{var c={};"objects"in a&&(c.objects=a.objects),"compare"in a&&(c.compare=a.compare),this.__collection=new BetaJS.Collections.Collection(c),this.__destroy_collection=!0}this.__collection.on("add",function(a){this._addItem(a)},this),this.__collection.on("remove",function(a){this._removeItem(a)},this),this.__collection.on("change",function(a){this._changeItem(a)},this),this.__collection.on("index",function(a,b){this.__updateItemIndex(a,b)},this),this.__collection.on("reindexed",function(a){this.__reIndexItem(a)},this),this.__collection.on("sorted",function(){this.__sort()},this),this.__collection.iterate(function(a){this._registerItem(a)},this)},destroy:function(){this.__collection.iterate(function(a){this._unregisterItem(a)},this),this.__collection.off(null,null,this),this.__destroy_collection&&this.__collection.destroy(),this._inherited(BetaJS.Views.CustomListView,"destroy")},_itemBySubElement:function(a){var b=a.closest("[data-view-id='"+this.cid()+"']");return 0===b.length?null:this.__collection.getById(b.attr("data-cid"))},__click:function(a){if(this.__click_select&&this.__selectable){var b=this._itemBySubElement(BetaJS.$(a.target));b&&this.select(b)}},collection:function(){return this.__collection},add:function(a){this.__collection.add(a)},remove:function(a){this.__collection.remove(a)},_render:function(){this.$selector_list=this._renderListContainer()},_renderListContainer:function(){return this.$el.html(this.evaluateTemplate("default",{list_container_element:this.__list_container_element,list_container_attrs:this.__list_container_attrs,list_container_classes:this.__list_container_classes})),this.$data({selector:"list"})},invalidate:function(){this.isActive()&&this.__deactivateItems(),this._inherited(BetaJS.Views.CustomListView,"invalidate"),this.isActive()&&this.__activateItems()},__activateItems:function(){this.__collection.iterate(function(a){this._activateItem(a)},this)},__deactivateItems:function(){this.__collection.iterate(function(a){this._deactivateItem(a)},this)},itemElement:function(a){return this.$data({"view-id":this.cid(),cid:BetaJS.Ids.objectId(a)},this.$selector_list)},_findIndexElement:function(a){return this.$data({"view-id":this.cid(),index:a},this.$selector_list)},_changeItem:function(a){},__updateItemIndex:function(a,b){var c=this.itemElement(a);c.attr("data-index",b),this._updateItemIndex(a,c)},__reIndexItem:function(a){var b=this.itemElement(a),c=this.collection().getIndex(a);if(0===c)this.$selector_list.prepend(b);else{var d=this._findIndexElement(c-1);d.after(b)}},_updateItemIndex:function(a,b){},__sort:function(){for(var a=this.collection().count()-1;a>=0;a--)this.$selector_list.prepend(this._findIndexElement(a))},itemData:function(a){return this.__itemData[a.cid()]},_registerItem:function(a){this.__itemData[a.cid()]={properties:new BetaJS.Properties.Properties({selected:!1,new_element:!1})}},_unregisterItem:function(a){this.__itemData[a.cid()]&&(this.__itemData[a.cid()].properties.destroy(),delete this.__itemData[a.cid()])},_activateItem:function(a){var b=this.evaluateTemplate("item-container",{item:a,item_container_element:this.__item_container_element,item_container_attrs:this.__item_container_attrs,item_container_classes:this.__item_container_classes}),c=this.__collection.getIndex(a);if(0===c)this.$selector_list.prepend(b);else{var d=this._findIndexElement(c-1);if(d.length>0)d.after(b);else{var e=this._findIndexElement(c+1);e.length>0?e.before(b):this.$selector_list.append(b)}}this.trigger("activate_item",a)},_deactivateItem:function(a){this.itemData(a).new_element=!1;var b=this.itemElement(a);b.remove()},_addItem:function(a){this._registerItem(a),this.isActive()&&(this.itemData(a).new_element=!0,this._activateItem(a))},_removeItem:function(a){this.isActive()&&this._deactivateItem(a),this._unregisterItem(a)},isSelected:function(a){return this.itemData(a).properties.get("selected")},select:function(a){var b=this.itemData(a);return this.__selectable&&!this.isSelected(a)&&(this.__multi_select||this.collection().iterate(function(a){this.unselect(a)},this),b.properties.set("selected",!0),this.trigger("select",a)),b},unselect:function(a){var b=this.itemData(a);return this.__selectable&&this.isSelected(a)&&(b.properties.set("selected",!1),this.trigger("unselect",a)),b}}),BetaJS.Views.CustomListView.extend("BetaJS.Views.ListView",{constructor:function(a){a=a||{},"item_template"in a&&(a.templates={item:a.item_template}),"item_dynamic"in a&&(a.dynamics={item:a.item_dynamic}),this._inherited(BetaJS.Views.ListView,"constructor",a),this._setOption(a,"item_label","label"),this._setOption(a,"render_item_on_change",BetaJS.Types.is_defined(this.dynamics("item")))},_changeItem:function(a){this._inherited(BetaJS.Views.ListView,"_changeItem",a),this.__render_item_on_change&&this.isActive()&&this._renderItem(a)},_activateItem:function(a){this._inherited(BetaJS.Views.ListView,"_activateItem",a),this._renderItem(a)},_renderItem:function(a){var b=this.itemElement(a),c=this.itemData(a).properties;this.templates("item")?b.html(this.evaluateTemplate("item",{item:a,properties:c})):this.dynamics("item")?this.evaluateDynamics("item",b,{item:a,properties:c},{name:"item-"+BetaJS.Ids.objectId(a)}):b.html(a.get(this.__item_label))},_deactivateItem:function(a){this.dynamics("item")&&this.dynamics("item").removeInstanceByName("item-"+BetaJS.Ids.objectId(a)),this._inherited(BetaJS.Views.ListView,"_deactivateItem",a)}}),BetaJS.Views.CustomListView.extend("BetaJS.Views.SubViewListView",{_sub_view:BetaJS.Views.View,_sub_view_options:function(a){return{item:a,item_properties:this.itemData(a).properties}},_property_map:function(a){},constructor:function(a){this._inherited(BetaJS.Views.SubViewListView,"constructor",a),"create_view"in a&&(this._create_view=a.create_view),"sub_view"in a&&(this._sub_view=this.cls.parseType(a.sub_view,"object")),"sub_view_options"in a&&(this._sub_view_options_param=a.sub_view_options),"property_map"in a&&(this._property_map_param=a.property_map)},_create_view:function(a,b){var c=BetaJS.Objs.extend(BetaJS.Types.is_function(this._property_map)?this._property_map.apply(this,[a]):this._property_map,BetaJS.Types.is_function(this._property_map_param)?this._property_map_param.apply(this,[a]):this._property_map_param),d=BetaJS.Objs.extend(BetaJS.Types.is_function(this._sub_view_options)?this._sub_view_options.apply(this,[a]):this._sub_view_options,BetaJS.Objs.extend(BetaJS.Types.is_function(this._sub_view_options_param)?this._sub_view_options_param.apply(this,[a]):this._sub_view_options_param||{},BetaJS.Objs.map(c,a.get,a)));return d.el=this.itemElement(a),new this._sub_view(d)},_activateItem:function(a){this._inherited(BetaJS.Views.SubViewListView,"_activateItem",a);var b=this._create_view(a);this.delegateEvents(null,b,"item",[b,a]),this.itemData(a).view=b,this.addChild(b)},_deactivateItem:function(a){var b=this.itemData(a).view;this.removeChild(b),b.destroy(),this._inherited(BetaJS.Views.SubViewListView,"_deactivateItem",a)}}),BetaJS.Classes.Module.extend("BetaJS.Views.Modules.ListViewAnimation",{_register:function(a,b){a.on("activate_item",function(b){if(a.itemData(b).new_element){var c=a.itemElement(b);c.css("display","none"),c.fadeIn()}},this)}},{__singleton:null,singleton:function(){return this.__singleton||(this.__singleton=new this({auto_destroy:!1})),this.__singleton}}),BetaJS.Views.View.extend("BetaJS.Views.OverlayView",{_templates:{"default":BetaJS.Templates.Cached["overlay-view-template"]},constructor:function(a){a=a||{},a.anchor=a.anchor||"absolute",a.visible="visible"in a?a.visible:!1,a.children_classes=a.children_classes||[],BetaJS.Types.is_string(a.children_classes)&&(a.children_classes=a.children_classes.split(" ")),a.children_classes.push("overlay-container-class"),this._inherited(BetaJS.Views.OverlayView,"constructor",a),this._setOption(a,"anchor","none"),this._setOption(a,"element",""),this._setOption(a,"overlay_left",0),this._setOption(a,"overlay_top",0),this._setOption(a,"overlay_align_vertical","top"),this._setOption(a,"overlay_align_horizontal","left"),this._setOption(a,"element_align_vertical","bottom"),this._setOption(a,"element_align_horizontal","left"),a.overlay_inner&&(a.overlay_inner.setEl('[data-selector="container"]'),this.overlay_inner=this.addChild(a.overlay_inner)),"hide_on_leave"in a&&!a.hide_on_leave||this.add_module(BetaJS.Views.Modules.HideOnLeave.singleton()),this.on("show",this._after_show,this)},_after_show:function(){if("none"!=this.__anchor){var a=this.$(".overlay-container-class"),b=a.outerWidth(),c=a.outerHeight(),d=this.__overlay_left,e=this.__overlay_top;"bottom"==this.__overlay_align_vertical?e-=c:"center"==this.__overlay_align_vertical&&(e-=Math.round(c/2)),"right"==this.__overlay_align_horizontal?d-=b:"center"==this.__overlay_align_horizontal&&(d-=Math.round(b/2));var f=this.$el;"element"==this.__anchor&&this.__element&&(f=this.__element,BetaJS.Types.is_string(f)?f=BetaJS.$(f):BetaJS.Class.is_class_instance(f)&&(f=f.$el)),"relative"!=this.__anchor&&"element"!=this.__anchor||(element_width=f.outerWidth(),element_height=f.outerHeight(),d+=f.offset().left-BetaJS.$(window).scrollLeft(),e+=f.offset().top-BetaJS.$(window).scrollTop(),"bottom"==this.__element_align_vertical?e+=element_height:"center"==this.__element_align_vertical&&(e+=Math.round(element_height/2)),"right"==this.__element_align_horizontal?d+=element_width:"center"==this.__element_align_horizontal&&(d+=Math.round(element_width/2))),a.css("left",d+"px"),a.css("top",e+"px")}}}),BetaJS.Views.View.extend("BetaJS.Views.FullscreenOverlayView",{_templates:{"default":BetaJS.Templates.Cached["fullscreen-overlay-view-template"]},_events:function(){return[{'click [data-selector="outer"]':"unfocus",'touchstart [data-selector="outer"]':"unfocus"}]},constructor:function(a){a=a||{},a.el=a.el||"body",a.append_to_el="append_to_el"in a?a.append_to_el:!0,a.visible="visible"in a?a.visible:!1,this._inherited(BetaJS.Views.FullscreenOverlayView,"constructor",a),a.overlay_inner.setEl('[data-selector="inner"]'),this.overlay_inner=this.addChild(a.overlay_inner),this._setOption(a,"hide_on_unfocus",!0),this._setOption(a,"destroy_on_unfocus",!1),this.on("show",this._after_show,this),this.on("hide",this._after_hide,this)},_after_show:function(){var a=this.$('[data-selector="outer"]'),b=this.$('[data-selector="inner"]'),c=this.$('[data-selector="container"]');c.removeClass("fullscreen-overlay-float"),c.removeClass("fullscreen-overlay-fit");var d=a.outerWidth(),e=a.outerHeight(),f=b.outerWidth(),g=b.outerHeight(),h=Math.floor((d-f)/2),i=Math.floor((e-g)/2);h>=0&&i>=0?(c.css("left",h+"px"),c.css("top",i+"px"),c.addClass("fullscreen-overlay-float")):(c.css("left","0px"),c.css("top","0px"),c.addClass("fullscreen-overlay-fit")),BetaJS.$("body").addClass("fullscreen-overlay-body")},_after_hide:function(){BetaJS.$("body").removeClass("fullscreen-overlay-body")},can_unfocus:function(){return!0},unfocus:function(){this.can_unfocus()&&(this.__destroy_on_unfocus?this.destroy():this.__hide_on_unfocus&&this.hide())}}),BetaJS.Views.View.extend("BetaJS.Views.VideoPlayerImageView",{_templates:{"default":BetaJS.Templates.Cached["video-player-image-template"]},_notifications:{activate:"__activatePlayer"},constructor:function(a){var b=BetaJS.Views.VideoPlayerView.VideoMeta.get(a.meta);this.meta=b;var c=BetaJS.Objs.extend(BetaJS.Objs.clone(BetaJS.Types.is_function(BetaJS.Views.VideoPlayerImageView.defaultPlayButton)?BetaJS.Views.VideoPlayerImageView.defaultPlayButton():BetaJS.Views.VideoPlayerImageView.defaultPlayButton,1),a.styling||{});if(this._inherited(BetaJS.Views.VideoPlayerImageView,"constructor",a),c.play_button){BetaJS.Types.is_function(c.play_button_options)&&(c.play_button_options=c.play_button_options(b)),c.play_button_options.el="[data-selector='play-button']";var d=c.play_button_options;d.el_styles=d.el_styles||{},d.modules=d.modules||[],"center"==c.play_button_vertical_align?d.modules.push(BetaJS.Views.Modules.Centering.vertical()):"top"==c.play_button_vertical_align?d.el_styles.top=Math.floor(this.meta.height/50)+"px":"bottom"==c.play_button_vertical_align&&(d.el_styles.bottom=Math.floor(this.meta.height/50)+"px"),"center"==c.play_button_horizontal_align?d.modules.push(BetaJS.Views.Modules.Centering.horizontal()):"left"==c.play_button_horizontal_align?d.el_styles.left=Math.floor(this.meta.width/50)+"px":"right"==c.play_button_horizontal_align&&(d.el_styles.right=Math.floor(this.meta.width/50)+"px"),this.play_button=this.addChild(new c.play_button(d)),this.play_button.on("click",function(){this.trigger("play")},this)}this.status_view=this.addChild(new BetaJS.Views.LabelView({el_classes:"video-player-status",button_container_element:"div",el_styles:{"font-size":Math.round(Math.min(b.width,b.height)/20)+"px","line-height":Math.round(Math.min(b.width,b.height)/20+4)+"px"},vertical_center:!0,el:"[data-selector='status']",visible:!1}))},updateImage:function(a){this.meta.image=a,this.$("img").length>0&&this.$("img").attr("src",a)},templateArguments:function(){return{meta:this.meta}},__updateDimensions:function(a,b){if(a/b!=this.meta.fit_width/this.meta.fit_height){var c=this.meta.asObject();c.video_width=a,c.video_height=b,this.meta=BetaJS.Views.VideoPlayerView.VideoMeta.get(c),this.invalidate(),this.$("img").css("top",Math.floor((this.meta.height-this.meta.fit_height)/2)+"px"),this.$("img").css("display","")}},__activatePlayer:function(){if(this.meta.updateDimensionByParent(this.$el.parent()),this.$el.width(this.meta.width),this.$el.height(this.meta.height),this.meta.image){this.$("img").css("top",Math.floor((this.meta.height-this.meta.fit_height)/2)+"px");var a=(this.$("img").get(0),new Image),b=this;a.onload=function(){b&&b.meta&&this.width&&this.height&&b.__updateDimensions(this.width,this.height)},a.onerror=function(){b.__image_error||(b.__image_error=!0,b.showStatus("Could not display cover shot.",!0),b.$("img").css("display","none"),b.trigger("image-error"))},a.src=this.meta.image}},showStatus:function(a,b){BetaJS.Types.is_undefined(b)&&(b=!0),this.status_view.set("label",a),this.status_view.show(),b&&this.play_button.hide()},hideStatus:function(){this.status_view.hide(),this.play_button.show()}}),BetaJS.Views.VideoPlayerImageView.defaultPlayButton={play_button:BetaJS.Views.LabelView,play_button_options:function(a){return{label:"&#9658;",el_classes:"view-player-play-label",el_styles:{"font-size":Math.floor(Math.min(a.width,a.height)/6)+"px","line-height":Math.floor(Math.min(a.width,a.height)/6)+"px",height:Math.floor(Math.min(a.width,a.height)/6)+"px",width:Math.floor(Math.min(a.width,a.height)/6)+"px"}}},play_button_vertical_align:"center",play_button_horizontal_align:"center"},BetaJS.Views.View.extend("BetaJS.Views.VideoPlayerPlayView",{_templates:{"default":BetaJS.Templates.Cached["video-player-play-template"]},_notifications:{activate:"__activatePlayer",deactivate:"detach"},constructor:function(a){this.raw_sources=a.sources,this.sources=BetaJS.Objs.map(a.sources,function(a){return BetaJS.Views.VideoPlayerView.Source.get(a)}),this.rules=a.rules||BetaJS.Views.VideoPlayerView._options.rules||[],this.meta=BetaJS.Views.VideoPlayerView.VideoMeta.get(a.meta),this.config=BetaJS.Objs.extend({auto_play:!1,loop:!1},a.config||{}),this._inherited(BetaJS.Views.VideoPlayerPlayView,"constructor",a)},updateSources:function(a){this.raw_sources=a,this.sources=BetaJS.Objs.map(a,function(a){return BetaJS.Views.VideoPlayerView.Source.get(a)})},templateArguments:function(){return{meta:this.meta,id:this.cid()}},__activatePlayer:function(){this.meta.updateDimensionByParent(this.$el.parent()),this.$el.width(this.meta.width),this.$el.height(this.meta.height),this.$("[data-selector='inner-player']").css("top",Math.floor((this.meta.height-this.meta.fit_height)/2)+"px"),this.trigger("ready_to_play"),this.config.auto_play&&this.play()},play:function(){this.player&&this.player.destroy(),this.player=null;var a=null,b=null;BetaJS.Objs.iter(this.rules,function(c){return BetaJS.Objs.iter(this.sources,function(d){return c.applies(d)?(a=c,b=d,!1):void 0},this)},this),a?(this.__source=b,this.__rule=a,this.trigger("select",b,a),this.player=a.new_player(b,"player-"+this.cid(),{auto_play:!0,loop:this.config.loop,width:this.meta.fit_width,height:this.meta.fit_height,video_width:this.meta.video_width,video_height:this.meta.video_height,image:this.meta.image}),this.delegateEvents(BetaJS.Views.VideoPlayerView.events,this.player),this.player.attach()):this.trigger("error","Could not play video.")},detach:function(){this.player&&(this.player.destroy(),this.player=null)},source:function(){return this.__source},rule:function(){return this.__rule}}),BetaJS.Views.ListContainerView.extend("BetaJS.Views.VideoPlayerView",{_notifications:{preactivate:"__preactivatePlayer",activate:"__activatePlayer"},constructor:function(a){a.alignment="vertical",a.positioning="none",this._inherited(BetaJS.Views.VideoPlayerView,"constructor",a);var b=BetaJS.Views.VideoPlayerView.VideoMeta.get(a.meta);this.meta=b,this.image_view=this.addChild(new BetaJS.Views.VideoPlayerImageView({meta:this.meta,styling:a.styling})),this.config=a.config||{auto_play:!1},this.play_view=this.addChild(new BetaJS.Views.VideoPlayerPlayView({rules:a.rules,sources:a.sources,meta:this.meta,visible:!1,config:{loop:a.loop}})),this.delegateEvents(BetaJS.Views.VideoPlayerView.events,this.play_view),this.image_view.on("play",function(){this.play()},this),this.image_view.on("image-error",function(){this.trigger("image-error")},this),this.on("error",function(a){this.image_view.show(),this.play_view.hide(),this.image_view.showStatus(a,!0)})},__preactivatePlayer:function(){this.meta.updateDimensionByParent(this.$el.parent()),this.$el.width(this.meta.width),this.$el.height(this.meta.height)},__activatePlayer:function(){this.config.auto_play&&this.play()},play:function(){this.image_view.hide(),this.play_view.show(),this.play_view.play()},stop:function(){this.play_view.detach(),this.play_view.hide(),this.image_view.show()},player:function(){return this.play_view},updateSources:function(a){this.play_view.updateSources(a)},updateImage:function(a){this.image_view.updateImage(a)}},{_options:{},setup:function(a){this._options=a}}),BetaJS.Views.VideoPlayerView.events=["play","params","error","select","pause","stop","ready_to_play"],BetaJS.Views.FullscreenOverlayView.extend("BetaJS.Views.OverlayVideoPlayerView",{constructor:function(a){if(a.meta=BetaJS.Views.VideoPlayerView.VideoMeta.get(a.meta),a.meta.width&&a.meta.height&&(BetaJS.$(window).width()<a.meta.width||BetaJS.$(window).height()<a.meta.height)){var b=.85*BetaJS.$(window).width(),c=b*a.meta.height/a.meta.width;a.meta.width=b,a.meta.height=c}a.meta=a.meta.asObject();var d=new BetaJS.Views.VideoPlayerView({rules:a.rules,sources:a.sources,meta:a.meta,config:a.config||{auto_play:!0},styling:a.styling});a.overlay_inner=d,this._inherited(BetaJS.Views.OverlayVideoPlayerView,"constructor",a),this.delegateEvents(BetaJS.Views.VideoPlayerView.events,d),this.on("hide",function(){this.overlay_inner.stop()},this)},play:function(){this.overlay_inner.play()},player:function(){return this.overlay_inner.player()},updateSources:function(a){this.inner.updateSources(a)},updateImage:function(a){this.inner.updateImage(a)}}),BetaJS.Views.ListContainerView.extend("BetaJS.Views.ImageOverlayVideoPlayerView",{constructor:function(a){if(a.meta=BetaJS.Views.VideoPlayerView.VideoMeta.get(a.meta),a.meta.width&&a.meta.height&&(BetaJS.$(window).width()<a.meta.width||BetaJS.$(window).height()<a.meta.height)){var b=.85*BetaJS.$(window).width(),c=b*a.meta.height/a.meta.width;a.meta.width=b,a.meta.height=c}a.meta=a.meta.asObject(),a.alignment="vertical",a.positioning="none",this._inherited(BetaJS.Views.ImageOverlayVideoPlayerView,"constructor",a),this.overlay=this.addChild(new BetaJS.Views.OverlayVideoPlayerView({rules:a.rules,sources:a.sources,meta:a.meta,config:{auto_play:!1},styling:a.styling})),this.delegateEvents(BetaJS.Views.VideoPlayerView.events,this.overlay);var d=BetaJS.Objs.clone(a.meta,1);this.image=this.addChild(new BetaJS.Views.VideoPlayerImageView({meta:BetaJS.Objs.extend(d,a.image_meta||{}),styling:a.styling})),this.image.on("play",function(){this.play()},this)},play:function(){this.overlay.show(),this.overlay.play()},player:function(){return this.overlay.player()},updateSources:function(a){this.overlay.updateSources(a)},updateImage:function(a){this.image.updateImage(a)}}),BetaJS.Class.extend("BetaJS.Views.VideoPlayerView.Source",{constructor:function(a){if(this._inherited(BetaJS.Views.VideoPlayerView.Source,"constructor"),this.priority=a.priority||0,this.video=a.video,this.streamer=a.streamer,this.protocol=a.protocol,this.secure=a.secure||!1,this.port=a.port,this.uri=a.uri,this.domain=a.domain,this.path=a.path,this.file=a.file,this.uri){var b=this.cls.decomposeUri(this.uri);this.protocol=b.protocol,this.domain=b.domain,b.port&&(this.port=b.port),this.path=b.path,this.file=b.file}this.video||(this.video=this.cls.videoByFile(this.file)),this.protocol&&!this.streamer&&(this.streamer=this.cls.streamerByProtocolAndVideo(this.protocol,this.video)),!this.protocol&&this.streamer&&(this.protocol=this.cls.protocolByStreamerAndSecure(this.streamer,this.secure)),this.secure=this.cls.secureByProtocol[this.protocol],this.port||(this.port=this.cls.portByProtocol[this.protocol]),this.uri||(this.uri=this.cls.composeUri(this.protocol,this.domain,this.port,this.path,this.file)),this.extension=this.cls.videoByFile(this.file)}},{decomposeUri:function(a){var b=BetaJS.Net.Uri.parse(a);return{protocol:b.protocol,port:b.port,domain:b.host,path:b.directory,file:b.file}},videoByFile:function(a){return BetaJS.Strings.last_after(a,".")},streamerByProtocolAndVideo:function(a,b){return"m3u8"==b?"hls":this.streamerByProtocol[a]},protocolByStreamerAndSecure:function(a,b){return"hls"==a&&(a="http"),b?a+"s":a},streamerByProtocol:{rtmp:"rtmp",rtmps:"rtmp",rtsp:"rtsp",rtsps:"rtsp",http:"http",https:"http"},secureByProtocol:{rtmp:!1,rtmps:!0,rtsp:!1,rtsps:!0,http:!1,https:!0},portByProtocol:{rtmp:1935,rtmps:443,rtsp:1935,rtsps:443,http:80,https:443},composeUri:function(a,b,c,d,e){return a+"://"+b+":"+c+"/"+d+e},get:function(a){return BetaJS.Class.is_class_instance(a)?a:new this(BetaJS.Types.is_string(a)?{uri:a}:a)}}),
BetaJS.Class.extend("BetaJS.Views.VideoPlayerView.VideoMeta",{constructor:function(a){this._inherited(BetaJS.Views.VideoPlayerView.VideoMeta,"constructor"),a=BetaJS.Objs.extend({fit:"minimize",responsive:!1},a||{}),this.__update(a),this.width=a.width,this.height=a.height,this.video_width=a.video_width,this.video_height=a.video_height,this.fit_width=a.fit_width,this.fit_height=a.fit_height,this.fit=a.fit,this.image=a.image,this.responsive=a.responsive},__update:function(a){if(a.width&&a.height&&a.video_width&&a.video_height||(a.width&&a.height?a.video_width?a.video_height=Math.floor(a.height*a.video_width/a.width):a.video_height?a.video_width=Math.floor(a.width*a.video_height/a.width):(a.video_width=a.width,a.video_height=a.height):a.width?a.height=Math.floor(a.video_height*a.width/a.video_width):a.height?a.width=Math.floor(a.video_width*a.height/a.video_width):(a.width=a.video_width,a.height=a.video_height)),a.fit_width=a.video_width,a.fit_height=a.video_height,!(a.video_width==a.width&&a.video_height==a.height||"minimize"!=a.fit&&"maximize"!=a.fit)){var b=a.video_width/a.video_height,c=a.width/a.height;(c-b)*("maximize"==a.fit?1:-1)>=0?(a.fit_width=a.width,a.fit_height=Math.floor(a.width/b)):(a.fit_width=Math.floor(a.height*b),a.fit_height=a.height)}},asObject:function(){return{width:this.width,height:this.height,video_width:this.video_width,video_height:this.video_height,fit_width:this.fit_width,fit_height:this.fit_height,fit:this.fit,image:this.image,responsive:this.responsive}},updateDimensionByParent:function(a){if(this.responsive){var b=parseInt(a.css("width"),10);if(b){var c=parseInt(a.css("height"),10);c||(c=Math.floor(b*this.height/this.width)),this.width=b,this.height=c,this.__update(this)}}}},{get:function(a){return BetaJS.Class.is_class_instance(a)?a:new this(a)}}),BetaJS.Class.extend("BetaJS.Views.VideoPlayerView.PlayerRule",{constructor:function(a){this._inherited(BetaJS.Views.VideoPlayerView.PlayerRule,"constructor"),this.__player=a.player,this.__applies=a.applies,this.__options=a.options||{}},applies:function(a){return this.__applies?this.__applies.apply(this,[a]):!1},player:function(){return this.__player},new_player:function(a,b,c){return new this.__player(a,b,BetaJS.Objs.extend(c,this.__options))}}),BetaJS.Class.extend("BetaJS.Views.VideoPlayerView.Players.Player",[BetaJS.Events.EventsMixin,{constructor:function(a,b,c){this._inherited(BetaJS.Views.VideoPlayerView.Players.Player,"constructor"),this._source=a,this._id=b,this._options=c},destroy:function(){this.detach(),this._inherited(BetaJS.Views.VideoPlayerView.Players.Player,"destroy")},attach:function(){},detach:function(){}}],{playername:function(){return BetaJS.Strings.last_after(this.classname,".")},setup:function(a){this._options=a}}),BetaJS.Views.VideoPlayerView.Players.Player.extend("BetaJS.Views.VideoPlayerView.Players.ErrorPlayer",{attach:function(){var a=BetaJS.$("#"+this._id);a.html("<div class='error-player-inner'>"+(this._options.error?this._options.error:"Unknown Player Error")+"</div>");var b=a.parent(),c=a.children(),d=parseInt(b.css("width"),10),e=parseInt(b.css("height"),10);a.css("font-size",Math.floor((d+e)/50)+"px"),a.addClass("error-player-outer"),c.css("padding-left",Math.floor(d/20)+"px"),c.css("padding-right",Math.floor(d/20)+"px"),c.css("padding-top",Math.floor(e/20)+"px"),c.css("padding-bottom",Math.floor(e/20)+"px")}}),BetaJS.Views.VideoPlayerView.Players.Player.extend("BetaJS.Views.VideoPlayerView.Players.JWPlayer",{_params:function(){},attach:function(){this.cls.loadPlayer(function(){var a=this._params(),b=a.autostart;a.autostart=BetaJS.Browser.Info.isMobile()&&a.autostart,this.trigger("params",a),jwplayer(this._id).setup(a);var c=this;jwplayer(this._id).onPlay(function(a){c.trigger("play")}),jwplayer(this._id).onPause(function(a){c.trigger("pause")}),jwplayer(this._id).onComplete(function(a){c.trigger("stop")}),jwplayer(this._id).onError(function(a){c.trigger("error",a.message)}),b&&!a.autostart&&jwplayer(this._id).play()},this)},detach:function(){try{BetaJS.Browser.Info.isInternetExplorer()||jwplayer(this._id).remove()}catch(a){}}},{loadPlayer:function(a,b){window.jwplayer?a.apply(b):BetaJS.Browser.Loader.loadScript(this._options.src,function(){this._options.key&&(jwplayer.key=this._options.key),a.apply(b)},this)}}),BetaJS.Views.VideoPlayerView.Players.JWPlayer.extend("BetaJS.Views.VideoPlayerView.Players.JWPlayer6",{_params:function(){var a={file:this._source.uri};"mp4"==this._source.video&&this._source.extension!=this._source.video&&(a.type="mp4");var b={sources:[a],width:this._options.width,height:this._options.height,image:this._options.image,autostart:this._options.auto_play,repeat:this._options.loop,menubar:!1,stretching:"maximize"==this._options.fit?"uniform":"",analytics:{enabled:!1,cookies:!1}};return BetaJS.Browser.Info.flash().installed()&&BetaJS.Browser.Info.isInternetExplorer()&&(b.primary="flash"),this.cls._options.swfsrc&&(b.flashplayer=this.cls._options.swfsrc),b}}),BetaJS.Views.VideoPlayerView.Players.JWPlayer.extend("BetaJS.Views.VideoPlayerView.Players.JWPlayer5",{_params:function(){var a={mode:"html5",file:this._source.uri,image:this._options.image,width:this._options.width,height:this._options.height,menubar:!1,autostart:this._options.auto_play,repeat:this._options.loop,analytics:{enabled:!1,cookies:!1}};return this.cls._options.swfsrc&&(a.flashplayer=this.cls._options.swfsrc),a}}),BetaJS.Views.VideoPlayerView.Players.JWPlayer5.Rules={oldiOSRules:[new BetaJS.Views.VideoPlayerView.PlayerRule({applies:function(a){return"hls"==a.streamer&&"flv"!=a.video&&BetaJS.Browser.Info.isiOS()&&BetaJS.Browser.Info.iOSversion().major<5},player:BetaJS.Views.VideoPlayerView.Players.JWPlayer5}),new BetaJS.Views.VideoPlayerView.PlayerRule({applies:function(a){return"http"==a.streamer&&"flv"!=a.video&&BetaJS.Browser.Info.isiOS()&&BetaJS.Browser.Info.iOSversion().major<5},player:BetaJS.Views.VideoPlayerView.Players.JWPlayer5})]},BetaJS.Views.VideoPlayerView.Players.JWPlayer6.Rules={defaultRules:[new BetaJS.Views.VideoPlayerView.PlayerRule({applies:function(a){return"hls"==a.streamer&&"flv"!=a.video&&BetaJS.Browser.Info.isiOS()&&!BetaJS.Browser.Info.isInternetExplorer()},player:BetaJS.Views.VideoPlayerView.Players.JWPlayer6}),new BetaJS.Views.VideoPlayerView.PlayerRule({applies:function(a){return"http"==a.streamer&&"flv"!=a.video&&BetaJS.Browser.Info.isiOS()},player:BetaJS.Views.VideoPlayerView.Players.JWPlayer6}),new BetaJS.Views.VideoPlayerView.PlayerRule({applies:function(a){return"http"==a.streamer&&BetaJS.Browser.Info.isAndroid()},player:BetaJS.Views.VideoPlayerView.Players.JWPlayer6}),new BetaJS.Views.VideoPlayerView.PlayerRule({applies:function(a){return"hls"==a.streamer&&BetaJS.Browser.Info.isAndroid()},player:BetaJS.Views.VideoPlayerView.Players.JWPlayer6}),new BetaJS.Views.VideoPlayerView.PlayerRule({applies:function(a){return"http"==a.streamer&&(BetaJS.Browser.Info.flash().installed()||"flv"!=a.video)&&BetaJS.Browser.Info.isMobile()},player:BetaJS.Views.VideoPlayerView.Players.JWPlayer6}),new BetaJS.Views.VideoPlayerView.PlayerRule({applies:function(a){return"hls"==a.streamer&&BetaJS.Browser.Info.isMobile()},player:BetaJS.Views.VideoPlayerView.Players.JWPlayer6}),new BetaJS.Views.VideoPlayerView.PlayerRule({applies:function(a){return"http"==a.streamer&&BetaJS.Browser.Info.isInternetExplorer()},player:BetaJS.Views.VideoPlayerView.Players.JWPlayer6}),new BetaJS.Views.VideoPlayerView.PlayerRule({applies:function(a){return"flv"==a.video&&BetaJS.Browser.Info.flash().installed()},player:BetaJS.Views.VideoPlayerView.Players.JWPlayer6}),new BetaJS.Views.VideoPlayerView.PlayerRule({applies:function(a){return"http"==a.streamer&&(BetaJS.Browser.Info.flash().installed()||"flv"!=a.video)},player:BetaJS.Views.VideoPlayerView.Players.JWPlayer6}),new BetaJS.Views.VideoPlayerView.PlayerRule({applies:function(a){return"rtmp"==a.streamer&&BetaJS.Browser.Info.flash().installed()},player:BetaJS.Views.VideoPlayerView.Players.JWPlayer6}),new BetaJS.Views.VideoPlayerView.PlayerRule({applies:function(a){return"rtsp"==a.streamer},player:BetaJS.Views.VideoPlayerView.Players.JWPlayer6}),new BetaJS.Views.VideoPlayerView.PlayerRule({applies:function(a){return"hls"==a.streamer},player:BetaJS.Views.VideoPlayerView.Players.JWPlayer6})]},BetaJS.Views.VideoPlayerView.Players.JWPlayer56={},BetaJS.Views.VideoPlayerView.Players.JWPlayer56.IncompatabilityRules=[new BetaJS.Views.VideoPlayerView.PlayerRule({applies:function(a){var b=BetaJS.Browser.Info.flash();return b.installed()&&!b.versionAtLeast(10)},player:BetaJS.Views.VideoPlayerView.Players.ErrorPlayer,options:{error:'To play this video, you need to update your version of Flash. <a href="http://get.adobe.com/flashplayer">Click here to update</a>.'}}),new BetaJS.Views.VideoPlayerView.PlayerRule({applies:function(a){var b=BetaJS.Browser.Info;if(b.isMobile())return!1;var c=b.flash();return c.installed()||!c.supported()?!1:b.isWindows()?!b.isInternetExplorer()||b.internetExplorerVersion()<=9:!(!b.isFirefox()&&!b.isOpera())},player:BetaJS.Views.VideoPlayerView.Players.ErrorPlayer,options:{error:'To play this video, you need to install Flash. <a href="http://get.adobe.com/flashplayer">Click here to install</a>.'}})],BetaJS.Views.VideoPlayerView.Players.JWPlayer56.Rules=BetaJS.Views.VideoPlayerView.Players.JWPlayer56.IncompatabilityRules.concat(BetaJS.Views.VideoPlayerView.Players.JWPlayer5.Rules.oldiOSRules.concat(BetaJS.Views.VideoPlayerView.Players.JWPlayer6.Rules.defaultRules)),BetaJS.Views.VideoPlayerView.setup({rules:BetaJS.Views.VideoPlayerView.Players.JWPlayer5.Rules.oldiOSRules.concat(BetaJS.Views.VideoPlayerView.Players.JWPlayer6.Rules.defaultRules)}),function(){var a={__recorders:{},get:function(b){return b in this.__recorders||(this.__recorders[b]=new a.Recorder(b)),this.__recorders[b]},remove:function(a){delete this.__recorders[a]},__events:function(a){return this.get(a).__events},events:["debug","init","error","exception","microphone_state","camera_state","security_flash_access","recorder_state"],apicalls:["config_get","config_set","microphone_info","microphone_state","microphone_get","microphone_set","microphone_bind","camera_info","camera_state","camera_get","camera_set","camera_bind","device_info","device_state","security_info","security_flash_acquire","recorder_state","recorder_activate","recorder_deactivate","recorder_start","recorder_stop","recorder_show_snapshots","recorder_hide_snapshots","recorder_select_snapshot","recorder_light_level"]};a.Recorder=function(a){this.__selector=a,this.__bound=!1,this.__events={},this.__ready_callback=[],this.__bind()},a.Recorder.prototype.jquery=function(){return window.BetaJS?window.BetaJS.$:$||jQuery},a.Recorder.prototype.__bind=function(){if(!this.__bound){var b=this.jquery();if(this.__$selector=b(this.__selector),this.__embed=BetaJS.Browser.FlashHelper.getFlashObject(this.__$selector),this.__$embed=b(this.__embed),this.__embed)for(this.__bound=!0,this.__ready=!1,i=0;i<a.events.length;++i)this.__add_event(a.events[i])}},a.Recorder.prototype.api=function(){return this.__bind(),this.__embed&&this.__ready?this.__embed:null},a.Recorder.prototype.__add_event=function(a){var b=this;this.__events[a]=function(){var c=arguments;BetaJS.Async.eventually(function(){if("init"==a){b.__ready=!0;for(var d=0;d<b.__ready_callback.length;++d){var e=b.__ready_callback[d];e.callback.apply(e.context||b)}}b.__$selector.trigger("recorder_"+a,c)})}},a.Recorder.prototype.ready=function(a,b){this.__ready?a.apply(b||this):this.__ready_callback.push({callback:a,context:b})},a.Recorder.prototype.on=function(a,b,c){this.__$selector.on("recorder_"+a,b,c)},a.Recorder.prototype.off=function(a,b,c){this.__$selector.off("recorder_"+a,b,c)},BetaJS?(BetaJS.Apis=BetaJS.Apis||{},BetaJS.Apis.VideoRecorder=a):window.BetaJSVideoRecorder=a}.call(),BetaJS.Views.View.extend("BetaJS.Views.SimpleVideoRecorder",{_notifications:{activate:"__attach",deactivate:"__detach"},constructor:function(a){this._inherited(BetaJS.Views.SimpleVideoRecorder,"constructor",a),this._setOption(a,"object",null),this._setOptionProperty(a,"recorder_width",640),this._setOptionProperty(a,"recorder_height",480),this._setOptionProperty(a,"responsive",!1),this._setOptionProperty(a,"camera_width",this.get("recorder_width")),this._setOptionProperty(a,"camera_height",this.get("recorder_height")),this._setOptionProperty(a,"camera_fps",30),this._setOptionProperty(a,"recorder_bg_color","#333333"),this._setOptionProperty(a,"initial_image",""),this._setOptionProperty(a,"recorder_swf","betajs-video-recorder.swf"),this._setOptionProperty(a,"disable_swf_cache",!1),this._setOptionProperty(a,"flip_video",!1),this._setOptionProperty(a,"incognito",!1),this._setOptionProperty(a,"snapshots",0),this._setOptionProperty(a,"snapshots_post",""),this._setOptionProperty(a,"snapshots_quality",90),this._setOptionProperty(a,"snapshots_type","jpg"),this.set("snapshot_config",BetaJS.Objs.extend({margin_percentage:.2,frame_percentage:.9},a.snapshot_config||{})),this.set("play_stream",BetaJS.Objs.extend({file_type:"mp4",server:"",file:"",vcodec:"h264",cookie:""},a.play_stream||{})),this.set("record_stream",BetaJS.Objs.extend({file_type:"mp4",server:"",file:"",vcodec:"h264",acodec:"nellymoser",cookie:""},a.record_stream||{}))},__attach:function(){var a=this;this.__recorder=BetaJS.Apis.VideoRecorder.get(this.__object),this.__recorder.ready(function(){BetaJS.Objs.iter(BetaJS.Apis.VideoRecorder.events,function(b){this.__recorder.on(b,function(){var c=Array.prototype.slice.call(arguments,1);BetaJS.Async.eventually(function(){a.trigger.apply(a,[b].concat(c))})})},this)},this)},__detach:function(){BetaJS.Apis.VideoRecorder.remove(this.__object),this.__object=null},recorder:function(){return this.__recorder},api:function(){return this.recorder().api()},_render:function(){if(this.get("responsive")){var a=parseInt(this.$el.parent().css("width"),10);if(a){var b=parseInt(this.$el.parent().css("height"),10);b||(b=Math.floor(a*this.get("recorder_height")/this.get("recorder_width"))),this.set("recorder_width",a),this.set("recorder_height",b)}}if(this.__object)this.$el.html(""),BetaJS.$(this.__object).detach().appendTo(this.$el),this.set("recorder_width",this.$("object").outerWidth()),this.set("recorder_height",this.$("object").outerheight());else{var c="video-recorder-view-"+this.cid();this.__object="#"+c,BetaJS.Browser.FlashHelper.embedFlashObject(this.$el,{objectId:c,width:this.get("recorder_width"),height:this.get("recorder_height"),flashFile:this.get("recorder_swf"),forceReload:this.get("disable_swf_cache"),bgcolor:this.get("recorder_bg_color"),parentBgcolor:null===this.get("recorder_bg_color"),fixHalfPixels:!0,FlashVars:{camera_width:this.get("camera_width"),camera_height:this.get("camera_height"),camera_fps:this.get("camera_fps"),initial_image:this.get("initial_image"),flip_video:this.get("flip_video"),incognito:this.get("incognito"),snapshots:this.get("snapshots"),snapshots_post:this.get("snapshots_post"),snapshots_type:this.get("snapshots_type"),snapshots_quality:this.get("snapshots_quality"),play_stream:this.get("play_stream"),record_stream:this.get("record_stream"),js_namespace:"BetaJS.Apis.VideoRecorder.__events('#"+c+"')."}}),this.$el.css("width",this.get("recorder_width")+"px"),this.$el.css("height",this.get("recorder_height")+"px")}}}),BetaJS.Views.ListContainerView.extend("BetaJS.Views.VideoRecorder",{_notifications:{activate:"__attach",deactivate:"__detach"},constructor:function(a){a=a||{},a.el_classes="video-recorder-outer",a.positioning="none",this._inherited(BetaJS.Views.VideoRecorder,"constructor",a),a=BetaJS.Objs.extend(BetaJS.Objs.clone(this.cls._options,1),a),this._setOptionProperty(a,"recording_countdown",0),this._setOptionProperty(a,"type","recorder"),this._setOptionProperty(a,"player_remaining_time",!1),this._setOptionProperty(a,"allow_rerecord",!0),this._setOptionProperty(a,"rerecord_on_snapshots",!0),this._setOptionProperty(a,"rerecord_limit",!1),this.set("can_record",this.computed(function(){return this.get("allow_rerecord")&&(this.get("rerecord_limit")===!1||this.get("rerecord_limit")>=0)},["allow_rerecord","rerecord_limit"])),this.set("can_rerecord",this.computed(function(){return this.get("allow_rerecord")&&(this.get("rerecord_limit")===!1||this.get("rerecord_limit")>=0)},["allow_rerecord","rerecord_limit"])),this._setOptionProperty(a,"time_limit",null),this._setOptionProperty(a,"device_test",!0),this._setOptionProperty(a,"first_screen",!0),this._setOptionProperty(a,"recover_streams",!1),this._setOptionProperty(a,"face_outline",!1),this._setOptionProperty(a,"incognito",!1),this._setOptionProperty(a,"simulate",!1),this._setOptionProperty(a,"disable_timer",!1),this._setOptionProperty(a,"disable_snapshots",!1),this._setOptionProperty(a,"immediate_playback",!1),this._setOptionProperty(a,"recorder_bg_color",null),this._setOptionProperty(a,"snapshots",0),this._setOptionProperty(a,"snapshots_post",""),this._setOptionProperty(a,"recorder_config",{}),this._setOptionProperty(a,"player_config",{}),this.get("disable_snapshots")&&this.set("snapshots_post",""),this._setOptionProperty(a,"snapshots_type","jpg"),this._setOptionProperty(a,"snapshots_quality",90),this._setOptionProperty(a,"responsive",!1),this._setOptionProperty(a,"external_upload",!1),this._setOptionProperty(a,"play_stream",{}),this._setOptionProperty(a,"record_stream",{}),this._setOptionProperty(a,"margin_percentage",.3),this._setOptionProperty(a,"frame_percentage",.9);var b=a.record_stream;this.__recorder_servers=b.servers,delete b.servers,b.server=this.__recorder_servers.shift(),this.__camera_fps=a.camera_fps||30,this.__simple_video_recorder=this.addChild(new BetaJS.Views.SimpleVideoRecorder({responsive:this.get("responsive"),recorder_width:a.recorder_width,recorder_height:a.recorder_height,camera_width:a.camera_width,camera_height:a.camera_height,camera_fps:a.camera_fps,recorder_swf:a.recorder_swf,disable_swf_cache:a.disable_swf_cache,recorder_bg_color:this.get("recorder_bg_color"),initial_image:a.initial_image,snapshots:a.snapshots,snapshots_post:a.snapshots_post,snapshots_type:a.snapshots_type,snapshots_quality:a.snapshots_quality,snapshot_config:{margin_percentage:this.get("margin_percentage"),frame_percentage:this.get("frame_percentage")},flip_video:a.flip_video,incognito:this.get("incognito"),play_stream:a.play_stream||{},record_stream:b,el_classes:"video-recorder-flash"})),this.__device_info=null,this.__device_state=null,this.events().on("init",function(a){this.__device_info=a.info,this.__device_state=a.state,this.__security_info=a.security},this),this.on("client_error",function(a){this.trigger("error","client",a)},this),this.on("server_error",function(a){this.trigger("error","server",a)},this),this.events().on("error",function(a){"Server timed out. Maybe the port is blocked by your Firewall?"===a&&this.__recorder_servers.length>0||this.trigger("client_error",a)},this),this.events().on("exception",function(a){this.trigger("client_error",a)},this),this.__waiting_for_flash_view=this.addChild(new BetaJS.Views.VideoRecorder.Views.WaitingForFlashView({parent:this,visible:!1,label:BetaJS.Locales.get("video_recorder.waiting_for_flash")})),this.__face_outline_view=this.addChild(new BetaJS.Views.View({parent:this,visible:!1,el_classes:"video-recorder-face-position"})),this.__state_host=this._auto_destroy(new BetaJS.States.Host),this.__state_host.view=this,this.__state_host.on("start",function(a){this.trigger("state",a),this.trigger("state:"+a)},this)},averageFrameRate:function(){return this.__camera_fps},state:function(){return this.__state_host.state()},user_error:function(a){this.state().next("UserError",{error_msg:a})},events:function(){return this.__simple_video_recorder},recorderWidth:function(){return this.__simple_video_recorder.get("recorder_width")},recorderHeight:function(){return this.__simple_video_recorder.get("recorder_height")},_render:function(){if(this.get("responsive")){var a=parseInt(this.$el.parent().css("width"),10);if(a){var b=parseInt(this.$el.parent().css("height"),10);b||(b=Math.floor(a*this.get("recorder_height")/this.get("recorder_width"))),this.set("recorder_width",a),this.set("recorder_height",b)}}this._inherited(BetaJS.Views.VideoRecorder,"_render")},__attach:function(){this.__time_started=BetaJS.Time.now(),this.$el.css("width",this.recorderWidth()+"px"),this.$el.css("height",this.recorderHeight()+"px"),this.__state_host.initialize("BetaJS.Views.VideoRecorder.States.Init"),this.__timerObj=new BetaJS.Timers.Timer({delay:25,fire:this.__timer,context:this}),this.__cameraSignal=!0},__detach:function(){this.__timerObj.destroy(),this.__state_host.finalize()},__timer:function(){if(this.api()){if(this.__timerObj.fire_count()%200===0){var a=this.state().state_name();if("RecorderDeviceReady"!==a&&"RecorderBeforeRecording"!==a&&"RecorderRecording"!==a)return;var b=this.lightLevel(),c=b>=1;c!==this.__cameraSignal&&(this.__cameraSignal=c,this.trigger(c?"camera_signal":"camera_nosignal"))}this.trigger("timer")}},recorder:function(){return this.__simple_video_recorder.recorder()},api:function(a){if(this._cached_api||(this._cached_api=this.recorder().api()),a||!BetaJS.Browser.Info.isSafari()&&!BetaJS.Browser.Info.isChrome())return this._cached_api;if(this._cached_api){var b=Math.floor(1e5*Math.random());try{this._cached_api.echo(b)!=b&&(this._cached_api=null)}catch(c){this._cached_api=null}if(this._cached_api)try{this._cached_api.throttled()&&(this._cached_api=null)}catch(c){}}return this.__api_is_active&&!this._cached_api&&(this.__api_is_active=!1,this.state()&&!this.__dont_cancel&&this.state().next("WaitingForFlash")),this.__api_is_active=!!this._cached_api,this._cached_api},device_info:function(a){return a&&(this.__device_info=this.api().device_info()),this.__device_info},device_state:function(a){return a&&(this.__device_state=this.api().device_state()),this.__device_state},security_info:function(a){return a&&(this.__security_info=this.api().security_info()),this.__security_info},stop:function(){this.player_view&&this.player_view.stop&&this.player_view.stop()},play:function(){this.player_view&&this.player_view.play&&this.player_view.play()},rerecord:function(){this.set("type","recorder"),this.trigger("recording_discarded");try{this.api().recorder_stop()}catch(a){}try{this.api().recorder_deactivate()}catch(a){}this.state().next("RecorderSecurityCheck")},isRecording:function(){return"RecorderRecording"===this.state().state_name()},stopRecord:function(){this.state().stop_recording&&this.state().stop_recording()},lightLevel:function(){return this.api(!0)?this.api(!0).recorder_light_level():null},soundLevel:function(){return this.api(!0)?this.api(!0).microphone_state().activity:null}},{_options:{disable_swf_cache:!1,recording_countdown:5,allow_rerecord:!0,snapshots:4,flip_video:!0,player_remaining_time:!0,camera_width:640,camera_height:480},setup:function(a){this._options=BetaJS.Objs.extend(this._options,a)}}),BetaJS.Views.LabelView.extend("BetaJS.Views.VideoRecorder.Views.WaitingForFlashView",{constructor:function(a){var b=Math.min(a.parent.recorderWidth(),a.parent.recorderHeight());a.el_classes="video-recorder-waiting-for-flash-view",a.el_styles={"font-size":Math.round(b/15)+"px","line-height":Math.round(b/14)+"px"},this._inherited(BetaJS.Views.VideoRecorder.Views.WaitingForFlashView,"constructor",a)}}),BetaJS.Views.View.extend("BetaJS.Views.VideoRecorder.Views.SecurityView",{constructor:function(a){var b=243,c=136,d=80,e=94,f=116;a.el_classes=["video-recorder-security-"+a.side+"-view"],a.html="left"==a.side?"&#9312;&#8594;":"&#8592;&#9313;";var g=a.parent.recorderWidth(),h=(a.parent.recorderHeight(),Math.floor((g-b)/2/2/2)),i="left"==a.side?(d+e)/2:f;a.el_styles={"font-size":h+"px","line-height":h+"px","margin-top":Math.floor(i-c/2-h/2)+"px","margin-left":"4px","margin-right":"4px"},this._inherited(BetaJS.Views.VideoRecorder.Views.SecurityView,"constructor",a)}}),BetaJS.Views.View.extend("BetaJS.Views.VideoRecorder.Views.ChromeArrowView",{constructor:function(a){a.el_classes=[BetaJS.Browser.Info.isWindows()?"video-recorder-chrome-arrow-view-windows":"video-recorder-chrome-arrow-view-default"],a.el_styles={top:"0px"},a.html="&#8593;",this._inherited(BetaJS.Views.VideoRecorder.Views.ChromeArrowView,"constructor",a)}}),BetaJS.Views.LabelView.extend("BetaJS.Views.VideoRecorder.Views.CountdownView",{constructor:function(a){var b=Math.min(a.parent.recorderWidth(),a.parent.recorderHeight());this._inherited(BetaJS.Views.VideoRecorder.Views.CountdownView,"constructor",BetaJS.Objs.extend({el_classes:"video-recorder-countdown-view video-recorder-font",button_container_element:"div",el_styles:{width:Math.round(b/4)+"px",height:Math.round(b/4)+"px","line-height":Math.round(b/4)+"px","font-size":Math.round(b/8)+"px"},modules:[BetaJS.Views.Modules.Centering.both()]},a||{}))}}),BetaJS.Views.LabelView.extend("BetaJS.Views.VideoRecorder.Views.TimerView",{constructor:function(a){var b=Math.min(a.parent.recorderWidth(),a.parent.recorderHeight());this._inherited(BetaJS.Views.VideoRecorder.Views.TimerView,"constructor",BetaJS.Objs.extend({el_classes:"video-recorder-timer-view video-recorder-font",button_container_element:"div",el_styles:{"line-height":Math.round(b/16)+"px","font-size":Math.round(b/16)+"px"}},a||{})),this._setOptionProperty(a,"time",0),this._setOptionProperty(a,"max_time",null),this.set("label",this.computed(function(){var a=this.get("time");return this.get("max_time")&&(a=Math.max(0,this.get("max_time")-a)),BetaJS.TimeFormat.format(BetaJS.TimeFormat.ELAPSED_MINUTES_SECONDS,a)},["format","time","max_time"]))}}),BetaJS.Views.View.extend("BetaJS.Views.VideoRecorder.Views.BlinkingRecordView",{constructor:function(a){Math.min(a.parent.recorderWidth(),a.parent.recorderHeight());this._inherited(BetaJS.Views.VideoRecorder.Views.BlinkingRecordView,"constructor",BetaJS.Objs.extend({html:"<div></div>",children_classes:"video-recorder-blinking-record",children_styles:{width:"10px",height:"10px"}},a||{})),this.__timer=new BetaJS.Timers.Timer({delay:500,context:this,fire:this.__fire})},destroy:function(){this.__timer.destroy(),this._inherited(BetaJS.Views.VideoRecorder.Views.BlinkingRecordView,"destroy")},__fire:function(){this.isActive()&&this.$el.css("visibility","hidden"==this.$el.css("visibility")?"visible":"hidden")}}),BetaJS.Views.ButtonView.extend("BetaJS.Views.VideoRecorder.Views.BarButtonView",{constructor:function(a){var b=a.parent.recorderWidth(),c=a.parent.recorderHeight(),d=Math.round(Math.min(b,c)/15);this._inherited(BetaJS.Views.VideoRecorder.Views.BarButtonView,"constructor",BetaJS.Objs.extend({css:{"default":"video-recorder-bar-button-view",disabled:"video-recorder-bar-button-view-disabled"},button_container_element:"div",children_styles:{"line-height":d+"px","min-width":d+"px","font-size":Math.round(d/2)+"px"}},a||{}))}}),BetaJS.Views.ListContainerView.extend("BetaJS.Views.VideoRecorder.Views.ButtonBarView",{constructor:function(a){a.parent.recorderWidth(),a.parent.recorderHeight();this._inherited(BetaJS.Views.VideoRecorder.Views.ButtonBarView,"constructor",BetaJS.Objs.extend({el_classes:"video-recorder-button-bar-view",positioning:"float",modules:[BetaJS.Views.Modules.Centering.horizontal()]},a||{}))}}),BetaJS.Views.ProgressView.extend("BetaJS.Views.VideoRecorder.Views.ProgressBarView",{constructor:function(a){var b=a.parent.recorderHeight(),c=Math.round(b/12);this._inherited(BetaJS.Views.VideoRecorder.Views.ProgressBarView,"constructor",BetaJS.Objs.extend({el_classes:"video-recorder-progress-bar",children_styles:{"font-size":c+"px","line-height":c+"px"},css:{outer:"video-recorder-progress-bar-outer",inner:"video-recorder-progress-bar-inner"}},a||{}))}}),BetaJS.Views.ListContainerView.extend("BetaJS.Views.VideoRecorder.Views.SnapshotFramesView",{constructor:function(a){this._inherited(BetaJS.Views.VideoRecorder.Views.SnapshotFramesView,"constructor",a);for(var b=a.parent.get("margin_percentage"),c=1-b,d=a.parent.get("frame_percentage"),e=1-d,f=this,g=a.parent.recorderWidth(),h=a.parent.recorderHeight(),i=a.number,j=Math.ceil(Math.sqrt(i)),k=j,l=b/2*g,m=b/2*h,n=c*d*g/j,o=c*d*h/k,p=c*e*g/(j+1),q=c*e*h/(k+1),r=function(){f.trigger("click",this.get("index"))},s=function(b,c,d){var e=this.addChild(new BetaJS.Views.ButtonView({properties:{index:d},el_styles:{left:Math.floor(l+p*(c+1)+n*c-4)+"px",top:Math.floor(m+q*(b+1)+o*b-4)+"px",width:Math.floor(n)+"px",height:Math.floor(o)+"px"},el_classes:"video-recorder-snapshot-frame-view"+(BetaJS.Browser.Info.isInternetExplorer()?"-ie":""),button_container_element:a.frames?"img":"div",children_styles:{height:"100%"}}));if(e.on("click",r),a.frames){var f=a.frames[d],g=BetaJS.Media.WebRTC.Support.globals(),h=g.URL.createObjectURL(f);e.on("render",function(){var a=e.$el.find("img");a.get(0).src=h})}},t=0;k>t;++t)for(var u=0;j>u;++u){var v=u+t*j;i>v&&s.call(this,t,u,v)}}}),BetaJS.Views.View.extend("BetaJS.Views.VideoRecorder.Views.InitialView",{_templates:{"default":BetaJS.Templates.Cached["initial-template"]},_events:{"click [data-selector='record-video']":"__record_video","click [data-selector='upload-video']":"__upload_video"},constructor:function(a){a=a||{},a.el_classes=["video-recorder-initial"],this._inherited(BetaJS.Views.VideoRecorder.Views.InitialView,"constructor",a),this.set("info_message",a.info_message?a.info_message:""),this.set("external_upload",a.parent.get("external_upload"))},__record_video:function(){this.trigger("record")},__upload_video:function(){this.trigger("upload")}}),BetaJS.Views.View.extend("BetaJS.Views.VideoRecorder.Views.ProgressView",{_dynamics:{"default":BetaJS.Templates.Cached["video-recorder-progress-template"]},constructor:function(a){a=a||{},a.el_classes=["video-recorder-progress"],this._inherited(BetaJS.Views.VideoRecorder.Views.ProgressView,"constructor",a),this._setOptionProperty(a,"progress",0),this._setOptionProperty(a,"label","Label"),this.set("progress_label",this.computed(function(){return this.get("label")+(Math.floor(100*this.get("progress"))>0?": "+Math.floor(100*this.get("progress"))+"%":"...")},["progress","label"]))}}),BetaJS.Views.View.extend("BetaJS.Views.VideoRecorder.Views.ErrorView",{_templates:{"default":BetaJS.Templates.Cached["video-recorder-error-template"]},_events:{"click .call-to-action":"__call_to_action"},constructor:function(a){a=a||{},a.el_classes=["video-recorder-error"],this._inherited(BetaJS.Views.VideoRecorder.Views.ErrorView,"constructor",a),this._setOptionProperty(a,"error",""),this._setOptionProperty(a,"call_to_action","")},__call_to_action:function(){this.trigger("call_to_action")}}),BetaJS.Views.LabelView.extend("BetaJS.Views.VideoRecorder.Views.SimpleMessageView",{constructor:function(a){var b=Math.min(a.parent.recorderWidth(),a.parent.recorderHeight());a.el_classes="video-recorder-simple-message-view",a.el_styles=BetaJS.Objs.extend({"font-size":Math.round(b/15)+"px","line-height":Math.round(b/14)+"px"},a.el_styles),this._inherited(BetaJS.Views.VideoRecorder.Views.MessageView,"constructor",a)}}),BetaJS.Views.View.extend("BetaJS.Views.VideoRecorder.Views.DevicePopupView",{_templates:{"default":BetaJS.Templates.Cached["video-recorder-device-popup-template"]},_events:{"change input":"__submit"},__submit:function(a){this.trigger("submit",this.$el.find(":checked").val())}}),BetaJS.States.State.extend("BetaJS.Views.VideoRecorder.States.State",{constructor:function(a,b,c){this._inherited(BetaJS.Views.VideoRecorder.States.State,"constructor",a,b,c),this.__view=a.view,this.__views=[]},_:function(a){return BetaJS.Locales.get("video_recorder."+a)},view:function(){return this.__view},events:function(){return this.__view.events()},_start_time:function(){return this.__start_time},_elapsed_time:function(){return BetaJS.Time.ago(this.__start_time)},api:function(){return this.__view.api()},apiCallResilient:function(a,b,c){try{return this.api()[a].apply(this.api(),b)}catch(d){if(0>=c)throw d;return this.apiCallResilient(a,b,c)}},device_info:function(a){return this.__view.device_info(a)},device_state:function(a){return this.__view.device_state(a);
},security_info:function(a){return this.__view.security_info(a)},_timer_state:function(){},_start_state:function(){},_end_state:function(){},_timer:function(){this._timer_state()},_start:function(){this.__start_time=BetaJS.Time.now(),this.__view.on("timer",function(){if(this._started&&!this._stopped)try{this._timer()}catch(a){}},this),this._start_state()},_end:function(){this.view().set("has_focus",!1),this._end_state(),BetaJS.Objs.iter(this.__views,function(a){a.destroy()},this),this.__view.events().off(null,null,this),this.__view.off(null,null,this)},addView:function(a,b){b=b||{},b.parent=this.__view;var c=this.__view.addChild(new a(b));return this.__views.push(c),c}}),BetaJS.Locales.register({flash_not_supported:"Sorry, you can't use this device to record your video (Flash is required).",flash_not_installed:'To record yourself on video, you need to install Flash. <a href="http://get.adobe.com/flashplayer">Click here to install</a>.',flash_old_version:'To record yourself on video, you need to update your version of Flash. <a href="http://get.adobe.com/flashplayer">Click here to update</a>.',no_camera:"Sorry, we could not detect a camera on your device. Please use a device with a working camera.",no_microphone:"Sorry, we could not detect a microphone on your device. Please use a device with a working microphone.",no_visual:"Sorry, we cannot see you.",no_sound:"Sorry, we cannot hear you.",browser_permission:"We need access to your camera and microphone.",microphone_test:"Testing Microphone...",camera_test:"Testing Camera...",say_something:"Say something so we can test your microphone.",also_try_different_camera:"You can also try to select a different camera.",try_different_camera:"Try to select a different camera.",try_different_microphone:"Try to select a different microphone.",record_label:"Record",recording_get_ready:"Get Ready...",video_file_too_large:"Your video file is too large, please try again with a smaller video file.",uploading_label:"Uploading",microphone_settings:"Microphone settings",camera_settings:"Camera settings",camera_light_level:"Your lighting is fairly poor",external_upload:"Upload Video",unsupported_video_type:"Please upload: %s",recording_start:"Go!",recording_starts_in:"Starts in",record_video:"Record your Video",stop_recording:"Stop",select_snapshot:"Pick a Thumbnail",uploading_video:"Your video is being uploaded",rerecord_label:"Re-record?",rerecord_confirm:"Are you sure you want to re-record your video?",abort_record:"Wait",rerecord_affirmation:"Don't worry, you can always re-record.",rerecord_multiple_affirmation:"Don't worry, you can re-record %d more times.",rerecord_double_affirmation:"Don't worry, you can re-record twice.",rerecord_single_affirmation:"Don't worry, you can re-record one more time.",rerecord_immediately:"Re-record",waiting_for_flash:"Waiting for Flash. Try clicking at the top of this box to activate.",select_file_action:"Upload your Video",select_file_action_mobile:"Record your Video",reselect_file_action:"Re-upload your Video",reselect_file_action_mobile:"Re-record your Video",external_record_label:"Record your Video",try_again:"Try again?",processing_label:"Processing",uploading_file_failed:"Uploading failed, please try again.",could_not_process_file:"We could not process your video, please try again.",device_unsupported:"Your device is currently not supported. We are very sorry."},"video_recorder"),BetaJS.Locales.register({flash_not_supported:"&#x417;&#x430; &#x441;&#x44A;&#x436;&#x430;&#x43B;&#x435;&#x43D;&#x438;&#x435; &#x43D;&#x435; &#x43C;&#x43E;&#x436;&#x435;&#x442;&#x435; &#x434;&#x430; &#x438;&#x437;&#x43F;&#x43E;&#x43B;&#x437;&#x432;&#x430;&#x442;&#x435; &#x442;&#x43E;&#x432;&#x430; &#x443;&#x441;&#x442;&#x440;&#x43E;&#x439;&#x441;&#x442;&#x432;&#x43E;, &#x437;&#x430; &#x434;&#x430; &#x437;&#x430;&#x43F;&#x438;&#x448;&#x435;&#x442;&#x435; &#x432;&#x438;&#x434;&#x435;&#x43E;&#x442;&#x43E; &#x441;&#x438; (&#x43D;&#x435;&#x43E;&#x431;&#x445;&#x43E;&#x434;&#x438;&#x43C; &#x435; Flash).",flash_not_installed:'&#x417;&#x430; &#x434;&#x430; &#x441;&#x435; &#x437;&#x430;&#x43F;&#x438;&#x448;&#x435;&#x442;&#x435; &#x43D;&#x430; &#x432;&#x438;&#x434;&#x435;&#x43E;, &#x435; &#x43D;&#x435;&#x43E;&#x431;&#x445;&#x43E;&#x434;&#x438;&#x43C;&#x43E; &#x434;&#x430; &#x438;&#x43D;&#x441;&#x442;&#x430;&#x43B;&#x438;&#x440;&#x430;&#x442;&#x435; Flash. <a href="http://get.adobe.com/flashplayer">&#x41A;&#x43B;&#x438;&#x43A;&#x43D;&#x435;&#x442;&#x435; &#x442;&#x443;&#x43A; &#x437;&#x430; &#x438;&#x43D;&#x441;&#x442;&#x430;&#x43B;&#x438;&#x440;&#x430;&#x43D;&#x435;.</a>',flash_old_version:'&#x417;&#x430; &#x434;&#x430; &#x441;&#x435; &#x437;&#x430;&#x43F;&#x438;&#x448;&#x435;&#x442;&#x435; &#x43D;&#x430; &#x432;&#x438;&#x434;&#x435;&#x43E;, &#x435; &#x43D;&#x435;&#x43E;&#x431;&#x445;&#x43E;&#x434;&#x438;&#x43C;&#x43E; &#x434;&#x430; &#x43E;&#x431;&#x43D;&#x43E;&#x432;&#x438;&#x442;&#x435; Flash &#x432;&#x435;&#x440;&#x441;&#x438;&#x44F;&#x442;&#x430; &#x441;&#x438;. <a href="http://get.adobe.com/flashplayer">&#x41A;&#x43B;&#x438;&#x43A;&#x43D;&#x435;&#x442;&#x435; &#x442;&#x443;&#x43A; &#x437;&#x430; &#x430;&#x43A;&#x442;&#x443;&#x430;&#x43B;&#x438;&#x437;&#x438;&#x440;&#x430;&#x43D;&#x435;</a>.',no_camera:"&#x417;&#x430; &#x441;&#x44A;&#x436;&#x430;&#x43B;&#x435;&#x43D;&#x438;&#x435;, &#x43D;&#x435; &#x43C;&#x43E;&#x436;&#x430;&#x445;&#x43C;&#x435; &#x434;&#x430; &#x43E;&#x442;&#x43A;&#x440;&#x438;&#x435;&#x43C; &#x43A;&#x430;&#x43C;&#x435;&#x440;&#x430; &#x43D;&#x430; &#x412;&#x430;&#x448;&#x435;&#x442;&#x43E; &#x443;&#x441;&#x442;&#x440;&#x43E;&#x439;&#x441;&#x442;&#x432;&#x43E;&#x442;&#x43E;. &#x41C;&#x43E;&#x43B;&#x44F;, &#x438;&#x437;&#x43F;&#x43E;&#x43B;&#x437;&#x432;&#x430;&#x439;&#x442;&#x435; &#x443;&#x441;&#x442;&#x440;&#x43E;&#x439;&#x441;&#x442;&#x432;&#x43E; &#x441; &#x43A;&#x430;&#x43C;&#x435;&#x440;&#x430; &#x432; &#x438;&#x437;&#x43F;&#x440;&#x430;&#x432;&#x43D;&#x43E;&#x441;&#x442;.",no_microphone:"&#x417;&#x430; &#x441;&#x44A;&#x436;&#x430;&#x43B;&#x435;&#x43D;&#x438;&#x435;, &#x43D;&#x435; &#x43C;&#x43E;&#x436;&#x430;&#x445;&#x43C;&#x435; &#x434;&#x430; &#x43E;&#x442;&#x43A;&#x440;&#x438;&#x435;&#x43C; &#x43C;&#x438;&#x43A;&#x440;&#x43E;&#x444;&#x43E;&#x43D; &#x43D;&#x430; &#x412;&#x430;&#x448;&#x435;&#x442;&#x43E; &#x443;&#x441;&#x442;&#x440;&#x43E;&#x439;&#x441;&#x442;&#x432;&#x43E;. &#x41C;&#x43E;&#x43B;&#x44F;, &#x438;&#x437;&#x43F;&#x43E;&#x43B;&#x437;&#x432;&#x430;&#x439;&#x442;&#x435; &#x443;&#x441;&#x442;&#x440;&#x43E;&#x439;&#x441;&#x442;&#x432;&#x43E; &#x441; &#x43C;&#x438;&#x43A;&#x440;&#x43E;&#x444;&#x43E;&#x43D; &#x432; &#x438;&#x437;&#x43F;&#x440;&#x430;&#x432;&#x43D;&#x43E;&#x441;&#x442;.",no_visual:"&#x417;&#x430; &#x441;&#x44A;&#x436;&#x430;&#x43B;&#x435;&#x43D;&#x438;&#x435;, &#x43D;&#x435; &#x43C;&#x43E;&#x436;&#x435;&#x43C; &#x434;&#x430; &#x412;&#x438; &#x432;&#x438;&#x434;&#x438;&#x43C;.",no_sound:"&#x417;&#x430; &#x441;&#x44A;&#x436;&#x430;&#x43B;&#x435;&#x43D;&#x438;&#x435;, &#x43D;&#x435; &#x43C;&#x43E;&#x436;&#x435;&#x43C; &#x434;&#x430; &#x412;&#x438; &#x447;&#x443;&#x435;&#x43C;.",browser_permission:"&#x418;&#x43C;&#x430;&#x43C;&#x435; &#x43D;&#x443;&#x436;&#x434;&#x430; &#x43E;&#x442; &#x434;&#x43E;&#x441;&#x442;&#x44A;&#x43F; &#x434;&#x43E; &#x43A;&#x430;&#x43C;&#x435;&#x440;&#x430;&#x442;&#x430; &#x438; &#x43C;&#x438;&#x43A;&#x440;&#x43E;&#x444;&#x43E;&#x43D;&#x430; &#x412;&#x438;.",microphone_test:"&#x422;&#x435;&#x441;&#x442;&#x432;&#x430;&#x43D;&#x435; &#x43D;&#x430; &#x43C;&#x438;&#x43A;&#x440;&#x43E;&#x444;&#x43E;&#x43D;&#x430;...",camera_test:"&#x422;&#x435;&#x441;&#x442;&#x432;&#x430;&#x43D;&#x435; &#x43D;&#x430; &#x43A;&#x430;&#x43C;&#x435;&#x440;&#x430;&#x442;&#x430;...",say_something:"&#x41A;&#x430;&#x436;&#x435;&#x442;&#x435; &#x43D;&#x435;&#x449;&#x43E;, &#x437;&#x430; &#x434;&#x430; &#x43C;&#x43E;&#x436;&#x435;&#x43C; &#x434;&#x430; &#x442;&#x435;&#x441;&#x442;&#x432;&#x430;&#x43C;&#x435; &#x43C;&#x438;&#x43A;&#x440;&#x43E;&#x444;&#x43E;&#x43D;&#x430; &#x412;&#x438;.",also_try_different_camera:"&#x421;&#x44A;&#x449;&#x43E; &#x442;&#x430;&#x43A;&#x430; &#x43C;&#x43E;&#x436;&#x435; &#x434;&#x430; &#x43E;&#x43F;&#x438;&#x442;&#x430;&#x442;&#x435; &#x434;&#x430; &#x438;&#x437;&#x431;&#x435;&#x440;&#x435;&#x442;&#x435; &#x434;&#x440;&#x443;&#x433;&#x430; &#x43A;&#x430;&#x43C;&#x435;&#x440;&#x430;.",try_different_camera:"&#x41F;&#x440;&#x43E;&#x431;&#x432;&#x430;&#x439;&#x442;&#x435; &#x441; &#x434;&#x440;&#x443;&#x433;&#x430; &#x43A;&#x430;&#x43C;&#x435;&#x440;&#x430;.",try_different_microphone:"&#x41F;&#x440;&#x43E;&#x431;&#x432;&#x430;&#x439;&#x442;&#x435; &#x441; &#x434;&#x440;&#x443;&#x433; &#x43C;&#x438;&#x43A;&#x440;&#x43E;&#x444;&#x43E;&#x43D;.",record_label:"&#x417;&#x430;&#x43F;&#x438;&#x441;&#x432;&#x430;&#x43D;&#x435;",recording_get_ready:"&#x41F;&#x440;&#x438;&#x433;&#x43E;&#x442;&#x432;&#x435;&#x442;&#x435; &#x441;&#x435;...",video_file_too_large:"&#x412;&#x430;&#x448;&#x438;&#x44F;&#x442; &#x432;&#x438;&#x434;&#x435;&#x43E; &#x444;&#x430;&#x439;&#x43B; &#x435; &#x442;&#x432;&#x44A;&#x440;&#x434;&#x435; &#x433;&#x43E;&#x43B;&#x44F;&#x43C;, &#x43C;&#x43E;&#x43B;&#x44F;, &#x43E;&#x43F;&#x438;&#x442;&#x430;&#x439;&#x442;&#x435; &#x43E;&#x442;&#x43D;&#x43E;&#x432;&#x43E; &#x441; &#x43F;&#x43E;-&#x43C;&#x430;&#x43B;&#x44A;&#x43A; &#x432;&#x438;&#x434;&#x435;&#x43E; &#x444;&#x430;&#x439;&#x43B;.",uploading_label:"&#x41A;&#x430;&#x447;&#x432;&#x430;&#x43D;&#x435;",microphone_settings:"&#x41D;&#x430;&#x441;&#x442;&#x440;&#x43E;&#x439;&#x43A;&#x438; &#x43D;&#x430; &#x43C;&#x438;&#x43A;&#x440;&#x43E;&#x444;&#x43E;&#x43D;&#x430;",camera_settings:"&#x41D;&#x430;&#x441;&#x442;&#x440;&#x43E;&#x439;&#x43A;&#x438; &#x43D;&#x430; &#x43A;&#x430;&#x43C;&#x435;&#x440;&#x430;&#x442;&#x430;",camera_light_level:"&#x412;&#x430;&#x448;&#x435;&#x442;&#x43E; &#x43E;&#x441;&#x432;&#x435;&#x442;&#x43B;&#x435;&#x43D;&#x438;&#x435; &#x435; &#x434;&#x43E;&#x441;&#x442;&#x430; &#x43B;&#x43E;&#x448;&#x43E;",external_upload:"&#x41A;&#x430;&#x447;&#x435;&#x442;&#x435; &#x432;&#x438;&#x434;&#x435;&#x43E;",unsupported_video_type:"&#x41C;&#x43E;&#x43B;&#x44F;, &#x43A;&#x430;&#x447;&#x435;&#x442;&#x435;:%s",recording_start:"&#x421;&#x442;&#x430;&#x440;&#x442;&#x438;&#x440;&#x430;&#x43D;&#x435;!",recording_starts_in:"&#x417;&#x430;&#x43F;&#x43E;&#x447;&#x432;&#x430; &#x441;&#x43B;&#x435;&#x434;",record_video:"&#x417;&#x430;&#x43F;&#x438;&#x448;&#x435;&#x442;&#x435; &#x412;&#x430;&#x448;&#x435;&#x442;&#x43E; &#x432;&#x438;&#x434;&#x435;&#x43E;",stop_recording:"&#x421;&#x43F;&#x438;&#x440;&#x430;&#x43D;&#x435;",select_snapshot:"&#x418;&#x437;&#x431;&#x435;&#x440;&#x435;&#x442;&#x435; &#x43F;&#x43E;&#x441;&#x442;&#x435;&#x440;",uploading_video:"&#x412;&#x438;&#x434;&#x435;&#x43E;&#x43A;&#x43B;&#x438;&#x43F;&#x44A;&#x442; &#x412;&#x438; &#x441;&#x435; &#x43A;&#x430;&#x447;&#x432;&#x430;",rerecord_label:"&#x41F;&#x440;&#x435;&#x437;&#x430;&#x43F;&#x438;&#x441;&#x432;&#x430;&#x43D;&#x435;?",rerecord_confirm:"&#x421;&#x438;&#x433;&#x443;&#x440;&#x43D;&#x438; &#x43B;&#x438; &#x441;&#x442;&#x435;, &#x447;&#x435; &#x438;&#x441;&#x43A;&#x430;&#x442;&#x435; &#x434;&#x430; &#x43F;&#x440;&#x435;&#x437;&#x430;&#x43F;&#x438;&#x448;&#x435;&#x442;&#x435; &#x432;&#x438;&#x434;&#x435;&#x43E;&#x442;&#x43E; &#x441;&#x438;?",abort_record:"&#x418;&#x437;&#x447;&#x430;&#x43A;&#x430;&#x439;&#x442;&#x435;",rerecord_affirmation:"&#x41D;&#x435; &#x441;&#x435; &#x442;&#x440;&#x435;&#x432;&#x43E;&#x436;&#x435;&#x442;&#x435;, &#x432;&#x438;&#x43D;&#x430;&#x433;&#x438; &#x43C;&#x43E;&#x436;&#x435;&#x442;&#x435; &#x434;&#x430; &#x43F;&#x440;&#x435;&#x437;&#x430;&#x43F;&#x438;&#x448;&#x435;&#x442;&#x435;.",rerecord_multiple_affirmation:"&#x41D;&#x435; &#x441;&#x435; &#x442;&#x440;&#x435;&#x432;&#x43E;&#x436;&#x435;&#x442;&#x435;, &#x43C;&#x43E;&#x436;&#x435;&#x442;&#x435; &#x434;&#x430; &#x43F;&#x440;&#x435;&#x437;&#x430;&#x43F;&#x438;&#x448;&#x435;&#x442;&#x435; &#x43E;&#x449;&#x435; %d &#x43F;&#x44A;&#x442;&#x438;",rerecord_double_affirmation:"&#x41D;&#x435; &#x441;&#x435; &#x43F;&#x440;&#x438;&#x442;&#x435;&#x441;&#x43D;&#x44F;&#x432;&#x430;&#x439;&#x442;&#x435;, &#x43C;&#x43E;&#x436;&#x435;&#x442;&#x435; &#x434;&#x430; &#x43F;&#x440;&#x435;&#x437;&#x430;&#x43F;&#x438;&#x448;&#x435;&#x442;&#x435; &#x43E;&#x449;&#x435; &#x434;&#x432;&#x430; &#x43F;&#x44A;&#x442;&#x438;.",rerecord_single_affirmation:"&#x41D;&#x435; &#x441;&#x435; &#x43F;&#x440;&#x438;&#x442;&#x435;&#x441;&#x43D;&#x44F;&#x432;&#x430;&#x439;&#x442;&#x435;, &#x43C;&#x43E;&#x436;&#x435;&#x442;&#x435; &#x434;&#x430; &#x43F;&#x440;&#x435;&#x437;&#x430;&#x43F;&#x438;&#x448;&#x435;&#x442;&#x435; &#x43E;&#x449;&#x435; &#x435;&#x434;&#x438;&#x43D; &#x43F;&#x44A;&#x442;.",rerecord_immediately:"&#x41F;&#x440;&#x435;&#x437;&#x430;&#x43F;&#x438;&#x441;&#x432;&#x430;&#x43D;&#x435;",waiting_for_flash:"&#x418;&#x437;&#x447;&#x430;&#x43A;&#x432;&#x430;&#x43D;&#x435; &#x437;&#x430; Flash. &#x41E;&#x43F;&#x438;&#x442;&#x430;&#x439;&#x442;&#x435; &#x434;&#x430; &#x43A;&#x43B;&#x438;&#x43A;&#x43D;&#x435;&#x442;&#x435; &#x432; &#x433;&#x43E;&#x440;&#x43D;&#x430;&#x442;&#x430; &#x447;&#x430;&#x441;&#x442; &#x43D;&#x430; &#x442;&#x43E;&#x432;&#x430; &#x43F;&#x43E;&#x43B;&#x435;, &#x437;&#x430; &#x434;&#x430; &#x430;&#x43A;&#x442;&#x438;&#x432;&#x438;&#x440;&#x430;&#x442;&#x435;.",select_file_action:"&#x41A;&#x430;&#x447;&#x435;&#x442;&#x435; &#x432;&#x438;&#x434;&#x435;&#x43E;&#x442;&#x43E; &#x441;&#x438;",select_file_action_mobile:"&#x417;&#x430;&#x43F;&#x438;&#x448;&#x435;&#x442;&#x435; &#x432;&#x438;&#x434;&#x435;&#x43E;&#x442;&#x43E; &#x441;&#x438;",reselect_file_action:"&#x41A;&#x430;&#x447;&#x435;&#x442;&#x435; &#x432;&#x438;&#x434;&#x435;&#x43E;&#x442;&#x43E; &#x441;&#x438; &#x43E;&#x442;&#x43D;&#x43E;&#x432;&#x43E;",reselect_file_action_mobile:"&#x41F;&#x440;&#x435;&#x437;&#x430;&#x43F;&#x438;&#x448;&#x435;&#x442;&#x435; &#x432;&#x438;&#x434;&#x435;&#x43E;&#x442;&#x43E; &#x441;&#x438;",external_record_label:"&#x417;&#x430;&#x43F;&#x438;&#x448;&#x435;&#x442;&#x435; &#x432;&#x438;&#x434;&#x435;&#x43E;&#x442;&#x43E; &#x441;&#x438;",try_again:"&#x41F;&#x43E;&#x432;&#x442;&#x43E;&#x440;&#x435;&#x43D; &#x43E;&#x43F;&#x438;&#x442;?",processing_label:"&#x41E;&#x431;&#x440;&#x430;&#x431;&#x43E;&#x442;&#x43A;&#x430;",uploading_file_failed:"&#x41A;&#x430;&#x447;&#x432;&#x430;&#x43D;&#x435;&#x442;&#x43E; &#x441;&#x435; &#x43F;&#x440;&#x43E;&#x432;&#x430;&#x43B;&#x438;, &#x43C;&#x43E;&#x43B;&#x44F; &#x43E;&#x43F;&#x438;&#x442;&#x430;&#x439;&#x442;&#x435; &#x43E;&#x442;&#x43D;&#x43E;&#x432;&#x43E;.",could_not_process_file:"&#x41D;&#x435; &#x443;&#x441;&#x43F;&#x44F;&#x445;&#x43C;&#x435; &#x434;&#x430; &#x43E;&#x431;&#x440;&#x430;&#x431;&#x43E;&#x442;&#x438;&#x43C; &#x412;&#x430;&#x448;&#x435;&#x442;&#x43E; &#x432;&#x438;&#x434;&#x435;&#x43E;, &#x43C;&#x43E;&#x43B;&#x44F; &#x43E;&#x43F;&#x438;&#x442;&#x430;&#x439;&#x442;&#x435; &#x43E;&#x442;&#x43D;&#x43E;&#x432;&#x43E;.",device_unsupported:"&#x412;&#x430;&#x448;&#x435;&#x442;&#x43E; &#x443;&#x441;&#x442;&#x440;&#x43E;&#x439;&#x441;&#x442;&#x432;&#x43E; &#x43D;&#x435; &#x441;&#x435; &#x43F;&#x43E;&#x434;&#x434;&#x44A;&#x440;&#x436;&#x430; &#x43A;&#x44A;&#x43C; &#x43C;&#x43E;&#x43C;&#x435;&#x43D;&#x442;&#x430;. &#x41C;&#x43D;&#x43E;&#x433;&#x43E; &#x441;&#x44A;&#x436;&#x430;&#x43B;&#x44F;&#x432;&#x430;&#x43C;&#x435;."},"bg.video_recorder"),BetaJS.Locales.register({flash_not_supported:"Ho sentim, per&ograve; no es pot utilitzar aquest dispositiu per enregistrar el v&iacute;deo (no disposa de Flash).",flash_not_installed:'Per enregistrar el v&iacute;deo cal instal·lar Flash. <a href="http://get.adobe.com/flashplayer">Fes clic aqu&iacute; per instal·lar-lo</a>.',flash_old_version:'Per enregistrar el v&iacute;deo, cal actualitzar la versi&ograve; de Flash. <a href="http://get.adobe.com/flashplayer">Haga clic aqu&iacute; para actualizar</a>.',no_camera:"Ho sentim, no s'ha detectat cap c&agrave;amera al dispositiu. Si us plau, utilitzeu un dispositiu amb c&agrave;amera.",no_microphone:"Ho sentim, no s'ha detectat micr&ograve;fon al dispositiu. Si us plau, utilitzeu un dispositiu amb micr&ograve;fon.",no_visual:"Sembla que no et podem veure.",no_sound:"Sembla que no t'arribem a escoltar.",browser_permission:"Necessitem accés a la c&agrave;mera i el micr&ograve;fon.",microphone_test:"Provant el micr&ograve;fon...",camera_test:"Provant la c&agrave;mera...",say_something:"Digueu alguna cosa per provar el micr&ograve;fon.",also_try_different_camera:"També podeu escollir una altra c&agrave;mera.",try_different_camera:"Intentar utilitzar una altra c&agrave;mera.",try_different_microphone:"Intenteu escollir un micr&ograve;fon diferent.",record_label:"Grava",recording_get_ready:"Prepareu-vos...",uploading_label:"Carregant",microphone_settings:"Configuraci&oacute; del micr&ograve;fon",camera_settings:"Configuraci&oacute; de la c&agrave;mera",camera_light_level:"Cal que busqueu un lloc amb m&egrave; llum.",external_upload:"Vull publicar un v&iacute;deo.",recording_start:"Comenceu!",recording_starts_in:"Començarà en",record_video:"Enregistrar",stop_recording:"Aturar.",select_snapshot:"Escolliu una imatge de portada",uploading_video:"El v&iacute;deo s'est&agrave; publicant.",rerecord_label:"Tornar a enregistrar?",rerecord_confirm:"Segur que voleu tornar a enregistrar el v&iacute;deo?",abort_record:"Espereu!",rerecord_affirmation:"No us preocupeu, podreu tornar a enregistrar-lo.",rerecord_multiple_affirmation:"No us preocupeu, podeu enregistrar-lo %d cops m&eacute;s.",rerecord_double_affirmation:"No us preocupeu, podeu tornar-lo a enregistrar dues vegades.",rerecord_single_affirmation:"No us preocupeu, podeu tornar-lo a enregistrar un altre cop.",rerecord_immediately:"Vull tornar-lo a enregistrar.",waiting_for_flash:"Esperant la reactivació de Flash. Potser haureu de fer clic sobre aquest missatge per desactivar les opcions d'estalvi d'energia del navegador.",select_file_action:"Escollir",select_file_action_mobile:"Enregistrar",reselect_file_action:"Tornar a escollir",reselect_file_action_mobile:"Tornar a enregistrar",external_record_label:"Enregistrar",try_again:"Voleu tornar-lo a enregistrar?",processing_label:"Processant",uploading_file_failed:"Error publicant l'arxiu, torneu-ho a intentar.",could_not_process_file:"No es pot processar el v&igrave;deo. Torneu-ho a provar.",device_unsupported:"El seu dispositiu no és compatible amb l'enregistrament."},"cat.video_recorder"),BetaJS.Locales.register({flash_not_supported:"Desv&aelig;rre, du kan ikke bruge denne enhed til at optage en video. (Flash er n&oslash;dvendig)",flash_not_installed:'For at kunne optage video er du n&oslash;d til at installere Flash. <a href="http://get.adobe.com/flashplayer">Klik her for at installere</a>.',flash_old_version:'For at kunne optage video, er du n&oslash;d til at opdatere din version af Flash. <a href="http://get.adobe.com/flashplayer">Klik her for at opdatere</a>.',no_camera:"Vi kunne desv&aelig;rre ikke registrere et kamera p&aring; din enhed. Brug venligst en enhed med et kamera.",no_microphone:"Vi kunne desv&aelig;rre ikke registrere en mikrofon p&aring; din enhed. Brug venligst en enhed med en mikrofon.",no_visual:"Vi kan desv&aelig;rre ikke registrere noget billede.",no_sound:"Vi kan desv&aelig;rre ikke h&oslash;re dig.",browser_permission:"Vi har brug for adgang til dit kamera og mikrofon.",microphone_test:"Tester mikrofon...",camera_test:"Tester kamera...",say_something:"Sig noget, s&aring; vi kan teste din mikrofon.",also_try_different_camera:"Du kan ogs&aring; pr&oslash;ve at v&aelig;lge et andet kamera.",try_different_camera:"Pr&oslash;v at skifte til et andet kamera.",try_different_microphone:"Pr&oslash;v at skifte til en anden mikrofon.",record_label:"Optager",recording_get_ready:"G&oslash;r dig klar...",video_file_too_large:"Din video-fil er alt for stor, pr&oslash;v igen med en mindre video.",uploading_label:"Overf&oslash;rer",microphone_settings:"Mikrofonindstillinger",camera_settings:"Kameraindstillinger",camera_light_level:"Dit lys er for d&aring;rligt",external_upload:"Overf&oslash;r video",unsupported_video_type:"Upload venligst: %s",recording_start:"Start!",recording_starts_in:"Starter om",record_video:"Optag din video",stop_recording:"Stop",select_snapshot:"V&aelig;lg et miniaturebillede",uploading_video:"Din video overf&oslash;res",rerecord_label:"Optag forfra?",rerecord_confirm:"Er du sikker p&aring;, at du vil optage forfra?",abort_record:"Vent",rerecord_affirmation:"Bare rolig, du kan altid optage forfra.",rerecord_multiple_affirmation:"Bare rolig, du kan stadig optage forfra %d gange.",rerecord_double_affirmation:"Bare rolig, du kan optage forfra 2 gange endnu.",rerecord_single_affirmation:"Bare rolig, du kan optage forfra en gang mere.",rerecord_immediately:"Optag forfra",waiting_for_flash:"Venter p&aring; Flash. Pr&oslash;v at trykke i toppen af denne boks for at aktivere.",select_file_action:"Overf&oslash;r din video",select_file_action_mobile:"Optag din video",reselect_file_action:"Optag din video forfra",reselect_file_action_mobile:"Optag din video forfra",external_record_label:"Optag din video",try_again:"Pr&oslash;v igen?",processing_label:"Behandler",uploading_file_failed:"Overf&oslash;rslen fejlede, pr&oslash;v venligst igen.",could_not_process_file:"Vi kunne ikke behandle din video, pr&oslash;v venligst igen.",device_unsupported:"Vi underst&oslash;tter desv&aelig;rre ikke din enhed."},"da.video_recorder"),BetaJS.Locales.register({flash_not_supported:"Dieses Ger&auml;t kann leider nicht verwendet werden (Flash wird ben&ouml;tigt).",flash_not_installed:'Um ein Video aufnehmen zu k&ouml;nnen, muss Flash installiert werden. <a href="http://get.adobe.com/flashplayer">Jetzt installieren</a>.',flash_old_version:'Um ein Video aufnehmen zu k&ouml;nnen, muss Flash aktualisiert werden. <a href="http://get.adobe.com/flashplayer">Jetzt aktualisieren</a>.',no_camera:"Wir konnten keine Kamera finden. Bitte verwenden Sie einen Computer mit installierter Kamera.",no_microphone:"Wir konnten kein Mikrofon finden. Bitte verwenden Sie einen Computer mit installierten Mikrofon.",no_visual:"Wir k&ouml;nnen leider kein Bild empfangen.",no_sound:"Wir k&ouml;nnen leider kein Audio h&ouml;ren.",browser_permission:"Wir ben&ouml;tigen Zugriff auf Ihre Kamera und Ihr Mikrofon.",microphone_test:"Teste Mikrofon...",camera_test:"Teste Kamera...",say_something:"Bitte sagen Sie etwas, damit wir Ihr Mikrofon testen k&ouml;nnen.",also_try_different_camera:"Sie k&ouml;nnen auch versuchen, eine andere Kamera auszuw&auml;hlen.",try_different_camera:"Versuchen Sie bitte eine andere Kamera auszuw&auml;hlen.",try_different_microphone:"Versuchen Sie bitte ein anderes Mikrofon auszuw&auml;hlen.",record_label:"Aufnehmen",recording_get_ready:"Und...",microphone_settings:"Mikrofoneinstellungen",camera_settings:"Kamera-Einstellungen",camera_light_level:"Lichtqualtit&auml; eingeschr&auml;nkt",uploading_label:"Hochladen",external_upload:"Video hochladen",recording_start:"Los!",recording_starts_in:"Los geht's in",record_video:"Video aufnehmen",stop_recording:"Stopp",select_snapshot:"Bild ausw&auml;hlen",uploading_video:"Ihr video wird hochgeladen",rerecord_label:"Nochmal aufnehmen?",rerecord_confirm:"Sind Sie sicher, dass Sie Ihr Video noch einmal aufnehmen wollen?",abort_record:"Warte!",rerecord_affirmation:"Keine Sorge, Sie k&ouml;nnen immer wieder aufnehmen.",rerecord_multiple_affirmation:"Keine Sorge, Sie k&ouml;nnen %d weitere Aufnahmen anlegen.",rerecord_double_affirmation:"Keine Sorge, Sie k&ouml;nnen noch zwei weitere Versuche aufnehmen.",rerecord_single_affirmation:"Keine Sorge, Sie k&ouml;nnen noch einen weiteren Versuch aufnehmen.",rerecord_immediately:"Nochmal aufnehmen?",waiting_for_flash:"Flash reagiert nicht. Sie m&uuml;ssen m&ouml;glicherweise oberhalb dieser Nachricht clicken, um die Energiesparfeatures Ihres Browsers zu deaktivieren.",select_file_action:"Video hochladen",select_file_action_mobile:"Video aufnehmen",reselect_file_action:"Video erneut hochladen",reselect_file_action_mobile:"Video erneut aufnehmen",external_record_label:"Video aufnehmen",try_again:"Nochmal versuchen?",processing_label:"Verarbeiten",uploading_file_failed:"Hochladen fehlgeschlagen, bitte versuchen Sie es erneut.",could_not_process_file:"Wir konnten Ihr Video nicht verarbeiten, bitte versuchen Sie es erneut.",device_unsupported:"Ihr Ger&auml;t wird derzeit nicht unterst&uuml;tzt."},"de.video_recorder"),BetaJS.Locales.register({flash_not_supported:"Lo sentimos, no puede usar este dispositivo para grabar el video (se requiere Flash).",flash_not_installed:'Para grabarse en video, debe instalar Flash. <a href="http://get.adobe.com/flashplayer">Haga clic aqu&iacute; para instalar</a>.',flash_old_version:'Para grabarse en video, debe actualizar la versi&oacute;n de Flash. <a href="http://get.adobe.com/flashplayer">Haga clic aqu&iacute; para actualizar</a>.',no_camera:"Lo sentimos, no se detect&oacute; una c&aacute;mara en el dispositivo. Use un dispositivo con una c&aacute;mara que funcione.",no_microphone:"Lo sentimos, no se detect&oacute; un micr&oacute;fono en el dispositivo. Use un dispositivo con un micr&oacute;fono que funcione.",no_visual:"Lo sentimos, no podemos verlo.",no_sound:"Lo sentimos, no podemos escucharlo.",browser_permission:"Necesitamos acceso a su c&aacute;mara y micr&oacute;fono.",microphone_test:"Probando micr&oacute;fono...",camera_test:"Probando c&aacute;mara...",say_something:"Diga algo para que podamos probar su micr&oacute;fono.",also_try_different_camera:"Tambi&eacute;n puede tratar de seleccionar una c&aacute;mara diferente.",try_different_camera:"Trate de seleccionar una c&aacute;mara diferente.",try_different_microphone:"Trate de seleccionar un micr&oacute;fono diferente.",record_label:"Grabar",recording_get_ready:"Prep&aacute;rese...",uploading_label:"Cargando",microphone_settings:"Configuraci&oacute;n del micr&oacoute;fono",camera_settings:"Ajustes de la c&aacute;mara",camera_light_level:"La falta de iluminaci&oacoute;n",external_upload:"Quiero cargar un video.",recording_start:"&iexcl;Ya!",recording_starts_in:"Comienza dentro de",record_video:"Grabar",stop_recording:"Parar.",select_snapshot:"Seleccione una instant&aacute;nea",uploading_video:"Su video se est&aacute; cargando",rerecord_label:"&iquest;Volver a grabar?",rerecord_confirm:"&iquest;Est&aacute; seguro de que desea volver a grabar su video?",abort_record:"&iexcl;Espere!",rerecord_affirmation:"No se preocupe, siempre puede volver a grabar.",rerecord_multiple_affirmation:"No se preocupe, puede volver a grabar %d m&aacute;s veces.",rerecord_double_affirmation:"No se preocupe, puede volver a grabar dos veces.",rerecord_single_affirmation:"No se preocupe, puede volver a grabar una vez m&aacute;s.",rerecord_immediately:"D&eacute;jeme volver a grabarlo.",waiting_for_flash:"Esperando que Flash se reactive. Es posible que deba hacer clic sobre este mensaje para desactivar las caracter&iacute;sticas de ahorro de energ&iacute;a del explorador.",select_file_action:"Seleccionar",select_file_action_mobile:"Grabar",reselect_file_action:"Reseleccionar",reselect_file_action_mobile:"Regrabar",external_record_label:"Grabar",try_again:"&iquest;Intentarlo de nuevo?",processing_label:"Procesamiento",uploading_file_failed:"Error al cargar, vuelva a intentarlo.",could_not_process_file:"No pudimos procesar su video, vuelva a intentarlo.",device_unsupported:"Actualmente su dispositivo no es compatible. Lo sentimos mucho."},"es.video_recorder"),BetaJS.Locales.register({flash_not_supported:"Valitettavasti et voi k&auml;ytt&auml;&auml; t&auml;t&auml; laitetta videon tallentamiseen (Flash tarvitaan).",flash_not_installed:'Jos haluat tallentaa videon, sinun t&auml;ytyy asentaa Flash. <a href="http://get.adobe.com/flashplayer">Asenna t&auml;st&auml;</a>.',flash_old_version:'Jos haluat tallentaa videon, sinun t&auml;ytyy p&auml;ivitt&auml;&auml; Flash. <a href="http://get.adobe.com/flashplayer">P&auml;ivit&auml; t&auml;st&auml;</a>.',no_camera:"Valitettavasti emme voineet havaita kameraa laitteessasi. K&auml;yt&auml; laitetta, miss&auml; on toimiva kamera.",no_microphone:"Valitettavasti emme voineet havaita mikrofonia laitteessasi. K&auml;yt&auml; laitetta, miss&auml; on toimiva mikrofoni.",no_visual:"Valitettavasti emme voi n&auml;hd&auml; sinua.",no_sound:"Valitettavasti emme kuule sinua.",browser_permission:"Tarvitsemme p&auml;&auml;syn kameraan ja mikrofoniin",microphone_test:"Testataan mikrofonia...",camera_test:"Testataan kameraa...",say_something:"Sano jotain, jotta voimme testata mikrofonin.",also_try_different_camera:"Voit my&ouml;s yritt&auml;&auml; valita toisen kameran.",try_different_camera:"Yrit&auml; valita eri kamera.",try_different_microphone:"Yrit&auml; valita eri mikrofoni",record_label:"Nauhoita",recording_get_ready:"Valmistaudu...",video_file_too_large:"Videotiedosto on liian suuri, yrit&auml; uudelleen pienemm&auml;ll&auml; videotiedostolla.",uploading_label:"L&auml;hetet&auml;&auml;n",microphone_settings:"Mikrofonin asetukset",camera_settings:"Kameran asetukset",camera_light_level:"Valaistus on melko heikko",external_upload:"L&auml;het&auml; video",unsupported_video_type:"Ole hyv&auml; ja l&auml;het&auml;: %s",recording_start:"Aloita!",recording_starts_in:"Alkaa",record_video:"Nauhoita video",stop_recording:"Lopeta",select_snapshot:"Valitse kuva",uploading_video:"Videota l&auml;hetet&auml;&auml;n",rerecord_label:"Nauhoita uudelleen?",rerecord_confirm:"Oletko varma, ett&auml; haluat nauhoittaa videon uudelleen?",abort_record:"Odota",rerecord_affirmation:"&auml;l&auml; huoli, voit aina nauhoittaa uudelleen.",rerecord_multiple_affirmation:"&auml;l&auml; huoli, voit nauhoittaa uudelleen %d kertaa.",rerecord_double_affirmation:"&auml;l&auml; huoli, voit nauhoittaa uudelleen kahdesti.",rerecord_single_affirmation:"&auml;l&auml; huoli, voit nauhoittaa viel&auml; kerran uudelleen.",rerecord_immediately:"Nauhoita uudelleen",waiting_for_flash:"Odotetaan Flashia. Kokeile klikkaamalla yl&auml;reunasta t&auml;m&auml;n ruudun aktivoimiseksi.",select_file_action:"L&auml;het&auml; videosi",select_file_action_mobile:"Nauhoita videosi",reselect_file_action:"L&auml;het&auml; videosi uudelleen",reselect_file_action_mobile:"Nauhoita videosi uudelleen",external_record_label:"Nauhoita videosi",try_again:"Yrit&auml; uudelleen?",processing_label:"K&auml;sitell&auml;&auml;n",uploading_file_failed:"L&auml;hetys ep&auml;onnistui, yrit&auml; uudelleen.",could_not_process_file:"Emme pystyneet k&auml;sittelem&auml;&auml;n videotasi, yrit&auml; uudelleen.",device_unsupported:"Laitettasi ei t&auml;ll&auml; hetkell&auml; tueta. Olemme hyvin pahoillamme.."},"fi.video_recorder"),BetaJS.Locales.register({flash_not_supported:"D&eacute;sol&eacute;, vous ne pouvez pas utiliser cet appareil pour enregistrer votre vid&eacute;o (Flash est n&eacute;cessaire).",flash_not_installed:'Pour vous enregistrer en vid&eacute;o, vous devez installer Flash. <a href="http://get.adobe.com/flashplayer">Cliquez ici pour installer</a>.',flash_old_version:'Pour vous enregistrer en vid&eacute;o, vous devez mettre &agrave; jour Flash. <a href="http://get.adobe.com/flashplayer">Cliquez ici pour mettre &agrave; jour</a>.',no_camera:"D&eacute;sol&eacute;, nous n&rsquo;avons pas pu d&eacute;tecter de cam&eacute;ra sur votre appareil. Merci d&rsquo;utiliser un appareil avec une cam&eacute;ra fonctionnelle.",no_microphone:"D&eacute;sol&eacute;, nous n&rsquo;avons pas pu d&eacute;tecter de microphone sur votre appareil. Merci d&rsquo;utiliser un appareil avec un microphone fonctionnel.",no_visual:"D&eacute;sol&eacute;, nous n&rsquo;arrivons pas &agrave; vous voir.",no_sound:"D&eacute;sol&eacute;, nous n&rsquo;arrivons pas &agrave; vous entendre.",browser_permission:"Nous avons besoin d&rsquo;utiliser votre cam&eacute;ra et votre microphone.",microphone_test:"Microphone en cours de test...",camera_test:"Camera en cours de test...",say_something:"Prononcer une parole pour que nous puissions tester votre microphone.",
also_try_different_camera:"Vous pouvez aussi s&eacute;lectionner une autre cam&eacute;ra.",try_different_camera:"Essayez de s&eacute;lectionner une cam&eacute;ra diff&eacute;rente.",try_different_microphone:"Essayez de s&eacute;lectionner un microphone diff&eacute;rent.",record_label:"Enregistrer",recording_get_ready:"Tenez-vous pr&ecirc;t ...",video_file_too_large:"Votre fichier vid&eacute;o est de taille trop importante. Merci d&rsquo;essayer avec un fichier plus petit.",uploading_label:"En cours d&apos;upload",microphone_settings:"Propri&eacute;t&eacute;s du microphone",camera_settings:"Propri&eacute;t&eacute;s de la cam&eacute;ra",camera_light_level:"Votre &eacute;clairage est plut&ocirc;t faible",external_upload:"Uploader la vid&eacute;o",unsupported_video_type:"Merci de t&eacute;l&eacute;charger %s",recording_start:"C&rsquo;est parti !",recording_starts_in:"D&eacute;marrage dans",record_video:"Enregistrez votre vid&eacute;o",stop_recording:"Arr&ecirc;t",select_snapshot:"Choisissez une photo de couverture",uploading_video:"Votre vid&eacute;o est en train d&rsquo;&ecirc;tre upload&eacute;e.",rerecord_label:"R&eacute;enregistrer ?",rerecord_confirm:"&Ecirc;tes-vous s&ucirc;r de vouloir r&eacute;enregistrer votre vid&eacute;o ?",abort_record:"Attendez",rerecord_affirmation:"Ne vous inqui&eacute;tez pas .Vous pouvez r&eacute;enregistrer votre vid&eacute;o &agrave; tout moment.",rerecord_multiple_affirmation:"Ne vous inqui&eacute;tez pas .Vous pouvez r&eacute;enregistrer encore %d fois.",rerecord_double_affirmation:"Ne vous inqui&eacute;tez pas .Vous pouvez r&eacute;enregistrer encore deux fois.",rerecord_single_affirmation:"Ne vous inqui&eacute;tez pas .Vous pouvez r&eacute;enregistrer encore une fois..",rerecord_immediately:"R&eacute;enregistrer",waiting_for_flash:"En attente de Flash. Essayez de cliquer en haut de cette bo&icirc;te pour l&rsquo;activer.",select_file_action:"Uploader votre vid&eacute;o",select_file_action_mobile:"Enregistrez votre vid&eacute;o",reselect_file_action:"Uploader de nouveau votre vid&eacute;o",reselect_file_action_mobile:"R&eacute;enregistrer votre vid&eacute;o",external_record_label:"Enregistrez votre vid&eacute;o",try_again:"Essayer encore ?",processing_label:"En cours de traitement",uploading_file_failed:"L&rsquo;upload a &eacute;chou&eacute;, merci d&rsquo;essayer une nouvelle fois.",could_not_process_file:"Nous n&rsquo;avons pas pu traiter votre vid&eacute;o, merci d&rsquo;essayer une nouvelle fois.",device_unsupported:"Nous sommes d&eacute;sol&eacute;s. Votre appareil n&rsquo;est actuellement pas support&eacute;."},"fr.video_recorder"),BetaJS.Locales.register({flash_not_supported:"Ispri&#x10D;avamo se, ali ne mo&#x17E;ete koristiti ovaj ure&#x111;aj da snimate video (pogreban Vam je Flash).",flash_not_installed:'Da bi ste snimali video trebate instalirati Flash. <a href="http://get.adobe.com/flashplayer">Kliknite ovdje za instalaciju</a>.',flash_old_version:'Da bi ste se fotkali trebate nadograditi Va&#x161; Flash. <a href="http://get.adobe.com/flashplayer">Kliknite ovjde za novu verziju</a>.',no_camera:"Na&#x17E;alost nismo mogli detektirati kameru na Va&#x161;em ure&#x111;aju. Molimo koristite ure&#x111;aj sa kamerom za koju znate da funkcionira.",no_microphone:"Na&#x17E;alost nismo mogli detektirati mikrafon na Va&#x161;em ure&#x111;aju. Molimo Vas da koristite ure&#x111;aj sa mikrafonom za koji znate da funkcionira.",no_visual:"Na&#x17E;alost ne mo&#x17E;emo Vas vidjeti.",no_sound:"Na&#x17E;alost ne mo&#x17E;emo Vas &#x10D;uti.",browser_permission:"Neophodan nam je pristup Va&#x161;oj kameri i mikrafonu.",microphone_test:"Ispitivanje mikrafona...",camera_test:"Ispitivanje kamere...",say_something:"Ka&#x17E;ite ne&#x161;to radi ispitivanja mikrafona.",also_try_different_camera:"Mo&#x17E;ete odabrati i drugu kameru.",try_different_camera:"Molimo Vas probajte drugu kameru.",try_different_microphone:"Molimo Vas probajte drugi mikrafon.",record_label:"Snimi",recording_get_ready:"Pripremite se...",video_file_too_large:"Va&#x161; video je prevelik. Molimo Vas da probate opet sa manjim videom.",uploading_label:"Uploduje se",microphone_settings:"Postavke mikrafona",camera_settings:"Postavke kamere",camera_light_level:"Va&#x161;e osvjetljenje je slabo",external_upload:"Zaka&#x10D;i video",unsupported_video_type:"Molimo Vas probajte: %s",recording_start:"Startuj!",recording_starts_in:"Startuje za",record_video:"Startuj snimati",stop_recording:"Stani",select_snapshot:"Izaberi stati&#x10D;nu fotkicu videa.",uploading_video:"Va&#x161; video se uploduje",rerecord_label:"Presnimi?",rerecord_confirm:"Jeste li sigurni da &#x17E;elite da presnimite Va&#x161; postoje&#x107;i video?",abort_record:"Pauzirajte",rerecord_affirmation:"Bez brige, mo&#x17E;ete uvek presnimiti.",rerecord_multiple_affirmation:"Bez brige, mo&#x17E;ete presnimiti jo&#x161; %d puta.",rerecord_double_affirmation:"Bez brige, mo&#x17E;ete presnimiti jo&#x161; dvaput.",rerecord_single_affirmation:"Bez brige, mo&#x17E;ete presnimiti jo&#x161; jednom.",rerecord_immediately:"Presnimi",waiting_for_flash:"&#x10C;ekamo na Flash. Probajte kliknuti na vrhu ovog segmenta da ga aktivirate.",select_file_action:"Zaka&#x10D;i svoj video",select_file_action_mobile:"Snimite svoj video",reselect_file_action:"Ponovo zaka&#x10D;i svoj video",reselect_file_action_mobile:"Presnimi svoj video",external_record_label:"Snimi svoj video",try_again:"Poku&#x161;aj ponovo?",processing_label:"Procesuiranje",uploading_file_failed:"Uploadovanje nije bilo uspe&#x161;no. Molimo Vas da probate ponovo.",could_not_process_file:"Nismo uspjeli procesuirati Va&#x161; video, molimo Vas da probate ponovo.",device_unsupported:"Ispri&#x10D;avamo se, ali Va&#x161; ure&#x111;aj nije trenutno podr&#x17E;an."},"hr.video_recorder"),BetaJS.Locales.register({flash_not_supported:"Sajnos, nem b&#xED;rja haszn&#xE1;lni ezt a k&#xE9;sz&#xFC;l&#xE9;ket videofelv&#xE9;tel k&#xE9;sz&#xED;t&#xE9;s&#xE9;re (Flash sz&#xFC;ks&#xE9;ges).",flash_not_installed:'Ahhoz, hogy videofelv&#xE9;telt k&#xE9;sz&#xED;tsen mag&#xE1;r&#xF3;l, telep&#xED;tenie kell a Flasht. <a href="http://get.adobe.com/flashplayer">Kattintson ide a telep&#xED;t&#xE9;shez!</a>.',flash_old_version:'Ahhoz, hogy videofelv&#xE9;telt k&#xE9;sz&#xED;tsen mag&#xE1;r&#xF3;l, friss&#xED;tenie kell a Flash jelenlegi v&#xE1;ltozat&#xE1;t. <a href="http://get.adobe.com/flashplayer">Kattintson ide a friss&#xED;t&#xE9;shez!</a>.',no_camera:"Sajnos, nem tal&#xE1;ltunk kamer&#xE1;t a k&#xE9;sz&#xFC;l&#xE9;k&#xE9;n. K&#xE9;rj&#xFC;k, hogy m&#x171;k&#xF6;d&#x151; kamer&#xE1;s k&#xE9;sz&#xFC;l&#xE9;ket haszn&#xE1;ljon.",no_microphone:"Sajnos, nem tal&#xE1;ltunk mikrofont a k&#xE9;sz&#xFC;l&#xE9;k&#xE9;n. K&#xE9;rj&#xFC;k, hogy m&#x171;k&#xF6;d&#x151; mikrofonos k&#xE9;sz&#xFC;l&#xE9;ket haszn&#xE1;ljon.",no_visual:"Sajnos, nem l&#xE1;tjuk &#xD6;nt.",no_sound:"Sajnos, nem halljuk &#xD6;nt.",browser_permission:"Hozz&#xE1; kell f&#xE9;rn&#xFC;nk a kamer&#xE1;j&#xE1;hoz &#xE9;s a mikrofonj&#xE1;hoz.",microphone_test:"A mikrofon tesztel&#xE9;se...",camera_test:"A kamera tesztel&#xE9;se...",say_something:"Besz&#xE9;ljen, hogy tesztelhess&#xFC;k a mikrofonj&#xE1;t!",also_try_different_camera:"V&#xE1;laszthat egy m&#xE1;sik kamer&#xE1;t.",try_different_camera:"V&#xE1;lasszon egy m&#xE1;sik kamer&#xE1;t!",try_different_microphone:"V&#xE1;lasszon egy m&#xE1;sik mikrofont!",record_label:"Felv&#xE9;tel k&#xE9;sz&#xED;t&#xE9;se",recording_get_ready:"K&#xE9;sz&#xFC;lj&#xF6;n fel...",video_file_too_large:"A videof&#xE1;jl t&#xFA;l nagy, k&#xE9;rj&#xFC;k, pr&#xF3;b&#xE1;lja meg &#xFA;jra egy kisebb videof&#xE1;jllal!",uploading_label:"Felt&#xF6;lt&#xE9;s",microphone_settings:"Mikrofonbe&#xE1;ll&#xED;t&#xE1;sok",camera_settings:"Kamerabe&#xE1;ll&#xED;t&#xE1;sok",camera_light_level:"A megvil&#xE1;g&#xED;t&#xE1;s meglehet&#x151;sen gyenge",external_upload:"Vide&#xF3; felt&#xF6;lt&#xE9;se",unsupported_video_type:"K&#xE9;rj&#xFC;k, t&#xF6;lts&#xF6;n m&#xE9;g fel: %s",recording_start:"Rajt!",recording_starts_in:"Ind&#xED;t&#xE1;s...",record_video:"Vegye fel a vide&#xF3;j&#xE1;t!",stop_recording:"&#xC1;llj",select_snapshot:"V&#xE1;lasszon egy n&#xE9;z&#x151;k&#xE9;pet!",uploading_video:"A vide&#xF3;ja felt&#xF6;lt&#xE9;s alatt van",rerecord_label:"Megism&#xE9;tli a felv&#xE9;telt?",rerecord_confirm:"Biztos benne, hogy szeretn&#xE9; &#xFA;jra felvenni a vide&#xF3;t?",abort_record:"V&#xE1;rjon!",rerecord_affirmation:"Nyugi, &#xD6;n ak&#xE1;rmikor megism&#xE9;telheti a felv&#xE9;telt.",rerecord_multiple_affirmation:"Nyugi, &#xD6;n megism&#xE9;telheti a felv&#xE9;telt m&#xE9;g %d alkalommal.",rerecord_double_affirmation:"Nyugi, &#xD6;n m&#xE9;g k&#xE9;tszer megism&#xE9;telheti a felv&#xE9;telt.",rerecord_single_affirmation:"Nyugi, &#xD6;n m&#xE9;g egyszer megism&#xE9;telheti a felv&#xE9;telt.",rerecord_immediately:"Felv&#xE9;tel megism&#xE9;tl&#xE9;se",waiting_for_flash:"V&#xE1;rakoz&#xE1;s a Flashre. Aktiv&#xE1;l&#xE1;shoz kattintson a doboz tetej&#xE9;re!",select_file_action:"T&#xF6;ltse fel a vide&#xF3;t!",select_file_action_mobile:"Vegye fel a vide&#xF3;j&#xE1;t!",reselect_file_action:"T&#xF6;ltse fel &#xFA;jra a vide&#xF3;j&#xE1;t!",reselect_file_action_mobile:"Vegye fel &#xFA;jra a vide&#xF3;j&#xE1;t!",external_record_label:"Vegye fel a vide&#xF3;j&#xE1;t!",try_again:"Megpr&#xF3;b&#xE1;lja &#xFA;jra?",processing_label:"Feldolgoz&#xE1;s",uploading_file_failed:"A felt&#xF6;lt&#xE9;s sikertelen, k&#xE9;rj&#xFC;k, pr&#xF3;b&#xE1;lja &#xFA;jra!",could_not_process_file:"Nem tudtuk feldolgozni a vide&#xF3;t, k&#xE9;rj&#xFC;k, pr&#xF3;b&#xE1;lja &#xFA;jra!",device_unsupported:"A k&#xE9;sz&#xFC;l&#xE9;ke jelenleg nem t&#xE1;mogatott. Nagyon sajn&#xE1;ljuk."},"hu.video_recorder"),BetaJS.Locales.register({flash_not_supported:"Ci dispiace, non &egrave; possibile utilizzare questo dispositivo per registrare il video (&egrave; necessario Flash).",flash_not_installed:'Per registrare un video &egrave; necessario installare Flash. <a href="http://get.adobe.com/flashplayer">Clicca qui per installarlo</a>.',flash_old_version:'Per registrare un video &egrave; necessario aggiornare la versione di Flash. <a href="http://get.adobe.com/flashplayer">Clicca qui per aggiornare</a>.',no_camera:"Ci dispiace, non abbiamo potuto rilevare una fotocamera sul dispositivo. Si prega di utilizzare un dispositivo con una fotocamera funzionante.",no_microphone:"Ci dispiace, non abbiamo potuto rilevare un microfono sul dispositivo. Si prega di utilizzare un dispositivo con un microfono funzionante.",no_visual:"Ci dispiace, non riusciamo a vederti.",no_sound:"Ci dispiace, non riusciamo a sentirti.",browser_permission:"Abbiamo bisogno di accedere alla tua fotocamera e al tuo microfono.",microphone_test:"Testando il microfono...",camera_test:"Testando la fotocamera...",say_something:"Di' qualcosa cosi da poter testare il microfono.",also_try_different_camera:"Puoi anche provare a selezionare un'altra fotocamera.",try_different_camera:"Prova a selezionare un'altra fotocamera.",try_different_microphone:"Prova a selezionare un altro microfono.",record_label:"Registra",recording_get_ready:"Preparati...",uploading_label:"Caricamento",microphone_settings:"Impostazioni del microfono",camera_settings:"Impostazioni della fotocamera",camera_light_level:"La scarsa illuminazione",external_upload:"Carica Video",recording_start:"Vai!",recording_starts_in:"Inizia in",record_video:"Registra un Video",stop_recording:"Stop",select_snapshot:"Seleziona un'immagine",uploading_video:"Il tuo video &egrave; in fase di caricamento",rerecord_label:"Registrare di nuovo?",rerecord_confirm:"Sei sicuro di voler registrare nuovamente il video?",abort_record:"Attendere",rerecord_affirmation:"Non ti preoccupare, &egrave; possibile registrare nuovamente il video",rerecord_multiple_affirmation:"Non ti preoccupare, &egrave; possibile registrare il video altre %d volte.",rerecord_double_affirmation:"Non ti preoccupare, &egrave; possibile registrare il video altre due volte.",rerecord_single_affirmation:"Non ti preoccupare, &egrave; possibile reigistrare il video ancora una volta.",rerecord_immediately:"Registra di nuovo",waiting_for_flash:"In attesa di Flash. Potrebbe essere necessario cliccare sulla parte superiore del registratore per disattivare le funzioni di risparmio energetico del tuo browser.",select_file_action:"Carica il tuo Video",select_file_action_mobile:"Registra un Video",reselect_file_action:"Carica nuovamente il tuo Video",reselect_file_action_mobile:"Registra nuovamente un Video",external_record_label:"Registra un Video",try_again:"Riprova",processing_label:"Elaborazione in corso",uploading_file_failed:"Caricamento non riuscito, si prega di riprovare.",could_not_process_file:"Non abbiamo potuto elaborare il tuo video, si prega di riprovare.",device_unsupported:"Il tuo dispositivo non e' al momento supportato, ci scusiamo per l'inconveniente."},"it.video_recorder"),BetaJS.Locales.register({flash_not_supported:"Beklager, du kan ikke bruke denne enheten for &#xE5; spille inn din video (Flash er n&#xF8;dvendig).",flash_not_installed:'For &#xE5; spille inn en video trenger du &#xE5; installere Flash. <a href="http://get.adobe.com/flashplayer">Trykk her for &#xE5; installere</a>.',flash_old_version:'For &#xE5; spille inn en video trenger du &#xE5; oppdatere din versjon av Flash. <a href="http://get.adobe.com/flashplayer">Trykk her for &#xE5; oppdatere</a>.',no_camera:"Beklager, vi kunne ikke finne et kamera p&#xE5; din enhet. Vennligst bruk en enhet med et fungerende kamera.",no_microphone:"Beklager, vi kunne ikke finne en mikrofon p&#xE5; din enhet. Vennligst bruk en enhet med en fungerende mikrofon.",no_visual:"Beklager, vi kan ikke se deg.",no_sound:"Beklager, vi kan ikke h&#xF8;re deg.",browser_permission:"Vi trenger tilgang til ditt kamera og mikrofon.",microphone_test:"Tester mikrofon...",camera_test:"Tester kamera...",say_something:"Si noe s&#xE5; vi kan teste mikrofonen din.",also_try_different_camera:"Du kan ogs&#xE5; pr&#xF8;ve &#xE5; velge et annet kamera.",try_different_camera:"Pr&#xF8;v &#xE5; velge et annet kamera.",try_different_microphone:"Pr&#xF8;v &#xE5; velge en annen mikrofon.",record_label:"Spill inn",recording_get_ready:"Gj&#xF8;r deg klar...",video_file_too_large:"Din videofil er for stor, vennligst pr&#xF8;v igjen med en mindre videofil.",uploading_label:"Laster opp",microphone_settings:"Mikrofon innstillinger",camera_settings:"Kamera innstillinger",camera_light_level:"Lyset rundt deg er for svakt",external_upload:"Laster opp video",unsupported_video_type:"Vennligst last opp: %s",recording_start:"G&#xE5;!",recording_starts_in:"Starter om",record_video:"Spill inn din video",stop_recording:"Stopp",select_snapshot:"Velg et forh&#xE5;ndsbilde",uploading_video:"Videoen din lastes opp",rerecord_label:"Spille inn p&#xE5; nytt?",rerecord_confirm:"Er du sikker p&#xE5; at du vil spille inn videoen din p&#xE5; nytt?",abort_record:"Vent",rerecord_affirmation:"Du kan alltids spille inn videoen din p&#xE5; nytt.",rerecord_multiple_affirmation:"Du kan spille inn videoen %d gang(er) til.",rerecord_double_affirmation:"Du kan spille inn  videoen p&#xE5; nytt to ganger.",rerecord_single_affirmation:" Du kan spille inn  videoen p&#xE5; nytt en gang til.",rerecord_immediately:"Spill inn p&#xE5; nytt",waiting_for_flash:"Venter p&#xE5; Flash. Pr&#xF8;v &#xE5; trykke p&#xE5; toppen av denne boksen for &#xE5; aktivere det.",select_file_action:"Last opp din video",select_file_action_mobile:"Spill inn din video",reselect_file_action:"Last opp videoen din p&#xE5; nytt",reselect_file_action_mobile:" Spill inn videoen din p&#xE5; nytt ",external_record_label:"Spill inn din video",try_again:"Pr&#xF8;ve igjen?",processing_label:"Gjennomf&#xF8;rer",uploading_file_failed:"Opplastning feilet, vennligst pr&#xF8;v igjen.",could_not_process_file:"Vi kunne ikke behandle din video, vennligst pr&#xF8;v igjen.",device_unsupported:"Din enhet er for tiden ikke st&#xF8;ttet. Vi beklager veldig."},"no.video_recorder"),BetaJS.Locales.register({flash_not_supported:"Niestety, nie mo&#x17C;esz u&#x17C;ywa&#x107; tego urz&#x105;dzenia do nagrywania wideo (wymagany jest Flash).",flash_not_installed:'Aby nagra&#x107; siebie na wideo, musisz zainstalowa&#x107; Flash. <a href="http://get.adobe.com/flashplayer">Kliknij tutaj, aby zainstalowa&#x107;</a>.',flash_old_version:'Aby nagra&#x107; siebie na wideo, musisz zaktualizowa&#x107; swoj&#x105; wersj&#x119; Flash. <a href="http://get.adobe.com/flashplayer">Kliknij tutaj, aby zaktualizowa&#x107;</a>.',no_camera:"Niestety, nie wykryli&#x15B;my kamery w Twoim urz&#x105;dzeniu. U&#x17C;yj urz&#x105;dzenia z dzia&#x142;aj&#x105;c&#x105; kamer&#x105;.",no_microphone:"Niestety, nie wykryli&#x15B;my mikrofonu na Twoim urz&#x105;dzeniu. U&#x17C;yj urz&#x105;dzenia z dzia&#x142;aj&#x105;cym mikrofonem.",no_visual:"Niestety, nie widzimy Ci&#x119;.",no_sound:"Niestety, nie s&#x142;yszymy Ci&#x119;.",browser_permission:"Potrzebujemy dost&#x119;pu do Twojej kamery i mikrofonu.",microphone_test:"Sprawdzanie mikrofonu...",camera_test:"Sprawdzanie kamery...",say_something:"Powiedz co&#x15B;, aby umo&#x17C;liwi&#x107; nam sprawdzenie mikrofonu.",also_try_different_camera:"Mo&#x17C;esz tak&#x17C;e spr&#xF3;bowa&#x107; wybra&#x107; inn&#x105; kamer&#x119;.",try_different_camera:"Spr&#xF3;buj wybra&#x107; inn&#x105; kamer&#x119;.",try_different_microphone:"Spr&#xF3;buj wybra&#x107; inny mikrofon.",record_label:"Nagraj",recording_get_ready:"Przygotuj si&#x119;...",video_file_too_large:"Tw&#xF3;j plik wideo jest zbyt du&#x17C;y, spr&#xF3;buj ponownie z mniejszym plikiem",uploading_label:"Przesy&#x142;anie",microphone_settings:"Ustawienia mikrofonu",camera_settings:"Ustawienia kamery",camera_light_level:"Twoje o&#x15B;wietlenie jest do&#x15B;&#x107; s&#x142;abe",external_upload:"Prze&#x15B;lij film wideo",unsupported_video_type:"Prosz&#x119; przes&#x142;a&#x107;: %s",recording_start:"Start!",recording_starts_in:"Rozpocznie si&#x119; w ci&#x105;gu",record_video:"Nagraj wideo",stop_recording:"Stop",select_snapshot:"Wybierz miniatur&#x119;",uploading_video:"Tw&#xF3;j film jest w trakcie przesy&#x142;ania",rerecord_label:"Nagra&#x107; ponownie?",rerecord_confirm:"Czy na pewno chcesz ponownie nagra&#x107; sw&#xF3;j film?",abort_record:"Czekaj",rerecord_affirmation:"Nie martw si&#x119;, zawsze mo&#x17C;esz nagra&#x107; ponownie.",rerecord_multiple_affirmation:"Nie martw si&#x119;, mo&#x17C;esz nagra&#x107; ponownie %d razy.",rerecord_double_affirmation:"Nie martw si&#x119;, mo&#x17C;esz nagra&#x107; ponownie dwa razy.",rerecord_single_affirmation:"Nie martw si&#x119;, mo&#x17C;esz nagra&#x107; ponownie jeszcze raz.",rerecord_immediately:"Nagraj ponownie",waiting_for_flash:"Oczekiwanie na Flash. Spr&#xF3;buj klikn&#x105;&#x107; na g&#xF3;rze tego okna, aby aktywowa&#x107;.",select_file_action:"Prze&#x15B;lij wideo",select_file_action_mobile:"Nagraj wideo",reselect_file_action:"Prze&#x15B;lij wideo ponownie",reselect_file_action_mobile:"Nagraj wideo ponownie",external_record_label:"Nagraj wide",try_again:"Spr&#xF3;bowa&#x107; ponownie?",processing_label:"Przetwarzanie",uploading_file_failed:"Przesy&#x142;anie nie powiod&#x142;o si&#x119;, spr&#xF3;buj ponownie.",could_not_process_file:"Nie uda&#x142;o si&#x119; przetworzy&#x107; Twojego wideo, spr&#xF3;buj ponownie.",device_unsupported:"Urz&#x105;dzenie nie jest obecnie obs&#x142;ugiwane. Jest nam bardzo przykro."},"pl.video_recorder"),BetaJS.Locales.register({flash_not_supported:"Desculpe, voc&ecirc; n&atilde;o pode usar esse dispositivo para gravar seu video (Flash &eacute; requerido)",flash_not_installed:'Para gravar um video, voc&ecirc; precisa instalar o Flash. <a href="http://get.adobe.com/flashplayer">Clique aqui para instalar</a>.',flash_old_version:'Para gravar um video, voc&ecirc; precisa atualizar o Flash. <a href="http://get.adobe.com/flashplayer">Clique aqui para atualizar</a>.',no_camera:"Desculpe, n&oacute;s n&atilde;o conseguimos detectar uma c&acirc;mera no seu dispositivo. Por favor user um dispositivo com uma c&acirc;mera funcionando",no_microphone:"Desculpe, n&oacute;s n&atilde;o conseguimos detectar uma microfone no seu dispositivo. Por favor user um dispositivo com uma microfone funcionando",no_visual:"Desculpe, n&oacute;s n&atilde;o estamos conseguindo te ver",no_sound:"Desculpe, n&oacute;s n&atilde;o estamos conseguindo te ouvir",browser_permission:"N&oacute;s precisamos acessar sua c&acirc;mera e seu microfone",microphone_test:"Testando microfone",camera_test:"Testando c&acirc;mera",say_something:"Fale algo para que possamos testar seu microfone",also_try_different_camera:"Voc&ecirc; pode tamb&eacute;m selecionar um c&acirc;mera diferente",try_different_camera:"Tente selecionar uma c&acirc;mera diferente",try_different_microphone:"Tente selecionar um microfone diferente",record_label:"Gravar",recording_get_ready:"Prepare-se...",video_file_too_large:"Seu arquivo de video &eacute; muito grande, por favor tente denovo com um arquivo de video menor",uploading_label:"Enviando",microphone_settings:"Configura&ccedil;&otilde;es do microfone",camera_settings:"Configura&ccedil;&otilde;es da c&acirc;mera",camera_light_level:"Sua ilumina&ccedil;&atilde;o n&atilde;o &eacute; boa",external_upload:"Envie um video",unsupported_video_type:"Por favor envie: %s",recording_start:"Come&ccedil;ou!",recording_starts_in:"Come&ccedil;a em ",record_video:"Grave seu video",stop_recording:"Pare",select_snapshot:"Escolha um Thumbnail",uploading_video:"Seu video esta sendo enviado",rerecord_label:"Regravar?",rerecord_confirm:"Voc&ecirc; tem certeza que deseja regravar seu video?",abort_record:"Espere",rerecord_affirmation:"N&atilde;o se preucope, voc&ecirc; pode regravar quantas vezes quiser",rerecord_multiple_affirmation:"N&atilde;o se preucope, voc&ecirc; pode regravar mais %d vezes.",rerecord_double_affirmation:"N&atilde;o se preucope, voc&ecirc; pode regravar mais duas vezes.",rerecord_single_affirmation:"N&atilde;o se preucope, voc&ecirc; pode regravar mais um vez.",rerecord_immediately:"Regravar",waiting_for_flash:"Carregando Flash. Tente clicando no topo dessa caixa para ativar.",select_file_action:"Envie seu Video",select_file_action_mobile:"Grave seu Video",reselect_file_action:"Reenvie seu Video",reselect_file_action_mobile:"Regrave seu Video",external_record_label:"Grave seu Video",try_again:"Tentar denovo?",processing_label:"Processando",uploading_file_failed:"Falha no envio, por favor tente novamente.",could_not_process_file:"N&oacute;s n&atilde;o conseguimos processar seu video, por favor tente denovo.",device_unsupported:"Seu dispositivo n&atilde;o &eacute; suportado, nos sentimos muito"},"pt-br.video_recorder"),BetaJS.Locales.register({flash_not_supported:"Din p&#x103;cate, nu pute&#x21B;i utiliza acest aparat pentru a &#xEE;nregistra videoclipul dumneavoastr&#x103; (Flash este necesar).",flash_not_installed:'Pentru a v&#x103; filma, trebuie s&#x103; instala&#x21B;i Flash. <a href="http://get.adobe.com/flashplayer">Ap&#x103;sa&#x21B;i aici pentru a instala</a>.',flash_old_version:'Pentru a v&#x103; filma, trebuie s&#x103; actualiza&#x21B;i versiunea de Flash. <a href="http://get.adobe.com/flashplayer">Ap&#x103;sa&#x21B;i aici pentru a actualiza</a>.',no_camera:"Din p&#x103;cate, nu am putut detecta o camer&#x103; pe dispozitivul dumneavoastr&#x103;. V&#x103; rug&#x103;m s&#x103; folosi&#x21B;i un dispozitiv cu o camer&#x103; func&#x21B;ionabil&#x103;",no_microphone:"Din p&#x103;cate, nu am putut detecta un microfon pe dispozitivul dumneavoastr&#x103;. V&#x103; rug&#x103;m s&#x103; folosi&#x21B;i un dispozitiv cu un microfon func&#x21B;ional",no_visual:"Ne pare r&#x103;u, nu v&#x103; putem vedea.",no_sound:"Ne pare r&#x103;u, nu v&#x103; putem auzi.",browser_permission:"Avem nevoie de acces la camera &#x219;i microfonul dumneavoastr&#x103;.",microphone_test:"Testare microfon...",camera_test:"Testare camer&#x103;...",say_something:"Spune&#x21B;i ceva astfel &#xEE;nc&#xE2;t s&#x103; putem testa microfonul.",also_try_different_camera:"Pute&#x21B;i &#xEE;ncerca, de asemenea, s&#x103; selecta&#x21B;i o alt&#x103; camer&#x103;.",try_different_camera:"&#xCE;ncerca&#x21B;i s&#x103; selecta&#x21B;i o alt&#x103; camer&#x103;.",try_different_microphone:"&#xCE;ncerca&#x21B;i s&#x103; selecta&#x21B;i un alt microfon.",record_label:"Inregistra&#x21B;i",recording_get_ready:"Preg&#x103;ti&#x21B;i-v&#x103;...",video_file_too_large:"Fi&#x219;ierul video este prea mare, v&#x103; rug&#x103;m s&#x103; &#xEE;ncerca&#x21B;i din nou cu un fi&#x219;ier video mai mic.",uploading_label:"Se &#xEE;ncarc&#x103;",microphone_settings:"Set&#x103;ri microfon",camera_settings:"Set&#x103;rile camerei",camera_light_level:"Lumina este destul de slab&#x103;",external_upload:"&#xCE;ncarc&#x103; video",unsupported_video_type:"V&#x103; rug&#x103;m s&#x103; &#xEE;nc&#x103;rca&#x21B;i: %s",recording_start:"Start!",recording_starts_in:"&#xCE;ncepe &#xEE;n",record_video:"&#xCE;nregistra&#x21B;i videoclipul dumneavoastr&#x103;",stop_recording:"Stop",select_snapshot:"Alege&#x21B;i o miniatur&#x103;",uploading_video:"Videoclipul se &#xEE;ncarc&#x103;",rerecord_label:"Re-&#xEE;nregistrare?",rerecord_confirm:"Sunte&#x21B;i sigur c&#x103; dori&#x21B;i s&#x103; re-&#xEE;nregistra&#x21B;i videoclipul?",abort_record:"A&#x219;tepta&#x21B;i",rerecord_affirmation:"Nu v&#x103; face&#x21B;i griji, pute&#x21B;i &#xEE;ntotdeauna s&#x103; re&#xEE;nregistra&#x21B;i.",rerecord_multiple_affirmation:"Nu v&#x103; face&#x21B;i griji, pute&#x21B;i re&#xEE;nregistra de inc&#x103; %d ori.",rerecord_double_affirmation:"Nu v&#x103; face&#x21B;i griji, pute&#x21B;i re&#xEE;nregistra de dou&#x103; ori.",rerecord_single_affirmation:"Nu v&#x103; face&#x21B;i griji, pute&#x21B;i re&#xEE;nregistra &#xEE;nc&#x103; o dat&#x103;.",rerecord_immediately:"Re&#xEE;nregistrare",waiting_for_flash:"&#xCE;n a&#x219;teptare pentru Flash. &#xCE;ncerca&#x21B;i s&#x103; face&#x21B;i clic pe partea de sus a acestei c&#x103;su&#x21B;e pentru a activa.",select_file_action:"&#xCE;nc&#x103;rca&#x21B;i videoclipul",select_file_action_mobile:"&#xCE;nregistra&#x21B;i videoclipul",reselect_file_action:"Re&#xEE;nc&#x103;rca&#x21B;i videoclipul",reselect_file_action_mobile:"Re&#xEE;nregistra&#x21B;i videoclipul",external_record_label:"&#xCE;nregistra&#x21B;i videoclipul",try_again:"&#xCE;ncerca&#x21B;i din nou?",processing_label:"Procesare",uploading_file_failed:"&#xCE;nc&#x103;rcarea nu a reu&#x219;it, v&#x103; rug&#x103;m s&#x103; &#xEE;ncerca&#x21B;i din nou.",could_not_process_file:"Nu am putut procesa videoclipul dvs., v&#x103; rug&#x103;m s&#x103; &#xEE;ncerca&#x21B;i din nou.",device_unsupported:"Dispozitivul dvs. nu este acceptat &#xEE;n prezent. Ne pare foarte r&#x103;u."},"ro.video_recorder"),BetaJS.Locales.register({flash_not_supported:"&#x418;&#x437;&#x432;&#x438;&#x43D;&#x438;&#x442;&#x435;, &#x430;&#x43B;&#x438; &#x43D;&#x435; &#x43C;&#x43E;&#x436;&#x435;&#x442;&#x435; &#x43A;&#x43E;&#x440;&#x438;&#x441;&#x442;&#x438;&#x442;&#x438; &#x43E;&#x432;&#x430;&#x458; &#x443;&#x440;&#x435;&#x452;&#x430;&#x458; &#x434;&#x430; &#x441;&#x43D;&#x438;&#x43C;&#x438;&#x442;&#x435; &#x432;&#x438;&#x434;&#x435;&#x43E; (&#x41F;&#x43E;&#x442;&#x440;&#x435;&#x431;&#x430;&#x43D; &#x412;&#x430;&#x43C; &#x458;&#x435; Flash).",flash_not_installed:'&#x414;&#x430; &#x431;&#x438; &#x441;&#x442;&#x435; &#x441;&#x43D;&#x438;&#x43C;&#x438;&#x43B;&#x438; &#x432;&#x438;&#x434;&#x435;&#x43E;, &#x442;&#x440;&#x435;&#x431;&#x430;&#x442;&#x435; &#x438;&#x43D;&#x441;&#x442;&#x430;&#x43B;&#x438;&#x440;&#x430;&#x442;&#x438; Flash. <a href="http://get.adobe.com/flashplayer">&#x41A;&#x43B;&#x438;&#x43A;&#x43D;&#x438;&#x442;&#x435; &#x43E;&#x432;&#x434;&#x435; &#x437;&#x430; &#x438;&#x43D;&#x441;&#x442;&#x430;&#x43B;&#x430;&#x446;&#x438;&#x458;&#x443;</a>.',flash_old_version:'&#x414;&#x430; &#x431;&#x438; &#x441;&#x442;&#x435; &#x441;&#x435; &#x441;&#x43D;&#x438;&#x43C;&#x438;&#x43B;&#x438; &#x442;&#x440;&#x435;&#x431;&#x430;&#x442;&#x435; &#x430;&#x436;&#x443;&#x440;&#x438;&#x440;&#x430;&#x442;&#x438; &#x412;&#x430;&#x448; Flash. <a href="http://get.adobe.com/flashplayer">&#x41A;&#x43B;&#x438;&#x43A;&#x43D;&#x438;&#x442;&#x435; &#x43E;&#x432;&#x434;&#x435; &#x437;&#x430; &#x43D;&#x43E;&#x432;&#x443; &#x432;&#x435;&#x440;&#x437;&#x438;&#x458;&#x443;</a>.',no_camera:"&#x41D;&#x430;&#x436;&#x430;&#x43B;&#x43E;&#x441;&#x442; &#x43D;&#x438;&#x441;&#x43C;&#x43E; &#x43C;&#x43E;&#x433;&#x43B;&#x438; &#x434;&#x435;&#x442;&#x435;&#x43A;&#x442;&#x43E;&#x432;&#x430;&#x442;&#x438; &#x43A;&#x430;&#x43C;&#x435;&#x440;&#x443; &#x43D;&#x430; &#x412;&#x430;&#x448;&#x435;&#x43C; &#x443;&#x440;&#x435;&#x452;&#x430;&#x458;&#x443;. &#x41C;&#x43E;&#x43B;&#x438;&#x43C;&#x43E; &#x432;&#x430;&#x441; &#x434;&#x430; &#x43A;&#x43E;&#x440;&#x438;&#x441;&#x442;&#x438;&#x442;&#x435; &#x443;&#x440;&#x435;&#x452;&#x430;&#x458; &#x441;&#x430; &#x43A;&#x430;&#x43C;&#x435;&#x440;&#x43E;&#x43C; &#x437;&#x430; &#x43A;&#x43E;&#x458;&#x443; &#x437;&#x43D;&#x430;&#x442;&#x435; &#x434;&#x430; &#x444;&#x443;&#x43D;&#x43A;&#x446;&#x438;&#x43E;&#x43D;&#x438;&#x448;&#x435;.",no_microphone:"&#x41D;&#x430;&#x436;&#x430;&#x43B;&#x43E;&#x441;&#x442; &#x43D;&#x438;&#x441;&#x43C;&#x43E; &#x43C;&#x43E;&#x433;&#x43B;&#x438; &#x434;&#x435;&#x442;&#x435;&#x43A;&#x442;&#x43E;&#x432;&#x430;&#x442;&#x438; &#x43C;&#x438;&#x43A;&#x440;&#x430;&#x444;&#x43E;&#x43D; &#x43D;&#x430; &#x412;&#x430;&#x448;&#x435;&#x43C; &#x443;&#x440;&#x435;&#x452;&#x430;&#x458;&#x443;. &#x41C;&#x43E;&#x43B;&#x438;&#x43C;&#x43E; &#x432;&#x430;&#x441; &#x434;&#x430; &#x43A;&#x43E;&#x440;&#x438;&#x441;&#x442;&#x438;&#x442;&#x435; &#x443;&#x440;&#x435;&#x452;&#x430;&#x458; &#x441;&#x430; &#x43C;&#x438;&#x43A;&#x440;&#x430;&#x444;&#x43E;&#x43D;&#x43E;&#x43C; &#x437;&#x430; &#x43A;&#x43E;&#x458;&#x443; &#x437;&#x43D;&#x430;&#x442;&#x435; &#x434;&#x430; &#x444;&#x443;&#x43D;&#x43A;&#x446;&#x438;&#x43E;&#x43D;&#x438;&#x448;&#x435;.",no_visual:"&#x41D;&#x430;&#x436;&#x430;&#x43B;&#x43E;&#x441;&#x442; &#x43D;&#x435; &#x43C;&#x43E;&#x436;&#x435;&#x43C;&#x43E; &#x412;&#x430;&#x441; &#x432;&#x438;&#x434;&#x435;&#x442;&#x438;.",no_sound:"&#x41D;&#x430;&#x436;&#x430;&#x43B;&#x43E;&#x441;&#x442; &#x43D;&#x435; &#x43C;&#x43E;&#x436;&#x435;&#x43C;&#x43E; &#x412;&#x430;&#x441; &#x447;&#x443;&#x442;&#x438;.",browser_permission:"&#x41F;&#x43E;&#x442;&#x440;&#x435;&#x431;&#x430;&#x43D; &#x43D;&#x430;&#x43C; &#x458;&#x435; &#x43F;&#x440;&#x438;&#x441;&#x442;&#x443;&#x43F; &#x412;&#x430;&#x448;&#x43E;&#x458; &#x43A;&#x430;&#x43C;&#x435;&#x440;&#x438; &#x438; &#x43C;&#x438;&#x43A;&#x440;&#x430;&#x444;&#x43E;&#x43D;&#x443;.",microphone_test:"&#x422;&#x435;&#x441;&#x442;&#x438;&#x440;&#x430;&#x45A;&#x435; &#x43C;&#x438;&#x43A;&#x440;&#x430;&#x444;&#x43E;&#x43D;&#x430;...",camera_test:"&#x422;&#x435;&#x441;&#x442;&#x438;&#x440;&#x430;&#x45A;&#x435; &#x43A;&#x430;&#x43C;&#x435;&#x440;&#x435;...",say_something:"&#x420;&#x435;&#x446;&#x438;&#x442;&#x435; &#x43D;&#x435;&#x448;&#x442;&#x43E; &#x440;&#x430;&#x434;&#x438; &#x442;&#x435;&#x441;&#x442;&#x438;&#x440;&#x430;&#x45A;&#x430; &#x43C;&#x438;&#x43A;&#x440;&#x430;&#x444;&#x43E;&#x43D;&#x430;.",also_try_different_camera:"&#x41C;&#x43E;&#x436;&#x435;&#x442;&#x435; &#x438; &#x434;&#x430; &#x438;&#x437;&#x430;&#x431;&#x435;&#x440;&#x435;&#x442;&#x435; &#x434;&#x440;&#x443;&#x433;&#x443; &#x43A;&#x430;&#x43C;&#x435;&#x440;&#x443;.",try_different_camera:"&#x41F;&#x440;&#x43E;&#x431;&#x430;&#x458;&#x442;&#x435; &#x438;&#x437;&#x430;&#x431;&#x440;&#x430;&#x442;&#x438; &#x434;&#x440;&#x443;&#x433;&#x443; &#x43A;&#x430;&#x43C;&#x435;&#x440;&#x443;.",try_different_microphone:"&#x41F;&#x440;&#x43E;&#x431;&#x430;&#x458;&#x442;&#x435; &#x438;&#x437;&#x430;&#x431;&#x440;&#x430;&#x442;&#x438; &#x434;&#x440;&#x443;&#x433;&#x438; &#x43C;&#x438;&#x43A;&#x440;&#x430;&#x444;&#x43E;&#x43D;.",record_label:"&#x421;&#x43D;&#x438;&#x43C;&#x438;",recording_get_ready:"&#x421;&#x43F;&#x440;&#x435;&#x43C;&#x438; &#x441;&#x435;...",video_file_too_large:"&#x412;&#x430;&#x448; &#x432;&#x438;&#x434;&#x435;&#x43E; &#x437;&#x430;&#x43F;&#x438;&#x441; &#x458;&#x435; &#x43F;&#x440;&#x435; &#x432;&#x435;&#x43B;&#x438;&#x43A;. &#x41C;&#x43E;&#x43B;&#x438;&#x43C;&#x43E; &#x412;&#x430;&#x441; &#x434;&#x430; &#x43F;&#x440;&#x43E;&#x431;&#x430;&#x442;&#x435; &#x43E;&#x43F;&#x435;&#x442; &#x441;&#x430; &#x43C;&#x430;&#x45A;&#x438;&#x43C; &#x432;&#x438;&#x434;&#x435;&#x43E; &#x437;&#x430;&#x43F;&#x438;&#x441;&#x43E;&#x43C;.",
uploading_label:"&#x423;&#x43F;&#x43B;&#x43E;&#x434;&#x443;&#x458;&#x435; &#x441;&#x435;",microphone_settings:"&#x41F;&#x43E;&#x434;&#x435;&#x448;&#x430;&#x432;&#x430;&#x45A;&#x435; &#x43C;&#x438;&#x43A;&#x440;&#x430;&#x444;&#x43E;&#x43D;&#x430;",camera_settings:"&#x41F;&#x43E;&#x434;&#x435;&#x448;&#x430;&#x432;&#x430;&#x45A;&#x435; &#x43A;&#x430;&#x43C;&#x435;&#x440;&#x435;",camera_light_level:"&#x412;&#x430;&#x448;&#x435; &#x43E;&#x441;&#x432;&#x435;&#x442;&#x459;&#x435;&#x45A;&#x435; &#x458;&#x435; &#x441;&#x43B;&#x430;&#x431;&#x43E;",external_upload:"&#x423;&#x43F;&#x43B;&#x43E;&#x430;&#x434;&#x443;&#x458; &#x432;&#x438;&#x434;&#x435;&#x43E;",unsupported_video_type:"&#x41C;&#x43E;&#x43B;&#x438;&#x43C;&#x43E; &#x412;&#x430;&#x441; &#x43F;&#x440;&#x43E;&#x431;&#x430;&#x458;&#x442;&#x435;: %s",recording_start:"&#x41A;&#x440;&#x435;&#x43D;&#x438;!",recording_starts_in:"&#x41F;&#x43E;&#x447;&#x438;&#x45A;&#x435; &#x437;&#x430;",record_video:"&#x421;&#x43D;&#x438;&#x43C;&#x438; &#x441;&#x432;&#x43E;&#x458; &#x432;&#x438;&#x434;&#x435;&#x43E;",stop_recording:"St&#x430;&#x43D;&#x438;",select_snapshot:"&#x418;&#x437;&#x430;&#x431;&#x435;&#x440;&#x438; &#x441;&#x442;&#x430;&#x442;&#x438;&#x447;&#x43D;&#x443; &#x440;&#x435;&#x43F;&#x440;&#x435;&#x437;&#x435;&#x43D;&#x442;&#x430;&#x446;&#x438;&#x458;&#x443; &#x432;&#x438;&#x434;&#x435;&#x430;",uploading_video:"&#x412;&#x430;&#x448; &#x432;&#x438;&#x434;&#x435;&#x43E; &#x441;&#x435; &#x443;&#x43F;&#x43B;&#x43E;&#x434;&#x443;&#x458;&#x435;",rerecord_label:"&#x41F;&#x440;&#x435;&#x441;&#x43D;&#x438;&#x43C;&#x438;?",rerecord_confirm:"&#x408;&#x435;&#x441;&#x442;&#x435; &#x43B;&#x438; &#x441;&#x438;&#x433;&#x443;&#x440;&#x43D;&#x438; &#x434;&#x430; &#x436;&#x435;&#x43B;&#x438;&#x442;&#x435; &#x434;&#x430; &#x43F;&#x440;&#x435;&#x441;&#x43D;&#x438;&#x43C;&#x438;&#x442;&#x435; &#x412;&#x430;&#x448; &#x43F;&#x43E;&#x441;&#x442;&#x43E;&#x458;&#x435;&#x45B;&#x438; &#x432;&#x438;&#x434;&#x435;&#x43E;?",abort_record:"&#x421;&#x430;&#x447;&#x435;&#x43A;&#x430;&#x458;&#x442;&#x435;",rerecord_affirmation:"&#x41D;&#x435;&#x431;&#x440;&#x438;&#x43D;&#x438;&#x442;&#x435;, &#x43C;&#x43E;&#x436;&#x435;&#x442;&#x435; &#x443;&#x432;&#x435;&#x43A; &#x43F;&#x440;&#x435;&#x441;&#x43D;&#x438;&#x43C;&#x438;&#x442;&#x438;.",rerecord_multiple_affirmation:"&#x41D;&#x435;&#x431;&#x440;&#x438;&#x43D;&#x438;&#x442;&#x435;, &#x43C;&#x43E;&#x436;&#x435;&#x442;&#x435; &#x43F;&#x440;&#x435;&#x441;&#x43D;&#x438;&#x43C;&#x438;&#x442;&#x438; &#x458;&#x43E;&#x448; %d &#x43F;&#x443;&#x442;&#x430;.",rerecord_double_affirmation:"&#x41D;&#x435;&#x431;&#x440;&#x438;&#x43D;&#x438;&#x442;&#x435;, &#x43C;&#x43E;&#x436;&#x435;&#x442;&#x435; &#x43F;&#x440;&#x435;&#x441;&#x43D;&#x438;&#x43C;&#x438;&#x442;&#x438; &#x458;&#x43E;&#x448; &#x434;&#x432;&#x430; &#x43F;&#x443;&#x442;&#x430;.",rerecord_single_affirmation:"&#x41D;&#x435;&#x431;&#x440;&#x438;&#x43D;&#x438;&#x442;&#x435;, &#x43C;&#x43E;&#x436;&#x435;&#x442;&#x435; &#x43F;&#x440;&#x435;&#x441;&#x43D;&#x438;&#x43C;&#x438;&#x442;&#x438; &#x458;&#x43E;&#x448; &#x458;&#x435;&#x434;&#x43D;&#x43E;&#x43C;.",rerecord_immediately:"&#x41F;&#x440;&#x435;&#x441;&#x43D;&#x438;&#x43C;&#x438;",waiting_for_flash:"&#x427;&#x435;&#x43A;&#x430;&#x43C;&#x43E; &#x43D;&#x430; Flash. &#x41F;&#x43E;&#x43A;&#x443;&#x448;&#x430;&#x458;&#x442;&#x435; &#x43A;&#x43B;&#x438;&#x43A;&#x43D;&#x443;&#x442;&#x438; &#x43D;&#x430; &#x432;&#x440;&#x445;&#x443; &#x43E;&#x432;&#x43E;&#x433; &#x441;&#x435;&#x433;&#x43C;&#x435;&#x43D;&#x442;&#x430; &#x434;&#x430; &#x433;&#x430; &#x430;&#x43A;&#x442;&#x438;&#x432;&#x438;&#x440;&#x430;&#x442;&#x435;.",select_file_action:"&#x423;&#x43F;&#x43B;&#x43E;&#x434;&#x443;&#x458; &#x441;&#x432;&#x43E;&#x458; &#x432;&#x438;&#x434;&#x435;&#x43E;",select_file_action_mobile:"&#x421;&#x43D;&#x438;&#x43C;&#x438;&#x442;&#x435; &#x441;&#x432;&#x43E;&#x458; &#x432;&#x438;&#x434;&#x435;&#x43E;",reselect_file_action:"&#x420;&#x435;-&#x443;&#x43F;&#x43B;&#x43E;&#x430;&#x434;&#x443;&#x458; &#x441;&#x432;&#x43E;&#x458; &#x432;&#x438;&#x434;&#x435;&#x43E;",reselect_file_action_mobile:"&#x41F;&#x440;&#x435;&#x441;&#x43D;&#x438;&#x43C;&#x438; &#x441;&#x432;&#x43E;&#x458; &#x432;&#x438;&#x434;&#x435;&#x43E;",external_record_label:"&#x421;&#x43D;&#x438;&#x43C;&#x438; &#x441;&#x432;&#x43E;&#x458; &#x432;&#x438;&#x434;&#x435;&#x43E;",try_again:"&#x41F;&#x43E;&#x43A;&#x443;&#x448;&#x430;&#x442;&#x438; &#x43F;&#x43E;&#x43D;&#x43E;&#x432;&#x43E;?",processing_label:"&#x41F;&#x440;&#x43E;&#x446;&#x435;&#x441;&#x43E;&#x432;&#x430;&#x45A;&#x435;",uploading_file_failed:"&#x423;&#x43F;&#x43B;&#x43E;&#x430;&#x434;&#x43E;&#x432;&#x430;&#x45A;&#x435; &#x43D;&#x435;&#x443;&#x441;&#x43F;&#x435;&#x448;&#x43D;&#x43E;, &#x43C;&#x43E;&#x43B;&#x438;&#x43C;&#x43E; &#x412;&#x430;&#x441; &#x43F;&#x440;&#x43E;&#x431;&#x430;&#x458;&#x442;&#x435; &#x43F;&#x43E;&#x43D;&#x43E;&#x432;&#x43E;.",could_not_process_file:"&#x41D;&#x438;&#x441;&#x43C;&#x43E; &#x43C;&#x43E;&#x433;&#x43B;&#x438; &#x43F;&#x440;&#x43E;&#x446;&#x435;&#x441;&#x43E;&#x432;&#x430;&#x442;&#x438; &#x412;&#x430;&#x448; &#x432;&#x438;&#x434;&#x435;&#x43E;, &#x43C;&#x43E;&#x43B;&#x438;&#x43C;&#x43E; &#x43F;&#x43E;&#x43A;&#x443;&#x448;&#x430;&#x458;&#x442;&#x435; &#x43F;&#x43E;&#x43D;&#x43E;&#x432;&#x43E;.",device_unsupported:"&#x418;&#x437;&#x432;&#x438;&#x45A;&#x430;&#x432;&#x430;&#x43C;&#x43E; &#x441;&#x435;, &#x430;&#x43B;&#x438; &#x412;&#x430;&#x448; &#x443;&#x440;&#x435;&#x452;&#x430;&#x458; &#x43D;&#x438;&#x458;&#x435; &#x442;&#x440;&#x435;&#x43D;&#x443;&#x442;&#x43D;&#x43E; &#x43F;&#x43E;&#x434;&#x440;&#x436;&#x430;&#x43D;."},"sr.video_recorder"),function(){var a={flash_not_supported:"Du kan inte anv&auml;nda denna enheten f&ouml;r att spela in din video (Flash kr&auml;vs).",flash_not_installed:'F&ouml;r att spela in dig sj&auml;lv kr&auml;vs det att du installerar Flash. <a href="http://get.adobe.com/flashplayer">Klicka h&auml;r f&ouml;r att installera</a>.',flash_old_version:'F&ouml;r att spela in dig sj&auml;lv kr&auml;vs det att du uppdaterar din version av Flash. <a href="http://get.adobe.com/flashplayer">Klicka h&auml;r f&ouml;r att uppdatera</a>.',no_camera:"Ingen kamera hittades. V&auml;nligen anv&auml;nd en enhet med fungerande kamera f&ouml;r att spela in din video.",no_microphone:"Ingen mikrofon hittades. V&auml;nligen anv&auml;nd en enhet med fungerande mikrofon f&ouml;r att spela in din video.",no_visual:"Ledsen, vi kan inte se dig.",no_sound:"Ledsen, vi kan inte h&ouml;ra dig.",browser_permission:"Vi beh&ouml;ver tillg&aring;ng till din kamera och mikrofon.",microphone_test:"Testar Mikrofon...",camera_test:"Testar Kamera...",say_something:"S&auml;g n&aring;nting s&aring; att vi kan testa mikrofonen.",also_try_different_camera:"Du kan &auml;ven testa att anv&auml;nda en annan kamera.",try_different_camera:"Testa att anv&auml;nda en annna kamera.",try_different_microphone:"Testa att anv&auml;nda en annan mikrofon.",record_label:"Spela in",recording_get_ready:"G&ouml;r dig redo...",uploading_label:"Laddar upp",microphone_settings:"Mikrofoninst&auml;llningar",camera_settings:"Kamerainst&auml;llningar",camera_light_level:"Din ljuss&auml;ttning &auml;r ganska d&aring;lig",external_upload:"Ladda upp video",unsupported_video_type:"V&auml;nligen ladda upp: %s",recording_start:"K&ouml;r!",recording_starts_in:"Startar om",record_video:"Spela in din video",stop_recording:"Stopp",select_snapshot:"V&auml;lj en miniatyrbild",uploading_video:"Din video laddas upp",rerecord_label:"Omtagning?",rerecord_confirm:"Är du s&auml;ker p&aring; att du vill g&ouml;ra omtagning p&aring; din video?",abort_record:"V&auml;nta",rerecord_affirmation:"Oroa dig inte, du kan alltid g&ouml;ra en omtagning",rerecord_multiple_affirmation:"Oroa dig inte, du kan g&ouml;ra omtagning %d g&aring;nger till.",rerecord_double_affirmation:"Oroa dig inte, du kan g&ouml;ra tv&aring; omtagningar till.",rerecord_single_affirmation:"Oroa dig inte, du kan g&ouml;ra en omtagning till.",rerecord_immediately:"Omtagning",waiting_for_flash:"V&auml;ntar p&aring; Flash. Testa att klicka p&aring; toppen av denna box f&ouml;r att aktivera.",select_file_action:"Ladda upp din video.",select_file_action_mobile:"Spela in din video.",reselect_file_action:"Ladda upp din video igen.",reselect_file_action_mobile:"Spela in din video igen",external_record_label:"Spela in din video",try_again:"F&ouml;rs&ouml;k igen?",processing_label:"Bearbetar",uploading_file_failed:"Uppladdning misslyckades, v&auml;nligen f&ouml;rs&ouml;k igen.",could_not_process_file:"Vi kunde inte bearbeta din video, v&auml;nligen f&ouml;rsk igen.",device_unsupported:"Tyv&auml;rr s&aring; st&ouml;ds inte din enhet f&ouml;r tillf&auml;llet. Vi ber om urs&auml;kt f&ouml;r detta."};BetaJS.Locales.register(a,"sv.video_recorder"),BetaJS.Locales.register(a,"se.video_recorder")}.call(this),BetaJS.Locales.register({flash_not_supported:"&#xDC;zg&#xFC;n&#xFC;z, video kaydetmek i&#xE7;in bu cihaz&#x131; kullanamazs&#x131;n&#x131;z (Flash gereklidir).",flash_not_installed:'Video kayd&#x131; alabilmek i&#xE7;in Flash y&#xFC;klemeniz gerekmektedir. <a href="http://get.adobe.com/flashplayer">Y&#xFC;klemek i&#xE7;in buraya t&#x131;klay&#x131;n</a>.',flash_old_version:'Video kayd&#x131; alabilmek i&#xE7;in Flash versiyonunuzu g&#xFC;ncellemeniz gerekmektedir. <a href="http://get.adobe.com/flashplayer">G&#xFC;ncellemek i&#xE7;in buraya t&#x131;klay&#x131;n</a>.',no_camera:"&#xDC;zg&#xFC;n&#xFC;z, cihaz&#x131;n&#x131;zda kamera tespit edemedik. L&#xFC;tfen &#xE7;al&#x131;&#x15F;&#x131;r durumda kameras&#x131; olan bir cihaz kullan&#x131;n.",no_microphone:"&#xDC;zg&#xFC;n&#xFC;z, cihaz&#x131;n&#x131;zda mikrofon tespit edemedik. L&#xFC;tfen &#xE7;al&#x131;&#x15F;&#x131;r durumda mikrofonu olan bir cihaz kullan&#x131;n.",no_visual:"&#xDC;zg&#xFC;n&#xFC;z, sizi g&#xF6;remiyoruz.",no_sound:"&#xDC;zg&#xFC;n&#xFC;z, sizi duyam&#x131;yoruz.",browser_permission:"Kamera ve mikrofonuza eri&#x15F;memiz gerekiyor.",microphone_test:"Mikrofon Test Ediliyor...",camera_test:"Kamera Test Ediliyor...",say_something:"Mikrofonu test edebilmemiz i&#xE7;in bir &#x15F;ey s&#xF6;yleyin.",also_try_different_camera:"Farkl&#x131; bir kamera se&#xE7;meyi de deneyebilirsiniz.",try_different_camera:"Farkl&#x131; bir kamera se&#xE7;meyi deneyin.",try_different_microphone:"Farkl&#x131; bir mikrofon se&#xE7;meyi deneyin.",record_label:"Kay&#x131;t",recording_get_ready:"Haz&#x131;rlan&#x131;n...",video_file_too_large:"Video dosyan&#x131;z &#xE7;ok b&#xFC;y&#xFC;k, l&#xFC;tfen daha k&#xFC;&#xE7;&#xFC;k bir dosyayla tekrar deneyin.",uploading_label:"Y&#xFC;kleniyor",microphone_settings:"Mikrofon ayarlar&#x131;",camera_settings:"Kamera ayarlar&#x131;",camera_light_level:"Ayd&#x131;nlatman&#x131;z k&#xF6;t&#xFC; durumda",external_upload:"Video Y&#xFC;kle",unsupported_video_type:"L&#xFC;tfen y&#xFC;kleyin: %s",recording_start:"Ba&#x15F;lay&#x131;n!",recording_starts_in:"%d saniye i&#xE7;inde ba&#x15F;l&#x131;yor",record_video:"Videonuzu kaydedin",stop_recording:"Dur",select_snapshot:"Bir K&#xFC;&#xE7;&#xFC;k Resim Se&#xE7;in",uploading_video:"Videonuz y&#xFC;kleniyor",rerecord_label:"Tekrar kay&#x131;t?",rerecord_confirm:"Videonuzu yeniden kaydetmek istedi&#x11F;inizden emin misiniz?",abort_record:"Bekle",rerecord_affirmation:"Merak etmeyin, her zaman yeniden kay&#x131;t yapabilirsiniz.",rerecord_multiple_affirmation:"Merak etmeyin, %d kere daha yeniden kay&#x131;t yapabilirsiniz.",rerecord_double_affirmation:"Merak etmeyin, iki kere daha yeniden kay&#x131;t yapabilirsiniz.",rerecord_single_affirmation:"Merak etmeyin, bir kere daha yeniden kay&#x131;t yapabilirsiniz.",rerecord_immediately:"Yeniden kay&#x131;t",waiting_for_flash:"Flash bekleniyor. Aktifle&#x15F;tirmek i&#xE7;in bu kutunun &#xFC;st taraf&#x131;na t&#x131;klay&#x131;n.",select_file_action:"Videonuzu y&#xFC;kleyin",select_file_action_mobile:"Videonuzu kaydedin",reselect_file_action:"Videonuzu tekrar y&#xFC;kleyin",reselect_file_action_mobile:"Videonuzu tekrar kaydedin",external_record_label:"Videonuzu kaydedin",try_again:"Tekrar dene?",processing_label:"&#x130;&#x15F;leniyor",uploading_file_failed:"Y&#xFC;kleme ba&#x15F;ar&#x131;s&#x131;z oldu, l&#xFC;tfen tekrar deneyin.",could_not_process_file:"Videonuzu i&#x15F;leyemedik, l&#xFC;tfen tekrar deneyin.",device_unsupported:"Cihaz&#x131;n&#x131;z &#x15F;u anda desteklenmiyor. &#xC7;ok &#xFC;zg&#xFC;n&#xFC;z."},"tr.video_recorder"),BetaJS.Views.VideoRecorder.States.State.extend("BetaJS.Views.VideoRecorder.States.WaitingForFlash",{_start_state:function(){this.view().__waiting_for_flash_view.show()},_timer_state:function(){this.api()&&this.next("Init")},_end_state:function(){this.view().__waiting_for_flash_view.hide()}}),BetaJS.Views.VideoRecorder.States.State.extend("BetaJS.Views.VideoRecorder.States.Init",{_start_state:function(){if(this.view().__dont_cancel=!1,this.view().__screen_height=window.innerHeight,!this.view().get("first_screen")||"player"==this.view().get("type")){var a=BetaJS.Browser.Info.flash();return void(a.installed()&&a.versionAtLeast(11)?this.next("FlashOkay"):this.next("FlashFailed"))}var b=this.addView(BetaJS.Views.VideoRecorder.Views.InitialView,{parent:this.view()});b.on("record",function(){var a=BetaJS.Browser.Info.flash();a.installed()&&a.versionAtLeast(11)?this.next("FlashOkay"):this.next("FlashFailed")},this),b.on("upload",function(){this.view().trigger("external_upload")},this)}}),BetaJS.Views.VideoRecorder.States.State.extend("BetaJS.Views.VideoRecorder.States.ErrorState",{_locals:["error_message","call_to_action"],_start_state:function(){this.addView(BetaJS.Views.VideoRecorder.Views.ErrorView,{error:this._error_message,call_to_action:this._call_to_action})}}),BetaJS.Views.VideoRecorder.States.State.extend("BetaJS.Views.VideoRecorder.States.FlashFailed",{_start_state:function(){var a=BetaJS.Browser.Info.flash();a.supported()?a.installed()?(this.view().trigger("client_error",this._("flash_old_version")),this.next("ErrorState",{error_message:this._("flash_old_version")})):(this.view().trigger("client_error",this._("flash_not_installed")),this.next("ErrorState",{error_message:this._("flash_not_installed")})):(this.view().trigger("client_error",this._("flash_not_supported")),this.next("ErrorState",{error_message:this._("flash_not_supported")}))}}),BetaJS.Views.VideoRecorder.States.State.extend("BetaJS.Views.VideoRecorder.States.FlashOkay",{_timer_state:function(){this.api()&&this.device_info()&&this.device_state()&&this.next("Attached")}}),BetaJS.Views.VideoRecorder.States.State.extend("BetaJS.Views.VideoRecorder.States.Attached",{_start_state:function(){this.view().__dont_cancel=!1,"recorder"==this.view().get("type")?this.next("RecorderDeviceCheck"):this.next("PlayerReady")}}),BetaJS.Views.VideoRecorder.States.State.extend("BetaJS.Views.VideoRecorder.States.RecorderDeviceCheck",{_start_state:function(){this.device_info(!0).camera.has&&this.device_info().microphone.has?this.next("RecorderSecurityCheck"):this.next("RecorderDeviceFailed")}}),BetaJS.Views.VideoRecorder.States.State.extend("BetaJS.Views.VideoRecorder.States.RecorderDeviceFailed",{_start_state:function(){this.device_info().camera.has?(this.next("ErrorState",{error_message:this._("no_microphone")}),this.view().trigger("client_error",this._("no_microphone"))):(this.next("ErrorState",{error_message:this._("no_camera")}),this.view().trigger("client_error",this._("no_camera")))}}),BetaJS.Views.VideoRecorder.States.State.extend("BetaJS.Views.VideoRecorder.States.UserError",{_locals:["error_msg"],_start_state:function(){this.next("ErrorState",{error_message:this._error_msg})}}),BetaJS.Views.VideoRecorder.States.State.extend("BetaJS.Views.VideoRecorder.States.RecorderSecurityCheck",{_start_state:function(){return this.view().__screen_height=window.innerHeight,"granted"==this.security_info(!0).flash_access?void this.next("RecorderSecurityOkay"):(this.events().on("security_flash_access",function(a){"granted"==a&&this.next("RecorderSecurityOkay")},this),void this.api().security_flash_acquire())}}),BetaJS.Views.VideoRecorder.States.State.extend("BetaJS.Views.VideoRecorder.States.RecorderSecurityOkay",{_start_state:function(){this.view().trigger("access_granted"),this.next("RecorderDeviceReady")}}),BetaJS.Views.VideoRecorder.States.State.extend("BetaJS.Views.VideoRecorder.States.RecorderDeviceReady",{_start_state:function(){var a=this;this.__added_arrow=!1,this.apiCallResilient("microphone_bind",["test"]),this.api().camera_bind("test"),this.view().get("face_outline")&&this.view().__face_outline_view.show(),this.__dashboard_under=this.addView(BetaJS.Views.View,{el_classes:"video-recorder-dashboard-under"}),this.__dashboard=this.addView(BetaJS.Views.ListContainerView,{el_classes:"video-recorder-dashboard"}),this.record_button_view=this.__dashboard.addChild(new BetaJS.Views.ButtonView({label:this._("record_label"),el_classes:["video-recorder"],css:{"default":"btn-default"},children_styles:{position:"inherit"},el_styles:{"float":"right"},disabled:this.view().get("device_test")})),this.__message_under=this.addView(BetaJS.Views.View,{el_classes:"video-recorder-message-under",visible:!1}),this.__message=this.addView(BetaJS.Views.LabelView,{el_classes:"video-recorder-message",visible:!1}),this.__set_message=function(a){this.__message.set("label",a),this.__message_under.setVisibility(!!a),this.__message.setVisibility(!!a)},this.cam_button_view=this.__dashboard.addChild(new BetaJS.Views.ButtonView({label:'<i class="bjs-icon-cog"></i>',el_classes:["video-recorder"],css:{"default":"btn-link",selected:"active"},children_styles:{position:"inherit"},el_styles:{"float":"left"}})),this.mic_button_view=this.__dashboard.addChild(new BetaJS.Views.ButtonView({label:this.view().get("device_test")?'Mic <i class="bjs-icon-circle off"></i>':"Mic",el_classes:["video-recorder"],css:{"default":"btn-link",selected:"active"},children_styles:{position:"inherit"},el_styles:{"float":"left"}}));var b=this.device_info(!0);this.mic_select_view=this.__dashboard.addChild(new BetaJS.Views.VideoRecorder.Views.DevicePopupView({el_classes:"video-recorder input-options mic off",visible:!1,properties:{items:b.microphone.names,current:b.microphone.current}})),this.cam_select_view=this.__dashboard.addChild(new BetaJS.Views.VideoRecorder.Views.DevicePopupView({el_classes:"video-recorder input-options settings",visible:!1,properties:{items:b.camera.names,current:b.camera.current}})),this.mic_button_view.on("click",function(){this.mic_button_view.set("selected",!this.mic_button_view.get("selected"))},this),this.cam_button_view.$el.on("click",function(){a.cam_button_view.set("selected",!a.cam_button_view.get("selected"))}),this.mic_button_view.on("change:selected",function(a){this.mic_select_view.setVisibility(a),a&&this.cam_button_view.set("selected",!1)},this),this.cam_button_view.on("change:selected",function(a){this.cam_select_view.setVisibility(a),a&&this.mic_button_view.set("selected",!1)},this),this.cam_select_view.on("submit",function(a){this.api().camera_set(a),this.api().camera_bind("test"),this.cam_button_view.set("selected",!1)},this),this.mic_select_view.on("submit",function(a){this.api().microphone_set(a),this.api().microphone_bind("test"),this.mic_button_view.set("selected",!1)},this),this.record_button_view.$el.on("mouseenter",function(){if(a._elapsed_time()>=2e3){var b=a.device_state(!0);a.device_info().camera.count>1;if("active"!=b.camera.status)return void a.__set_message(a._("try_different_camera"));if("active"!=b.microphone.status)return void a.__set_message(a._("say_something"))}var c=a.view().get("rerecord_limit");!a.record_button_view.get("disabled")&&a.view().get("allow_rerecord")&&0!==c&&(c===!1?a.__set_message(a._("rerecord_affirmation")):1==c?a.__set_message(a._("rerecord_single_affirmation")):2==c?a.__set_message(a._("rerecord_double_affirmation")):a.__set_message(a._("rerecord_multiple_affirmation").replace("%d",c)))}),this.record_button_view.$el.on("mouseleave",function(){a.__set_message("")}),this.record_button_view.on("click",function(){this.record()},this),this.cam_button_view.$el.on("mouseenter",function(){var b=a.device_state(!0),c=a.device_info().camera.count>1,d="active"==b.camera.status;if(d){var e=a.api().recorder_light_level();e>=100&&200>=e||1>=e||e>=254||!a.view().get("device_test")?a.__set_message(a._("camera_settings")):a.__set_message(a._("camera_light_level"))}else a._elapsed_time()<2e3&&a.chrome_view?a.__set_message(a._("browser_permission")):c?a.__set_message(a._("try_different_camera")):a.__set_message(a._("browser_permission"))}),this.cam_button_view.$el.on("mouseleave",function(){a.__set_message("")}),this.mic_button_view.$el.on("mouseenter",function(){var b=a.device_state(!0),c="active"==b.microphone.status;c||!a.view().get("device_test")?a.__set_message(a._("microphone_settings")):a._elapsed_time()<2e3?a.__set_message(a._("microphone_test")):a._elapsed_time()<8e3?a.__set_message(a._("say_something")):a.__set_message(a._("no_sound")+(a.device_info().microphone.count>1?" "+a._("try_different_microphone"):""))}),this.mic_button_view.$el.on("mouseleave",function(){a.__set_message("")}),this.__light_level=!0,this.__light_level_count=0},record:function(){this.next("RecorderBeforeRecording")},_timer_state:function(){!this.chrome_view&&BetaJS.Browser.Info.isChrome()&&window.innerHeight!=this.view().__screen_height&&(this.view().get("face_outline")&&this.view().__face_outline_view.hide(),this.chrome_view=this.addView(BetaJS.Views.VideoRecorder.Views.ChromeArrowView));var a=this.device_state(!0),b="active"==a.camera.status,c="active"==a.microphone.status;if(!c&&this.view().get("device_test")||this.mic_button_view.$el.find("i").removeClass("off"),(b&&c||window.innerHeight==this.view().__screen_height)&&this.chrome_view&&(this.chrome_view.setVisibility(!1),this.view().get("face_outline")&&this.view().__face_outline_view.show()),b&&c&&this.record_button_view.set("disabled",!1),this.__light_level_count++,this.__light_level_count%10===1){var d=this.api().recorder_light_level(),e=d>=100&&200>=d||1>=d||d>=254;e!=this.__light_level&&(this.__light_level=e,this.__light_level||!this.view().get("device_test")?this.cam_button_view.$el.find("button").html('<i class="bjs-icon-cog"></i>'):this.cam_button_view.$el.find("button").html('Light <i class="bjs-icon-circle off"></i>'))}}}),BetaJS.Views.VideoRecorder.States.State.extend("BetaJS.Views.VideoRecorder.States.RecorderBeforeRecording",{_start_state:function(){return this.api().microphone_bind("test"),this.api().camera_bind("test"),this.__dashboard_under=this.addView(BetaJS.Views.View,{el_classes:"video-recorder-dashboard-under"}),this.__dashboard=this.addView(BetaJS.Views.ListContainerView,{el_classes:"video-recorder-dashboard"}),this.stop_button_view=this.__dashboard.addChild(new BetaJS.Views.ButtonView({label:this._("abort_record"),el_classes:["video-recorder"],css:{"default":"btn-default on"},children_styles:{position:"inherit"},el_styles:{"float":"right"}})),this.countdown_view=this.__dashboard.addChild(new BetaJS.Views.LabelView({label:this._("recording_starts_in")+" "+this.view().get("recording_countdown"),el_classes:"video-recorder-font",el_styles:{"float":"right",padding:"15px 15px 15px 15px","font-size":"16px"}})),this.stop_button_view.on("click",function(){this.next("RecorderDeviceReady")},this),this.view().get("recording_countdown")?void 0:void BetaJS.Async.eventually(function(){this.next("RecorderRecording")},this)},_timer_state:function(){var a=1e3*this.view().get("recording_countdown")-this._elapsed_time();a>0&&this.view().trigger("countdown",a),this.countdown_view.set("label",a>=0?this._("recording_starts_in")+" "+Math.ceil(a/1e3):this._("recording_get_ready")),0>=a&&this.next("RecorderRecording")}}),BetaJS.Views.VideoRecorder.States.State.extend("BetaJS.Views.VideoRecorder.States.RecorderRecording",{_start_state:function(){this.view().set("has_focus",!0),this.__dashboard_under=this.addView(BetaJS.Views.View,{el_classes:"video-recorder-dashboard-under"}),this.__dashboard=this.addView(BetaJS.Views.ListContainerView,{el_classes:"video-recorder-dashboard"}),this.stop_button_view=this.__dashboard.addChild(new BetaJS.Views.ButtonView({label:this._("recording_get_ready"),el_classes:["video-recorder"],css:{"default":"btn-default on"},children_styles:{position:"inherit"},el_styles:{"float":"right",visibility:"hidden"}})),this.__time=null,this.view().__dont_cancel=!0,this.countdown_view=this.__dashboard.addChild(new BetaJS.Views.LabelView({label:this._("recording_get_ready"),el_classes:"video-recorder-font",el_styles:{"float":"right",padding:"15px 15px 15px 15px","font-size":"16px"}})),this.timer_view=this.__dashboard.addChild(new BetaJS.Views.VideoRecorder.Views.TimerView({parent:this.view(),max_time:this.view().get("time_limit")?1e3*this.view().get("time_limit"):null,time:0,visible:!1,el_styles:{"float":"right",padding:"15px 15px 15px 15px","font-size":"16px"},el_classes:"video-recorder-font"})),this.blinking_record_view=this.__dashboard.addChild(new BetaJS.Views.VideoRecorder.Views.BlinkingRecordView({parent:this.view(),visible:!1,el_styles:{"float":"left",padding:"20px"}})),this.stop_button_view.on("click",function(){this.stop_recording()},this),this.events().on("error",function(a){if(this.view().__recorder_servers.length>0&&!this.view().get("simulate")){this.api().recorder_deactivate();var b=this.view().__recorder_servers.shift();return this.api().config_set("record_stream_server",b),this.api().recorder_activate(),void(this.__connecting_time=BetaJS.Time.now())}if(this.view().trigger("server_error",a),this.timer_view.hide(),this.blinking_record_view.hide(),this.countdown_view.hide(),this.view().get("simulate")||this.api().recorder_stop(),this.view().get("recover_streams")&&!this.__is_connecting){var c=50,d=this.view().view_data,e=d.get("video").token,f=d.get("stream").token,g=d.get("uriparams"),h=d.get("auth"),i=function(){ZiggeoApi.Streams._recorder_submit(e,f,g,{failure:function(a,b){c>0&&(c--,BetaJS.Async.eventually(function(){i.apply(this)},this,1e3))},context:this},h)};i()}this.next("ErrorState",{error_message:a})},this),this.__is_connecting=!0,this.__connecting_time=BetaJS.Time.now(),this.events().on("recorder_state",function(a){this.__is_connecting="connecting"===a,"none"==a&&this.stop_button_view.set("disabled",!0),"connecting"==a&&this.stop_button_view.set("disabled",!0),"active"==a&&(this.stop_button_view.set("disabled",!0),this.api(!0).recorder_start()),"recording"==a&&(this.stop_button_view.$el.css("visibility",""),this.stop_button_view.set("label",this._("recording_start")),this.stop_button_view.$el.children().css("background-color","green"),this.countdown_view.hide(),this.blinking_record_view.show(),this.view().get("disable_timer")||this.timer_view.show(),this.__time=BetaJS.Time.now())},this),this.view().get("simulate")?(this.__is_connecting=!1,this.stop_button_view.$el.css("visibility",""),this.stop_button_view.set("label",this._("recording_start")),this.stop_button_view.$el.children().css("background-color","green"),this.countdown_view.hide(),this.blinking_record_view.show(),this.view().get("disable_timer")||this.timer_view.show(),this.__time=BetaJS.Time.now()):this.api().recorder_activate()},_timer_state:function(){if(this.__is_connecting){var a=BetaJS.Time.now()-this.__connecting_time;if(a>15e3)return void this.events().trigger("error","Server timed out. Maybe the port is blocked by your Firewall?")}try{var b=this.api().camera_state().activity;if(this.__last_camera_activity_update)if(this.__last_camera_activity===b){if(BetaJS.Time.now()-this.__last_camera_activity_update>3e4){this.__last_camera_activity_update=BetaJS.Time.now();var c=this.api().recorder_light_level();c===this.__last_light_level&&this.view().trigger("camera_unresponsive"),this.__last_light_level=c}}else this.__last_camera_activity_update=BetaJS.Time.now();else this.__last_light_level=this.api().recorder_light_level(),this.__last_camera_activity_update=BetaJS.Time.now();this.__last_camera_activity=b}catch(d){}if(this.__time){var e=BetaJS.Time.now()-this.__time;this.timer_view.set("time",e),this.view().trigger("elapsed",e),this.view().get("time_limit")&&e>=1e3*this.view().get("time_limit")&&this.stop_recording(),e>1500&&(this.stop_button_view.$el.children().css("background-color",""),this.stop_button_view.set("disabled",!1),this.stop_button_view.set("label",this._("stop_recording")))}},stop_recording:function(){this.view().get("simulate")||this.api().recorder_stop();var a=BetaJS.Time.now()-this.__time;this.view()._duration=a,this.view().__face_outline_view.hide(),this.view().trigger("recording_finished"),this.view().get("disable_snapshots")?this.next("RecorderUploading"):this.next("RecorderSnapshotSelection")}}),BetaJS.Views.VideoRecorder.States.State.extend("BetaJS.Views.VideoRecorder.States.RecorderSnapshotSelection",{_start_state:function(){this.view().set("has_focus",!0);var a=this.api().recorder_state();return 0===a.snapshots_count?void this.next("RecorderUploading"):(this.api().recorder_show_snapshots(),this.view().get("can_record")&&this.view().get("rerecord_on_snapshots")&&(this.rerecord_button_view=this.addView(BetaJS.Views.ButtonView,{label:"&#8592; "+this._("rerecord_immediately"),el_classes:["video-recorder"],css:{"default":"btn-outline"},children_styles:{bottom:"-6px",left:"-6px"}}),this.rerecord_button_view.on("click",function(){confirm(BetaJS.Browser.Dom.entitiesToUnicode(this._("rerecord_confirm")))&&(this.view().set("type","recorder"),this.view().trigger("recording_discarded"),this.api().recorder_hide_snapshots(),this.api().recorder_deactivate(),this.next("RecorderDeviceReady"))},this)),this.__message_under=this.addView(BetaJS.Views.View,{el_classes:"video-recorder-message-under"}),this.__message=this.addView(BetaJS.Views.LabelView,{el_classes:"video-recorder-message",label:this._("select_snapshot")}),void this.addView(BetaJS.Views.VideoRecorder.Views.SnapshotFramesView,{number:a.snapshots_count}).on("click",function(a){this.view().get("simulate")||this.api().recorder_select_snapshot(a),this.next("RecorderUploading")},this))},_end_state:function(){this.api().recorder_hide_snapshots()}}),BetaJS.Views.VideoRecorder.States.State.extend("BetaJS.Views.VideoRecorder.States.RecorderUploading",{_start_state:function(){this.view().set("has_focus",!0);var a=this.api().recorder_state();return"finished"==a.status&&(a.snapshot_uploaded||this.view().get("disable_snapshots"))?void this.__finished():(this.__processing_view=this.addView(BetaJS.Views.VideoRecorder.Views.ProgressView,{label:this._("uploading_label"),progress:0}),this.__start_time=BetaJS.Time.now(),void(this.view().get("simulate")&&this.__finished()))},_timer_state:function(){var a=this.api().recorder_state();if("finished"==a.status&&(a.snapshot_uploaded||this.view().get("disable_snapshots")))return void this.__finished();if("error"==a.status)return this.progress_bar_view.hide(),void this.next("ErrorState",{error_message:a.error});if(a.uploading_total>0&&a.elapsed_uploading_time>0&&a.uploading_transferred>0){var b=BetaJS.Time.now();if(this.__time){if(this.__uploading_transferred_last!=a.uploading_transferred){if(this.__uploading_transferred_last=a.uploading_transferred,this.__uploading_transferred_rate=a.uploading_transferred/a.elapsed_uploading_time,this.__last_delta_time=b-this.__delta_start,this.__last_delta_time>0){var c=a.uploading_transferred-this.__uploading_transferred_current;this.__uploading_transferred_rate=Math.max(this.__uploading_transferred_rate/2,this.__uploading_transferred_rate+c/this.__last_delta_time)}this.__delta_start=b}}else this.__time=b,this.__delta_start=b,this.__uploading_transferred_last=a.uploading_transferred,this.__uploading_transferred_current=a.uploading_transferred,this.__uploading_transferred_rate=a.uploading_transferred/a.elapsed_uploading_time;var d=b-this.__time;this.__uploading_transferred_rate>0&&d<=this.__last_delta_time&&(this.__uploading_transferred_current=Math.min(a.uploading_total,this.__uploading_transferred_current+this.__uploading_transferred_rate*d)),
this.__time=b;a.elapsed_uploading_time*(a.uploading_total-this.__uploading_transferred_current)/this.__uploading_transferred_current;this.__processing_view.set("progress",this.__uploading_transferred_current/a.uploading_total),this.view().trigger("upload_progress",this.__uploading_transferred_current,a.uploading_total)}else if(!a.snapshot_uploaded){var e=BetaJS.Time.now();if(this.__snapshot_time){var f=e-this.__snapshot_time;if(f>0){var g=1-1/(1+Math.sqrt(Math.sqrt(f/1e3)));this.__processing_view.set("progress",g),this.view().trigger("upload_progress",1e5*g,1e5)}}else this.__snapshot_time=e}},__finished:function(){if(!this.__finished_called){this.__finished_called=!0,this.view().set("type","player"),this.view().get("rerecord_limit")!==!1&&this.view().set("rerecord_limit",this.view().get("rerecord_limit")-1);var a=Math.max(2e3-(BetaJS.Time.now()-this.__start_time),0),b=this;a>0?setTimeout(function(){b.__finished_finished()},a):b.__finished_finished()}},__finished_finished:function(){this.destroyed()||(this.api().recorder_deactivate(),this.__submitted_triggered||(this.view().trigger("recording_submitted",{duration:this.view()._duration}),this.__submitted_triggered=!0),"next"in this&&this.next("ProcessingState"))}}),BetaJS.Views.VideoRecorder.States.State.extend("BetaJS.Views.VideoRecorder.States.ProcessingState",{_start_state:function(){this.view().set("has_focus",!0),this.__processing_view=this.addView(BetaJS.Views.VideoRecorder.Views.ProgressView,{label:this._("processing_label"),progress:0}),this.__time=BetaJS.Time.now(),this.__last_check=this.__time},_timer_state:function(){var a=BetaJS.Time.now(),b=1e3,c=(a-this.__time)/b,d=1-1/(1+Math.sqrt(Math.sqrt(c)));this.__processing_view.set("progress",d),this.view().trigger("processing_progress",d);var e=this;a-this.__last_check>=1e3&&(this.__last_check=a,BetaJS.$.ajax({type:"GET",async:!0,url:this.view().get("recorder_config").state}).success(function(a){e.view().set("player_config",BetaJS.Types.is_object(a)?a:JSON.parse(a)),e.next("Attached")}).error(function(a){a.status!=BetaJS.Net.HttpHeader.HTTP_STATUS_PRECONDITION_FAILED&&(e.view().trigger("server_error",e._("could_not_process_file")),e.next("ErrorState",{error_message:e._("could_not_process_file"),call_to_action:e._("try_again")}))}))}}),BetaJS.Views.VideoRecorder.States.State.extend("BetaJS.Views.VideoRecorder.States.PlayerReady",{_start_state:function(){var a=this.view().get("player_config");if(this.player_view=this.addView(BetaJS.Views.VideoPlayerView,{sources:a.sources||[],meta:{responsive:this.view().get("responsive"),image:a.image||null,width:this.view().recorderWidth(),height:this.view().recorderHeight(),video_width:a.width||this.view().recorderWidth(),video_height:a.height||this.view().recorderHeight(),fit:"minimize"},el_styles:{left:"0px",top:"0px",position:"absolute"}}),this.view().player_view=this.player_view,this.player_view.on("play",function(){this.view().trigger("player_play")},this),this.player_view.on("pause",function(){this.view().trigger("player_pause")},this),this.player_view.on("stop",function(){this.view().trigger("stop")},this),this.player_view.on("error",function(a){this.view().trigger("server_error",a)},this),this.view().get("can_rerecord")){var b=this.addView(BetaJS.Views.ButtonView,{el_classes:["video-recorder","video-rerecord-button"],css:{"default":"btn-default"},children_styles:{top:"10px",right:"10px"},label:this._("rerecord_label")});b.on("click",function(){confirm(BetaJS.Browser.Dom.entitiesToUnicode(this._("rerecord_confirm")))&&(this.view().set("type","recorder"),this.view().trigger("recording_discarded"),this.next("RecorderSecurityCheck"))},this)}this.view().get("immediate_playback")&&this.player_view.play()}}),BetaJS.Views.ListContainerView.extend("BetaJS.Views.VideoUploader",{_notifications:{activate:"__attach",deactivate:"__detach"},constructor:function(a){a=a||{},a.el_classes="video-recorder-outer",a.positioning="none",this._inherited(BetaJS.Views.VideoUploader,"constructor",a),a=BetaJS.Objs.extend(BetaJS.Objs.clone(this.cls._options,1),a),this._setOptionProperty(a,"type","recorder"),this._setOptionProperty(a,"allow_rerecord",!0),this._setOptionProperty(a,"rerecord_limit",!1),this.set("can_record",this.computed(function(){return this.get("allow_rerecord")&&(this.get("rerecord_limit")===!1||this.get("rerecord_limit")>=0)},["allow_rerecord","rerecord_limit"])),this.set("can_rerecord",this.computed(function(){return this.get("allow_rerecord")&&(this.get("rerecord_limit")===!1||this.get("rerecord_limit")>=0)},["allow_rerecord","rerecord_limit"])),this._setOptionProperty(a,"allow_custom_file",!BetaJS.Browser.Info.isMobile()),this._setOptionProperty(a,"player_config",{}),this._setOptionProperty(a,"initial_image",""),this._setOptionProperty(a,"recorder_config",{}),this._setOptionProperty(a,"resumable",!1),this._setOptionProperty(a,"recorder_width",640),this._setOptionProperty(a,"recorder_height",480),this._setOptionProperty(a,"filesize_limit",null),this._setOptionProperty(a,"immediate_playback",!1),this._setOptionProperty(a,"responsive",!1),this._setOptionProperty(a,"external_record",!1),this._setOptionProperty(a,"allowed_extensions",null),this.set("cordova_fallback",BetaJS.Browser.Info.isAndroid()&&BetaJS.Browser.Info.isCordova()),this.on("client_error",function(a){this.trigger("error","client",a)},this),this.on("server_error",function(a){this.trigger("error","server",a)},this),this.__state_host=this._auto_destroy(new BetaJS.States.Host),this.__state_host.view=this,this.__state_host.on("start",function(a){this.trigger("state",a),this.trigger("state:"+a)},this)},user_error:function(a){this.state().next("ErrorState",{error_message:a})},state:function(){return this.__state_host.state()},recorderWidth:function(){return this.get("recorder_width")},recorderHeight:function(){return this.get("recorder_height")},__attach:function(){if(this.get("responsive")){var a=parseInt(this.$el.parent().css("width"),10);if(a){var b=parseInt(this.$el.parent().css("height"),10);b||(b=Math.floor(a*this.recorderHeight()/this.recorderWidth())),this.set("recorder_width",a),this.set("recorder_height",b)}}this.$el.css("width",this.recorderWidth()+"px"),this.$el.css("height",this.recorderHeight()+"px"),this.__state_host.initialize("BetaJS.Views.VideoUploader.States.Init"),this.__timer=new BetaJS.Timers.Timer({delay:100,fire:this.__timer,context:this})},__detach:function(){this.__timer.destroy(),this.__state_host.finalize()},__timer:function(){this.trigger("timer")},play:function(){this.player_view&&this.player_view.play&&this.player_view.play()},stop:function(){this.player_view&&this.player_view.stop&&this.player_view.stop()},rerecord:function(){this.set("type","recorder"),this.set("rerecording",!0),this.trigger("recording_discarded"),this.state().next("UploaderState")}},{_options:{allow_custom_file:!0},setup:function(a){this._options=BetaJS.Objs.extend(this._options,a)}}),BetaJS.Views.ButtonView.extend("BetaJS.Views.VideoUploader.Views.UploadButtonView",{_dynamics:{"default":BetaJS.Templates.Cached["video-uploader-upload-button-view-template"]},constructor:function(a){a.el_classes="btn-primary",a.button_container_element="div",this._inherited(BetaJS.Views.VideoUploader.Views.UploadButtonView,"constructor",a),this._setOptionProperty(a,"allow_custom_file",!0),this._setOptionProperty(a,"form_fallback",!1),this._setOptionProperty(a,"cordova",!1),this.set("accept_string",this.computed(function(){var a=BetaJS.Browser.Info.isMobile(),b=this.get("allow_custom_file");return a===b?"accept='video/*,video/mp4'":a?"accept='video/*,video/mp4;capture=camcorder' capture":""},["allow_custom_file"]))},_events:function(){return this._inherited(BetaJS.Views.VideoUploader.Views.UploadButtonView,"_events").concat([{"change input":"__select_file",click:"__click"}])},__select_file:function(){this.trigger("select",this.$("input").get(0))},__click:function(){if(this.get("cordova")){var a=this;navigator.device.capture.captureVideo(function(b){var c=b[0];a.trigger("select",c)},function(a){},{limit:1})}}}),BetaJS.Views.View.extend("BetaJS.Views.VideoUploader.Views.ProgressView",{_dynamics:{"default":BetaJS.Templates.Cached["video-uploader-progress-template"]},constructor:function(a){a=a||{},a.el_classes=["video-uploader-progress"],this._inherited(BetaJS.Views.VideoUploader.Views.ProgressView,"constructor",a),this._setOptionProperty(a,"progress",0),this._setOptionProperty(a,"label","Label"),this.set("progress_label",this.computed(function(){return this.get("label")+": "+Math.floor(100*this.get("progress"))+"%"},["progress","label"]))}}),BetaJS.Views.View.extend("BetaJS.Views.VideoUploader.Views.ErrorView",{_templates:{"default":BetaJS.Templates.Cached["video-uploader-error-template"]},_events:{"click .call-to-action":"__call_to_action"},constructor:function(a){a=a||{},a.el_classes=["video-uploader-error"],this._inherited(BetaJS.Views.VideoUploader.Views.ErrorView,"constructor",a),this._setOptionProperty(a,"error",""),this._setOptionProperty(a,"call_to_action","")},__call_to_action:function(){this.trigger("call_to_action")}}),BetaJS.Views.View.extend("BetaJS.Views.VideoUploader.Views.UploadView",{_dynamics:{"default":BetaJS.Templates.Cached["video-uploader-upload-template"]},_events:{"click [data-selector='record-video']":"__record_video"},constructor:function(a){a=a||{},a.el_classes=["video-uploader-upload"],this._inherited(BetaJS.Views.VideoUploader.Views.ProgressView,"constructor",a),this._setOptionProperty(a,"progress",0),this._setOptionProperty(a,"external_record",!1),this._setOptionProperty(a,"label","Label"),this.set("external_record_label",BetaJS.Locales.get("video_recorder.external_record_label")),this.set("progress_label",this.computed(function(){return this.get("label")+(this.get("progress")?": "+Math.floor(100*this.get("progress"))+"%":"...")},["progress","label"]))},__record_video:function(){this.trigger("record_video")},show_progress:function(){this.$(".inner-container").hide(),this.$(".progress-label").show(),this.$(".progress-spinner").show()}}),BetaJS.States.State.extend("BetaJS.Views.VideoUploader.States.State",{constructor:function(a,b,c){this._inherited(BetaJS.Views.VideoUploader.States.State,"constructor",a,b,c),this.__view=a.view,this.__views=[]},_:function(a){return BetaJS.Locales.get("video_recorder."+a)},view:function(){return this.__view},_start_time:function(){return this.__start_time},_elapsed_time:function(){return BetaJS.Time.ago(this.__start_time)},_timer_state:function(){},_start_state:function(){},_end_state:function(){},_timer:function(){this._timer_state()},_start:function(){this.__start_time=BetaJS.Time.now(),this.__view.on("timer",function(){if(this._started&&!this._stopped)try{this._timer()}catch(a){}},this),this._start_state()},_end:function(){this.view().set("has_focus",!1),this._end_state(),BetaJS.Objs.iter(this.__views,function(a){a.destroy()},this),this.__view.off(null,null,this)},addView:function(a,b){b=b||{},b.parent=this.__view;var c=this.__view.addChild(new a(b));return this.__views.push(c),c}}),BetaJS.Views.VideoUploader.States.State.extend("BetaJS.Views.VideoUploader.States.Init",{_start_state:function(){"recorder"==this.view().get("type")?this.next("CheckState"):this.next("PlayerState")}}),BetaJS.Views.VideoUploader.States.State.extend("BetaJS.Views.VideoUploader.States.CheckState",{__device_supported:function(){return!(BetaJS.Browser.Info.isiOS()&&BetaJS.Browser.Info.iOSversion().major<6)},_start_state:function(){return BetaJS.Browser.Info.isiOS()&&8==BetaJS.Browser.Info.iOSversion().major&&!BetaJS.Browser.Info.iOSversion().minor&&!BetaJS.Browser.Info.iOSversion().revision&&BetaJS.Browser.Info.isSafari()?void this.next("ErrorState",{error_message:"<a href='http://blog.fineuploader.com/2014/09/10/ios8-presents-serious-issues-that-prevent-file-uploading/' target='_blank'>Mobile Upload of any media is broken on iOS 8 Safari</a>. Apple is working on this issue. Please upgrade your iOS version if possible or use a different browser like Chrome."}):void(this.__device_supported()?this.next("UploaderState"):this.next("ErrorState",{error_message:this._("device_unsupported")}))}}),BetaJS.Views.VideoUploader.States.State.extend("BetaJS.Views.VideoUploader.States.UploaderState",{_start_state:function(){this.__uploader_view=this.addView(BetaJS.Views.VideoUploader.Views.UploadView,{label:this._("uploading_label"),progress:0,external_record:this.view().get("external_record")}),this.__uploader_view.on("record_video",function(){this.view().trigger("external_record")},this),this.upload_button=this.__uploader_view.addChild(new BetaJS.Views.VideoUploader.Views.UploadButtonView({label:BetaJS.Browser.Info.isMobile()?this._(this.view().get("rerecording")?"reselect_file_action_mobile":"select_file_action_mobile"):this._(this.view().get("rerecording")?"reselect_file_action":"select_file_action"),allow_custom_file:this.view().get("allow_custom_file"),cordova:this.view().get("cordova_fallback"),el:"[data-selector='upload-video']"}));var a=this;this.upload_button.on("select",function(b){if(!this.view().get("cordova_fallback")){if(this.view().get("allowed_extensions")){var c=BetaJS.$(b).val().toLowerCase(),d=!1;if(BetaJS.Objs.iter(this.view().get("allowed_extensions"),function(a){BetaJS.Strings.ends_with(c,"."+a.toLowerCase())&&(d=!0)}),!d)return void this.next("ErrorState",{error_message:a._("unsupported_video_type").replace("%s",this.view().get("allowed_extensions").join(" / ")),call_to_action:a._("try_again")})}if(this.view().get("filesize_limit")){var e=b;if(e.files&&e.files.length>0&&e.files[0].size>this.view().get("filesize_limit"))return void this.next("ErrorState",{error_message:a._("video_file_too_large"),call_to_action:a._("try_again")})}}this.__uploader_view.show_progress(),this.next("BeforeUploadingState",{file:b})},this)}}),BetaJS.Views.VideoUploader.States.State.extend("BetaJS.Views.VideoUploader.States.BeforeUploadingState",{_persistents:["file"],_start_state:function(){this.__uploader_view=this.addView(BetaJS.Views.VideoUploader.Views.UploadView,{label:this._("uploading_label"),progress:0,external_record:this.view().get("external_record")}),this.__uploader_view.show_progress()}}),BetaJS.Views.VideoUploader.States.State.extend("BetaJS.Views.VideoUploader.States.UploadingState",{_locals:["file"],_start_state:function(){this.view().set("has_focus",!0),this.__uploader_view=this.addView(BetaJS.Views.VideoUploader.Views.UploadView,{label:this._("uploading_label"),progress:0,external_record:this.view().get("external_record")}),this.__uploader_view.show_progress(),this.view().set("file_size",null),this.view().trigger("recording_finished");var a=BetaJS.Browser.Upload.FileUploader.create({url:this.view().get("recorder_config").submit,source:this._file,serverSupportChunked:this.view().get("resumable"),serverSupportPostMessage:!0,resumable:{withCredentials:!1,assembleUrl:this.view().get("recorder_config").submit,assembleResilience:50,assembleResilienceTimeout:1e3,acceptedAssembleError:412}});a.on("success",function(a){this.view().trigger("recording_uploaded",a),this.next("ProcessingState")},this).on("error",function(a){this.view().trigger("server_error",this._("uploading_file_failed")),this.next("ErrorState",{error_message:this._("uploading_file_failed"),call_to_action:this._("try_again")})},this).on("progress",function(a,b){this.view().trigger("upload_progress",a,b),b&&(this.view().set("file_size",b),this.__uploader_view.set("progress",a/b))},this),this.view().trigger("uploading"),a.upload()}}),BetaJS.Views.VideoUploader.States.State.extend("BetaJS.Views.VideoUploader.States.ProcessingState",{_start_state:function(){this.view().set("has_focus",!0),this.__processing_view=this.addView(BetaJS.Views.VideoUploader.Views.ProgressView,{label:this._("processing_label"),progress:0}),this.__time=BetaJS.Time.now(),this.__last_check=this.__time},_timer_state:function(){var a=BetaJS.Time.now(),b=1e3;this.view().get("file_size")&&1e3*this.view().get("file_size")>1e3&&(b=this.view().get("file_size")/1e3);var c=(a-this.__time)/b,d=1-1/(1+Math.sqrt(Math.sqrt(c)));this.__processing_view.set("progress",d),this.view().trigger("processing_progress",d);var e=this;if(a-this.__last_check>=1e3){this.__last_check=a;var f={type:"GET",async:!0,url:this.view().get("recorder_config").state};BetaJS.Browser.Info.isInternetExplorer()&&BetaJS.Browser.Info.internetExplorerVersion()<=9&&(BetaJS.$.support.cors=!0,f.dataType="json"),BetaJS.$.ajax(f).success(function(a){e.view().get("rerecord_limit")!==!1&&e.view().set("rerecord_limit",e.view().get("rerecord_limit")-1),e.view().trigger("recording_submitted",BetaJS.Types.is_object(a)?a:JSON.parse(a)),e.view().set("player_config",BetaJS.Types.is_object(a)?a:JSON.parse(a)),e.view().set("type","player"),e.next("Init")}).error(function(a){a.status!=BetaJS.Net.HttpHeader.HTTP_STATUS_PRECONDITION_FAILED&&(e.view().trigger("server_error",e._("could_not_process_file")),e.next("ErrorState",{error_message:e._("could_not_process_file"),call_to_action:e._("try_again")}))})}}}),BetaJS.Views.VideoUploader.States.State.extend("BetaJS.Views.VideoUploader.States.ErrorState",{_locals:["error_message","call_to_action"],_start_state:function(){var a=this.addView(BetaJS.Views.VideoUploader.Views.ErrorView,{error:this._error_message,call_to_action:this._call_to_action});a.on("call_to_action",function(){this.next("UploaderState")},this)}}),BetaJS.Views.VideoUploader.States.State.extend("BetaJS.Views.VideoUploader.States.PlayerState",{_start_state:function(){var a=this.view().get("player_config");if(this.player_view=this.addView(BetaJS.Views.VideoPlayerView,{sources:a.sources||[],meta:{responsive:this.view().get("responsive"),image:a.image||null,width:this.view().recorderWidth(),height:this.view().recorderHeight(),video_width:a.width||this.view().recorderWidth(),video_height:a.height||this.view().recorderHeight(),fit:"minimize"},el_styles:{left:"0px",top:"0px",position:"absolute"}}),this.view.player_view=this.player_view,this.player_view.on("play",function(){this.view().trigger("player_play")},this),this.player_view.on("pause",function(){this.view().trigger("player_pause")},this),this.player_view.on("stop",function(){this.view().trigger("stop")},this),this.player_view.on("error",function(a){this.view().trigger("server_error",a)},this),this.view().get("can_record")){var b=this.addView(BetaJS.Views.ButtonView,{el_classes:["video-recorder","video-rerecord-button"],css:{"default":"btn-default"},children_styles:{top:"10px",right:"10px"},label:this._("rerecord_label")});b.on("click",function(){confirm(BetaJS.Browser.Dom.entitiesToUnicode(this._("rerecord_confirm")))&&(this.view().set("type","recorder"),this.view().set("rerecording",!0),this.view().trigger("recording_discarded"),this.next("UploaderState"))},this)}this.view().get("immediate_playback")&&this.player_view.play()}}),BetaJS.Views.ListContainerView.extend("BetaJS.Views.VideoRTCRecorder",{_notifications:{activate:"__attach",deactivate:"__detach"},constructor:function(a){a=a||{},a.el_classes="video-recorder-outer",a.el_styles={overflow:"hidden"},a.positioning="none",this._inherited(BetaJS.Views.VideoRTCRecorder,"constructor",a),a=BetaJS.Objs.extend(BetaJS.Objs.clone(this.cls._options,1),a),this._setOptionProperty(a,"recording_countdown",0),this._setOptionProperty(a,"type","recorder"),this._setOptionProperty(a,"player_remaining_time",!1),this._setOptionProperty(a,"allow_rerecord",!0),this._setOptionProperty(a,"rerecord_limit",!1),this.set("can_record",this.computed(function(){return this.get("allow_rerecord")&&(this.get("rerecord_limit")===!1||this.get("rerecord_limit")>=0)},["allow_rerecord","rerecord_limit"])),this.set("can_rerecord",this.computed(function(){return this.get("allow_rerecord")&&(this.get("rerecord_limit")===!1||this.get("rerecord_limit")>=0)},["allow_rerecord","rerecord_limit"])),this._setOptionProperty(a,"time_limit",null),this._setOptionProperty(a,"device_test",!0),this._setOptionProperty(a,"first_screen",!0),this._setOptionProperty(a,"face_outline",!1),this._setOptionProperty(a,"framerate_warning",null),this._setOptionProperty(a,"resumable",!1),this._setOptionProperty(a,"recorder_config",{}),this._setOptionProperty(a,"player_config",{}),this._setOptionProperty(a,"recorder_width",640),this._setOptionProperty(a,"recorder_height",480),this._setOptionProperty(a,"camera_width",640),this._setOptionProperty(a,"camera_height",480),this._setOptionProperty(a,"disable_snapshots",!1),this._setOptionProperty(a,"submit_duration",!1),this._setOptionProperty(a,"snapshots",0),this._setOptionProperty(a,"snapshots_post",""),this.get("disable_snapshots")&&this.set("snapshots_post",""),this._setOptionProperty(a,"snapshots_type","jpg"),this._setOptionProperty(a,"immediate_playback",!1),this._setOptionProperty(a,"disable_timer",!1),this._setOptionProperty(a,"responsive",!1),this._setOptionProperty(a,"external_upload",!1),this._setOptionProperty(a,"margin_percentage",.3),this._setOptionProperty(a,"frame_percentage",.9),this._setOptionProperty(a,"camera_fps",null),this.on("client_error",function(a){this.trigger("error","client",a)},this),this.on("server_error",function(a){this.trigger("error","server",a)},this),this.__face_outline_view=this.addChild(new BetaJS.Views.View({parent:this,visible:!1,el_classes:"video-recorder-face-position"})),this.__video_view=this.addChild(new BetaJS.Views.View({parent:this,visible:!1,template:"<video style='width:100%; height:100%'></video>"})),this.__state_host=this._auto_destroy(new BetaJS.States.Host),this.__state_host.view=this,this.__state_host.on("start",function(a){this.trigger("state",a),this.trigger("state:"+a)},this)},state:function(){return this.__state_host.state()},user_error:function(a){this.state().next("UserError",{error_msg:a})},_render:function(){if(this.get("responsive")){var a=parseInt(this.$el.parent().css("width"),10);if(a){var b=parseInt(this.$el.parent().css("height"),10);b||(b=Math.floor(a*this.get("recorder_height")/this.get("recorder_width"))),this.set("recorder_width",a),this.set("recorder_height",b)}}this._inherited(BetaJS.Views.VideoRTCRecorder,"_render")},__attach:function(){this.__time_started=BetaJS.Time.now(),this.$el.css("width",this.get("recorder_width")+"px"),this.$el.css("height",this.get("recorder_height")+"px"),this.__state_host.initialize("BetaJS.Views.VideoRTCRecorder.States.Init"),this.__timer=new BetaJS.Timers.Timer({delay:25,fire:this.__timer,context:this})},averageFrameRate:function(){return this.recorderWrapper&&!this.recorderWrapper.destroyed()?this.recorderWrapper.averageFrameRate():null},lightLevel:function(){return this.recorderWrapper&&!this.recorderWrapper.destroyed()?this.recorderWrapper.lightLevel():null},soundLevel:function(){return this.audioAnalyzer&&!this.audioAnalyzer.destroyed()?this.view().audioAnalyzer.soundLevel():null},__detach:function(){this.__timer.destroy(),this.__state_host.finalize(),this.recorderWrapper&&this.recorderWrapper.weakDestroy()},__timer:function(){this.trigger("timer")},recorderWidth:function(){return this.get("recorder_width")},recorderHeight:function(){return this.get("recorder_height")},stop:function(){this.player_view&&this.player_view.stop&&this.player_view.stop()},play:function(){this.player_view&&this.player_view.play&&this.player_view.play()},stopRecord:function(){this.state().stop_recording&&this.state().stop_recording()},isRecording:function(){return"RecorderRecording"===this.state().state_name()},rerecord:function(){this.set("type","recorder"),this.set("rerecording",!0),this.trigger("recording_discarded"),this.state().next("RecorderDeviceCheck")}},{_options:{},setup:function(a){this._options=BetaJS.Objs.extend(this._options,a)}}),BetaJS.States.State.extend("BetaJS.Views.VideoRTCRecorder.States.State",{constructor:function(a,b,c){this._inherited(BetaJS.Views.VideoRTCRecorder.States.State,"constructor",a,b,c),this.__view=a.view,this.__views=[]},_:function(a){return BetaJS.Locales.get("video_recorder."+a)},view:function(){return this.__view},events:function(){return this.__view.events()},_start_time:function(){return this.__start_time},_elapsed_time:function(){return BetaJS.Time.ago(this.__start_time)},_timer_state:function(){},_start_state:function(){},_end_state:function(){},_timer:function(){this._timer_state()},_start:function(){this.__start_time=BetaJS.Time.now(),this.__view.on("timer",function(){if(this._started&&!this._stopped)try{this._timer()}catch(a){}},this),this._start_state()},_end:function(){this.view().set("has_focus",!1),this._end_state(),BetaJS.Objs.iter(this.__views,function(a){a.destroy()},this),this.__view.off(null,null,this)},addView:function(a,b){b=b||{},b.parent=this.__view;var c=this.__view.addChild(new a(b));return this.__views.push(c),c}}),BetaJS.Views.VideoRTCRecorder.States.State.extend("BetaJS.Views.VideoRTCRecorder.States.Init",{_locals:["info_message"],_start_state:function(){if(this.view().__screen_height=window.innerHeight,!this.view().get("first_screen")||"player"==this.view().get("type"))return void this.next("Attached");var a=this.addView(BetaJS.Views.VideoRecorder.Views.InitialView,{parent:this.view(),info_message:this._info_message});a.on("record",function(){this.next("Attached")},this),a.on("upload",function(){this.view().trigger("external_upload")},this),a.on("tutorial",function(){this.view().__tutorial_view.show()},this)}}),BetaJS.Views.VideoRTCRecorder.States.State.extend("BetaJS.Views.VideoRTCRecorder.States.ErrorState",{_locals:["error_message","call_to_action"],_start_state:function(){this.addView(BetaJS.Views.VideoRecorder.Views.ErrorView,{error:this._error_message,call_to_action:this._call_to_action})}}),BetaJS.Views.VideoRTCRecorder.States.State.extend("BetaJS.Views.VideoRTCRecorder.States.Attached",{_start_state:function(){"recorder"==this.view().get("type")?this.next("RecorderDeviceCheck"):this.next("PlayerReady")}}),BetaJS.Views.VideoRTCRecorder.States.State.extend("BetaJS.Views.VideoRTCRecorder.States.RecorderDeviceCheck",{_start_state:function(){BetaJS.Media.WebRTC.RecorderWrapper.anySupport()?(this.view().__video_view.show(),this.view().recorderWrapper&&this.view().recorderWrapper.weakDestroy(),this.view().recorderWrapper=BetaJS.Media.WebRTC.RecorderWrapper.create({video:this.view().__video_view.$("video").get(0),recordResolution:{width:this.view().get("camera_width"),height:this.view().get("camera_height")},framerate:this.view().get("camera_fps")}),this.view().recorderWrapper.bindMedia().success(function(){this.view().trigger("access_granted"),this.next("RecorderDeviceReady")},this).error(function(a){this.view().trigger("access_forbidden",a),this.view().set("first_screen",!0),this.next("Init",{info_message:this._("browser_permission")})},this)):this.next("RecorderDeviceFailed")}}),BetaJS.Views.VideoRTCRecorder.States.State.extend("BetaJS.Views.VideoRTCRecorder.States.RecorderDeviceFailed",{_start_state:function(){this.next("ErrorState",{error_message:this._("no_camera")}),this.view().trigger("client_error",this._("no_camera"))}}),BetaJS.Views.VideoRTCRecorder.States.State.extend("BetaJS.Views.VideoRTCRecorder.States.UserError",{_locals:["error_msg"],_start_state:function(){this.next("ErrorState",{error_message:this._error_msg})}}),BetaJS.Views.VideoRTCRecorder.States.State.extend("BetaJS.Views.VideoRTCRecorder.States.RecorderDeviceReady",{_start_state:function(){var a=this;this.soundLevel=new BetaJS.Media.WebRTC.AudioAnalyser(this.view().recorderWrapper.stream()),this.view().audioAnalyzer=this.soundLevel,this.view().get("face_outline")&&this.view().__face_outline_view.show(),this.__dashboard_under=this.addView(BetaJS.Views.View,{el_classes:"video-recorder-dashboard-under"}),this.__dashboard=this.addView(BetaJS.Views.ListContainerView,{el_classes:"video-recorder-dashboard"}),this.record_button_view=this.__dashboard.addChild(new BetaJS.Views.ButtonView({label:this._("record_label"),el_classes:["video-recorder"],css:{"default":"btn-default"},children_styles:{position:"inherit"},el_styles:{"float":"right"}})),this.__message_under=this.addView(BetaJS.Views.View,{el_classes:"video-recorder-message-under",visible:!1}),this.__message=this.addView(BetaJS.Views.LabelView,{el_classes:"video-recorder-message",visible:!1}),this.__set_message=function(a){this.__message.set("label",a),this.__message_under.setVisibility(!!a),this.__message.setVisibility(!!a)},this.cam_button_view=this.__dashboard.addChild(new BetaJS.Views.ButtonView({label:this.view().get("device_test")?'Cam <i class="bjs-icon-circle"></i>':"Cam",el_classes:["video-recorder"],css:{"default":"btn-link",selected:"active"},children_styles:{position:"inherit"},el_styles:{"float":"left"}})),this.mic_button_view=this.__dashboard.addChild(new BetaJS.Views.ButtonView({label:this.view().get("device_test")?'Mic <i class="bjs-icon-circle off"></i>':"Mic",el_classes:["video-recorder"],css:{"default":"btn-link",selected:"active"},children_styles:{position:"inherit"},el_styles:{"float":"left"}})),this.cam_button_view.$el.on("mouseenter",function(){var b=a.view().recorderWrapper.lightLevel();b>=100&&200>=b||!a.view().get("device_test")||a.__set_message(a._("camera_light_level"))}),this.cam_button_view.$el.on("mouseleave",function(){a.__set_message("")}),this.mic_button_view.$el.on("mouseenter",function(){a.__any_sound||(a._elapsed_time()<2e3?a.__set_message(a._("microphone_test")):a._elapsed_time()<8e3?a.__set_message(a._("say_something")):a.__set_message(a._("no_sound")))}),this.mic_button_view.$el.on("mouseleave",function(){a.__set_message("")}),this.record_button_view.$el.on("mouseenter",function(){var b=a.view().get("rerecord_limit");a.view().get("allow_rerecord")&&0!==b&&(b===!1?a.__set_message(a._("rerecord_affirmation")):1==b?a.__set_message(a._("rerecord_single_affirmation")):2==b?a.__set_message(a._("rerecord_double_affirmation")):a.__set_message(a._("rerecord_multiple_affirmation").replace("%d",b)))}),this.record_button_view.$el.on("mouseleave",function(){a.__set_message("")}),this.record_button_view.on("click",function(){this.record()},this),this.__light_level=!0,this.__light_level_count=0,this.__any_sound=!1},record:function(){this.next("RecorderBeforeRecording")},_end_state:function(){this.soundLevel.weakDestroy()},_timer_state:function(){if(this.__light_level_count++,this.__light_level_count%10===1){!this.__any_sound&&this.view().get("device_test")&&(this.__any_sound=this.soundLevel.soundLevel()>1.01,this.__any_sound&&(this.mic_button_view.$el.find("button").html('Mic <i class="bjs-icon-circle"></i>'),this.soundLevel.weakDestroy()));var a=this.view().recorderWrapper.lightLevel(),b=a>=100&&200>=a;b!=this.__light_level&&this.view().get("device_test")&&(this.__light_level=b,this.__light_level?this.cam_button_view.$el.find("button").html('Cam <i class="bjs-icon-circle"></i>'):this.cam_button_view.$el.find("button").html('Cam <i class="bjs-icon-circle off"></i>'))}}}),BetaJS.Views.VideoRTCRecorder.States.State.extend("BetaJS.Views.VideoRTCRecorder.States.RecorderBeforeRecording",{_start_state:function(){return this.view().get("recording_countdown")?(this.__dashboard_under=this.addView(BetaJS.Views.View,{el_classes:"video-recorder-dashboard-under"}),this.__dashboard=this.addView(BetaJS.Views.ListContainerView,{el_classes:"video-recorder-dashboard"}),this.stop_button_view=this.__dashboard.addChild(new BetaJS.Views.ButtonView({label:this._("abort_record"),el_classes:["video-recorder"],css:{"default":"btn-default on"},children_styles:{position:"inherit"},el_styles:{"float":"right"}})),this.countdown_view=this.__dashboard.addChild(new BetaJS.Views.LabelView({label:this._("recording_starts_in")+" "+this.view().get("recording_countdown"),el_classes:"video-recorder-font",el_styles:{"float":"right",padding:"15px 15px 15px 15px","font-size":"16px"}})),void this.stop_button_view.on("click",function(){this.next("RecorderDeviceReady")},this)):void this.next("RecorderRecording")},_timer_state:function(){var a=1e3*this.view().get("recording_countdown")-this._elapsed_time();a>0&&this.view().trigger("countdown",a),this.countdown_view.set("label",a>=0?this._("recording_starts_in")+" "+Math.ceil(a/1e3):this._("recording_get_ready")),
0>=a&&this.next("RecorderRecording")}}),BetaJS.Views.VideoRTCRecorder.States.State.extend("BetaJS.Views.VideoRTCRecorder.States.RecorderRecording",{_start_state:function(){this.view().set("has_focus",!0),this.view().get("disable_snapshots")||(this.__snapshots=[]),this.__message_under=this.addView(BetaJS.Views.View,{el_classes:"video-recorder-message-under-large",visible:!1}),this.__message=this.addView(BetaJS.Views.LabelView,{el_classes:"video-recorder-message",visible:!1}),this.__set_message=function(a){this.__message.set("label",a),this.__message_under.setVisibility(!!a),this.__message.setVisibility(!!a)},this.__dashboard_under=this.addView(BetaJS.Views.View,{el_classes:"video-recorder-dashboard-under"}),this.__dashboard=this.addView(BetaJS.Views.ListContainerView,{el_classes:"video-recorder-dashboard"}),this.stop_button_view=this.__dashboard.addChild(new BetaJS.Views.ButtonView({label:this._("recording_get_ready"),el_classes:["video-recorder"],css:{"default":"btn-default on"},children_styles:{position:"inherit"},el_styles:{"float":"right",visibility:"hidden"}})),this.__time=null,this.countdown_view=this.__dashboard.addChild(new BetaJS.Views.LabelView({label:this._("recording_get_ready"),el_classes:"video-recorder-font",el_styles:{"float":"right",padding:"15px 15px 15px 15px","font-size":"16px"}})),this.timer_view=this.__dashboard.addChild(new BetaJS.Views.VideoRecorder.Views.TimerView({parent:this.view(),max_time:this.view().get("time_limit")?1e3*this.view().get("time_limit"):null,time:0,visible:!1,el_styles:{"float":"right",padding:"15px 15px 15px 15px","font-size":"16px"},el_classes:"video-recorder-font"})),this.blinking_record_view=this.__dashboard.addChild(new BetaJS.Views.VideoRecorder.Views.BlinkingRecordView({parent:this.view(),visible:!1,el_styles:{"float":"left",padding:"20px"}})),this.stop_button_view.on("click",function(){this.stop_recording()},this),this.stop_button_view.set("disabled",!0),this.view().recorderWrapper.on("data",function(a,b){return this.destroyed()||this.view().destroyed()||!this.view().recorderWrapper||this.view().recorderWrapper.destroyed()?void 0:(this.view().videoBlob=a,this.view().audioBlob=b,this.view().duration=this.view().recorderWrapper.duration()/1e3,this.view().recorderWrapper.unbindMedia(),this.view().recorderWrapper.destroy(),this.view().trigger("recording_finished"),!this.view().get("disable_snapshots")&&this.__snapshots.length>0?(this.view().snapshots=this.__snapshots,void this.next("SelectSnapshots")):void this.next("RecorderUploading"))},this),this.view().recorderWrapper.startRecord(),this.stop_button_view.$el.css("visibility",""),this.stop_button_view.set("label",this._("recording_start")),this.stop_button_view.$el.children().css("background-color","green"),this.countdown_view.hide(),this.blinking_record_view.show(),this.view().get("disable_timer")||this.timer_view.show(),this.__time=BetaJS.Time.now()},_timer_state:function(){if(this.__time){if(this.view().get("framerate_warning"))try{this.view().recorderWrapper.averageFrameRate()&&this.view().recorderWrapper.averageFrameRate()<this.view().get("framerate_warning")?this.__set_message("The video frame rate is very low. We recommend closing all other programs and browser tabs or to use a faster computer."):this.__set_message("")}catch(a){}var b=BetaJS.Time.now()-this.__time;if(!this.view().get("disable_snapshots")&&b>250&&this.__snapshots.length<4&&500*this.__snapshots.length<b){var c=this.view().recorderWrapper.createSnapshot("image/jpeg");this.__snapshots.push(c)}this.timer_view.set("time",b),this.view().trigger("elapsed",b),this.view().get("time_limit")&&b>=1e3*this.view().get("time_limit")&&this.stop_recording(),b>1500&&(this.stop_button_view.$el.children().css("background-color",""),this.stop_button_view.set("disabled",!1),this.stop_button_view.set("label",this._("stop_recording")))}},stop_recording:function(){var a=BetaJS.Time.now()-this.__time;this.view()._duration=a,this.view().__face_outline_view.hide(),this.view().recorderWrapper.stopRecord()}}),BetaJS.Views.VideoRTCRecorder.States.State.extend("BetaJS.Views.VideoRTCRecorder.States.SelectSnapshots",{_start_state:function(){this.view().set("has_focus",!0),this.view().__video_view.hide(),this.addView(BetaJS.Views.LabelView,{el_classes:"video-recorder-message",label:this._("select_snapshot")}),this.addView(BetaJS.Views.VideoRecorder.Views.SnapshotFramesView,{number:this.view().snapshots.length,frames:this.view().snapshots,el_classes:"video-recorder-progress"}).on("click",function(a){this.view().snapshot=this.view().snapshots[a],this.next("RecorderUploading")},this)}}),BetaJS.Views.VideoRTCRecorder.States.State.extend("BetaJS.Views.VideoRTCRecorder.States.RecorderUploading",{_start_state:function(){this.view().set("has_focus",!0),this.view().__video_view.hide(),this.__processing_view=this.addView(BetaJS.Views.VideoRecorder.Views.ProgressView,{label:this._("uploading_label"),progress:0});var a=new BetaJS.Browser.Upload.MultiUploader,b=this.view().get("recorder_config").submit;this.view().get("submit_duration")&&(b=BetaJS.Net.Uri.appendUriParams(b,{duration:this.view().duration})),this.view().uploader=a,a.addUploader(BetaJS.Browser.Upload.FileUploader.create({url:b,source:this.view().videoBlob,serverSupportChunked:this.view().get("resumable"),serverSupportPostMessage:!1,resumable:{withCredentials:!1,assembleUrl:b,assembleResilience:50,assembleResilienceTimeout:1e3,acceptedAssembleError:412}})),this.view().audioBlob&&a.addUploader(BetaJS.Browser.Upload.FileUploader.create({url:this.view().get("recorder_config").submit_audio,source:this.view().audioBlob,serverSupportChunked:this.view().get("resumable"),serverSupportPostMessage:!1,resumable:{withCredentials:!1,assembleUrl:this.view().get("recorder_config").submit_audio,assembleResilience:50,assembleResilienceTimeout:1e3,acceptedAssembleError:412}})),this.view().snapshot&&a.addUploader(BetaJS.Browser.Upload.FileUploader.create({url:this.view().get("recorder_config").submit_snapshot,source:this.view().snapshot,serverSupportChunked:this.view().get("resumable"),serverSupportPostMessage:!1,resumable:{withCredentials:!1,assembleUrl:this.view().get("recorder_config").submit_snapshot,assembleResilience:50,assembleResilienceTimeout:1e3,acceptedAssembleError:412}})),a.on("success",function(a){this.view().get("rerecord_limit")!==!1&&this.view().set("rerecord_limit",this.view().get("rerecord_limit")-1),this.view().trigger("recording_uploaded",a),this.next("ProcessingState")},this).on("error",function(a){this.view().trigger("server_error","Error"),this.next("ErrorState",{error_message:"Error"})},this).on("progress",function(a,b){this.view().trigger("upload_progress",a,b),b&&(this.view().set("file_size",b),this.__processing_view.set("progress",a/b))},this),this.view().trigger("uploading"),a.upload()}}),BetaJS.Views.VideoRTCRecorder.States.State.extend("BetaJS.Views.VideoRTCRecorder.States.ProcessingState",{_start_state:function(){this.view().set("has_focus",!0),this.__processing_view=this.addView(BetaJS.Views.VideoUploader.Views.ProgressView,{label:this._("processing_label"),progress:0}),this.__time=BetaJS.Time.now(),this.__last_check=this.__time},_timer_state:function(){var a=BetaJS.Time.now(),b=1e3;this.view().get("file_size")&&1e3*this.view().get("file_size")>1e3&&(b=this.view().get("file_size")/1e3);var c=(a-this.__time)/b,d=1-1/(1+Math.sqrt(Math.sqrt(c)));this.__processing_view.set("progress",d),this.view().trigger("processing_progress",d);var e=this;a-this.__last_check>=1e3&&(this.__last_check=a,BetaJS.$.ajax({type:"GET",async:!0,url:this.view().get("recorder_config").state}).success(function(a){e.view().trigger("recording_submitted",BetaJS.Types.is_object(a)?a:JSON.parse(a)),e.view().set("player_config",BetaJS.Types.is_object(a)?a:JSON.parse(a)),e.view().set("type","player"),e.next("Init")}).error(function(a){a.status!=BetaJS.Net.HttpHeader.HTTP_STATUS_PRECONDITION_FAILED&&(e.view().trigger("server_error",e._("could_not_process_file")),e.next("ErrorState",{error_message:e._("could_not_process_file"),call_to_action:e._("try_again")}))}))}}),BetaJS.Views.VideoRTCRecorder.States.State.extend("BetaJS.Views.VideoRTCRecorder.States.PlayerReady",{_start_state:function(){var a=this.view().get("player_config");if(this.player_view=this.addView(BetaJS.Views.VideoPlayerView,{sources:a.sources||[],meta:{responsive:this.view().get("responsive"),image:a.image||null,width:this.view().recorderWidth(),height:this.view().recorderHeight(),video_width:a.width||this.view().recorderWidth(),video_height:a.height||this.view().recorderHeight(),fit:"minimize"},el_styles:{left:"0px",top:"0px",position:"absolute"}}),this.view().player_view=this.player_view,this.player_view.on("play",function(){this.view().trigger("player_play")},this),this.player_view.on("pause",function(){this.view().trigger("player_pause")},this),this.player_view.on("stop",function(){this.view().trigger("stop")},this),this.player_view.on("error",function(a){this.view().trigger("server_error",a)},this),this.view().get("can_rerecord")){var b=this.addView(BetaJS.Views.ButtonView,{el_classes:["video-recorder","video-rerecord-button"],css:{"default":"btn-default"},children_styles:{top:"10px",right:"10px"},label:this._("rerecord_label")});b.on("click",function(){confirm(BetaJS.Browser.Dom.entitiesToUnicode(this._("rerecord_confirm")))&&(this.view().set("type","recorder"),this.view().set("rerecording",!0),this.view().trigger("recording_discarded"),this.next("RecorderDeviceCheck"))},this)}this.view().get("immediate_playback")&&this.player_view.play()}}),a.extend("module:",["v2private:Environment"],function(a){a.servers;return BetaJS.Views.VideoPlayerView.Players.JWPlayer6.setup({src:a.assetsBase+"jwplayer/jwplayer.js",swfsrc:a.assetsBase+"jwplayer/jwplayer.flash.swf",key:"zB2MBHKdnnQ5gr7Y/W+isBwTNs1NmamS6WsU3cnVdoI="}),BetaJS.Views.VideoPlayerView.Players.JWPlayer5.setup({src:a.assetsBase+"jwplayer/jwplayer-old.js",swfsrc:a.assetsBase+"jwplayer/player.swf"}),BetaJS.Browser.Info.isInternetExplorer()&&BetaJS.Browser.Info.internetExplorerVersion()<=9&&BetaJS.Browser.Loader.inlineStyles(".ziggeo-play-button { background-image: none; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+a.assetsBase+"/button_play_hover.png',sizingMethod='scale'); }"),{v2app:function(){return this.__v2app||(this.__v2app=new ZiggeoApi.V2.Application({token:ZiggeoApi.token,cdn:ZiggeoApi.Config.cdn,resumable:ZiggeoApi.Config.resumable,auth:ZiggeoApi.Config.cookies})),this.__v2app},token:"",Events:new BetaJS.Events.Events,Styles:{play_button_class:"ziggeo-play-button",play_button_vertical_align:"center",play_button_horizontal_align:"center"},Options:{global_error_message:null,enable_wowza_recording:!0,recording_type:a.isLocal?"flv":"mp4",image_type:"jpg",vcodec:a.isLocal?"flash":"h264",session_cookie_prefix:"i07af2jp98rvoctt26y5egy3",runtime:{}},Config:{revision:"1469204591305",webrtc:!1,resumable:!1,cdn:!1,cookies:!0},Uris:{embed_api_url:a.servers["embed.api.server.public.domain"],recorder_swfsrc:a.assetsBase+"recorder.swf"},Params:{width:{type:"int",def:640},height:{type:"int",def:480},recording_width:{type:"int",def:640},recording_height:{type:"int",def:480},responsive:{type:"bool",def:!1},popup_width:{type:"int",def:640},popup_height:{type:"int",def:480},popup:{type:"bool",def:!1},video:{type:"string",def:null},face_outline:{type:"bool",def:!1},stream:{type:"string",def:null},modes:{type:"array",def:null},tags:{type:"array",def:null},effect_profile:{type:"array",def:null},data:{type:"json",def:null},perms:{type:"array",def:null},disable_first_screen:{type:"bool",def:!1},disable_device_test:{type:"bool",def:!1},disable_timer:{type:"bool",def:!1},disable_snapshots:{type:"bool",def:!1},hide_rerecord_on_snapshots:{type:"bool",def:!1},auto_crop:{type:"bool",def:!1},auto_pad:{type:"bool",def:!1},key:{type:"string",def:null},limit:{type:"int",def:null},countdown:{type:"int",def:3},input_bind:{type:"string",def:null},form_accept:{type:"string",def:null},id:{type:"string",def:null},immediate_playback:{type:"bool",def:!1},autoplay:{type:"bool",def:!1},loop:{type:"bool",def:!1},server_auth:{type:"string",def:null},client_auth:{type:"string",def:null},rerecordings:{type:"int",def:null},expiration_days:{type:"int",def:null},video_profile:{type:"string",def:null},meta_profile:{type:"string",def:null},stream_width:{type:"int",def:null},stream_height:{type:"int",def:null},title:{type:"string",def:null},description:{type:"string",def:null},allowed_extensions:{type:"array",def:null},default_image_selector:{type:"float",def:null},apitoken:{type:"string",def:null},framerate:{type:"int",def:null},enforce_duration:{type:"bool",def:!1},limit_upload_size:{type:"int",def:null},performance_warning:{type:"bool",def:!1},recover_streams:{type:"bool",def:!1},nofullscreen:{type:"bool",def:!1},incognito:{type:"bool",def:!1},simulate:{type:"bool",def:!1}}}}),"undefined"!=typeof module&&"exports"in module&&("undefined"!=typeof BetaJS&&module.exports==BetaJS?BetaJS.ZiggeoApi=ZiggeoApi:module.exports=ZiggeoApi);try{BetaJS.$(document).ready(function(){if(!ZiggeoApi.language){var a=BetaJS.Browser.Info.language().toLowerCase();0===a.indexOf("fr")&&(ZiggeoApi.language="fr"),0===a.indexOf("es")&&(ZiggeoApi.language="es"),0===a.indexOf("pt-br")&&(ZiggeoApi.language="pt-br"),0===a.indexOf("de")&&(ZiggeoApi.language="de"),0===a.indexOf("it")&&(ZiggeoApi.language="it"),0===a.indexOf("sv")&&(ZiggeoApi.language="sv"),0===a.indexOf("da")&&(ZiggeoApi.language="da"),0===a.indexOf("no")&&(ZiggeoApi.language="no"),0===a.indexOf("fi")&&(ZiggeoApi.language="fi"),0===a.indexOf("cat")&&(ZiggeoApi.language="cat"),0===a.indexOf("bg")&&(ZiggeoApi.language="bg"),0===a.indexOf("hu")&&(ZiggeoApi.language="hu"),0===a.indexOf("pl")&&(ZiggeoApi.language="pl"),0===a.indexOf("ro")&&(ZiggeoApi.language="ro"),0===a.indexOf("sr")&&(ZiggeoApi.language="sr"),0===a.indexOf("tr")&&(ZiggeoApi.language="tr")}ZiggeoApi.language&&(BetaJS.Locales.language=ZiggeoApi.language),ZiggeoApi.token&&ZiggeoApi.v2app().on("ready",function(){ZiggeoApi.v2app().data.get("cookie_changed")&&ZiggeoApi.Embed._update_runtime(),ZiggeoApi.v2app().data.get("testing_application")&&BetaJS.$("body").addClass("ziggeo-testing"),ZiggeoApi.Events.triggerAsync("system_ready")}).on("error",function(){ZiggeoApi.Options.global_error_message=ZiggeoApi.v2app().data.get("error_message"),ZiggeoApi.Embed._update_runtime()})})}catch(c){}BetaJS.Views.VideoPlayerImageView.defaultPlayButton=function(){return{play_button:BetaJS.Views.LabelView,play_button_options:function(a){return{label:"<i class='bjs-icon-play'></i>",el_classes:"view-player-play-label "+ZiggeoApi.Styles.play_button_class}},play_button_vertical_align:ZiggeoApi.Styles.play_button_vertical_align,play_button_horizontal_align:ZiggeoApi.Styles.play_button_horizontal_align}},ZiggeoApi.Connect={_path:function(a){return"/v1/applications/"+ZiggeoApi.token+a},_uri:function(a){return ZiggeoApi.v2app().urls.httpApiBaseUrl()+this._path(a)},__cookieName:function(){return ZiggeoApi.Options.session_cookie_prefix+ZiggeoApi.token},__cookieValue:function(){return ZiggeoApi.Config.cookies?BetaJS.Browser.Cookies.get(this.__cookieName()):""}},ZiggeoApi.Streams=BetaJS.Objs.extend(ZiggeoApi.Streams||{},{__process:function(a,b,c){b=b||{},b.success&&a.success(function(a){c.push(a),b.success.apply(this,c)},b.context||this),b.failure&&a.error(function(a){c.push(a),b.failure.apply(this,c)},b.context||this)},image:function(a,b,c){return ZiggeoApi.v2app().streams.imageUrl(a,b,{auth:c})},source:function(a,b,c,d){return ZiggeoApi.v2app().streams.videoUrl(a,b,{auth:c,download:d})}}),ZiggeoApi.Videos=BetaJS.Objs.extend(ZiggeoApi.Videos||{},{__process:function(a,b,c){b=b||{},b.success&&a.success(function(a){c.push(a),b.success.apply(this,c)},b.context||this),b.failure&&a.error(function(a){c.push(a),b.failure.apply(this,c)},b.context||this)},image:function(a,b){return ZiggeoApi.v2app().videos.imageUrl(a,{auth:b})},source:function(a,b,c){return ZiggeoApi.v2app().videos.videoUrl(a,{auth:b,download:c})}}),ZiggeoApi.Videos=BetaJS.Objs.extend(ZiggeoApi.Videos||{},{index:function(a,b,c){return this.__process(ZiggeoApi.V2.Application.getDefault().videos.index(a,c),b,[a])},destroy:function(a,b,c){return this.__process(ZiggeoApi.V2.Application.getDefault().videos.destroy(a,c),b,[a])},create:function(a,b,c){return this.__process(ZiggeoApi.V2.Application.getDefault().videos.create(a,c),b,[a])},update:function(a,b,c,d){return this.__process(ZiggeoApi.V2.Application.getDefault().videos.update(a,b,d),c,[a,b])},_playback:function(a,b,c,d){return this.__process(ZiggeoApi.V2.Application.getDefault().videos._playback(a,b,d),c,[a,b])},get:function(a,b,c){return this.__process(ZiggeoApi.V2.Application.getDefault().videos.get(a,c),b,[a])}}),ZiggeoApi.Streams=BetaJS.Objs.extend(ZiggeoApi.Streams||{},{destroy:function(a,b,c,d){return this.__process(ZiggeoApi.V2.Application.getDefault().streams.destroy(a,b,d),c,[a,b])},create:function(a,b,c,d){return this.__process(ZiggeoApi.V2.Application.getDefault().streams.create(a,b,d),c,[a,b])},accept:function(a,b,c,d){return this.__process(ZiggeoApi.V2.Application.getDefault().streams.accept(a,b,d),c,[a,b])},_image_attach:function(a,b,c,d,e){return this.__process(ZiggeoApi.V2.Application.getDefault().streams._image_attach(a,b,c,e),d,[a,b,c])},_audio_attach:function(a,b,c,d,e){return this.__process(ZiggeoApi.V2.Application.getDefault().streams._audio_attach(a,b,c,e),d,[a,b,c])},_recorder_submit:function(a,b,c,d,e){return this.__process(ZiggeoApi.V2.Application.getDefault().streams._recorder_submit(a,b,c,e),d,[a,b,c])},_uploader_state:function(a,b,c,d){return this.__process(ZiggeoApi.V2.Application.getDefault().streams._uploader_state(a,b,d),c,[a,b])}}),BetaJS.Properties.Properties.extend("ZiggeoApi.Views.ViewData",{constructor:function(a,b){this._inherited(ZiggeoApi.Views.ViewData,"constructor"),options={};for(var c in ZiggeoApi.Params)options[c]=c in a?BetaJS.Views.View.parseType(a[c],ZiggeoApi.Params[c].type):ZiggeoApi.Params[c].def?ZiggeoApi.Params[c].def:null;b=b||{},this.set("popup",!!b.popup),this.set("intermediate_token",a.intermediate_token),this.set("embed_popup",!!options.popup),this.set("disable_first_screen",!!options.disable_first_screen),this.set("disable_device_test",!!options.disable_device_test),this.set("disable_timer",!!options.disable_timer),this.set("disable_snapshots",!!options.disable_snapshots),this.set("hide_rerecord_on_snapshots",!!options.hide_rerecord_on_snapshots),this.set("face_outline",!!options.face_outline),this.set("enforce_duration",!!options.enforce_duration),this.set("video_profile",options.video_profile),this.set("meta_profile",options.meta_profile),this.set("auto_crop",!!options.auto_crop),this.set("auto_pad",!!options.auto_pad),this.set("title",options.title),this.set("limit_upload_size",options.limit_upload_size),this.set("description",options.description),this.set("error",b.error?b.error:null),this.set("performance_warning",!!options.performance_warning),this.set("width",options.width),this.set("framerate",options.framerate),this.set("height",options.height),this.set("autoplay",options.autoplay),this.set("loop",options.loop),this.set("recording_width",options.recording_width),this.set("recording_height",options.recording_height),this.set("stream_width",options.stream_width),this.set("stream_height",options.stream_height),this.set("simulate",!!options.simulate),this.set("immediate_playback",!!options.immediate_playback),this.set("recover_streams",!!options.recover_streams),this.set("nofullscreen",!!options.nofullscreen),this.set("incognito",!!options.incognito),this.set("responsive",!!options.responsive),this.set("expiration_days",options.expiration_days?options.expiration_days:null),this.set("countdown","countdown"in options?Math.max(0,options.countdown):3),this.set("popup_width",options.popup_width),this.set("popup_height",options.popup_height),this.set("input_bind",options.input_bind),this.set("form_accept",options.form_accept),this.set("server_auth",options.server_auth),this.set("client_auth",options.client_auth),this.set("rerecordings",options.rerecordings?options.rerecordings:!1),this.set("refresh_token",null),this.set("auth",this.computed(function(){var a={domain:location.hostname};return this.get("client_auth")&&(a.client_auth=this.get("client_auth")),this.get("server_auth")&&(a.server_auth=this.get("server_auth")),this.get("intermediate_token")&&(a.intermediate_token=this.get("intermediate_token")),a},["server_auth","client_auth","intermediate_token"])),this.set("auth_params",this.computed(function(){return BetaJS.Net.Uri.encodeUriParams(this.get("auth"))},["auth"])),this.set("id",options.id),this.set("key",options.key?options.key:null),this.set("tags",options.tags?options.tags:[]),this.set("effect_profile",options.effect_profile?options.effect_profile:[]),this.set("allowed_extensions",options.allowed_extensions?options.allowed_extensions:null),this.set("default_image_selector",options.default_image_selector?options.default_image_selector:null),this.set("data",options.data?BetaJS.Types.is_string(options.data)?JSON.parse(options.data):options.data:{}),options.perms=options.perms||{},this.set("force_overwrite",BetaJS.Objs.contains_value(options.perms,"forceoverwrite")),this.set("allow_upload",BetaJS.Objs.contains_value(options.perms,"allowupload")),this.set("allow_record",!BetaJS.Objs.contains_value(options.perms,"forbidrecord")&&!BetaJS.Browser.Info.isMobile()&&ZiggeoApi.Options.enable_wowza_recording),this.set("allow_switch",!BetaJS.Objs.contains_value(options.perms,"forbidswitch")&&this.get("allow_upload")&&this.get("allow_record")),this.set("allow_rerecord",!BetaJS.Objs.contains_value(options.perms,"forbidrerecord")),this.set("submit_mode",this.get("allow_record")?"recorder":"uploader"),this.set("video",{token:options.video}),this.set("stream",{token:options.stream}),this.set("time_limit",options.limit);var d=.85*BetaJS.$(window).width()/this.get("popup_width"),e=.85*BetaJS.$(window).height()/this.get("popup_height"),f=Math.min(d,e);if(1>f&&(this.set("popup_width",Math.floor(this.get("popup_width")*f)),this.set("popup_height",Math.floor(this.get("popup_height")*f))),this.set("player_params",this.computed(function(){return BetaJS.Net.Uri.encodeUriParams(BetaJS.Objs.filter({stream_width:this.get("stream_width"),stream_height:this.get("stream_height"),effect_profile:this.get("effect_profile")?this.get("effect_profile").toString():null,refresh_token:this.get("refresh_token")}))},["stream_width","stream_height","refresh_token"])),this.set("actual_width",this.computed(function(){return this.get("popup")?this.get("popup_width"):this.get("width")},["width","popup_width","popup"])),this.set("actual_height",this.computed(function(){return this.get("popup")?this.get("popup_height"):this.get("height")},["height","popup_height","popup"])),this.set("image",this.computed(function(){var a=null;return this.get("video").token&&(a=this.get("stream").token?ZiggeoApi.Streams.image(this.get("video").token,this.get("stream").token)+"?"+this.get("auth_params")+"&"+this.get("player_params"):ZiggeoApi.Videos.image(this.get("video").token)+"?"+this.get("auth_params")+"&"+this.get("player_params")),a},["video","stream","auth_params","player_params"])),this.set("sources",this.computed(function(){var a=null;if(this.get("video").token){a=this.get("stream").token?[ZiggeoApi.Streams.source(this.get("video").token,this.get("stream").token)]:[ZiggeoApi.Videos.source(this.get("video").token)];for(var b=0;b<a.length;++b)a[b]=a[b]+"?"+this.get("auth_params")+"&"+this.get("player_params")}return a},["video","stream","auth_params","player_params"])),this.set("mode","error"),options.modes=options.modes||[],!this.get("error"))if(0===options.modes.length)this.set("mode",this.get("video").token?"player":"recorder");else if(1==options.modes.length)this.set("mode",options.modes[0]);else if(BetaJS.Objs.contains_value(options.modes,"rerecorder")&&BetaJS.Objs.contains_value(options.modes,"player"))this.set("error","You cannot combine player and rerecorder");else{var g=BetaJS.Objs.contains_value(options.modes,"rerecorder")?"rerecorder":"player";try{var h={};this.get("auth")&&BetaJS.Objs.extend(h,this.get("auth"));var i=ZiggeoApi.Connect.__cookieName();h[i]=ZiggeoApi.Connect.__cookieValue();var j="/videos/"+this.get("video").token;j=BetaJS.Net.Uri.appendUriParams(j,h);var k=this;BetaJS.$.ajax({type:"GET",async:!1,url:ZiggeoApi.Connect._uri(j),dataType:BetaJS.Browser&&BetaJS.Browser.Info.isInternetExplorer()&&BetaJS.Browser.Info.internetExplorerVersion()<=9?"json":null,success:function(a){var b=a;k.set("video",b),k.set("mode","EMPTY"!==b.state_string?g:"recorder")},error:function(a,b,c){k.set("key",BetaJS.Strings.strip_start(k.get("video").token,"_")),k.set("video",{token:null}),k.set("mode","recorder")}})}catch(l){this.set("key",BetaJS.Strings.strip_start(this.get("video").token,"_")),this.set("video",{token:null}),this.set("mode","recorder")}}this.get("video").token&&!this.get("key")&&BetaJS.Strings.starts_with(this.get("video").token,"_")&&this.set("key",BetaJS.Strings.strip_start(this.get("video").token,"_")),this.set("createparams",this.computed(function(){return{recover_streams:this.get("recover_streams"),max_duration:this.get("time_limit"),tags:this.get("tags").join(","),effect_profile:this.get("effect_profile").join(","),data:JSON.stringify(this.get("data")),key:this.get("key"),expiration_days:this.get("expiration_days"),auto_crop:this.get("auto_crop"),auto_pad:this.get("auto_pad"),force_overwrite:this.get("force_overwrite"),default_image_selector:this.get("default_image_selector"),video_profile:this.get("video_profile"),meta_profile:this.get("meta_profile"),title:this.get("title"),description:this.get("description"),enforce_duration:this.get("enforce_duration")}},["tags","key","title","description","data","time_limit","enforce_duration"])),this.set("uriparams",this.computed(function(){return BetaJS.Net.Uri.encodeUriParams(this.get("createparams"))},["createparams"]))},get_auth_params_with_cookie:function(){var a=ZiggeoApi.Connect.__cookieName();return this.get("auth_params")+"&"+a+"="+ZiggeoApi.Connect.__cookieValue()},image_with_auth:function(a){var b=this.get("image");return ZiggeoApi.Config.cdn||(b+="&"+ZiggeoApi.Connect.__cookieName()+"="+ZiggeoApi.Connect.__cookieValue()),a?b+"&_t="+BetaJS.Time.now():b},sources_with_auth:function(a){return BetaJS.Objs.map(this.get("sources"),function(b){var c=b;return ZiggeoApi.Config.cdn||(c+="&"+ZiggeoApi.Connect.__cookieName()+"="+ZiggeoApi.Connect.__cookieValue()),a?c+"&_t="+BetaJS.Time.now():c})}}),BetaJS.Views.View.extend("ZiggeoApi.Views.ZiggeoErrorView",{_templates:{"default":"  <div class='view-player-not-ready-outer' style='width: {%= width %}px; height: {%= height %}px'>   <div class='view-player-not-ready-inner' style='font-size:{%= Math.floor((width + height) / 40) %}px; padding-left:{%= Math.floor(width / 10) %}px; padding-right:{%= Math.floor(width / 10) %}px'>    {%= error %}   </div>  </div> "},constructor:function(a){this._inherited(ZiggeoApi.Views.ZiggeoErrorView,"constructor",a),this.view_data=a.view_data,this._setOptionProperty(a,"width",this.view_data.get("actual_width")),this._setOptionProperty(a,"height",this.view_data.get("actual_height")),this.set("error",this.view_data.get("error")?this.view_data.get("error"):"An unknown error has occurred")}}),BetaJS.Views.View.extend("ZiggeoApi.Views.ZiggeoPlayerView",{constructor:function(a){this._inherited(ZiggeoApi.Views.ZiggeoPlayerView,"constructor",a),this.view_data=a.view_data,this.view_data.get("embed_popup")?this.view=this.addChild(new BetaJS.Views.ImageOverlayVideoPlayerView({el:"",sources:this.view_data.sources_with_auth(),loop:this.view_data.get("loop"),meta:{video_width:this.view_data.get("popup_width"),video_height:this.view_data.get("popup_height"),image:this.view_data.image_with_auth(),fit:"minimize"},image_meta:{width:this.view_data.get("width"),height:this.view_data.get("height"),image:this.view_data.image_with_auth(),fit:"maximize",responsive:this.view_data.get("responsive")}})):this.view=this.addChild(new BetaJS.Views.VideoPlayerView({el:"",sources:this.view_data.sources_with_auth(),loop:this.view_data.get("loop"),meta:{video_width:this.view_data.get("actual_width"),video_height:this.view_data.get("actual_height"),image:this.view_data.image_with_auth(),fit:"maximize",responsive:this.view_data.get("responsive")}})),this.view.on("image-error",function(){var a=this;ZiggeoApi.Videos.get(this.view_data.get("video").token,{success:function(b,c){if(c.approved===!1)c.moderation_reason?a.view.image_view.showStatus(c.moderation_reason):a.view.image_view.showStatus("Your video has been rejected by a moderator.");else{a.view.image_view.showStatus("The video is not ready. It is processing or under moderation.");var d=function(){ZiggeoApi.Videos.get(a.view_data.get("video").token,{success:function(b,e){e.state!=c.state||e.approved!=c.approved?a.destroyed()||a.getParent().reset():setTimeout(d,3e4)}})};setTimeout(d,3e4)}},failure:function(b,c){a.view.image_view.showStatus(c.status_text())}},this.view_data.get("auth"))},this),this.view.on("play",function(){try{this.view_data.get("nofullscreen")&&this.$el.find(".jwfullscreen").css("z-index","-1"),ZiggeoApi.Config.cdn&&ZiggeoApi.Videos._playback(this.view_data.get("video").token,{},{},this.view_data.get("auth"))}catch(a){}ZiggeoApi.Events.triggerAsync("play",this.view_data.getAll())},this).on("pause",function(){ZiggeoApi.Events.triggerAsync("pause",this.view_data.getAll())},this).on("stop",function(){ZiggeoApi.Events.triggerAsync("stop",this.view_data.getAll())},this).on("error",function(a){this.view_data.set("error",a),ZiggeoApi.Events.triggerAsync("error_player",this.view_data.getAll()),BetaJS.Views.VideoPlayerView.on_error(this.view,this.view_data.getAll())},this).on("ready_to_play",function(){this.view_data.__ready_to_play_triggered||(ZiggeoApi.Events.triggerAsync("ready_to_play",this.view_data.getAll()),this.view_data.get("autoplay")&&this.view.play()),this.view_data.__ready_to_play_triggered=!0},this);var b=this;ZiggeoApi.Videos.get(this.view_data.get("video").token,{success:function(a,c){try{var d=c.resubmission_date;if(d>c.submission_date&&BetaJS.Time.timeComponent(BetaJS.Time.ago(1e3*d),"day")<2){var e=Math.floor(d/60);b.view_data.get("refresh_token")!=e&&(b.view_data.set("refresh_token",e),b.__reloadSources())}}catch(f){}}},this.get("auth"))},__reloadSources:function(){this.view.updateImage(this.view_data.image_with_auth()),this.view.updateSources(this.view_data.sources_with_auth())},play:function(){this.view.play()},stop:function(){this.view.stop()},stopRecord:function(){}}),BetaJS.Views.View.extend("ZiggeoApi.Views.ZiggeoRecorderView",{constructor:function(a){this._inherited(ZiggeoApi.Views.ZiggeoRecorderView,"constructor",a),this.view_data=a.view_data,this.set("submittable","rerecorder"==this.view_data.get("mode"));var b=null;if("rerecorder"==this.view_data.get("mode")){var c=this.view_data.sources_with_auth();b=c[0]}this.view=this.addChild(new BetaJS.Views.VideoRecorder({recorder_swf:ZiggeoApi.Uris.recorder_swfsrc+"?v="+ZiggeoApi.Config.revision,el:"",play_stream:{file_type:ZiggeoApi.Options.recording_type,server:null,vcodec:ZiggeoApi.Options.vcodec,file:b},record_stream:{file_type:ZiggeoApi.Options.recording_type,servers:ZiggeoApi.v2app().urls.rtmpRecordingUrls(),vcodec:ZiggeoApi.Options.vcodec,acodec:"speex"},type:"rerecorder"==this.view_data.get("mode")?"player":"recorder",first_screen:!this.view_data.get("disable_first_screen"),disable_timer:this.view_data.get("disable_timer"),disable_snapshots:this.view_data.get("disable_snapshots"),face_outline:this.view_data.get("face_outline"),device_test:!this.view_data.get("disable_device_test"),allow_rerecord:this.view_data.get("allow_rerecord"),immediate_playback:this.view_data.get("immediate_playback"),rerecord_limit:this.view_data.binding("rerecordings"),camera_fps:this.view_data.get("framerate"),recorder_width:this.view_data.get("actual_width"),
recorder_height:this.view_data.get("actual_height"),camera_width:this.view_data.get("recording_width"),camera_height:this.view_data.get("recording_height"),recover_streams:this.view_data.get("recover_streams"),rerecord_on_snapshots:!this.view_data.get("hide_rerecord_on_snapshots"),responsive:this.view_data.get("responsive"),incognito:this.view_data.get("incognito"),snapshots_type:ZiggeoApi.Options.image_type,simulate:this.view_data.get("simulate"),snapshots_quality:70,flip_video:!0,external_upload:this.view_data.get("allow_switch"),time_limit:this.view_data.get("time_limit"),recording_countdown:this.view_data.get("countdown"),initial_image:"rerecorder"==this.view_data.get("mode")?this.view_data.image_with_auth(!0):null,player_config:{image:this.view_data.image_with_auth("rerecorder"==this.view_data.get("mode")),sources:this.view_data.sources_with_auth("rerecorder"==this.view_data.get("mode"))}})),this.view.events().on("exception",function(a){},this),this.view.events().on("error",function(a){},this),this.view.on("state:RecorderBeforeRecording",function(){var a=this;this.view.state().suspend();var b=function(b){var c="applications/"+ZiggeoApi.token,d="/videos/"+a.view_data.get("video").token+"/streams/"+a.view_data.get("stream").token;a.view.set("snapshots_post",ZiggeoApi.Connect._uri(d+"/imageattach")+"?"+a.view_data.get_auth_params_with_cookie());var e=a.view_data.sources_with_auth();a.view.get("play_stream").file=e[0],a.view.get("record_stream").file=c+d+"/video.mp4?"+a.view_data.get_auth_params_with_cookie(),a.view.api().config_set("snapshots_post",a.view.get("snapshots_post")),a.view.api().config_set("play_stream_file",a.view.get("play_stream").file),a.view.api().config_set("record_stream_file",a.view.get("record_stream").file);var f=a.view.get("recorder_config");f.state=ZiggeoApi.Connect._uri(d+"/uploaderstate")+"?"+a.view_data.get_auth_params_with_cookie(),a.__update_form_input(),a.view.state().resume()},c=function(b){a.view.user_error(BetaJS.Types.is_string(b.data())&&b.data()?b.data():"Could not create video."),a.view.trigger("error","user_error",b.json()),a.view.state().resume()};this.view_data.get("video").token?ZiggeoApi.Streams.create(this.view_data.get("video").token,{flash_recording:!0},{success:function(c,d,e){a.view_data.set("stream",e),b(e)},failure:function(a,b,d){c(d)}},this.view_data.get("auth")):ZiggeoApi.Videos.create(BetaJS.Objs.extend({flash_recording:!0},this.view_data.get("createparams")),{success:function(c,d){a.view_data.set("video",d.video),a.view_data.set("stream",d.stream),b(d)},failure:function(a,b){c(b)}},this.view_data.get("auth"))},this),this.view.on("stop",function(){ZiggeoApi.Events.triggerAsync("stop",this.view_data.getAll())},this),this.view.on("state:RecorderDeviceReady",function(){ZiggeoApi.Events.triggerAsync("ready_to_record",this.view_data.getAll())},this),this.view.on("state:RecorderRecording",function(){ZiggeoApi.Events.triggerAsync("recording",this.view_data.getAll())},this),this.view.on("state:RecorderUploading",function(){ZiggeoApi.Events.triggerAsync("uploading",this.view_data.getAll())},this),this.view.on("state:WaitingForFlash",function(){ZiggeoApi.Events.triggerAsync("flash_hibernate",this.view_data.getAll())},this),this.view.on("recording_submitted",function(a){this.view_data.get("video").duration=a.duration/1e3,this.view_data.get("stream").duration=this.view_data.get("video").duration,this.view.state().suspend();var b=50,c=!1,d=function(){return this.view_data.get("simulate")?(this.set("submittable",!0),c||(ZiggeoApi.Events.triggerAsync("uploaded",this.view_data.getAll()),ZiggeoApi.Events.triggerAsync("submitted",this.view_data.getAll())),c=!0,void this.view.state().resume()):void ZiggeoApi.Streams._recorder_submit(this.view_data.get("video").token,this.view_data.get("stream").token,this.view_data.get("uriparams"),{success:function(a,b,d,e){e.video&&this.view_data.set("video",e.video),e.stream&&this.view_data.set("stream",e.stream),this.set("submittable",!0),c||(ZiggeoApi.Events.triggerAsync("uploaded",this.view_data.getAll()),ZiggeoApi.Events.triggerAsync("submitted",this.view_data.getAll())),c=!0,this.view.state().resume()},failure:function(a,c){0>=b?(this.view.user_error(BetaJS.Types.is_string(c.data())?c.data():"Could not submit video"),this.view.trigger("error","user_error",c.json())):(b--,BetaJS.Async.eventually(function(){d.apply(this)},this,1e3))},context:this},this.view_data.get("auth"))};d.apply(this)},this),this.view.on("recording_discarded",function(){this.set("submittable",!1),ZiggeoApi.Events.triggerAsync("discarded",this.view_data.getAll())},this),this.view.on("recording_finished",function(){ZiggeoApi.Events.triggerAsync("finished",this.view_data.getAll())},this),this.view.on("camera_unresponsive",function(){ZiggeoApi.Events.triggerAsync("camera_unresponsive",this.view_data.getAll())},this),this.view.on("camera_signal",function(){ZiggeoApi.Events.triggerAsync("camera_signal",this.view_data.getAll())},this),this.view.on("camera_nosignal",function(){ZiggeoApi.Events.triggerAsync("camera_nosignal",this.view_data.getAll())},this),this.view.on("access_granted",function(a){ZiggeoApi.Events.triggerAsync("access_granted",this.view_data.getAll(),a)},this),this.view.on("access_forbidden",function(a){ZiggeoApi.Events.triggerAsync("access_forbidden",this.view_data.getAll(),a)},this),this.view.on("external_upload",function(){this.set("submittable",!1),this.trigger("external_upload")},this),this.view.on("upload_progress",function(a,b){ZiggeoApi.Events.triggerAsync("upload_progress",a,b,this.view_data.getAll())},this),this.view.on("processing_progress",function(a){ZiggeoApi.Events.triggerAsync("processing_progress",a,this.view_data.getAll())},this),this.view.on("error",function(a,b){this.view_data.set("error",b),ZiggeoApi.Events.triggerAsync("error_recorder",this.view_data.getAll())},this),this.view.on("countdown",function(a){ZiggeoApi.Events.triggerAsync("countdown",a,this.view_data.getAll())},this),this.view.on("elapsed",function(a){ZiggeoApi.Events.triggerAsync("elapsed",a,this.view_data.getAll())},this),this.view.on("player_play",function(){ZiggeoApi.Events.triggerAsync("play",this.view_data.getAll())},this),this.view.on("player_pause",function(){ZiggeoApi.Events.triggerAsync("pause",this.view_data.getAll())},this),this.view.view_data=this.view_data},record:function(){this.view.state().record()},_notifications:{activate:"__activate_view",deactivate:"__deactivate_view"},__activate_view:function(){if(this.__update_form_input(),this.view_data.get("form_accept")){var a=this;BetaJS.$(this.view_data.get("form_accept")).on("submit."+this.cid(),function(){return a.get("submittable")})}},__deactivate_view:function(){if(this.view_data.get("form_accept")){BetaJS.$(this.view_data.get("form_accept")).off("submit."+this.cid())}},__update_form_input:function(){if(this.view_data.get("input_bind")&&this.view_data.get("video")&&this.view_data.get("video").token){var a=BetaJS.$("[name='"+this.view_data.get("input_bind")+"']");a.length>0?a.val(this.view_data.get("video").token):this.$el.parent().append("<input type='hidden' id='"+this.view_data.get("input_bind")+"' name='"+this.view_data.get("input_bind")+"' value='"+this.view_data.get("video").token+"' />")}},stop:function(){this.view.stop()},play:function(){this.view.play()},stopRecord:function(){this.view.stopRecord()},isRecording:function(){return this.view.isRecording&&this.view.isRecording()},averageFrameRate:function(){return this.view.averageFrameRate?this.view.averageFrameRate():null},lightLevel:function(){return this.view.lightLevel?this.view.lightLevel():null},soundLevel:function(){return this.view.soundLevel?this.view.soundLevel():null},rerecord:function(){this.view.rerecord()}}),BetaJS.Views.View.extend("ZiggeoApi.Views.ZiggeoRTCRecorderView",{constructor:function(a){this._inherited(ZiggeoApi.Views.ZiggeoRTCRecorderView,"constructor",a),this.view_data=a.view_data,this.set("submittable","rerecorder"==this.view_data.get("mode")),this.view=this.addChild(new BetaJS.Views.VideoRTCRecorder({el:"",type:"rerecorder"==this.view_data.get("mode")?"player":"recorder",el_styles:{"background-color":"#333333"},first_screen:!this.view_data.get("disable_first_screen"),allow_custom_file:this.view_data.get("allow_upload"),allow_rerecord:this.view_data.get("allow_rerecord"),face_outline:this.view_data.get("face_outline"),framerate_warning:this.view_data.get("performance_warning")?7:null,rerecord_limit:this.view_data.binding("rerecordings"),external_upload:this.view_data.get("allow_switch"),recorder_width:this.view_data.get("actual_width"),recorder_height:this.view_data.get("actual_height"),device_test:!this.view_data.get("disable_device_test"),camera_width:this.view_data.get("recording_width"),camera_height:this.view_data.get("recording_height"),immediate_playback:this.view_data.get("immediate_playback"),responsive:this.view_data.get("responsive"),framerate:this.view_data.get("framerate"),resumable:!!ZiggeoApi.Config.resumable,submit_duration:!0,disable_timer:this.view_data.get("disable_timer"),disable_snapshots:this.view_data.get("disable_snapshots"),time_limit:this.view_data.get("time_limit"),recording_countdown:this.view_data.get("countdown"),player_config:{image:this.view_data.image_with_auth("rerecorder"==this.view_data.get("mode")),sources:this.view_data.sources_with_auth("rerecorder"==this.view_data.get("mode"))}})),this.view.on("stop",function(){ZiggeoApi.Events.triggerAsync("stop",this.view_data.getAll())},this),this.view.on("state:RecorderDeviceReady",function(){ZiggeoApi.Events.triggerAsync("ready_to_record",this.view_data.getAll())},this);var b=this;this.view.on("state:RecorderBeforeRecording",function(){this.view.state().suspend();var a=function(a){var c=("applications/"+ZiggeoApi.token,"/videos/"+b.view_data.get("video").token+"/streams/"+b.view_data.get("stream").token),d=b.view.get("recorder_config");d.submit=ZiggeoApi.Connect._uri(c+"/videoattach")+"?"+b.view_data.get_auth_params_with_cookie(),d.submit_audio=ZiggeoApi.Connect._uri(c+"/audioattach")+"?"+b.view_data.get_auth_params_with_cookie(),d.submit_snapshot=ZiggeoApi.Connect._uri(c+"/imageattach")+"?"+b.view_data.get_auth_params_with_cookie(),d.state=ZiggeoApi.Connect._uri(c+"/uploaderstate")+"?"+b.view_data.get_auth_params_with_cookie(),b.__update_form_input(),b.view.state().resume()},c=function(a){b.view.user_error(BetaJS.Types.is_string(a.data())&&a.data()?a.data():"Could not create video."),b.view.trigger("error","user_error",a.json()),b.view.state().resume()};this.view_data.get("video").token?ZiggeoApi.Streams.create(this.view_data.get("video").token,{webrtc_recording:!0},{success:function(c,d,e){b.view_data.set("stream",e),a(e)},failure:function(a,b,d){c(d)}},this.view_data.get("auth")):ZiggeoApi.Videos.create(BetaJS.Objs.extend({create_stream:!0,webrtc_recording:!0},this.view_data.get("createparams")),{success:function(c,d){b.view_data.set("video",d.video),b.view_data.set("stream",d.stream),a(d)},failure:function(a,b){c(b)}},this.view_data.get("auth"))},this),this.view.on("recording_uploaded",function(a){this.view.state().suspend();var b=50,c=function(){ZiggeoApi.Streams._recorder_submit(this.view_data.get("video").token,this.view_data.get("stream").token,this.view_data.get("uriparams"),{success:function(a,b,c,d){d.video&&this.view_data.set("video",d.video),d.stream&&this.view_data.set("stream",d.stream),this.set("submittable",!0),ZiggeoApi.Events.triggerAsync("uploaded",this.view_data.getAll()),this.view.state().resume()},failure:function(a,d){0>=b?(this.view.user_error(BetaJS.Types.is_string(d.data())?d.data():"Could not submit video"),this.view.trigger("error","user_error",d.json())):(b--,BetaJS.Async.eventually(function(){c.apply(this)},this,1e3))},context:this},this.view_data.get("auth"))};c.apply(this)},this),this.view.on("state:RecorderRecording",function(){ZiggeoApi.Events.triggerAsync("recording",this.view_data.getAll())},this),this.view.on("state:RecorderUploading",function(){ZiggeoApi.Events.triggerAsync("uploading",this.view_data.getAll())},this),this.view.on("recording_submitted",function(){ZiggeoApi.Events.triggerAsync("submitted",this.view_data.getAll())},this),this.view.on("countdown",function(a){ZiggeoApi.Events.triggerAsync("countdown",a,this.view_data.getAll())},this),this.view.on("recording_discarded",function(){this.set("submittable",!1),ZiggeoApi.Events.triggerAsync("discarded",this.view_data.getAll())},this),this.view.on("recording_finished",function(){ZiggeoApi.Events.triggerAsync("finished",this.view_data.getAll())},this),this.view.on("external_upload",function(){this.set("submittable",!1),this.trigger("external_upload")},this),this.view.on("elapsed",function(a){ZiggeoApi.Events.triggerAsync("elapsed",a,this.view_data.getAll())},this),this.view.on("upload_progress",function(a,b){ZiggeoApi.Events.triggerAsync("upload_progress",a,b,this.view_data.getAll())},this),this.view.on("processing_progress",function(a){ZiggeoApi.Events.triggerAsync("processing_progress",a,this.view_data.getAll())},this),this.view.on("error",function(a,b){this.view_data.set("error",b),ZiggeoApi.Events.triggerAsync("error_recorder",this.view_data.getAll())},this),this.view.on("access_granted",function(a){ZiggeoApi.Events.triggerAsync("access_granted",this.view_data.getAll(),a)},this),this.view.on("access_forbidden",function(a){ZiggeoApi.Events.triggerAsync("access_forbidden",this.view_data.getAll(),a)},this),this.view.on("player_play",function(){ZiggeoApi.Events.triggerAsync("play",this.view_data.getAll())},this),this.view.on("player_pause",function(){ZiggeoApi.Events.triggerAsync("pause",this.view_data.getAll())},this)},_notifications:{activate:"__activate_view",deactivate:"__deactivate_view"},__activate_view:function(){if(this.__update_form_input(),this.view_data.get("form_accept")){var a=this;BetaJS.$(this.view_data.get("form_accept")).on("submit."+this.cid(),function(){return a.get("submittable")})}},__deactivate_view:function(){if(this.view_data.get("form_accept")){BetaJS.$(this.view_data.get("form_accept")).off("submit."+this.cid())}},__update_form_input:function(){if(this.view_data.get("input_bind")&&this.view_data.get("video")&&this.view_data.get("video").token){var a=BetaJS.$("[name='"+this.view_data.get("input_bind")+"']");a.length>0?a.val(this.view_data.get("video").token):this.$el.parent().append("<input type='hidden' id='"+this.view_data.get("input_bind")+"' name='"+this.view_data.get("input_bind")+"' value='"+this.view_data.get("video").token+"' />")}},record:function(){this.view.state().record()},play:function(){this.view.play()},stop:function(){this.view.stop()},stopRecord:function(){this.view.stopRecord()},isRecording:function(){return this.view.isRecording&&this.view.isRecording()},averageFrameRate:function(){return this.view.averageFrameRate?this.view.averageFrameRate():null},lightLevel:function(){return this.view.lightLevel?this.view.lightLevel():null},soundLevel:function(){return this.view.soundLevel?this.view.soundLevel():null},rerecord:function(){this.view.rerecord()}}),BetaJS.Views.View.extend("ZiggeoApi.Views.ZiggeoUploaderView",{constructor:function(a){this._inherited(ZiggeoApi.Views.ZiggeoUploaderView,"constructor",a),this.view_data=a.view_data,this.set("submittable","rerecorder"==this.view_data.get("mode")),this.view=this.addChild(new BetaJS.Views.VideoUploader({el:"",type:"rerecorder"==this.view_data.get("mode")?"player":"recorder",el_styles:{"background-color":"#333333"},allow_custom_file:this.view_data.get("allow_upload"),allow_rerecord:this.view_data.get("allow_rerecord"),rerecord_limit:this.view_data.binding("rerecordings"),external_record:this.view_data.get("allow_switch"),recorder_width:this.view_data.get("actual_width"),recorder_height:this.view_data.get("actual_height"),immediate_playback:this.view_data.get("immediate_playback"),allowed_extensions:BetaJS.Browser.Info.isMobile()?null:this.view_data.get("allowed_extensions"),responsive:this.view_data.get("responsive"),resumable:!!ZiggeoApi.Config.resumable,filesize_limit:this.view_data.get("limit_upload_size"),player_config:{image:this.view_data.image_with_auth("rerecorder"==this.view_data.get("mode")),sources:this.view_data.sources_with_auth("rerecorder"==this.view_data.get("mode"))}})),this.view.on("stop",function(){ZiggeoApi.Events.triggerAsync("stop",this.view_data.getAll())},this),this.view.on("state:UploaderState",function(){ZiggeoApi.Events.triggerAsync("ready_to_record",this.view_data.getAll())},this);var b=this;this.view.on("state:BeforeUploadingState",function(){var a=function(a){var c=("applications/"+ZiggeoApi.token,"/videos/"+b.view_data.get("video").token+"/streams/"+b.view_data.get("stream").token),d=b.view.get("recorder_config");d.submit=ZiggeoApi.Connect._uri(c+"/videoattach")+"?"+b.view_data.get_auth_params_with_cookie(),d.state=ZiggeoApi.Connect._uri(c+"/uploaderstate")+"?"+b.view_data.get_auth_params_with_cookie(),b.__update_form_input(),b.view.state().next("UploadingState")},c=function(a){b.view.user_error(BetaJS.Types.is_string(a.data())&&a.data()?a.data():"Could not create video."),b.view.trigger("error","user_error",a.json())};this.view_data.get("video").token?ZiggeoApi.Streams.create(this.view_data.get("video").token,{},{success:function(c,d,e){b.view_data.set("stream",e),a(e)},failure:function(a,b,d){c(d)}},this.view_data.get("auth")):ZiggeoApi.Videos.create(BetaJS.Objs.extend({create_stream:!0},this.view_data.get("createparams")),{success:function(c,d){b.view_data.set("video",d.video),b.view_data.set("stream",d.stream),a(d)},failure:function(a,b){c(b)}},this.view_data.get("auth"))},this),this.view.on("recording_uploaded",function(a){this.view.state().suspend();var b=50,c=function(){ZiggeoApi.Streams._recorder_submit(this.view_data.get("video").token,this.view_data.get("stream").token,this.view_data.get("uriparams"),{success:function(a,b,c,d){d.video&&this.view_data.set("video",d.video),d.stream&&this.view_data.set("stream",d.stream),this.set("submittable",!0),ZiggeoApi.Events.triggerAsync("uploaded",this.view_data.getAll()),this.view.state().resume()},failure:function(a,d){0>=b?(this.view.user_error(BetaJS.Types.is_string(d.data())?d.data():"Could not submit video"),this.view.trigger("error","user_error",d.json())):(b--,BetaJS.Async.eventually(function(){c.apply(this)},this,1e3))},context:this},this.view_data.get("auth"))};c.apply(this)},this),this.view.on("uploading",function(){ZiggeoApi.Events.triggerAsync("uploading",this.view_data.getAll())},this),this.view.on("recording_submitted",function(){this.set("submittable",!0),ZiggeoApi.Events.triggerAsync("submitted",this.view_data.getAll())},this),this.view.on("recording_discarded",function(){this.set("submittable",!1),ZiggeoApi.Events.triggerAsync("discarded",this.view_data.getAll())},this),this.view.on("external_record",function(){this.set("submittable",!1),this.trigger("external_record")},this),this.view.on("upload_progress",function(a,b){ZiggeoApi.Events.triggerAsync("upload_progress",a,b,this.view_data.getAll())},this),this.view.on("processing_progress",function(a){ZiggeoApi.Events.triggerAsync("processing_progress",a,this.view_data.getAll())},this),this.view.on("recording_finished",function(){ZiggeoApi.Events.triggerAsync("finished",this.view_data.getAll())},this),this.view.on("error",function(a,b){this.view_data.set("error",b),ZiggeoApi.Events.triggerAsync("error_recorder",this.view_data.getAll())},this),this.view.on("player_play",function(){ZiggeoApi.Events.triggerAsync("play",this.view_data.getAll())},this),this.view.on("player_pause",function(){ZiggeoApi.Events.triggerAsync("pause",this.view_data.getAll())},this)},_notifications:{activate:"__activate_view",deactivate:"__deactivate_view"},__activate_view:function(){if(this.__update_form_input(),this.view_data.get("form_accept")){var a=this;BetaJS.$(this.view_data.get("form_accept")).on("submit."+this.cid(),function(){return a.get("submittable")})}},__deactivate_view:function(){if(this.view_data.get("form_accept")){BetaJS.$(this.view_data.get("form_accept")).off("submit."+this.cid())}},__update_form_input:function(){if(this.view_data.get("input_bind")&&this.view_data.get("video")&&this.view_data.get("video").token){var a=BetaJS.$("[name='"+this.view_data.get("input_bind")+"']");a.length>0?a.val(this.view_data.get("video").token):this.$el.parent().append("<input type='hidden' id='"+this.view_data.get("input_bind")+"' name='"+this.view_data.get("input_bind")+"' value='"+this.view_data.get("video").token+"' />")}},play:function(){this.view.play()},stop:function(){this.view.stop()},stopRecord:function(){},rerecord:function(){this.view.rerecord()}}),BetaJS.Views.View.extend("ZiggeoApi.Views.ZiggeoView",{_notifications:{preactivate:"__preactivate_view"},constructor:function(a){a=a||{},this.original_options=a,this.view_data=new ZiggeoApi.Views.ViewData(a,a.params),this.view_data.get("responsive")||(a.el_styles={width:this.view_data.get("width"),height:this.view_data.get("height")}),this._inherited(ZiggeoApi.Views.ZiggeoView,"constructor",a),this.view_data.get("id")&&(ZiggeoApi.Embed.__ids[this.view_data.get("id")]=this),ZiggeoApi.Embed.__views[this.cid()]=this,this.__attach()},destroy:function(){delete ZiggeoApi.Embed.__views[this.cid()],this.view_data.get("id")&&ZiggeoApi.Embed.__ids[this.view_data.get("id")]==this&&delete ZiggeoApi.Embed.__ids[this.view_data.get("id")],this._inherited(ZiggeoApi.Views.ZiggeoView,"destroy")},can_unfocus:function(){return this.view&&this.view.view&&!this.view.view.get("has_focus")},__preactivate_view:function(){if(this.view_data.get("responsive")){var a=parseInt(this.$el.parent().parent().css("width"),10);if(a){var b=parseInt(this.$el.parent().parent().css("height"),10);b||(b=Math.floor(a*this.view_data.get("height")/this.view_data.get("width"))),this.$el.parent().css("width",a+"px"),this.$el.parent().css("height",b+"px"),this.$el.parent().css("display","inline-block")}}},__attach:function(){this.view&&this.view.destroy();var a=ZiggeoApi.Views.ZiggeoErrorView;return ZiggeoApi.Options.global_error_message?(this.view_data.set("error",ZiggeoApi.Options.global_error_message),void(this.view=this.addChild(new a({el:"",view_data:this.view_data})))):("player"==this.view_data.get("mode")?a=ZiggeoApi.Views.ZiggeoPlayerView:"recorder"!=this.view_data.get("mode")&&"rerecorder"!=this.view_data.get("mode")||(a="recorder"==this.view_data.get("submit_mode")?ZiggeoApi.Views.ZiggeoRecorderView:ZiggeoApi.Views.ZiggeoUploaderView),a==ZiggeoApi.Views.ZiggeoRecorderView&&ZiggeoApi.Config.webrtc&&BetaJS.Media.WebRTC.RecorderWrapper.anySupport()&&(a=ZiggeoApi.Views.ZiggeoRTCRecorderView),a==ZiggeoApi.Views.ZiggeoRecorderView&&ZiggeoApi.Config.no_flash_installs&&!BetaJS.Browser.Info.flash().installed()&&(a=ZiggeoApi.Views.ZiggeoUploaderView),this.view=this.addChild(new a({el:"",view_data:this.view_data})),void this.view.on("external_upload external_record",function(){this.view_data.set("submit_mode","recorder"==this.view_data.get("submit_mode")?"uploader":"recorder"),this.__attach()},this))},toggleUploader:function(){this.view_data.set("submit_mode","uploader"),this.__attach()},toggleRecorder:function(){this.view_data.set("submit_mode","recorder"),this.__attach()},play:function(){this.view.play()},record:function(){this.view.record()},stop:function(){this.view.stop()},stopRecord:function(){this.view.stopRecord()},rerecord:function(){this.view.rerecord()},hidePopup:function(){var a=this.getParent();a&&"unfocus"in a&&a.unfocus()},reset:function(){this.view_data=new ZiggeoApi.Views.ViewData(this.original_options,this.original_options.params),this.__attach()},isRecording:function(){return this.view.isRecording&&this.view.isRecording()},averageFrameRate:function(){return this.view.averageFrameRate?this.view.averageFrameRate():null},lightLevel:function(){return this.view.lightLevel?this.view.lightLevel():null},soundLevel:function(){return this.view.soundLevel?this.view.soundLevel():null},hide_popup:function(){this.hidePopup()}}),ZiggeoApi.Embed={__ids:{},__views:{},popup:function(a,b){var c=new ZiggeoApi.Views.ZiggeoView(BetaJS.Objs.extend(a||{},{params:BetaJS.Objs.extend(b||{},{popup:!0})})),d=new BetaJS.Views.FullscreenOverlayView({overlay_inner:c,hide_on_unfocus:!1,destroy_on_unfocus:!0});return d.can_unfocus=function(){return c.can_unfocus()},d.activate().show(),c},embed:function(a,b,c){return new ZiggeoApi.Views.ZiggeoView(BetaJS.Objs.extend(b||{},{el:a,params:BetaJS.Objs.extend(c||{},{popup:!1})})).activate()},get:function(a){return this.__ids[a]},_update_runtime:function(){for(var a in this.__views){var b=this.__views[a].original_options;this.__views[a].view_data=new ZiggeoApi.Views.ViewData(b,b.params),this.__views[a].__attach()}}},BetaJS.Views.ActiveDom.registerViewAlias("ziggeo",ZiggeoApi.Views.ZiggeoView),BetaJS.Views.ActiveDom.registerPrefixAlias("ziggeo"),BetaJS.Views.ActiveDom.activate(),window.jQuery=b}.call(c),c.detach(!0),a&&a.attach()}.call(this);